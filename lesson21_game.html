<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>√în luy·ªán ng·ªØ ph√°p ti·∫øng ƒê·ª©c</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #ff6b6b, #ffd93d);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .header p {
        font-size: 1.2em;
        opacity: 0.9;
      }

      .nav-tabs {
        display: flex;
        background: #f8f9fa;
        border-bottom: 3px solid #e9ecef;
      }

      .nav-tab {
        flex: 1;
        padding: 15px 10px;
        text-align: center;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 14px;
        font-weight: 600;
        color: #6c757d;
        transition: all 0.3s ease;
        position: relative;
      }

      .nav-tab:hover {
        background: #e9ecef;
        color: #495057;
      }

      .nav-tab.active {
        color: #007bff;
        background: white;
      }

      .nav-tab.active::after {
        content: "";
        position: absolute;
        bottom: -3px;
        left: 0;
        right: 0;
        height: 3px;
        background: #007bff;
      }

      .content {
        padding: 30px;
      }

      .section {
        display: none;
      }

      .section.active {
        display: block;
      }

      .sentence-card {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 20px;
        margin: 15px 0;
        border-left: 5px solid #007bff;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .sentence-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      }

      .german-text {
        font-size: 1.3em;
        font-weight: 600;
        color: #333;
        margin-bottom: 10px;
      }

      .vietnamese-text {
        font-size: 1.1em;
        color: #6c757d;
        font-style: italic;
      }

      .quiz-container {
        text-align: center;
      }

      .quiz-card {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-radius: 20px;
        padding: 40px;
        margin: 20px 0;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .quiz-question {
        font-size: 1.5em;
        margin-bottom: 30px;
        line-height: 1.6;
      }

      .quiz-answer {
        background: rgba(255, 255, 255, 0.2);
        border: 2px solid rgba(255, 255, 255, 0.3);
        border-radius: 15px;
        padding: 15px;
        font-size: 1.1em;
        color: white;
        width: 100%;
        margin: 10px 0;
        backdrop-filter: blur(10px);
      }

      .quiz-answer::placeholder {
        color: rgba(255, 255, 255, 0.7);
      }

      .btn {
        background: linear-gradient(135deg, #ff6b6b, #ffd93d);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 25px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 10px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .btn:active {
        transform: translateY(0);
      }

      .score {
        font-size: 1.3em;
        font-weight: 600;
        margin: 20px 0;
        padding: 15px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        backdrop-filter: blur(10px);
      }

      .correct {
        background: linear-gradient(135deg, #28a745, #20c997) !important;
        animation: pulse 0.5s ease;
      }

      .incorrect {
        background: linear-gradient(135deg, #dc3545, #fd7e14) !important;
        animation: shake 0.5s ease;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }

      .category-title {
        font-size: 1.8em;
        font-weight: 700;
        color: #333;
        margin: 30px 0 20px 0;
        text-align: center;
        padding: 15px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-radius: 15px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .progress-bar {
        background: #e9ecef;
        border-radius: 10px;
        overflow: hidden;
        margin: 20px 0;
      }

      .progress-fill {
        background: linear-gradient(135deg, #28a745, #20c997);
        height: 20px;
        transition: width 0.3s ease;
        border-radius: 10px;
      }

      @media (max-width: 768px) {
        .nav-tab {
          font-size: 12px;
          padding: 12px 5px;
        }

        .header h1 {
          font-size: 2em;
        }

        .content {
          padding: 20px;
        }

        .quiz-card {
          padding: 25px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üá©üá™ Ng·ªØ ph√°p ti·∫øng ƒê·ª©c</h1>
        <p>√în luy·ªán v√† th·ª±c h√†nh c√°c c·∫•u tr√∫c c√¢u quan tr·ªçng</p>
      </div>

      <div class="nav-tabs">
        <button class="nav-tab active" onclick="showSection('review')">
          üìñ √în t·∫≠p
        </button>
        <button class="nav-tab" onclick="showSection('quiz-imperative')">
          ‚ö° Quiz C·∫ßu khi·∫øn
        </button>
        <button class="nav-tab" onclick="showSection('quiz-modal')">
          üéØ Quiz ƒê·ªông t·ª´ khuy·∫øt thi·∫øu
        </button>
        <button class="nav-tab" onclick="showSection('quiz-separable')">
          üîÑ Quiz ƒê·ªông t·ª´ t√°ch
        </button>
        <button class="nav-tab" onclick="showSection('quiz-questions')">
          ‚ùì Quiz C√¢u h·ªèi
        </button>
        <button class="nav-tab" onclick="showSection('quiz-all')">
          üèÜ Quiz t·ªïng h·ª£p
        </button>
      </div>

      <div class="content">
        <!-- Review Section -->
        <div id="review" class="section active">
          <div class="category-title">C√¢u c·∫ßu khi·∫øn (Imperativ)</div>
          <div id="imperative-sentences"></div>

          <div class="category-title">
            C√¢u c√≥ ƒë·ªông t·ª´ khuy·∫øt thi·∫øu (Modalverben)
          </div>
          <div id="modal-sentences"></div>

          <div class="category-title">
            C√¢u c√≥ ƒë·ªông t·ª´ t√°ch (Trennbare Verben)
          </div>
          <div id="separable-sentences"></div>

          <div class="category-title">C√¢u h·ªèi nghi v·∫•n (Ja/Nein-Fragen)</div>
          <div id="yes-no-questions"></div>

          <div class="category-title">C√¢u h·ªèi c√≥ t·ª´ ƒë·ªÉ h·ªèi (W-Fragen)</div>
          <div id="w-questions"></div>
        </div>

        <!-- Quiz Sections -->
        <div id="quiz-imperative" class="section">
          <div class="quiz-container">
            <h2 class="category-title">Quiz: C√¢u c·∫ßu khi·∫øn</h2>
            <div id="quiz-imperative-content"></div>
          </div>
        </div>

        <div id="quiz-modal" class="section">
          <div class="quiz-container">
            <h2 class="category-title">Quiz: ƒê·ªông t·ª´ khuy·∫øt thi·∫øu</h2>
            <div id="quiz-modal-content"></div>
          </div>
        </div>

        <div id="quiz-separable" class="section">
          <div class="quiz-container">
            <h2 class="category-title">Quiz: ƒê·ªông t·ª´ t√°ch</h2>
            <div id="quiz-separable-content"></div>
          </div>
        </div>

        <div id="quiz-questions" class="section">
          <div class="quiz-container">
            <h2 class="category-title">Quiz: C√¢u h·ªèi</h2>
            <div id="quiz-questions-content"></div>
          </div>
        </div>

        <div id="quiz-all" class="section">
          <div class="quiz-container">
            <h2 class="category-title">Quiz t·ªïng h·ª£p</h2>
            <div id="quiz-all-content"></div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Data structure
      const data = {
        imperative: [
          {
            german: "Geh bitte sofort nach Hause!",
            vietnamese: "H√£y ƒëi v·ªÅ nh√† ngay l·∫≠p t·ª©c nh√©!",
          },
          {
            german: "Sprechen Sie bitte etwas lauter!",
            vietnamese: "L√†m ∆°n n√≥i to h∆°n m·ªôt ch√∫t!",
          },
          {
            german: "Macht jetzt eure Hausaufgaben fertig!",
            vietnamese: "H√£y ho√†n th√†nh b√†i t·∫≠p v·ªÅ nh√† c·ªßa c√°c em ngay!",
          },
          {
            german: "Komm bitte schnell her√ºber!",
            vietnamese: "H√£y ƒë·∫øn ƒë√¢y nhanh l√™n!",
          },
          {
            german: "Sei ruhig, wenn du nach Hause kommst!",
            vietnamese: "H√£y im l·∫∑ng khi con v·ªÅ ƒë·∫øn nh√†!",
          },
        ],
        modal: [
          {
            german: "Darf ich hier rauchen oder nicht?",
            vietnamese: "T√¥i c√≥ ƒë∆∞·ª£c h√∫t thu·ªëc ·ªü ƒë√¢y kh√¥ng?",
          },
          {
            german: "K√∂nntest du bitte etwas trinken?",
            vietnamese: "B·∫°n c√≥ th·ªÉ u·ªëng m·ªôt ch√∫t kh√¥ng?",
          },
          {
            german: "Soll ich das Fenster jetzt √∂ffnen?",
            vietnamese: "T√¥i c√≥ n√™n m·ªü c·ª≠a s·ªï b√¢y gi·ªù kh√¥ng?",
          },
          {
            german: "Willst du heute nach Berlin fahren?",
            vietnamese: "B·∫°n c√≥ mu·ªën ƒëi Berlin h√¥m nay kh√¥ng?",
          },
          {
            german: "K√∂nnen Sie mir bitte helfen?",
            vietnamese: "Ng√†i c√≥ th·ªÉ gi√∫p t√¥i kh√¥ng?",
          },
          {
            german: "D√ºrfen die Kinder drau√üen mitspielen?",
            vietnamese: "B·ªçn tr·∫ª c√≥ ƒë∆∞·ª£c ch∆°i c√πng b√™n ngo√†i kh√¥ng?",
          },
          {
            german: "M√ºssen Sie morgen fr√ºh aufstehen?",
            vietnamese: "Ng√†i c√≥ ph·∫£i d·∫≠y s·ªõm v√†o ng√†y mai kh√¥ng?",
          },
          {
            german: "Wollen Sie Pizza oder Pasta essen?",
            vietnamese: "Ng√†i mu·ªën ƒÉn pizza hay m√¨ √ù?",
          },
          {
            german: "Ich muss jeden Abend Deutsch lernen.",
            vietnamese: "T√¥i ph·∫£i h·ªçc ti·∫øng ƒê·ª©c m·ªói t·ªëi.",
          },
          {
            german: "Wir d√ºrfen im Klassenzimmer nicht essen.",
            vietnamese: "Ch√∫ng t√¥i kh√¥ng ƒë∆∞·ª£c ph√©p ƒÉn trong l·ªõp h·ªçc.",
          },
        ],
        separable: [
          {
            german: "Ich stehe jeden Tag um sieben Uhr auf.",
            vietnamese: "T√¥i d·∫≠y v√†o l√∫c b·∫£y gi·ªù m·ªói ng√†y.",
          },
          {
            german: "Er macht die T√ºr langsam zu.",
            vietnamese: "Anh ·∫•y ƒë√≥ng c·ª≠a l·∫°i m·ªôt c√°ch t·ª´ t·ªën.",
          },
          {
            german: "Ich ziehe jeden Morgen meine Jacke an.",
            vietnamese: "T√¥i m·∫∑c √°o kho√°c m·ªói s√°ng.",
          },
          {
            german: "Du rufst deine Mutter jeden Abend an.",
            vietnamese: "B·∫°n g·ªçi cho m·∫π b·∫°n m·ªói bu·ªïi t·ªëi.",
          },
          {
            german: "Wir kaufen morgen im Supermarkt ein.",
            vietnamese: "Ch√∫ng t√¥i s·∫Ω ƒëi mua s·∫Øm ·ªü si√™u th·ªã v√†o ng√†y mai.",
          },
        ],
        yesNoQuestions: [
          {
            german: "Sprichst du gut Deutsch inzwischen?",
            vietnamese: "B·∫°n ƒë√£ n√≥i ti·∫øng ƒê·ª©c t·ªët r·ªìi ph·∫£i kh√¥ng?",
          },
          {
            german: "Kommst du heute wirklich nach Hause?",
            vietnamese: "B·∫°n h√¥m nay th·∫≠t s·ª± s·∫Ω v·ªÅ nh√† ch·ª©?",
          },
          {
            german: "Ist das neue Auto von dir?",
            vietnamese: "ƒê√≥ c√≥ ph·∫£i l√† chi·∫øc xe m·ªõi c·ªßa b·∫°n kh√¥ng?",
          },
          {
            german: "Hast du morgen um acht Zeit?",
            vietnamese: "B·∫°n c√≥ th·ªùi gian l√∫c t√°m gi·ªù s√°ng mai kh√¥ng?",
          },
          {
            german: "Willst du mit uns ins Kino?",
            vietnamese: "B·∫°n c√≥ mu·ªën ƒëi xem phim v·ªõi ch√∫ng t√¥i kh√¥ng?",
          },
        ],
        wQuestions: [
          {
            german: "Woher kommst du in Deutschland genau?",
            vietnamese: "B·∫°n ƒë·∫øn t·ª´ ƒë√¢u ·ªü ƒê·ª©c ch√≠nh x√°c?",
          },
          {
            german: "Wer ist der neue Lehrer unserer Klasse?",
            vietnamese: "Ai l√† gi√°o vi√™n m·ªõi c·ªßa l·ªõp ch√∫ng ta?",
          },
          {
            german: "Wann beginnt heute der Unterricht?",
            vietnamese: "H√¥m nay ti·∫øt h·ªçc b·∫Øt ƒë·∫ßu khi n√†o?",
          },
          {
            german: "Warum gehst du nicht zur Schule?",
            vietnamese: "T·∫°i sao b·∫°n kh√¥ng ƒëi h·ªçc?",
          },
          {
            german: "Was machst du an diesem Wochenende?",
            vietnamese: "B·∫°n s·∫Ω l√†m g√¨ v√†o cu·ªëi tu·∫ßn n√†y?",
          },
        ],
      };

      // Quiz state
      let currentQuiz = null;
      let currentQuestionIndex = 0;
      let score = 0;
      let answered = false;

      // Initialize the app
      function init() {
        loadReviewContent();
      }

      // Load review content
      function loadReviewContent() {
        loadSentences("imperative-sentences", data.imperative);
        loadSentences("modal-sentences", data.modal);
        loadSentences("separable-sentences", data.separable);
        loadSentences("yes-no-questions", data.yesNoQuestions);
        loadSentences("w-questions", data.wQuestions);
      }

      function loadSentences(containerId, sentences) {
        const container = document.getElementById(containerId);
        container.innerHTML = sentences
          .map(
            (sentence, index) => `
                <div class="sentence-card" onclick="speakGerman('${sentence.german}')">
                    <div class="german-text">${sentence.german}</div>
                    <div class="vietnamese-text">${sentence.vietnamese}</div>
                </div>
            `
          )
          .join("");
      }

      // Text-to-speech for German
      function speakGerman(text) {
        if ("speechSynthesis" in window) {
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.lang = "de-DE";
          utterance.rate = 0.8;
          speechSynthesis.speak(utterance);
        }
      }

      // Show different sections
      function showSection(sectionId) {
        // Update nav tabs
        document
          .querySelectorAll(".nav-tab")
          .forEach((tab) => tab.classList.remove("active"));
        event.target.classList.add("active");

        // Hide all sections
        document
          .querySelectorAll(".section")
          .forEach((section) => section.classList.remove("active"));

        // Show selected section
        document.getElementById(sectionId).classList.add("active");

        // Initialize quiz if needed
        if (sectionId.startsWith("quiz-")) {
          initQuiz(sectionId);
        }
      }

      // Initialize quiz
      function initQuiz(quizType) {
        let quizData = [];

        switch (quizType) {
          case "quiz-imperative":
            quizData = data.imperative;
            break;
          case "quiz-modal":
            quizData = data.modal;
            break;
          case "quiz-separable":
            quizData = data.separable;
            break;
          case "quiz-questions":
            quizData = [...data.yesNoQuestions, ...data.wQuestions];
            break;
          case "quiz-all":
            quizData = [
              ...data.imperative,
              ...data.modal,
              ...data.separable,
              ...data.yesNoQuestions,
              ...data.wQuestions,
            ];
            break;
        }

        currentQuiz = shuffleArray([...quizData]);
        currentQuestionIndex = 0;
        score = 0;
        answered = false;

        showQuestion(quizType);
      }

      // Shuffle array
      function shuffleArray(array) {
        for (let i = array.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [array[i], array[j]] = [array[j], array[i]];
        }
        return array;
      }

      // Show current question
      function showQuestion(quizType) {
        if (currentQuestionIndex >= currentQuiz.length) {
          showResults(quizType);
          return;
        }

        const question = currentQuiz[currentQuestionIndex];
        const container = document.getElementById(quizType + "-content");

        const progressPercent =
          (currentQuestionIndex / currentQuiz.length) * 100;

        container.innerHTML = `
                <div class="progress-bar">
                    <div class="progress-fill" style="width: ${progressPercent}%"></div>
                </div>
                <div class="score">ƒêi·ªÉm: ${score}/${currentQuestionIndex}</div>
                <div class="quiz-card">
                    <div class="quiz-question">${question.vietnamese}</div>
                    <input type="text" class="quiz-answer" id="answer-input" placeholder="Nh·∫≠p c√¢u ti·∫øng ƒê·ª©c..." />
                    <br>
                    <button class="btn" onclick="checkAnswer('${quizType}')">Ki·ªÉm tra</button>
                    <button class="btn" onclick="showHint('${question.german}')">G·ª£i √Ω</button>
                    <button class="btn" onclick="speakGerman('${question.german}')">üîä Nghe</button>
                </div>
            `;

        // Focus on input
        setTimeout(() => {
          document.getElementById("answer-input").focus();
        }, 100);

        // Add enter key listener
        document
          .getElementById("answer-input")
          .addEventListener("keypress", function (e) {
            if (e.key === "Enter") {
              checkAnswer(quizType);
            }
          });

        answered = false;
      }

      // Check answer
      function checkAnswer(quizType) {
        if (answered) return;

        const userAnswer = document.getElementById("answer-input").value.trim();
        const correctAnswer = currentQuiz[currentQuestionIndex].german;

        const answerInput = document.getElementById("answer-input");
        const container = document.getElementById(quizType + "-content");

        // Simple comparison (remove punctuation and convert to lowercase)
        const normalizeString = (str) =>
          str
            .toLowerCase()
            .replace(/[.,!?]/g, "")
            .trim();
        const isCorrect =
          normalizeString(userAnswer) === normalizeString(correctAnswer);

        if (isCorrect) {
          score++;
          answerInput.classList.add("correct");
          answerInput.value = correctAnswer;
        } else {
          answerInput.classList.add("incorrect");
          answerInput.value = `‚ùå ${userAnswer} ‚Üí ‚úÖ ${correctAnswer}`;
        }

        answered = true;

        // Show next button after 2 seconds
        setTimeout(() => {
          const nextButton = `<button class="btn" onclick="nextQuestion('${quizType}')">${
            currentQuestionIndex + 1 < currentQuiz.length
              ? "C√¢u ti·∫øp theo"
              : "Xem k·∫øt qu·∫£"
          }</button>`;
          container.innerHTML += nextButton;
        }, 2000);
      }

      // Show hint
      function showHint(answer) {
        const firstWord = answer.split(" ")[0];
        document.getElementById("answer-input").value = firstWord + "...";
      }

      // Next question
      function nextQuestion(quizType) {
        currentQuestionIndex++;
        showQuestion(quizType);
      }

      // Show results
      function showResults(quizType) {
        const container = document.getElementById(quizType + "-content");
        const percentage = Math.round((score / currentQuiz.length) * 100);

        let message = "";
        let emoji = "";

        if (percentage >= 90) {
          message = "Xu·∫•t s·∫Øc! B·∫°n ƒë√£ th√†nh th·∫°o ng·ªØ ph√°p n√†y!";
          emoji = "üèÜ";
        } else if (percentage >= 70) {
          message = "T·ªët l·∫Øm! B·∫°n ƒë√£ hi·ªÉu kh√° t·ªët.";
          emoji = "üëè";
        } else if (percentage >= 50) {
          message = "Kh√° ·ªïn! H√£y luy·ªán t·∫≠p th√™m nh√©.";
          emoji = "üí™";
        } else {
          message = "ƒê·ª´ng n·∫£n l√≤ng! H√£y √¥n t·∫≠p v√† th·ª≠ l·∫°i.";
          emoji = "üìö";
        }

        container.innerHTML = `
                <div class="quiz-card">
                    <div style="font-size: 4em; margin-bottom: 20px;">${emoji}</div>
                    <div style="font-size: 2em; margin-bottom: 20px;">K·∫øt qu·∫£</div>
                    <div style="font-size: 3em; margin-bottom: 20px; font-weight: bold;">${score}/${currentQuiz.length}</div>
                    <div style="font-size: 2em; margin-bottom: 20px;">${percentage}%</div>
                    <div style="font-size: 1.3em; margin-bottom: 30px;">${message}</div>
                    <button class="btn" onclick="initQuiz('${quizType}')">L√†m l·∫°i</button>
                    <button class="btn" onclick="showSection('review')">Quay v·ªÅ √¥n t·∫≠p</button>
                </div>
            `;
      }

      // Initialize app when page loads
      window.onload = init;
    </script>
  </body>
</html>
