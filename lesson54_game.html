<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game Luy·ªán Redemittel A2</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      h1 {
        text-align: center;
        color: #667eea;
        margin-bottom: 10px;
        font-size: 2.5em;
      }

      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 30px;
        font-size: 1.1em;
      }

      .menu {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .menu-button {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        border: none;
        border-radius: 15px;
        font-size: 1.3em;
        cursor: pointer;
        transition: transform 0.3s, box-shadow 0.3s;
        font-weight: bold;
      }

      .menu-button:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 30px rgba(102, 126, 234, 0.4);
      }

      .game-area {
        display: none;
        animation: fadeIn 0.5s;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .situation {
        background: #f8f9ff;
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 25px;
        border-left: 5px solid #667eea;
      }

      .situation h3 {
        color: #667eea;
        margin-bottom: 15px;
        font-size: 1.5em;
      }

      .schedule-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }

      .schedule {
        background: white;
        padding: 15px;
        border-radius: 10px;
        border: 2px solid #667eea;
      }

      .schedule h4 {
        color: #667eea;
        margin-bottom: 10px;
        text-align: center;
      }

      .time-slot {
        padding: 8px;
        margin: 5px 0;
        background: #f0f0f0;
        border-radius: 5px;
        font-size: 0.9em;
      }

      .time-slot.busy {
        background: #ffe0e0;
      }

      .redemittel-section {
        background: #fff9e6;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
        border: 2px dashed #ffa500;
      }

      .redemittel-section h4 {
        color: #ff8c00;
        margin-bottom: 15px;
        font-size: 1.3em;
      }

      .redemittel-group {
        margin-bottom: 20px;
      }

      .redemittel-group h5 {
        color: #667eea;
        margin-bottom: 10px;
        font-size: 1.1em;
      }

      .redemittel-list {
        background: white;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 10px;
      }

      .redemittel-item {
        padding: 8px;
        margin: 5px 0;
        background: #f0f8ff;
        border-radius: 5px;
        cursor: pointer;
        transition: background 0.3s;
      }

      .redemittel-item:hover {
        background: #e0f0ff;
        transform: translateX(5px);
      }

      .conversation-area {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
        border: 2px solid #667eea;
        min-height: 300px;
      }

      .message {
        padding: 15px;
        margin: 10px 0;
        border-radius: 10px;
        animation: slideIn 0.3s;
      }

      @keyframes slideIn {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .message.you {
        background: #e3f2fd;
        margin-left: 20px;
      }

      .message.partner {
        background: #f3e5f5;
        margin-right: 20px;
      }

      .speaker {
        font-weight: bold;
        margin-bottom: 5px;
        color: #667eea;
      }

      .options {
        display: grid;
        gap: 10px;
        margin: 20px 0;
      }

      .option-button {
        padding: 15px;
        border: 2px solid #667eea;
        background: white;
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.3s;
        text-align: left;
        font-size: 1em;
      }

      .option-button:hover {
        background: #667eea;
        color: white;
        transform: translateX(10px);
      }

      .option-button.correct {
        background: #4caf50;
        color: white;
        border-color: #4caf50;
      }

      .option-button.wrong {
        background: #f44336;
        color: white;
        border-color: #f44336;
      }

      .feedback {
        padding: 15px;
        margin: 15px 0;
        border-radius: 10px;
        font-weight: bold;
      }

      .feedback.correct {
        background: #c8e6c9;
        color: #2e7d32;
      }

      .feedback.wrong {
        background: #ffcdd2;
        color: #c62828;
      }

      .progress {
        background: #f0f0f0;
        height: 30px;
        border-radius: 15px;
        margin: 20px 0;
        overflow: hidden;
      }

      .progress-bar {
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        height: 100%;
        transition: width 0.5s;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
      }

      .score {
        text-align: center;
        font-size: 1.5em;
        margin: 20px 0;
        color: #667eea;
        font-weight: bold;
      }

      .back-button,
      .next-button,
      .reset-button {
        padding: 15px 30px;
        margin: 10px;
        border: none;
        border-radius: 10px;
        font-size: 1.1em;
        cursor: pointer;
        transition: all 0.3s;
        font-weight: bold;
      }

      .back-button {
        background: #f44336;
        color: white;
      }

      .next-button {
        background: #4caf50;
        color: white;
      }

      .reset-button {
        background: #ff9800;
        color: white;
      }

      .back-button:hover,
      .next-button:hover,
      .reset-button:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .button-container {
        text-align: center;
        margin-top: 20px;
      }

      .explanation {
        background: #e8f5e9;
        padding: 15px;
        border-radius: 10px;
        margin: 15px 0;
        border-left: 4px solid #4caf50;
      }

      .explanation h5 {
        color: #2e7d32;
        margin-bottom: 10px;
      }

      .hint {
        background: #fff3e0;
        padding: 10px;
        border-radius: 8px;
        margin: 10px 0;
        font-style: italic;
        border-left: 3px solid #ff9800;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>üéÆ GAME LUY·ªÜN REDEMITTEL A2</h1>
      <p class="subtitle">Teil 3: Sprechen - H·ªôi tho·∫°i ƒë√¥i (Paarpr√ºfung)</p>

      <div class="menu" id="menu">
        <button class="menu-button" onclick="startGame(1)">
          üìö B√ÄI 1: H·ªåC REDEMITTEL<br />
          <small>H·ªçc 50+ m·∫´u c√¢u chu·∫©n</small>
        </button>
        <button class="menu-button" onclick="startGame(2)">
          üéØ B√ÄI 2: LUY·ªÜN T·∫¨P<br />
          <small>√Åp d·ª•ng v√†o 10 t√¨nh hu·ªëng</small>
        </button>
        <button class="menu-button" onclick="startGame(3)">
          ‚ö° B√ÄI 3: THI TH·ª¨<br />
          <small>3 ƒë·ªÅ thi th·∫≠t (nh∆∞ h√¨nh)</small>
        </button>
      </div>

      <div class="game-area" id="game1">
        <h2 style="color: #667eea; margin-bottom: 20px">
          üìö B√ÄI 1: H·ªåC REDEMITTEL C∆† B·∫¢N
        </h2>

        <div class="redemittel-section">
          <h4>üéØ C·∫§U TR√öC H·ªòI THO·∫†I TEIL 3</h4>
          <div class="hint">
            <strong>Quy tr√¨nh 6 b∆∞·ªõc:</strong><br />
            1Ô∏è‚É£ ƒê∆∞a ra ƒë·ªÅ ngh·ªã ‚Üí 2Ô∏è‚É£ H·ªèi th·ªùi gian ‚Üí 3Ô∏è‚É£ Th∆∞∆°ng l∆∞·ª£ng ‚Üí 4Ô∏è‚É£ ƒê·ªÅ ngh·ªã
            kh√°c ‚Üí 5Ô∏è‚É£ ƒê·ªìng √Ω ‚Üí 6Ô∏è‚É£ K·∫øt th√∫c
          </div>
        </div>

        <div class="redemittel-group">
          <h5>1Ô∏è‚É£ ƒê∆ØA RA ƒê·ªÄ NGH·ªä (Einen Vorschlag machen)</h5>
          <div class="redemittel-list">
            <div class="redemittel-item">
              ‚úì Ich habe eine Idee... <em>(T√¥i c√≥ m·ªôt √Ω t∆∞·ªüng...)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Ich schlage vor, dass wir...
              <em>(T√¥i ƒë·ªÅ ngh·ªã r·∫±ng ch√∫ng ta...)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Wir k√∂nnten... / Wir sollten...
              <em>(Ch√∫ng ta c√≥ th·ªÉ... / n√™n...)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Ich m√∂chte etwas vorschlagen...
              <em>(T√¥i mu·ªën ƒë·ªÅ ngh·ªã ƒëi·ªÅu g√¨ ƒë√≥...)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Wollen wir...? <em>(Ch√∫ng ta c√≥ mu·ªën...?)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Wie findest du...? / Was meinst du?
              <em>(B·∫°n th·∫•y... th·∫ø n√†o? / B·∫°n nghƒ© sao?)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Was denkst du? / Wollen wir das machen?
              <em>(B·∫°n nghƒ© g√¨? / Ch√∫ng ta l√†m nh∆∞ v·∫≠y nh√©?)</em>
            </div>
          </div>
        </div>

        <div class="redemittel-group">
          <h5>2Ô∏è‚É£ H·ªéI TH·ªúI GIAN & ƒê·ªäA ƒêI·ªÇM (Nachfragen)</h5>
          <div class="redemittel-list">
            <div class="redemittel-item">
              ‚úì Wann hast du Zeit? / Hast du da Zeit?
              <em>(Khi n√†o b·∫°n c√≥ th·ªùi gian? / L√∫c ƒë√≥ b·∫°n c√≥ r·∫£nh kh√¥ng?)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Wann passt es dir? / Passt es dir?
              <em>(Khi n√†o ph√π h·ª£p v·ªõi b·∫°n? / H·ª£p v·ªõi b·∫°n kh√¥ng?)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Wie findest du das? <em>(B·∫°n th·∫•y th·∫ø n√†o?)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Was h√§ltst du davon? <em>(B·∫°n nghƒ© g√¨ v·ªÅ ƒëi·ªÅu ƒë√≥?)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Wo wollen wir uns treffen?
              <em>(Ch√∫ng ta mu·ªën g·∫∑p nhau ·ªü ƒë√¢u?)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Um wie viel Uhr treffen wir uns?
              <em>(M·∫•y gi·ªù ch√∫ng ta g·∫∑p nhau?)</em>
            </div>
          </div>
        </div>

        <div class="redemittel-group">
          <h5>3Ô∏è‚É£ T·ª™ CH·ªêI L·ªäCH S·ª∞ (Ablehnen)</h5>
          <div class="redemittel-list">
            <div class="redemittel-item">
              ‚úì Das geht leider nicht. / Leider nicht.
              <em>(R·∫•t ti·∫øc kh√¥ng ƒë∆∞·ª£c.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Am Montag kann ich leider nicht.
              <em>(R·∫•t ti·∫øc th·ª© Hai t√¥i kh√¥ng th·ªÉ.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Das passt mir nicht so gut. <em>(Kh√¥ng h·ª£p v·ªõi t√¥i l·∫Øm.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Tut mir leid, aber da habe ich (leider) keine Zeit.
              <em>(Xin l·ªói, nh∆∞ng l√∫c ƒë√≥ t√¥i kh√¥ng c√≥ th·ªùi gian.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Oh Schade, aber da habe ich schon etwas anderes vor.
              <em>(√îi ti·∫øc qu√°, nh∆∞ng l√∫c ƒë√≥ t√¥i ƒë√£ c√≥ k·∫ø ho·∫°ch kh√°c r·ªìi.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Das gef√§llt mir aber nicht.
              <em>(T√¥i kh√¥ng th√≠ch ƒëi·ªÅu ƒë√≥ l·∫Øm.)</em>
            </div>
          </div>
        </div>

        <div class="redemittel-group">
          <h5>4Ô∏è‚É£ ƒê·ªÄ NGH·ªä KH√ÅC (Gegenvorschlag machen)</h5>
          <div class="redemittel-list">
            <div class="redemittel-item">
              ‚úì Wie w√§re es mit...? <em>(V·∫≠y... th√¨ sao?)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Vielleicht sollten wir lieber...
              <em>(C√≥ l·∫Ω ch√∫ng ta n√™n... th√¨ t·ªët h∆°n)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Es w√§re mir lieber, wenn... <em>(T√¥i th√≠ch h∆°n n·∫øu...)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Ich denke, es ist sinnvoller, wenn wir...
              <em>(T√¥i nghƒ© s·∫Ω h·ª£p l√Ω h∆°n n·∫øu ch√∫ng ta...)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Lass uns mal was anderes machen.
              <em>(Ch√∫ng ta h√£y l√†m ƒëi·ªÅu g√¨ ƒë√≥ kh√°c.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Wir k√∂nnten auch... <em>(Ch√∫ng ta c≈©ng c√≥ th·ªÉ...)</em>
            </div>
          </div>
        </div>

        <div class="redemittel-group">
          <h5>5Ô∏è‚É£ ƒê·ªíNG √ù (Zustimmen)</h5>
          <div class="redemittel-list">
            <div class="redemittel-item">
              ‚úì Das ist eine super/tolle Idee!
              <em>(ƒê√≥ l√† m·ªôt √Ω t∆∞·ªüng tuy·ªát v·ªùi!)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Ja, so sollten wir das machen.
              <em>(V√¢ng, ch√∫ng ta n√™n l√†m nh∆∞ v·∫≠y.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Das gef√§llt mir (sehr gut).
              <em>(T√¥i th√≠ch ƒëi·ªÅu ƒë√≥ (r·∫•t nhi·ªÅu).)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Das finde ich gut/super/prima.
              <em>(T√¥i th·∫•y hay/tuy·ªát/t·ªët.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Genau! Einverstanden! In Ordnung!
              <em>(Ch√≠nh x√°c! ƒê·ªìng √Ω! ƒê∆∞·ª£c!)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Ja gut. Machen wir das so.
              <em>(ƒê∆∞·ª£c r·ªìi. Ch√∫ng ta l√†m nh∆∞ v·∫≠y.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Ich bin daf√ºr. / Ich stimme dir zu.
              <em>(T√¥i t√°n th√†nh. / T√¥i ƒë·ªìng √Ω v·ªõi b·∫°n.)</em>
            </div>
          </div>
        </div>

        <div class="redemittel-group">
          <h5>6Ô∏è‚É£ K·∫æT TH√öC (Am Ende das Ergebnis sagen)</h5>
          <div class="redemittel-list">
            <div class="redemittel-item">
              ‚úì Perfekt, dann treffen wir uns am... um...
              <em>(Ho√†n h·∫£o, v·∫≠y ch√∫ng ta g·∫∑p nhau v√†o... l√∫c...)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Okay, dann sagen wir: ... <em>(ƒê∆∞·ª£c, v·∫≠y ch√∫ng ta n√≥i:...)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Dann machen wir es so: zuerst..., dann..., jetzt m√ºssen wir nur
              noch...
              <em
                >(V·∫≠y ch√∫ng ta l√†m nh∆∞ sau: ƒë·∫ßu ti√™n..., sau ƒë√≥..., b√¢y gi·ªù
                ch√∫ng ta ch·ªâ c·∫ßn...)</em
              >
            </div>
            <div class="redemittel-item">
              ‚úì Also dann bis... Ich freue mich.
              <em>(V·∫≠y h·∫πn ƒë·∫øn... T√¥i mong ch·ªù.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Ich glaube, wir haben schon alles gut geplant.
              <em>(T√¥i nghƒ© ch√∫ng ta ƒë√£ l√™n k·∫ø ho·∫°ch t·ªët r·ªìi.)</em>
            </div>
            <div class="redemittel-item">
              ‚úì Alles klar, wir sehen uns dann. <em>(R√µ r·ªìi, h·∫πn g·∫∑p l·∫°i.)</em>
            </div>
          </div>
        </div>

        <div class="explanation">
          <h5>üí° C√ÅCH S·ª¨ D·ª§NG:</h5>
          <p>
            <strong>B∆∞·ªõc 1:</strong> ƒê·ªçc to t·∫•t c·∫£ Redemittel 10 l·∫ßn ƒë·ªÉ thu·ªôc
          </p>
          <p><strong>B∆∞·ªõc 2:</strong> Chuy·ªÉn sang B√ÄI 2 ƒë·ªÉ luy·ªán t·∫≠p</p>
          <p><strong>B∆∞·ªõc 3:</strong> L√†m B√ÄI 3 ƒë·ªÉ thi th·ª≠ nh∆∞ th·∫≠t</p>
        </div>

        <div class="button-container">
          <button class="back-button" onclick="backToMenu()">
            ‚Ü©Ô∏è Quay l·∫°i Menu
          </button>
          <button class="next-button" onclick="startGame(2)">
            ‚ñ∂Ô∏è Sang B√ÄI 2
          </button>
        </div>
      </div>

      <div class="game-area" id="game2">
        <h2 style="color: #667eea; margin-bottom: 20px">
          üéØ B√ÄI 2: LUY·ªÜN T·∫¨P V·ªöI 10 T√åNH HU·ªêNG
        </h2>

        <div class="score" id="score2">
          ƒêi·ªÉm: <span id="points2">0</span>/10
        </div>
        <div class="progress">
          <div class="progress-bar" id="progress2" style="width: 0%">
            C√¢u 1/10
          </div>
        </div>

        <div id="situation2"></div>
        <div id="conversation2" class="conversation-area"></div>
        <div id="options2" class="options"></div>
        <div id="feedback2"></div>

        <div class="button-container">
          <button class="back-button" onclick="backToMenu()">
            ‚Ü©Ô∏è Quay l·∫°i Menu
          </button>
          <button
            class="next-button"
            id="nextBtn2"
            onclick="nextQuestion2()"
            style="display: none"
          >
            ‚ñ∂Ô∏è C√¢u ti·∫øp
          </button>
          <button class="reset-button" onclick="resetGame2()">
            üîÑ L√†m l·∫°i
          </button>
        </div>
      </div>

      <div class="game-area" id="game3">
        <h2 style="color: #667eea; margin-bottom: 20px">
          ‚ö° B√ÄI 3: THI TH·ª¨ (3 ƒê·ªÄ TH·∫¨T)
        </h2>

        <div class="score" id="score3">ƒêi·ªÉm: <span id="points3">0</span>/9</div>
        <div class="progress">
          <div class="progress-bar" id="progress3" style="width: 0%">
            C√¢u 1/9
          </div>
        </div>

        <div id="exam3"></div>
        <div id="conversation3" class="conversation-area"></div>
        <div id="options3" class="options"></div>
        <div id="feedback3"></div>

        <div class="button-container">
          <button class="back-button" onclick="backToMenu()">
            ‚Ü©Ô∏è Quay l·∫°i Menu
          </button>
          <button
            class="next-button"
            id="nextBtn3"
            onclick="nextQuestion3()"
            style="display: none"
          >
            ‚ñ∂Ô∏è C√¢u ti·∫øp
          </button>
          <button class="reset-button" onclick="resetGame3()">
            üîÑ L√†m l·∫°i
          </button>
        </div>
      </div>
    </div>

    <script>
      // Data for Game 2
      const situations2 = [
        {
          scenario: "B·∫°n mu·ªën ƒëi xem phim v·ªõi b·∫°n. H·ªèi th·ªùi gian.",
          context: "B·∫°n r·∫£nh t·ªëi th·ª© S√°u v√† Ch·ªß nh·∫≠t.",
          partner:
            "Hallo! Ich habe am Freitag keine Zeit, aber Sonntag passt mir gut.",
          options: [
            "Wann hast du Zeit f√ºr das Kino?",
            "Ich gehe ins Kino.",
            "Das Kino ist gut.",
            "Ich mag Filme.",
          ],
          correct: 0,
          type: "nachfragen",
          explanation:
            "D√πng 'Wann hast du Zeit?' ƒë·ªÉ h·ªèi th·ªùi gian r·∫£nh c·ªßa ƒë·ªëi t√°c.",
        },
        {
          scenario: "B·∫°n b√® ƒë·ªÅ ngh·ªã ƒëi ƒÉn pizza, nh∆∞ng b·∫°n kh√¥ng th√≠ch pizza.",
          context: "B·∫°n th√≠ch ƒÉn sushi h∆°n.",
          partner: "Wollen wir Pizza essen gehen?",
          options: [
            "Das finde ich nicht gut. Ich habe eine andere Idee...",
            "Ja, super!",
            "Pizza ist lecker.",
            "Ich esse gern.",
          ],
          correct: 0,
          type: "ablehnen + gegenvorschlag",
          explanation:
            "D√πng 'Das finde ich nicht gut' ƒë·ªÉ t·ª´ ch·ªëi l·ªãch s·ª±, sau ƒë√≥ ƒë∆∞a ra ƒë·ªÅ ngh·ªã kh√°c.",
        },
        {
          scenario: "ƒê·ªëi t√°c ƒë·ªìng √Ω g·∫∑p b·∫°n l√∫c 14 gi·ªù ·ªü c√¥ng vi√™n.",
          context: "B·∫°n c≈©ng ƒë·ªìng √Ω.",
          partner: "Treffen wir uns um 14 Uhr im Park?",
          options: [
            "Ja, das ist eine gute Idee! Ich bin daf√ºr.",
            "Nein, das geht nicht.",
            "Vielleicht.",
            "Ich wei√ü nicht.",
          ],
          correct: 0,
          type: "zustimmen",
          explanation:
            "D√πng 'Das ist eine gute Idee!' + 'Ich bin daf√ºr' ƒë·ªÉ ƒë·ªìng √Ω m·∫°nh m·∫Ω.",
        },
        {
          scenario: "B·∫°n mu·ªën m·ªùi b·∫°n b√® ƒëi d√£ ngo·∫°i v√†o cu·ªëi tu·∫ßn.",
          context: "B·∫°n c√≥ xe ƒë·∫°p v√† ƒë·ªì ƒÉn.",
          partner: "...",
          options: [
            "Ich habe eine Idee. Wir k√∂nnten am Wochenende einen Fahrradausflug machen.",
            "Wir gehen.",
            "Fahrrad ist gut.",
            "Am Wochenende arbeite ich.",
          ],
          correct: 0,
          type: "vorschlag machen",
          explanation:
            "D√πng 'Ich habe eine Idee' + 'Wir k√∂nnten...' ƒë·ªÉ ƒë∆∞a ra ƒë·ªÅ ngh·ªã.",
        },
        {
          scenario: "B·∫°n kh√¥ng r·∫£nh th·ª© Hai v√¨ c√≥ h·ªçp ƒë·∫øn 17 gi·ªù.",
          context: "ƒê·ªëi t√°c h·ªèi b·∫°n c√≥ r·∫£nh th·ª© Hai kh√¥ng.",
          partner: "Hast du am Montag Zeit?",
          options: [
            "Tut mir leid, am Montag kann ich leider nicht. Ich arbeite bis 17 Uhr.",
            "Ja, perfekt!",
            "Montag ist gut.",
            "Ich komme.",
          ],
          correct: 0,
          type: "ablehnen + grund",
          explanation:
            "D√πng 'Tut mir leid' + 'kann ich leider nicht' + l√Ω do ƒë·ªÉ t·ª´ ch·ªëi l·ªãch s·ª±.",
        },
        {
          scenario:
            "ƒê·ªëi t√°c ƒë·ªÅ ngh·ªã g·∫∑p l√∫c 9 gi·ªù s√°ng, nh∆∞ng b·∫°n th√≠ch 11 gi·ªù h∆°n.",
          context: "9 gi·ªù qu√° s·ªõm v·ªõi b·∫°n.",
          partner: "Treffen wir uns um 9 Uhr?",
          options: [
            "9 Uhr ist zu fr√ºh. Wie w√§re es mit 11 Uhr?",
            "Ja, gut.",
            "9 Uhr passt.",
            "Ich bin da.",
          ],
          correct: 0,
          type: "gegenvorschlag",
          explanation:
            "D√πng 'ist zu fr√ºh' + 'Wie w√§re es mit...?' ƒë·ªÉ ƒë·ªÅ ngh·ªã gi·ªù kh√°c.",
        },
        {
          scenario: "B·∫°n mu·ªën h·ªèi √Ω ki·∫øn ƒë·ªëi t√°c v·ªÅ vi·ªác ƒëi b∆°i.",
          context: "B·∫°n mu·ªën bi·∫øt h·ªç nghƒ© g√¨.",
          partner: "...",
          options: [
            "Was meinst du? Sollen wir schwimmen gehen?",
            "Ich gehe schwimmen.",
            "Schwimmen ist gut.",
            "Ich mag Wasser.",
          ],
          correct: 0,
          type: "vorschlag + nachfragen",
          explanation: "D√πng 'Was meinst du?' ƒë·ªÉ h·ªèi √Ω ki·∫øn tr∆∞·ªõc khi ƒë·ªÅ ngh·ªã.",
        },
        {
          scenario: "B·∫°n v·ª´a th·ªëng nh·∫•t k·∫ø ho·∫°ch g·∫∑p nhau. T·ªïng k·∫øt l·∫°i.",
          context: "G·∫∑p nhau th·ª© B·∫£y, 14 gi·ªù, ·ªü c√¥ng vi√™n.",
          partner: "Also, alles klar?",
          options: [
            "Perfekt, dann treffen wir uns am Samstag um 14 Uhr im Park. Ich freue mich schon!",
            "Ja.",
            "Bis dann.",
            "Okay.",
          ],
          correct: 0,
          type: "zusammenfassen",
          explanation:
            "D√πng 'Perfekt, dann...' ƒë·ªÉ t·ªïng k·∫øt l·∫°i to√†n b·ªô k·∫ø ho·∫°ch.",
        },
        {
          scenario: "ƒê·ªëi t√°c h·ªèi b·∫°n c√≥ mu·ªën ƒëi ch∆°i kh√¥ng.",
          context: "B·∫°n r·∫•t mu·ªën.",
          partner: "Hast du Lust, etwas zusammen zu machen?",
          options: [
            "Ja, gern! Das macht bestimmt viel Spa√ü.",
            "Nein.",
            "Vielleicht.",
            "Ich wei√ü nicht.",
          ],
          correct: 0,
          type: "zustimmen enthusiastisch",
          explanation:
            "D√πng 'Ja, gern!' + 'Das macht bestimmt viel Spa√ü' ƒë·ªÉ ƒë·ªìng √Ω nhi·ªát t√¨nh.",
        },
        {
          scenario: "B·∫°n mu·ªën h·ªèi ƒë·ªëi t√°c th√≠ch ho·∫°t ƒë·ªông n√†o h∆°n.",
          context: "C√≥ 2 l·ª±a ch·ªçn: ƒëi b·ªô ho·∫∑c ƒë·∫°p xe.",
          partner: "...",
          options: [
            "Was findest du besser: spazieren gehen oder Fahrrad fahren?",
            "Ich gehe.",
            "Fahrrad ist gut.",
            "Wir machen das.",
          ],
          correct: 0,
          type: "meinung fragen",
          explanation:
            "D√πng 'Was findest du besser:... oder...?' ƒë·ªÉ h·ªèi √Ω ki·∫øn gi·ªØa 2 l·ª±a ch·ªçn.",
        },
      ];

      // Data for Game 3 - Based on the real exam images
      const exams3 = [
        // ƒê·ªÄ 1: MUA QU√Ä SINH NH·∫¨T
        {
          title: "ƒê·ªÄ 1: Mua qu√† sinh nh·∫≠t cho b·∫°n",
          description:
            "B·∫°n Alessia v√† Thomas c∆∞·ªõi. B·∫°n mu·ªën mua qu√† cho h·ªç. T√¨m l·ªãch ph√π h·ª£p.",
          scheduleA: {
            title: "L·ªãch c·ªßa b·∫°n - Th·ª© T∆∞, 12 th√°ng 3",
            slots: [
              { time: "7:00", activity: "" },
              { time: "8:00", activity: "aufstehen" },
              { time: "9:00", activity: "fr√ºhst√ºcken" },
              { time: "10:00", activity: "" },
              { time: "11:00", activity: "im Garten arbeiten" },
              { time: "12:00", activity: "" },
              { time: "13:00", activity: "" },
              { time: "14:00", activity: "Mittagessen bei Ole" },
              { time: "15:00", activity: "" },
              { time: "16:00", activity: "mit Babysitter telefonieren" },
              { time: "17:00", activity: "" },
              { time: "18:00", activity: "Konzertprobe" },
              { time: "19:00", activity: "" },
              { time: "20:00", activity: "" },
              { time: "21:00", activity: "ausgehen" },
            ],
          },
          scheduleB: {
            title: "L·ªãch Partner - Th·ª© T∆∞, 12 th√°ng 3",
            slots: [
              { time: "7:00", activity: "Schwimmen" },
              { time: "8:00", activity: "Fr√ºhst√ºck bei Anjo" },
              { time: "9:00", activity: "" },
              { time: "10:00", activity: "Auto von Werkstatt abholen" },
              { time: "11:00", activity: "" },
              { time: "12:00", activity: "am Computer arbeiten" },
              { time: "13:00", activity: "" },
              { time: "14:00", activity: "Spaziergang mit Frank und Lena" },
              { time: "15:00", activity: "" },
              { time: "16:00", activity: "" },
              { time: "17:00", activity: "" },
              { time: "18:00", activity: "Essen gehen mit Eltern" },
              { time: "19:00", activity: "" },
              { time: "20:00", activity: "Schwimmen" },
              { time: "21:00", activity: "" },
            ],
          },
          conversation: [],
          currentStep: 0,
        },
        // ƒê·ªÄ 2: THƒÇM B·∫†N ·ªû B·ªÜNH VI·ªÜN
        {
          title: "ƒê·ªÄ 2: ThƒÉm b·∫°n Lars ·ªü b·ªánh vi·ªán",
          description:
            "B·∫°n Lars n·∫±m vi·ªán. B·∫°n mu·ªën thƒÉm anh ·∫•y. T√¨m l·ªãch ph√π h·ª£p.",
          scheduleA: {
            title: "L·ªãch c·ªßa b·∫°n - Th·ª© S√°u, 23 th√°ng 9",
            slots: [
              { time: "7:00", activity: "" },
              { time: "8:00", activity: "Wochenendeinkauf" },
              { time: "9:00", activity: "" },
              { time: "10:00", activity: "" },
              { time: "11:00", activity: "" },
              { time: "12:00", activity: "" },
              { time: "13:00", activity: "Mittagessen vorbereiten" },
              { time: "14:00", activity: "" },
              { time: "15:00", activity: "" },
              {
                time: "16:00",
                activity: "mit Gro√üeltern Kaffee trinken gehen",
              },
              { time: "17:00", activity: "Lotto spielen" },
              { time: "18:00", activity: "Volleyball-Training" },
              { time: "19:00", activity: "" },
              { time: "20:00", activity: "Krimi im Fernsehen" },
              { time: "21:00", activity: "" },
            ],
          },
          scheduleB: {
            title: "L·ªãch Partner - Th·ª© S√°u, 23 th√°ng 9",
            slots: [
              { time: "7:00", activity: "" },
              { time: "8:00", activity: "Wohnung aufr√§umen und sauber machen" },
              { time: "9:00", activity: "" },
              { time: "10:00", activity: "" },
              { time: "11:00", activity: "" },
              { time: "12:00", activity: "Paket zur Post bringen" },
              { time: "13:00", activity: "Handwerker kommt" },
              { time: "14:00", activity: "" },
              { time: "15:00", activity: "Skype-Termin" },
              { time: "16:00", activity: "" },
              { time: "17:00", activity: "Malkurs" },
              { time: "18:00", activity: "" },
              { time: "19:00", activity: "mit Freunden kochen" },
              { time: "20:00", activity: "" },
              { time: "21:00", activity: "" },
            ],
          },
          conversation: [],
          currentStep: 0,
        },
        // ƒê·ªÄ 3: T·ªî CH·ª®C WORKSHOP
        {
          title: "ƒê·ªÄ 3: T·ªï ch·ª©c workshop v·ªõi ƒë·ªìng nghi·ªáp",
          description:
            "B·∫°n mu·ªën t·ªï ch·ª©c workshop v·ªõi ƒë·ªìng nghi·ªáp. T√¨m l·ªãch ph√π h·ª£p.",
          scheduleA: {
            title: "L·ªãch c·ªßa b·∫°n - Th·ª© B·∫£y, 1 th√°ng 6",
            slots: [
              { time: "7:00", activity: "" },
              { time: "8:00", activity: "lange schlafen" },
              { time: "9:00", activity: "" },
              { time: "10:00", activity: "" },
              { time: "11:00", activity: "joggen" },
              { time: "12:00", activity: "Fr√ºhst√ºck bei Mark" },
              { time: "13:00", activity: "" },
              { time: "14:00", activity: "Fahrrad reparieren" },
              { time: "15:00", activity: "" },
              { time: "16:00", activity: "" },
              { time: "17:00", activity: "" },
              { time: "18:00", activity: "Basketball-Training" },
              { time: "19:00", activity: "" },
              { time: "20:00", activity: "" },
              { time: "21:00", activity: "zu Hause bleiben" },
            ],
          },
          scheduleB: {
            title: "L·ªãch Partner - Th·ª© B·∫£y, 1 th√°ng 6",
            slots: [
              { time: "7:00", activity: "" },
              { time: "8:00", activity: "" },
              { time: "9:00", activity: "Fr√ºhst√ºck mit der Familie" },
              { time: "10:00", activity: "" },
              { time: "11:00", activity: "" },
              { time: "12:00", activity: "mit Katze zum Tierarzt" },
              { time: "13:00", activity: "" },
              { time: "14:00", activity: "Friseur" },
              { time: "15:00", activity: "" },
              { time: "16:00", activity: "" },
              { time: "17:00", activity: "Sohn bei den Hausaufgaben helfen" },
              { time: "18:00", activity: "mit Eltern telefonieren" },
              { time: "19:00", activity: "" },
              { time: "20:00", activity: "mit Karla ins Konzert" },
              { time: "21:00", activity: "" },
            ],
          },
          conversation: [],
          currentStep: 0,
        },
      ];

      // Game state
      let currentGame2 = 0;
      let score2 = 0;
      let currentGame3Exam = 0;
      let currentGame3Step = 0;
      let score3 = 0;

      // Start game
      function startGame(gameNum) {
        document.getElementById("menu").style.display = "none";
        document.getElementById("game" + gameNum).style.display = "block";

        if (gameNum === 2) {
          loadQuestion2();
        } else if (gameNum === 3) {
          loadExam3();
        }
      }

      // Back to menu
      function backToMenu() {
        document.querySelectorAll(".game-area").forEach((area) => {
          area.style.display = "none";
        });
        document.getElementById("menu").style.display = "grid";
      }

      // Game 2 functions
      function loadQuestion2() {
        const situation = situations2[currentGame2];
        const situationHTML = `
                <div class="situation">
                    <h3>T√¨nh hu·ªëng ${currentGame2 + 1}/10</h3>
                    <p><strong>üìã T√¨nh hu·ªëng:</strong> ${situation.scenario}</p>
                    <p><strong>üéØ B·ªëi c·∫£nh:</strong> ${situation.context}</p>
                    <div class="hint">üí° Lo·∫°i Redemittel c·∫ßn d√πng: <strong>${
                      situation.type
                    }</strong></div>
                </div>
            `;

        const conversationHTML = `
                <div class="message partner">
                    <div class="speaker">üë§ Partner:</div>
                    <div>${situation.partner}</div>
                </div>
                <div class="message you" style="background: #fff9e6; border: 2px dashed #ff9800;">
                    <div class="speaker">üëâ B·∫°n tr·∫£ l·ªùi:</div>
                    <div style="font-style: italic; color: #666;">Ch·ªçn c√¢u tr·∫£ l·ªùi ph√π h·ª£p b√™n d∆∞·ªõi ‚Üì</div>
                </div>
            `;

        let optionsHTML = "";
        situation.options.forEach((option, index) => {
          optionsHTML += `<button class="option-button" onclick="checkAnswer2(${index})">${option}</button>`;
        });

        document.getElementById("situation2").innerHTML = situationHTML;
        document.getElementById("conversation2").innerHTML = conversationHTML;
        document.getElementById("options2").innerHTML = optionsHTML;
        document.getElementById("feedback2").innerHTML = "";
        document.getElementById("nextBtn2").style.display = "none";

        updateProgress2();
      }

      function checkAnswer2(selected) {
        const situation = situations2[currentGame2];
        const buttons = document.querySelectorAll("#options2 .option-button");

        buttons.forEach((btn, index) => {
          btn.disabled = true;
          if (index === situation.correct) {
            btn.classList.add("correct");
          } else if (index === selected) {
            btn.classList.add("wrong");
          }
        });

        let feedbackHTML = "";
        if (selected === situation.correct) {
          score2++;
          feedbackHTML = `
                    <div class="feedback correct">
                        ‚úÖ Ch√≠nh x√°c! +1 ƒëi·ªÉm
                    </div>
                    <div class="explanation">
                        <h5>üí° Gi·∫£i th√≠ch:</h5>
                        <p>${situation.explanation}</p>
                    </div>
                `;
        } else {
          feedbackHTML = `
                    <div class="feedback wrong">
                        ‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng: "${
                          situation.options[situation.correct]
                        }"
                    </div>
                    <div class="explanation">
                        <h5>üí° Gi·∫£i th√≠ch:</h5>
                        <p>${situation.explanation}</p>
                    </div>
                `;
        }

        document.getElementById("feedback2").innerHTML = feedbackHTML;
        document.getElementById("points2").textContent = score2;
        document.getElementById("nextBtn2").style.display = "inline-block";
      }

      function nextQuestion2() {
        currentGame2++;
        if (currentGame2 < situations2.length) {
          loadQuestion2();
        } else {
          showFinalResult2();
        }
      }

      function updateProgress2() {
        const progress = ((currentGame2 + 1) / situations2.length) * 100;
        document.getElementById("progress2").style.width = progress + "%";
        document.getElementById("progress2").textContent = `C√¢u ${
          currentGame2 + 1
        }/${situations2.length}`;
      }

      function showFinalResult2() {
        const percent = (score2 / situations2.length) * 100;
        let message = "";
        if (percent >= 80) {
          message = "üéâ Xu·∫•t s·∫Øc! B·∫°n ƒë√£ th√†nh th·∫°o Redemittel!";
        } else if (percent >= 60) {
          message = "üëç T·ªët l·∫Øm! Luy·ªán th√™m m·ªôt ch√∫t n·ªØa l√† ho√†n h·∫£o!";
        } else {
          message = "üí™ C·ªë g·∫Øng l√™n! H√£y xem l·∫°i B√ÄI 1 v√† l√†m l·∫°i nh√©!";
        }

        document.getElementById("situation2").innerHTML = `
                <div class="situation">
                    <h3>üèÜ K·∫æT QU·∫¢ CU·ªêI C√ôNG</h3>
                    <div style="font-size: 2em; text-align: center; margin: 20px 0;">
                        ${score2}/${situations2.length} ƒëi·ªÉm (${percent.toFixed(
          0
        )}%)
                    </div>
                    <div style="text-align: center; font-size: 1.5em; color: #667eea;">
                        ${message}
                    </div>
                </div>
            `;
        document.getElementById("conversation2").innerHTML = "";
        document.getElementById("options2").innerHTML = "";
        document.getElementById("feedback2").innerHTML = "";
        document.getElementById("nextBtn2").style.display = "none";
      }

      function resetGame2() {
        currentGame2 = 0;
        score2 = 0;
        document.getElementById("points2").textContent = "0";
        loadQuestion2();
      }

      // Game 3 functions
      function loadExam3() {
        const exam = exams3[currentGame3Exam];

        let scheduleAHTML =
          '<div class="schedule"><h4>' + exam.scheduleA.title + "</h4>";
        exam.scheduleA.slots.forEach((slot) => {
          const busyClass = slot.activity ? "busy" : "";
          scheduleAHTML += `<div class="time-slot ${busyClass}"><strong>${slot.time}</strong> ${slot.activity}</div>`;
        });
        scheduleAHTML += "</div>";

        let scheduleBHTML =
          '<div class="schedule"><h4>' + exam.scheduleB.title + "</h4>";
        exam.scheduleB.slots.forEach((slot) => {
          const busyClass = slot.activity ? "busy" : "";
          scheduleBHTML += `<div class="time-slot ${busyClass}"><strong>${slot.time}</strong> ${slot.activity}</div>`;
        });
        scheduleBHTML += "</div>";

        const examHTML = `
                <div class="situation">
                    <h3>${exam.title}</h3>
                    <p><strong>üìã Nhi·ªám v·ª•:</strong> ${exam.description}</p>
                    <div class="hint">üí° B·∫°n c·∫ßn: ƒê·ªÅ ngh·ªã ‚Üí H·ªèi th·ªùi gian ‚Üí Th∆∞∆°ng l∆∞·ª£ng ‚Üí ƒê·ªìng √Ω ‚Üí T·ªïng k·∫øt</div>
                </div>
                <div class="schedule-container">
                    ${scheduleAHTML}
                    ${scheduleBHTML}
                </div>
            `;

        document.getElementById("exam3").innerHTML = examHTML;

        // Start conversation
        loadConversationStep3();
      }

      function loadConversationStep3() {
        const exam = exams3[currentGame3Exam];
        const steps = [
          {
            speaker: "you",
            question: "B·∫Øt ƒë·∫ßu h·ªôi tho·∫°i - ƒê∆∞a ra ƒë·ªÅ ngh·ªã",
            options: [
              "Hallo! Wir sollten ein Geschenk f√ºr unseren Freund kaufen. Wann hast du Zeit?",
              "Ich gehe einkaufen.",
              "Geschenk ist wichtig.",
              "Bis sp√§ter.",
            ],
            correct: 0,
            type: "vorschlag + nachfragen",
            partner_response:
              "Gute Idee! Am Mittwoch habe ich von 16:30 Uhr frei.",
          },
          {
            speaker: "partner",
            message: "Ich schlage 16:30 Uhr vor. Passt dir das?",
            options: [
              "Ja, 16:30 Uhr passt mir auch. Wo treffen wir uns?",
              "Nein.",
              "Ich wei√ü nicht.",
              "Vielleicht sp√§ter.",
            ],
            correct: 0,
            type: "zustimmen + nachfragen",
            partner_response: "Am Einkaufszentrum in der N√§he von mir?",
          },
          {
            speaker: "you",
            question: "K·∫øt th√∫c - T·ªïng k·∫øt k·∫ø ho·∫°ch",
            options: [
              "Perfekt, dann treffen wir uns am Mittwoch um 16:30 Uhr im Einkaufszentrum. Ich freue mich schon!",
              "Okay.",
              "Bis dann.",
              "Ja.",
            ],
            correct: 0,
            type: "zusammenfassen",
            partner_response: "Super! Bis Mittwoch dann!",
          },
        ];

        if (currentGame3Step >= steps.length) {
          // Move to next exam
          currentGame3Exam++;
          currentGame3Step = 0;
          if (currentGame3Exam < exams3.length) {
            loadExam3();
          } else {
            showFinalResult3();
          }
          return;
        }

        const step = steps[currentGame3Step];

        // Display conversation so far
        let conversationHTML = "";
        for (let i = 0; i < currentGame3Step; i++) {
          const prevStep = steps[i];
          if (prevStep.speaker === "you" && prevStep.partner_response) {
            conversationHTML += `
                        <div class="message you">
                            <div class="speaker">üëâ B·∫°n:</div>
                            <div>${prevStep.options[prevStep.correct]}</div>
                        </div>
                        <div class="message partner">
                            <div class="speaker">üë§ Partner:</div>
                            <div>${prevStep.partner_response}</div>
                        </div>
                    `;
          } else if (prevStep.speaker === "partner") {
            conversationHTML += `
                        <div class="message partner">
                            <div class="speaker">üë§ Partner:</div>
                            <div>${prevStep.message}</div>
                        </div>
                        <div class="message you">
                            <div class="speaker">üëâ B·∫°n:</div>
                            <div>${prevStep.options[prevStep.correct]}</div>
                        </div>
                    `;
            if (prevStep.partner_response) {
              conversationHTML += `
                            <div class="message partner">
                                <div class="speaker">üë§ Partner:</div>
                                <div>${prevStep.partner_response}</div>
                            </div>
                        `;
            }
          }
        }

        // Add current question
        if (step.speaker === "partner") {
          conversationHTML += `
                    <div class="message partner">
                        <div class="speaker">üë§ Partner:</div>
                        <div>${step.message}</div>
                    </div>
                    <div class="message you" style="background: #fff9e6; border: 2px dashed #ff9800;">
                        <div class="speaker">üëâ B·∫°n tr·∫£ l·ªùi:</div>
                        <div style="font-style: italic; color: #666;">Ch·ªçn c√¢u tr·∫£ l·ªùi ‚Üì</div>
                    </div>
                `;
        } else {
          conversationHTML += `
                    <div class="message you" style="background: #fff9e6; border: 2px dashed #ff9800;">
                        <div class="speaker">üëâ B·∫°n n√≥i:</div>
                        <div style="font-style: italic; color: #666;">${step.question} ‚Üì</div>
                    </div>
                `;
        }

        document.getElementById("conversation3").innerHTML = conversationHTML;

        // Display options
        let optionsHTML = `<div class="hint">üí° Lo·∫°i Redemittel: <strong>${step.type}</strong></div>`;
        step.options.forEach((option, index) => {
          optionsHTML += `<button class="option-button" onclick="checkAnswer3(${index})">${option}</button>`;
        });

        document.getElementById("options3").innerHTML = optionsHTML;
        document.getElementById("feedback3").innerHTML = "";
        document.getElementById("nextBtn3").style.display = "none";

        updateProgress3();
      }

      function checkAnswer3(selected) {
        const exam = exams3[currentGame3Exam];
        const steps = [
          {
            correct: 0,
            explanation:
              'D√πng "Wir sollten..." ƒë·ªÉ ƒë·ªÅ ngh·ªã v√† "Wann hast du Zeit?" ƒë·ªÉ h·ªèi th·ªùi gian.',
          },
          {
            correct: 0,
            explanation:
              'D√πng "Ja,... passt mir auch" ƒë·ªÉ ƒë·ªìng √Ω v√† "Wo treffen wir uns?" ƒë·ªÉ h·ªèi ƒë·ªãa ƒëi·ªÉm.',
          },
          {
            correct: 0,
            explanation:
              'D√πng "Perfekt, dann treffen wir uns am... um..." ƒë·ªÉ t·ªïng k·∫øt ƒë·∫ßy ƒë·ªß.',
          },
        ];

        const step = steps[currentGame3Step];
        const buttons = document.querySelectorAll("#options3 .option-button");

        buttons.forEach((btn, index) => {
          btn.disabled = true;
          if (index === step.correct) {
            btn.classList.add("correct");
          } else if (index === selected) {
            btn.classList.add("wrong");
          }
        });

        let feedbackHTML = "";
        if (selected === step.correct) {
          score3++;
          feedbackHTML = `
                    <div class="feedback correct">
                        ‚úÖ Ch√≠nh x√°c! +1 ƒëi·ªÉm
                    </div>
                    <div class="explanation">
                        <h5>üí° Gi·∫£i th√≠ch:</h5>
                        <p>${step.explanation}</p>
                    </div>
                `;
        } else {
          feedbackHTML = `
                    <div class="feedback wrong">
                        ‚ùå Sai r·ªìi!
                    </div>
                    <div class="explanation">
                        <h5>üí° Gi·∫£i th√≠ch:</h5>
                        <p>${step.explanation}</p>
                    </div>
                `;
        }

        document.getElementById("feedback3").innerHTML = feedbackHTML;
        document.getElementById("points3").textContent = score3;
        document.getElementById("nextBtn3").style.display = "inline-block";
      }

      function nextQuestion3() {
        currentGame3Step++;
        loadConversationStep3();
      }

      function updateProgress3() {
        const totalSteps = exams3.length * 3; // 3 exams, 3 steps each
        const currentTotal = currentGame3Exam * 3 + currentGame3Step + 1;
        const progress = (currentTotal / totalSteps) * 100;
        document.getElementById("progress3").style.width = progress + "%";
        document.getElementById(
          "progress3"
        ).textContent = `C√¢u ${currentTotal}/${totalSteps}`;
      }

      function showFinalResult3() {
        const totalQuestions = 9; // 3 exams √ó 3 steps
        const percent = (score3 / totalQuestions) * 100;
        let message = "";
        if (percent >= 80) {
          message = "üéâ Xu·∫•t s·∫Øc! B·∫°n ƒë√£ s·∫µn s√†ng cho k·ª≥ thi A2!";
        } else if (percent >= 60) {
          message = "üëç T·ªët l·∫Øm! Luy·ªán th√™m m·ªôt ch√∫t n·ªØa l√† ho√†n h·∫£o!";
        } else {
          message = "üí™ C·∫ßn √¥n t·∫≠p th√™m! H√£y xem l·∫°i B√ÄI 1 v√† l√†m l·∫°i B√ÄI 2!";
        }

        document.getElementById("exam3").innerHTML = `
                <div class="situation">
                    <h3>üèÜ K·∫æT QU·∫¢ CU·ªêI C√ôNG - THI TH·ª¨</h3>
                    <div style="font-size: 2em; text-align: center; margin: 20px 0;">
                        ${score3}/${totalQuestions} ƒëi·ªÉm (${percent.toFixed(
          0
        )}%)
                    </div>
                    <div style="text-align: center; font-size: 1.5em; color: #667eea;">
                        ${message}
                    </div>
                </div>
            `;
        document.getElementById("conversation3").innerHTML = "";
        document.getElementById("options3").innerHTML = "";
        document.getElementById("feedback3").innerHTML = "";
        document.getElementById("nextBtn3").style.display = "none";
      }

      function resetGame3() {
        currentGame3Exam = 0;
        currentGame3Step = 0;
        score3 = 0;
        document.getElementById("points3").textContent = "0";
        loadExam3();
      }
    </script>
  </body>
</html>
