<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Luy·ªán t·∫≠p 29 c√¢u ti·∫øng ƒê·ª©c</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .header p {
        font-size: 1.2em;
        opacity: 0.9;
      }

      .content {
        padding: 30px;
      }

      .practice-card {
        background: white;
        border-radius: 15px;
        padding: 30px;
        margin: 20px 0;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .stats-row {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        gap: 15px;
        margin: 25px 0;
      }

      .stat-box {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-radius: 15px;
        padding: 20px;
        text-align: center;
      }

      .stat-number {
        font-size: 2em;
        font-weight: 900;
        margin-bottom: 5px;
      }

      .stat-label {
        font-size: 0.9em;
        opacity: 0.9;
      }

      .timer-warning {
        background: linear-gradient(135deg, #ff6b6b, #ee5a24) !important;
        animation: pulse 1s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      .sentence-display {
        font-size: 1.8em;
        margin: 30px 0;
        padding: 25px;
        background: #f8f9ff;
        border-radius: 15px;
        border: 3px solid #667eea;
        line-height: 1.5;
        min-height: 120px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin: 30px 0;
        flex-wrap: wrap;
      }

      .btn {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 15px 25px;
        border-radius: 25px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        min-width: 140px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .btn-success {
        background: linear-gradient(135deg, #00b894, #00a085);
      }

      .btn-danger {
        background: linear-gradient(135deg, #ff6b6b, #ee5a24);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #74b9ff, #0984e3);
      }

      .progress-bar {
        background: #e0e6ed;
        border-radius: 10px;
        overflow: hidden;
        margin: 20px 0;
        height: 25px;
      }

      .progress-fill {
        background: linear-gradient(135deg, #00b894, #00a085);
        height: 100%;
        transition: width 0.5s ease;
        border-radius: 10px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 0.9em;
      }

      .answer-section {
        background: #f8f9ff;
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        display: none;
        text-align: left;
        border: 2px solid #667eea;
      }

      .answer-section.show {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .german-text {
        font-size: 1.5em;
        color: #2d3436;
        font-weight: 600;
        margin-bottom: 15px;
        padding: 15px;
        background: #dfe6e9;
        border-radius: 10px;
        text-align: center;
      }

      .analysis {
        background: #e8f4f8;
        border-radius: 10px;
        padding: 20px;
        margin: 15px 0;
        border-left: 4px solid #667eea;
      }

      .analysis h4 {
        color: #2d3436;
        margin-bottom: 15px;
        font-size: 1.2em;
      }

      .word-analysis {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
        margin: 10px 0;
      }

      .word-tag {
        background: #667eea;
        color: white;
        padding: 8px 12px;
        border-radius: 20px;
        font-size: 0.9em;
        font-weight: 600;
      }

      .completion-screen {
        text-align: center;
        display: none;
        padding: 40px;
      }

      .completion-screen.show {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      .completion-emoji {
        font-size: 4em;
        margin: 20px 0;
      }

      .result-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .result-stat {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 25px;
        border-radius: 15px;
        text-align: center;
      }

      .result-stat .number {
        font-size: 2.5em;
        font-weight: 900;
        margin-bottom: 10px;
      }

      .instructions {
        background: #e8f4f8;
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        border: 2px solid #667eea;
      }

      .instructions h3 {
        color: #2d3436;
        margin-bottom: 15px;
        font-size: 1.3em;
      }

      .instructions ul {
        list-style: none;
        padding: 0;
      }

      .instructions li {
        margin: 10px 0;
        padding-left: 25px;
        position: relative;
      }

      .instructions li::before {
        content: "‚úì";
        position: absolute;
        left: 0;
        color: #00b894;
        font-weight: bold;
        font-size: 1.2em;
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 2em;
        }
        .sentence-display {
          font-size: 1.4em;
          padding: 20px;
        }
        .stats-row {
          grid-template-columns: 1fr 1fr;
          gap: 10px;
        }
        .controls {
          flex-direction: column;
          align-items: center;
        }
        .btn {
          width: 90%;
          max-width: 300px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üá©üá™ Luy·ªán t·∫≠p 29 c√¢u ti·∫øng ƒê·ª©c</h1>
        <p>Ph√¢n t√≠ch c·∫•u tr√∫c c√¢u v√† th·ª© t·ª± t·ª´ - 4 ph√∫t</p>
      </div>

      <div class="content">
        <!-- Start Screen -->
        <div class="practice-card" id="start-screen">
          <div class="instructions">
            <h3>üìö H∆∞·ªõng d·∫´n luy·ªán t·∫≠p</h3>
            <ul>
              <li>29 c√¢u ti·∫øng ƒê·ª©c v·ªõi ph√¢n t√≠ch chi ti·∫øt c·∫•u tr√∫c</li>
              <li>Th·ªùi gian: 4 ph√∫t (kho·∫£ng 8 gi√¢y/c√¢u)</li>
              <li>ƒê·ªçc c√¢u ti·∫øng ƒê·ª©c ‚Üí ƒê√°nh gi√° hi·ªÉu bi·∫øt ‚Üí Xem ph√¢n t√≠ch</li>
              <li>H·ªçc th·ª© t·ª± t·ª´ v√† c·∫•u tr√∫c ng·ªØ ph√°p th·ª±c t·∫ø</li>
              <li>
                Ph√≠m t·∫Øt: Space = ƒê·ªçc, 1 = Hi·ªÉu, 2 = Ch∆∞a hi·ªÉu, Enter = Ti·∫øp
              </li>
            </ul>
          </div>

          <div class="controls">
            <button class="btn" onclick="startPractice()">
              üöÄ B·∫Øt ƒë·∫ßu luy·ªán t·∫≠p
            </button>
            <button class="btn btn-secondary" onclick="showPreview()">
              üëÅÔ∏è Xem tr∆∞·ªõc 29 c√¢u
            </button>
          </div>
        </div>

        <!-- Practice Screen -->
        <div class="practice-card" id="practice-screen" style="display: none">
          <div class="stats-row">
            <div class="stat-box" id="timer-box">
              <div class="stat-number" id="timer">04:00</div>
              <div class="stat-label">‚è∞ Th·ªùi gian</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="correct-count">0</div>
              <div class="stat-label">‚úÖ Hi·ªÉu r√µ</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="sentence-counter">1 / 29</div>
              <div class="stat-label">üìù C√¢u hi·ªán t·∫°i</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="accuracy">0%</div>
              <div class="stat-label">üéØ ƒê·ªô ch√≠nh x√°c</div>
            </div>
          </div>

          <div class="progress-bar">
            <div class="progress-fill" id="progress">0%</div>
          </div>

          <div class="sentence-display" id="sentence-display">
            Nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ b·∫Øt ƒë·∫ßu luy·ªán t·∫≠p
          </div>

          <div class="controls" id="main-controls">
            <button
              class="btn btn-secondary"
              onclick="speakGerman()"
              id="speak-btn"
              style="display: none"
            >
              üîä ƒê·ªçc c√¢u
            </button>
            <button
              class="btn btn-success"
              onclick="markAnswer(true)"
              id="understand-btn"
              style="display: none"
            >
              ‚úÖ T√¥i hi·ªÉu
            </button>
            <button
              class="btn btn-danger"
              onclick="markAnswer(false)"
              id="not-understand-btn"
              style="display: none"
            >
              ‚ùå Ch∆∞a hi·ªÉu
            </button>
            <button
              class="btn"
              onclick="nextSentence()"
              id="next-btn"
              style="display: none"
            >
              ‚û°Ô∏è C√¢u ti·∫øp theo
            </button>
          </div>

          <div class="answer-section" id="answer-section">
            <div class="german-text" id="german-text"></div>
            <div class="analysis">
              <h4>üîç Ph√¢n t√≠ch c·∫•u tr√∫c c√¢u</h4>
              <div id="structure-analysis"></div>
              <div class="word-analysis" id="word-analysis"></div>
            </div>
          </div>
        </div>

        <!-- Completion Screen -->
        <div class="completion-screen" id="completion-screen">
          <div class="completion-emoji" id="result-emoji">üéâ</div>
          <h2 id="result-title">Ho√†n th√†nh!</h2>
          <p style="font-size: 1.3em; margin: 20px 0" id="result-message"></p>

          <div class="result-stats">
            <div class="result-stat">
              <div class="number" id="final-correct">0</div>
              <div>C√¢u hi·ªÉu ƒë∆∞·ª£c</div>
            </div>
            <div class="result-stat">
              <div class="number" id="final-total">0</div>
              <div>T·ªïng s·ªë c√¢u</div>
            </div>
            <div class="result-stat">
              <div class="number" id="final-accuracy">0%</div>
              <div>ƒê·ªô ch√≠nh x√°c</div>
            </div>
            <div class="result-stat">
              <div class="number" id="final-time">00:00</div>
              <div>Th·ªùi gian d√πng</div>
            </div>
          </div>

          <div class="controls">
            <button class="btn" onclick="resetPractice()">üîÑ L√†m l·∫°i</button>
            <button class="btn btn-secondary" onclick="showPreview()">
              üìñ Xem l·∫°i 29 c√¢u
            </button>
          </div>
        </div>

        <!-- Preview Screen -->
        <div class="completion-screen" id="preview-screen">
          <h2 style="color: #2d3436; margin-bottom: 30px">
            üìã Danh s√°ch 29 c√¢u luy·ªán t·∫≠p
          </h2>

          <div
            style="
              max-height: 500px;
              overflow-y: auto;
              text-align: left;
              background: #f8f9ff;
              padding: 25px;
              border-radius: 15px;
              border: 2px solid #667eea;
            "
          >
            <div id="preview-content"></div>
          </div>

          <div class="controls" style="margin-top: 30px">
            <button class="btn btn-secondary" onclick="hidePreview()">
              ‚¨ÖÔ∏è Quay l·∫°i
            </button>
            <button class="btn" onclick="hidePreviewAndStart()">
              üöÄ B·∫Øt ƒë·∫ßu luy·ªán t·∫≠p
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // D·ªØ li·ªáu 29 c√¢u v·ªõi ph√¢n t√≠ch chi ti·∫øt
      const sentences = [
        {
          german: "Hallo Mama!",
          vietnamese: "Ch√†o m·∫π!",
          analysis: "L·ªùi ch√†o + X∆∞ng h√¥",
          structure: "Th√°n t·ª´ ch√†o h·ªèi",
          words: ["Hallo (Ch√†o - th√°n t·ª´)", "Mama (M·∫π - x∆∞ng h√¥)"],
        },
        {
          german: "Hier ist Cornelia.",
          vietnamese: "ƒê√¢y l√† Cornelia.",
          analysis: "Hier (1) + ist (V2) + Cornelia (3)",
          structure: "Tr·∫°ng t·ª´ (1) + ƒê·ªông t·ª´ (V2) + Ch·ªß ng·ªØ (3)",
          words: [
            "Hier (ƒê√¢y - tr·∫°ng t·ª´ v·ªã tr√≠ 1)",
            "ist (l√† - ƒë·ªông t·ª´ V2)",
            "Cornelia (Cornelia - ch·ªß ng·ªØ v·ªã tr√≠ 3)",
          ],
        },
        {
          german:
            "Ich wollte dir nur Bescheid sagen, dass ich nicht kommen kann.",
          vietnamese:
            "T√¥i ch·ªâ mu·ªën b√°o cho b·∫°n bi·∫øt r·∫±ng t√¥i kh√¥ng th·ªÉ ƒë·∫øn ƒë∆∞·ª£c.",
          analysis:
            "Ich (1) + wollte (V2) + dir (Dat) + nur + Bescheid sagen + dass-Nebensatz",
          structure:
            "Ch·ªß ng·ªØ + ƒê·ªông t·ª´ + T√¢n ng·ªØ gi√°n ti·∫øp + B·ªï nghƒ©a + T√¢n ng·ªØ tr·ª±c ti·∫øp + M·ªánh ƒë·ªÅ ph·ª• thu·ªôc",
          words: [
            "Ich (T√¥i - ch·ªß ng·ªØ)",
            "wollte (mu·ªën - ƒë·ªông t·ª´ qu√° kh·ª©)",
            "dir (cho b·∫°n - Dativ)",
            "nur (ch·ªâ)",
            "Bescheid sagen (b√°o tin)",
          ],
        },
        {
          german: "Ich habe zu Weihnachten arbeiten.",
          vietnamese: "T√¥i ph·∫£i l√†m vi·ªác v√†o d·ªãp Gi√°ng sinh.",
          analysis:
            "Ich (1) + habe (V2) + zu Weihnachten (Te) + arbeiten (Inf)",
          structure: "Ch·ªß ng·ªØ + ƒê·ªông t·ª´ tr·ª£ + Th·ªùi gian + ƒê·ªông t·ª´ nguy√™n m·∫´u",
          words: [
            "Ich (T√¥i)",
            "habe (ph·∫£i)",
            "zu Weihnachten (v√†o Gi√°ng sinh - th·ªùi gian)",
            "arbeiten (l√†m vi·ªác - infinitiv)",
          ],
        },
        {
          german: "Du Papi ist Dienst.",
          vietnamese: "V√† b·ªë ƒëang l√†m nhi·ªám v·ª•.",
          analysis: "Du (li√™n t·ª´) + Papi (1) + ist (V2) + Dienst (v·ªã ng·ªØ)",
          structure:
            "Li√™n t·ª´ + Ch·ªß ng·ªØ + ƒê·ªông t·ª´ + V·ªã ng·ªØ (thi·∫øu gi·ªõi t·ª´ 'im')",
          words: [
            "Du/Und (V√†)",
            "Papi (B·ªë)",
            "ist (ƒëang)",
            "Dienst (nhi·ªám v·ª•)",
          ],
        },
        {
          german: "Also k√∂nnen wir nicht zu euch fahren.",
          vietnamese: "V·∫≠y n√™n ch√∫ng t√¥i kh√¥ng th·ªÉ ƒëi ƒë·∫øn ch·ªó c√°c b·∫°n.",
          analysis:
            "Also (1) + k√∂nnen (V2) + wir (3) + nicht + zu euch (Lo) + fahren (Inf)",
          structure:
            "Li√™n t·ª´ + ƒê·ªông t·ª´ khi·∫øm khuy·∫øt + Ch·ªß ng·ªØ + Ph·ªß ƒë·ªãnh + N∆°i ch·ªën + ƒê·ªông t·ª´ nguy√™n m·∫´u",
          words: [
            "Also (V·∫≠y n√™n)",
            "k√∂nnen (c√≥ th·ªÉ)",
            "wir (ch√∫ng t√¥i)",
            "nicht (kh√¥ng)",
            "zu euch (ƒë·∫øn ch·ªó b·∫°n)",
            "fahren (ƒëi)",
          ],
        },
        {
          german:
            "Ich hoffe, ihr versteht das, und ich w√ºnsche euch frohe Weihnachten.",
          vietnamese:
            "T√¥i hy v·ªçng c√°c b·∫°n hi·ªÉu ƒëi·ªÅu ƒë√≥, v√† t√¥i ch√∫c c√°c b·∫°n m·ªôt Gi√°ng sinh vui v·∫ª.",
          analysis:
            "Ich hoffe + Nebensatz + und + ich w√ºnsche + euch (Dat) + frohe Weihnachten (Akk)",
          structure:
            "Ch·ªß ng·ªØ + ƒê·ªông t·ª´ + M·ªánh ƒë·ªÅ ph·ª• + Li√™n t·ª´ + Ch·ªß ng·ªØ + ƒê·ªông t·ª´ + T√¢n ng·ªØ gi√°n ti·∫øp + T√¢n ng·ªØ tr·ª±c ti·∫øp",
          words: [
            "Ich (T√¥i)",
            "hoffe (hy v·ªçng)",
            "w√ºnsche (ch√∫c)",
            "euch (c√°c b·∫°n - Dativ)",
            "frohe Weihnachten (Gi√°ng sinh vui v·∫ª)",
          ],
        },
        {
          german: "Tut mir leid.",
          vietnamese: "T√¥i xin l·ªói.",
          analysis: "Tut (V1) + mir (Dat) + leid (v·ªã ng·ªØ)",
          structure: "C·ª•m t·ª´ c·ªë ƒë·ªãnh - ƒê·ªông t·ª´ + T√¢n ng·ªØ gi√°n ti·∫øp + V·ªã ng·ªØ",
          words: ["Tut (l√†m)", "mir (t√¥i - Dativ)", "leid (bu·ªìn/ti·∫øc)"],
        },
        {
          german:
            "Und hier die aktuelle Verkehrslage mit Staumeldungen, Blitzen, Radarkallen und Baustellen.",
          vietnamese:
            "V√† ƒë√¢y l√† t√¨nh h√¨nh giao th√¥ng hi·ªán t·∫°i v·ªõi c√°c th√¥ng b√°o k·∫πt xe, radar, camera t·ªëc ƒë·ªô v√† c√¥ng tr√¨nh x√¢y d·ª±ng.",
          analysis: "Und + hier + die aktuelle Verkehrslage + mit...(b·ªï nghƒ©a)",
          structure:
            "Li√™n t·ª´ + Tr·∫°ng t·ª´ + Ch·ªß ng·ªØ ph·ª©c t·∫°p + C·ª•m gi·ªõi t·ª´ b·ªï nghƒ©a",
          words: [
            "Und (V√†)",
            "hier (ƒë√¢y)",
            "aktuelle Verkehrslage (t√¨nh h√¨nh giao th√¥ng hi·ªán t·∫°i)",
            "Staumeldungen (th√¥ng b√°o k·∫πt xe)",
          ],
        },
        {
          german:
            "Die A3 von Frankfurt Richtung W√ºrzburg ist zwischen den Anschlussstellen Aschaffenburg und Stockstadt gesperrt.",
          vietnamese:
            "ƒê∆∞·ªùng cao t·ªëc A3 t·ª´ Frankfurt h∆∞·ªõng W√ºrzburg b·ªã phong t·ªèa gi·ªØa c√°c n√∫t giao Aschaffenberg v√† Stockstadt.",
          analysis:
            "Die A3... (1) + ist (V2) + zwischen... (Lo) + gesperrt (v·ªã ng·ªØ)",
          structure:
            "Ch·ªß ng·ªØ m·ªü r·ªông + ƒê·ªông t·ª´ sein + N∆°i ch·ªën + T√≠nh t·ª´ v·ªã ng·ªØ",
          words: [
            "Die A3 (ƒê∆∞·ªùng A3)",
            "von Frankfurt (t·ª´ Frankfurt)",
            "ist (b·ªã)",
            "gesperrt (phong t·ªèa)",
          ],
        },
        {
          german: "Fahren Sie bitte vorsichtig!",
          vietnamese: "Xin qu√Ω v·ªã h√£y l√°i xe c·∫©n th·∫≠n!",
          analysis: "Fahren (V1) + Sie (1) + bitte + vorsichtig (Mo)",
          structure:
            "ƒê·ªông t·ª´ m·ªánh l·ªánh + Ch·ªß ng·ªØ + Tr·∫°ng t·ª´ l·ªãch s·ª± + C√°ch th·ª©c",
          words: [
            "Fahren (L√°i xe - m·ªánh l·ªánh)",
            "Sie (qu√Ω v·ªã)",
            "bitte (xin h√£y)",
            "vorsichtig (c·∫©n th·∫≠n)",
          ],
        },
        {
          german:
            "Auf der A7 zwischen G√∂ttingen und Hannover stehen Sie 12 Kilometer Stau.",
          vietnamese:
            "Tr√™n ƒë∆∞·ªùng A7 gi·ªØa G√∂ttingen v√† Hannover, qu√Ω v·ªã s·∫Ω g·∫∑p ph·∫£i k·∫πt xe d√†i 12 kilomet.",
          analysis:
            "Auf der A7... (1) + stehen (V2) + Sie (3) + 12 Kilometer Stau (Akk)",
          structure: "C·ª•m n∆°i ch·ªën + ƒê·ªông t·ª´ + Ch·ªß ng·ªØ + T√¢n ng·ªØ",
          words: [
            "Auf der A7 (Tr√™n ƒë∆∞·ªùng A7)",
            "stehen (ƒë·ª©ng/g·∫∑p ph·∫£i)",
            "Sie (qu√Ω v·ªã)",
            "12 Kilometer Stau (12km k·∫πt xe)",
          ],
        },
        {
          german: "Hallo!",
          vietnamese: "Ch√†o!",
          analysis: "Th√°n t·ª´ ch√†o h·ªèi",
          structure: "Interjection - Th√°n t·ª´",
          words: ["Hallo (Ch√†o - th√°n t·ª´)"],
        },
        {
          german: "Herr Kranz, hier ist Schwester Renate.",
          vietnamese: "√îng Kranz, ƒë√¢y l√† y t√° Renate.",
          analysis:
            "Herr Kranz (x∆∞ng h√¥) + hier (1) + ist (V2) + Schwester Renate (3)",
          structure: "X∆∞ng h√¥ + Tr·∫°ng t·ª´ + ƒê·ªông t·ª´ + Ch·ªß ng·ªØ",
          words: [
            "Herr Kranz (√îng Kranz)",
            "hier (ƒë√¢y)",
            "ist (l√†)",
            "Schwester Renate (Y t√° Renate)",
          ],
        },
        {
          german: "Ich rufe im Auftrag von Dr. Fahrenheit an.",
          vietnamese: "T√¥i g·ªçi ƒëi·ªán thay m·∫∑t cho B√°c sƒ© Fahrenheit.",
          analysis:
            "Ich (1) + rufe...an (V2 t√°ch r·ªùi) + im Auftrag von Dr. Fahrenheit (Mo)",
          structure: "Ch·ªß ng·ªØ + ƒê·ªông t·ª´ t√°ch r·ªùi + C√°ch th·ª©c",
          words: [
            "Ich (T√¥i)",
            "rufe...an (g·ªçi ƒëi·ªán)",
            "im Auftrag von (thay m·∫∑t cho)",
            "Dr. Fahrenheit (B√°c sƒ© Fahrenheit)",
          ],
        },
        {
          german: "Er kann erst um 12:30 Uhr in seine Praxis kommen.",
          vietnamese: "√îng ·∫•y ch·ªâ c√≥ th·ªÉ ƒë·∫øn ph√≤ng kh√°m c·ªßa m√¨nh l√∫c 12:30.",
          analysis:
            "Er (1) + kann (V2) + erst + um 12:30 Uhr (Te) + in seine Praxis (Lo) + kommen (Inf)",
          structure:
            "Ch·ªß ng·ªØ + ƒê·ªông t·ª´ khi·∫øm khuy·∫øt + B·ªï nghƒ©a + Th·ªùi gian + N∆°i ch·ªën + ƒê·ªông t·ª´ nguy√™n m·∫´u",
          words: [
            "Er (√îng ·∫•y)",
            "kann (c√≥ th·ªÉ)",
            "erst (ch·ªâ)",
            "um 12:30 Uhr (l√∫c 12:30)",
            "in seine Praxis (ƒë·∫øn ph√≤ng kh√°m)",
          ],
        },
        {
          german: "K√∂nnten Sie Ihren Termin um 13 Uhr machen?",
          vietnamese: "√îng c√≥ th·ªÉ ƒë·∫∑t cu·ªôc h·∫πn l√∫c 13 gi·ªù ƒë∆∞·ª£c kh√¥ng?",
          analysis:
            "K√∂nnten (V1) + Sie (1) + Ihren Termin (Akk) + um 13 Uhr (Te) + machen (Inf)",
          structure:
            "ƒê·ªông t·ª´ khi·∫øm khuy·∫øt l·ªãch s·ª± + Ch·ªß ng·ªØ + T√¢n ng·ªØ + Th·ªùi gian + ƒê·ªông t·ª´ nguy√™n m·∫´u",
          words: [
            "K√∂nnten (C√≥ th·ªÉ - l·ªãch s·ª±)",
            "Sie (√¥ng)",
            "Ihren Termin (cu·ªôc h·∫πn)",
            "um 13 Uhr (l√∫c 13h)",
            "machen (ƒë·∫∑t)",
          ],
        },
        {
          german: "Rufen Sie mich bitte zur√ºck.",
          vietnamese: "Xin √¥ng h√£y g·ªçi l·∫°i cho t√¥i.",
          analysis:
            "Rufen...zur√ºck (V1 t√°ch r·ªùi) + Sie (1) + mich (Akk) + bitte",
          structure:
            "ƒê·ªông t·ª´ t√°ch r·ªùi m·ªánh l·ªánh + Ch·ªß ng·ªØ + T√¢n ng·ªØ + Tr·∫°ng t·ª´ l·ªãch s·ª±",
          words: [
            "Rufen...zur√ºck (g·ªçi l·∫°i)",
            "Sie (√¥ng)",
            "mich (t√¥i - Akkusativ)",
            "bitte (xin h√£y)",
          ],
        },
        {
          german: "Hallo!",
          vietnamese: "Ch√†o!",
          analysis: "Th√°n t·ª´ ch√†o h·ªèi",
          structure: "Interjection",
          words: ["Hallo (Ch√†o)"],
        },
        {
          german:
            "Hier ist der Sportclub aus Sachsen mit Samstag ein Spieltag gegen die Wiesbadener geplant war.",
          vietnamese:
            "ƒê√¢y l√† c√¢u l·∫°c b·ªô th·ªÉ thao t·ª´ Sachsen - c√≥ tr·∫≠n ƒë·∫•u v·ªõi ƒë·ªôi Wiesbaden ƒë∆∞·ª£c l√™n k·∫ø ho·∫°ch v√†o th·ª© B·∫£y.",
          analysis:
            "Hier (1) + ist (V2) + der Sportclub... (3) + Relativsatz (c√≥ l·ªói c·∫•u tr√∫c)",
          structure:
            "Tr·∫°ng t·ª´ + ƒê·ªông t·ª´ + Ch·ªß ng·ªØ m·ªü r·ªông + M·ªánh ƒë·ªÅ quan h·ªá (l·ªói ng·ªØ ph√°p)",
          words: [
            "Hier (ƒê√¢y)",
            "ist (l√†)",
            "Sportclub (c√¢u l·∫°c b·ªô th·ªÉ thao)",
            "aus Sachsen (t·ª´ Sachsen)",
          ],
        },
        {
          german:
            "Er ist gewonnen f√ºr ein Spitzenspiel gegen die Wiesbadener geplant f√ºr, gewann mit 3 zu 1 in Hamburg.",
          vietnamese:
            "(C√¢u c√≥ l·ªói c·∫•u tr√∫c - c√≥ th·ªÉ mu·ªën n√≥i: H·ªç ƒë√£ th·∫Øng trong tr·∫≠n ƒë·∫•u quan tr·ªçng v·ªõi ƒë·ªôi Wiesbaden, th·∫Øng 3-1 ·ªü Hamburg)",
          analysis: "C√¢u c√≥ l·ªói ng·ªØ ph√°p nghi√™m tr·ªçng",
          structure: "C·∫•u tr√∫c kh√¥ng r√µ r√†ng do l·ªói ng·ªØ ph√°p",
          words: [
            "Er (H·ªç)",
            "gewonnen (ƒë√£ th·∫Øng - l·ªói c·∫•u tr√∫c)",
            "Spitzenspiel (tr·∫≠n ƒë·∫•u quan tr·ªçng)",
            "3 zu 1 (3-1)",
          ],
        },
        {
          german:
            "Aber am Ende kann dann doch der Sachsen-Team mit seinen Wiesbadener Gewinnen noch mit 3 zu 1.",
          vietnamese:
            "Nh∆∞ng cu·ªëi c√πng ƒë·ªôi Sachsen v·∫´n c√≥ th·ªÉ th·∫Øng v·ªõi t·ª∑ s·ªë 3-1.",
          analysis:
            "Aber + am Ende (1) + kann (V2) + dann doch + der Sachsen-Team (3) + gewinnen (Inf) + mit 3 zu 1",
          structure:
            "Li√™n t·ª´ + Th·ªùi gian + ƒê·ªông t·ª´ khi·∫øm khuy·∫øt + B·ªï nghƒ©a + Ch·ªß ng·ªØ + ƒê·ªông t·ª´ nguy√™n m·∫´u + K·∫øt qu·∫£",
          words: [
            "Aber (Nh∆∞ng)",
            "am Ende (cu·ªëi c√πng)",
            "kann (c√≥ th·ªÉ)",
            "Sachsen-Team (ƒë·ªôi Sachsen)",
            "mit 3 zu 1 (3-1)",
          ],
        },
        {
          german:
            "Das war unser kurzes Sport vier vor und bis hier nach Wiesbadener Geschichten bis 21 zu 21.",
          vietnamese:
            "ƒê√≥ l√† b·∫£n tin th·ªÉ thao ng·∫Øn c·ªßa ch√∫ng t√¥i... (ph·∫ßn sau kh√¥ng r√µ nghƒ©a do l·ªói c·∫•u tr√∫c)",
          analysis:
            "Das (1) + war (V2) + unser kurzes Sport + (ph·∫ßn c√≤n l·∫°i c√≥ l·ªói c·∫•u tr√∫c)",
          structure: "Ch·ªß ng·ªØ + ƒê·ªông t·ª´ + V·ªã ng·ªØ + (c·∫•u tr√∫c l·ªói)",
          words: [
            "Das (ƒê√≥)",
            "war (ƒë√£ l√†)",
            "unser kurzes Sport (b·∫£n tin th·ªÉ thao ng·∫Øn c·ªßa ch√∫ng t√¥i)",
          ],
        },
        {
          german: "Achtung, Achtung!",
          vietnamese: "Ch√∫ √Ω, ch√∫ √Ω!",
          analysis: "Th√°n t·ª´ c·∫£nh b√°o l·∫∑p l·∫°i",
          structure: "Interjection - Th√°n t·ª´ c·∫£nh b√°o",
          words: ["Achtung (Ch√∫ √Ω - th√°n t·ª´ c·∫£nh b√°o)"],
        },
        {
          german: "Hier spricht LH 2462 nach Helsinki muss umgeleitet werden.",
          vietnamese:
            "ƒê√¢y l√† th√¥ng b√°o: Chuy·∫øn bay LH 2462 ƒëi Helsinki ph·∫£i ƒë∆∞·ª£c chuy·ªÉn h∆∞·ªõng.",
          analysis:
            "Hier (1) + spricht (V2) + LH 2462... (3) + muss umgeleitet werden (b·ªã ƒë·ªông)",
          structure:
            "Tr·∫°ng t·ª´ + ƒê·ªông t·ª´ + Ch·ªß ng·ªØ + ƒê·ªông t·ª´ khi·∫øm khuy·∫øt + Qu√° kh·ª© ph√¢n t·ª´ + ƒê·ªông t·ª´ tr·ª£ b·ªã ƒë·ªông",
          words: [
            "Hier (ƒê√¢y)",
            "spricht (th√¥ng b√°o)",
            "LH 2462 (chuy·∫øn bay LH 2462)",
            "muss umgeleitet werden (ph·∫£i ƒë∆∞·ª£c chuy·ªÉn h∆∞·ªõng)",
          ],
        },
        {
          german:
            "Die Passagiere werden gebeten, sich am Informationsschalter 1 zu melden.",
          vietnamese:
            "C√°c h√†nh kh√°ch ƒë∆∞·ª£c y√™u c·∫ßu ƒë·∫øn b√°o c√°o t·∫°i qu·∫ßy th√¥ng tin s·ªë 1.",
          analysis:
            "Die Passagiere (1) + werden gebeten (V2 b·ªã ƒë·ªông) + sich...zu melden (Inf) + am Informationsschalter 1 (Lo)",
          structure:
            "Ch·ªß ng·ªØ + ƒê·ªông t·ª´ b·ªã ƒë·ªông + ƒê·ªãa ƒëi·ªÉm + ƒê·ªông t·ª´ ph·∫£n th√¢n + Infinitiv",
          words: [
            "Die Passagiere (C√°c h√†nh kh√°ch)",
            "werden gebeten (ƒë∆∞·ª£c y√™u c·∫ßu)",
            "sich melden (b√°o c√°o)",
            "Informationsschalter (qu·∫ßy th√¥ng tin)",
          ],
        },
        {
          german:
            "Letzter Aufruf f√ºr alle Passagiere des Lufthansaflugs LH 2598.",
          vietnamese:
            "L·ªùi g·ªçi cu·ªëi c√πng cho t·∫•t c·∫£ h√†nh kh√°ch c·ªßa chuy·∫øn bay Lufthansa LH 2598.",
          analysis:
            "Letzter Aufruf (ch·ªß ng·ªØ) + f√ºr alle Passagiere... (c·ª•m gi·ªõi t·ª´ b·ªï nghƒ©a)",
          structure:
            "Danh t·ª´ ch√≠nh + C·ª•m gi·ªõi t·ª´ b·ªï nghƒ©a (C√¢u danh t·ª´ - kh√¥ng c√≥ ƒë·ªông t·ª´)",
          words: [
            "Letzter Aufruf (L·ªùi g·ªçi cu·ªëi c√πng)",
            "f√ºr alle Passagiere (cho t·∫•t c·∫£ h√†nh kh√°ch)",
            "Lufthansaflugs LH 2598 (chuy·∫øn bay Lufthansa)",
          ],
        },
        {
          german:
            "Sie werden gebeten, sich sofort zum Flugsteig A12 zu begeben f√ºr Lufthansaflug 2298 nach Paris hat sich ge√§ndert.",
          vietnamese:
            "Qu√Ω v·ªã ƒë∆∞·ª£c y√™u c·∫ßu ngay l·∫≠p t·ª©c ƒëi ƒë·∫øn c·ª≠a l√™n m√°y bay A12. Chuy·∫øn bay Lufthansa 2298 ƒëi Paris ƒë√£ c√≥ thay ƒë·ªïi.",
          analysis:
            "Sie werden gebeten...zu begeben + f√ºr Lufthansaflug...hat sich ge√§ndert (2 c√¢u gh√©p sai)",
          structure:
            "Ch·ªß ng·ªØ + ƒê·ªông t·ª´ b·ªã ƒë·ªông + Infinitivkonstruktion + Th√¥ng tin b·ªï sung v·ªÅ chuy·∫øn bay kh√°c",
          words: [
            "Sie (Qu√Ω v·ªã)",
            "werden gebeten (ƒë∆∞·ª£c y√™u c·∫ßu)",
            "sofort (ngay l·∫≠p t·ª©c)",
            "zum Flugsteig A12 (ƒë·∫øn c·ª≠a A12)",
            "hat sich ge√§ndert (ƒë√£ thay ƒë·ªïi)",
          ],
        },
        {
          german: "Das neue Flugsteig ist A15.",
          vietnamese: "C·ª≠a l√™n m√°y bay m·ªõi l√† A15.",
          analysis: "Das neue Flugsteig (1) + ist (V2) + A15 (v·ªã ng·ªØ)",
          structure: "Ch·ªß ng·ªØ + ƒê·ªông t·ª´ sein + V·ªã ng·ªØ",
          words: [
            "Das neue Flugsteig (C·ª≠a l√™n m√°y bay m·ªõi)",
            "ist (l√†)",
            "A15 (A15)",
          ],
        },
      ];

      // App state
      let currentIndex = 0;
      let correctCount = 0;
      let totalAnswered = 0;
      let startTime = null;
      let timerInterval = null;
      let timeLimit = 4 * 60; // 4 minutes
      let timeRemaining = timeLimit;
      let isStarted = false;

      // Initialize
      function init() {
        updateDisplay();
      }

      // Start practice
      function startPractice() {
        isStarted = true;
        currentIndex = 0;
        correctCount = 0;
        totalAnswered = 0;
        timeRemaining = timeLimit;
        startTime = new Date();

        document.getElementById("start-screen").style.display = "none";
        document.getElementById("practice-screen").style.display = "block";

        startTimer();
        loadCurrentSentence();
      }

      // Start timer
      function startTimer() {
        timerInterval = setInterval(() => {
          timeRemaining--;
          updateTimerDisplay();

          if (timeRemaining <= 0) {
            endPractice();
          }
        }, 1000);
      }

      // Update timer display
      function updateTimerDisplay() {
        const minutes = Math.floor(timeRemaining / 60);
        const seconds = timeRemaining % 60;
        const timeStr = `${minutes.toString().padStart(2, "0")}:${seconds
          .toString()
          .padStart(2, "0")}`;

        document.getElementById("timer").textContent = timeStr;

        const timerBox = document.getElementById("timer-box");
        if (timeRemaining <= 30) {
          timerBox.classList.add("timer-warning");
        } else {
          timerBox.classList.remove("timer-warning");
        }
      }

      // Load current sentence
      function loadCurrentSentence() {
        if (currentIndex >= sentences.length) {
          endPractice();
          return;
        }

        const sentence = sentences[currentIndex];
        document.getElementById("sentence-display").textContent =
          sentence.german;
        document.getElementById("sentence-counter").textContent = `${
          currentIndex + 1
        } / ${sentences.length}`;

        // Update progress
        const progress = ((currentIndex + 1) / sentences.length) * 100;
        document.getElementById("progress").style.width = `${progress}%`;
        document.getElementById("progress").textContent = `${Math.round(
          progress
        )}%`;

        // Show control buttons
        document.getElementById("speak-btn").style.display = "inline-block";
        document.getElementById("understand-btn").style.display =
          "inline-block";
        document.getElementById("not-understand-btn").style.display =
          "inline-block";
        document.getElementById("next-btn").style.display = "none";
        document.getElementById("answer-section").classList.remove("show");

        // Auto speak
        setTimeout(() => speakGerman(), 500);
      }

      // Speak German sentence
      function speakGerman() {
        if ("speechSynthesis" in window) {
          const sentence = sentences[currentIndex];
          speechSynthesis.cancel();

          const utterance = new SpeechSynthesisUtterance(sentence.german);
          utterance.lang = "de-DE";
          utterance.rate = 0.7;
          utterance.pitch = 1.0;
          utterance.volume = 1.0;
          speechSynthesis.speak(utterance);
        }
      }

      // Mark answer
      function markAnswer(understood) {
        totalAnswered++;
        if (understood) {
          correctCount++;
        }

        // Update stats
        document.getElementById("correct-count").textContent = correctCount;
        const accuracy =
          totalAnswered > 0
            ? Math.round((correctCount / totalAnswered) * 100)
            : 0;
        document.getElementById("accuracy").textContent = `${accuracy}%`;

        // Show answer
        showAnswer();

        // Update buttons
        document.getElementById("understand-btn").style.display = "none";
        document.getElementById("not-understand-btn").style.display = "none";
        document.getElementById("next-btn").style.display = "inline-block";
      }

      // Show answer with analysis
      function showAnswer() {
        const sentence = sentences[currentIndex];

        document.getElementById("german-text").textContent = sentence.german;
        document.getElementById("structure-analysis").innerHTML = `
                <p><strong>üìù D·ªãch nghƒ©a:</strong> ${sentence.vietnamese}</p>
                <p><strong>üîç Ph√¢n t√≠ch:</strong> ${sentence.analysis}</p>
                <p><strong>‚öôÔ∏è C·∫•u tr√∫c:</strong> ${sentence.structure}</p>
            `;

        const wordAnalysis = document.getElementById("word-analysis");
        wordAnalysis.innerHTML = "";
        sentence.words.forEach((word) => {
          const tag = document.createElement("span");
          tag.className = "word-tag";
          tag.textContent = word;
          wordAnalysis.appendChild(tag);
        });

        document.getElementById("answer-section").classList.add("show");
      }

      // Next sentence
      function nextSentence() {
        currentIndex++;
        loadCurrentSentence();
      }

      // End practice
      function endPractice() {
        if (timerInterval) {
          clearInterval(timerInterval);
        }

        const totalTime = Math.floor((new Date() - startTime) / 1000);
        const minutes = Math.floor(totalTime / 60);
        const seconds = totalTime % 60;
        const timeStr = `${minutes.toString().padStart(2, "0")}:${seconds
          .toString()
          .padStart(2, "0")}`;

        const finalAccuracy =
          totalAnswered > 0
            ? Math.round((correctCount / totalAnswered) * 100)
            : 0;

        // Update final stats
        document.getElementById("final-correct").textContent = correctCount;
        document.getElementById("final-total").textContent = totalAnswered;
        document.getElementById(
          "final-accuracy"
        ).textContent = `${finalAccuracy}%`;
        document.getElementById("final-time").textContent = timeStr;

        // Determine result
        let resultEmoji, resultTitle, resultMessage;
        if (finalAccuracy >= 80) {
          resultEmoji = "üèÜ";
          resultTitle = "Xu·∫•t s·∫Øc!";
          resultMessage = `B·∫°n hi·ªÉu ${correctCount}/${totalAnswered} c√¢u (${finalAccuracy}%). Tuy·ªát v·ªùi!`;
        } else if (finalAccuracy >= 60) {
          resultEmoji = "üëç";
          resultTitle = "T·ªët l·∫Øm!";
          resultMessage = `B·∫°n hi·ªÉu ${correctCount}/${totalAnswered} c√¢u (${finalAccuracy}%). Ti·∫øp t·ª•c luy·ªán t·∫≠p!`;
        } else {
          resultEmoji = "üìö";
          resultTitle = "C·∫ßn luy·ªán th√™m!";
          resultMessage = `B·∫°n hi·ªÉu ${correctCount}/${totalAnswered} c√¢u (${finalAccuracy}%). ƒê·ª´ng n·∫£n l√≤ng!`;
        }

        document.getElementById("result-emoji").textContent = resultEmoji;
        document.getElementById("result-title").textContent = resultTitle;
        document.getElementById("result-message").textContent = resultMessage;

        // Show completion screen
        document.getElementById("practice-screen").style.display = "none";
        document.getElementById("completion-screen").classList.add("show");
      }

      // Show preview
      function showPreview() {
        let html = "";
        sentences.forEach((sentence, index) => {
          html += `
                    <div style="background: white; border-radius: 10px; padding: 20px; margin-bottom: 15px; border: 1px solid #ddd;">
                        <div style="font-weight: bold; font-size: 1.1em; color: #667eea; margin-bottom: 10px;">
                            <span style="background: #667eea; color: white; padding: 5px 10px; border-radius: 15px; margin-right: 10px; font-size: 0.9em;">${
                              index + 1
                            }</span>
                            ${sentence.german}
                        </div>
                        <div style="color: #666; margin-bottom: 8px;">
                            <strong>üìù Nghƒ©a:</strong> ${sentence.vietnamese}
                        </div>
                        <div style="color: #888; font-size: 0.9em;">
                            <strong>üîç C·∫•u tr√∫c:</strong> ${sentence.structure}
                        </div>
                    </div>
                `;
        });

        document.getElementById("preview-content").innerHTML = html;
        document.getElementById("start-screen").style.display = "none";
        document.getElementById("preview-screen").classList.add("show");
      }

      // Hide preview
      function hidePreview() {
        document.getElementById("preview-screen").classList.remove("show");
        document.getElementById("start-screen").style.display = "block";
      }

      // Hide preview and start
      function hidePreviewAndStart() {
        document.getElementById("preview-screen").classList.remove("show");
        startPractice();
      }

      // Reset practice
      function resetPractice() {
        currentIndex = 0;
        correctCount = 0;
        totalAnswered = 0;
        timeRemaining = timeLimit;
        isStarted = false;

        if (timerInterval) {
          clearInterval(timerInterval);
        }

        // Reset UI
        document.getElementById("completion-screen").classList.remove("show");
        document.getElementById("start-screen").style.display = "block";
        document.getElementById("practice-screen").style.display = "none";
      }

      // Update display
      function updateDisplay() {
        if (!isStarted) {
          document.getElementById("sentence-display").textContent =
            'Nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ b·∫Øt ƒë·∫ßu luy·ªán t·∫≠p';
        }
      }

      // Keyboard shortcuts
      document.addEventListener("keydown", function (e) {
        if (!isStarted) return;

        switch (e.key) {
          case " ":
            e.preventDefault();
            speakGerman();
            break;
          case "1":
            e.preventDefault();
            if (
              document.getElementById("understand-btn").style.display !== "none"
            ) {
              markAnswer(true);
            }
            break;
          case "2":
            e.preventDefault();
            if (
              document.getElementById("not-understand-btn").style.display !==
              "none"
            ) {
              markAnswer(false);
            }
            break;
          case "Enter":
            e.preventDefault();
            if (document.getElementById("next-btn").style.display !== "none") {
              nextSentence();
            }
            break;
        }
      });

      // Initialize when page loads
      window.onload = init;
    </script>
  </body>
</html>
