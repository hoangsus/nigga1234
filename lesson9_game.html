<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>
      Tr√≤ ch∆°i Bu·ªïi 3 - T·ª´ v·ª±ng gia ƒë√¨nh v√† s·ªë ƒë·∫øm (N√¢ng cao + Luy·ªán nghe n√≥i)
    </title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .header {
        text-align: center;
        margin-bottom: 30px;
      }

      .header h1 {
        font-size: 2.5em;
        color: #4a47a3;
        margin-bottom: 10px;
      }

      .subtitle {
        font-size: 1.2em;
        color: #666;
        margin-bottom: 20px;
      }

      .back-to-index {
        position: fixed;
        bottom: 30px;
        right: 30px;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        border-radius: 50px;
        padding: 15px 25px;
        font-size: 1em;
        font-weight: bold;
        cursor: pointer;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
        transition: all 0.3s ease;
        opacity: 0;
        visibility: hidden;
        transform: translateY(100px);
        z-index: 1000;
        text-decoration: none;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .back-to-index.visible {
        opacity: 1;
        visibility: visible;
        transform: translateY(0);
      }

      .back-to-index:hover {
        background: linear-gradient(135deg, #5a6fd8 0%, #6a42a0 100%);
        transform: translateY(-5px);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.3);
      }

      .game-menu {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .game-card {
        background: linear-gradient(135deg, #f8f9ff 0%, #e3f2fd 100%);
        border: 2px solid #2196f3;
        border-radius: 15px;
        padding: 25px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .game-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        border-color: #1976d2;
      }

      .game-card.active {
        border-color: #4caf50;
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
      }

      .game-card.new {
        border-color: #ff9800;
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
      }

      .game-card.speaking {
        border-color: #e91e63;
        background: linear-gradient(135deg, #fce4ec 0%, #f8bbd9 100%);
      }

      .new-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #ff5722;
        color: white;
        padding: 4px 8px;
        border-radius: 10px;
        font-size: 0.7em;
        font-weight: bold;
      }

      .speaking-badge {
        position: absolute;
        top: 10px;
        right: 10px;
        background: #e91e63;
        color: white;
        padding: 4px 8px;
        border-radius: 10px;
        font-size: 0.7em;
        font-weight: bold;
      }

      .game-icon {
        font-size: 3em;
        margin-bottom: 15px;
      }

      .game-title {
        font-size: 1.3em;
        font-weight: bold;
        color: #1976d2;
        margin-bottom: 10px;
      }

      .game-description {
        color: #666;
        margin-bottom: 15px;
        line-height: 1.5;
      }

      .game-stats {
        font-size: 0.9em;
        color: #888;
      }

      .game-area {
        display: none;
        min-height: 400px;
      }

      .game-area.active {
        display: block;
      }

      .game-header {
        background: linear-gradient(135deg, #2196f3 0%, #1976d2 100%);
        color: white;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 15px;
      }

      .game-info h3 {
        margin-bottom: 5px;
      }

      .game-controls {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .btn {
        padding: 10px 20px;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .btn-primary {
        background: #4caf50;
        color: white;
      }

      .btn-primary:hover {
        background: #45a049;
      }

      .btn-secondary {
        background: #f44336;
        color: white;
      }

      .btn-secondary:hover {
        background: #da190b;
      }

      .btn-back {
        background: #ff9800;
        color: white;
      }

      .btn-back:hover {
        background: #e68900;
      }

      .btn:disabled {
        background: #ccc;
        cursor: not-allowed;
      }

      /* Audio status indicator */
      .audio-status {
        display: inline-flex;
        align-items: center;
        gap: 5px;
        margin-left: 10px;
        font-size: 0.9em;
        color: #666;
      }

      .audio-loading {
        color: #ff9800;
      }

      .audio-ready {
        color: #4caf50;
      }

      .audio-error {
        color: #f44336;
      }

      /* Game 1: Flash Cards */
      .flashcard {
        background: white;
        border: 3px solid #2196f3;
        border-radius: 15px;
        padding: 40px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
        min-height: 300px;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        position: relative;
      }

      .flashcard:hover {
        transform: scale(1.02);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.15);
      }

      .flashcard.flipped {
        background: #e8f5e8;
        border-color: #4caf50;
      }

      .card-content {
        font-size: 2em;
        margin-bottom: 20px;
        font-weight: bold;
      }

      .card-pronunciation {
        font-size: 1.2em;
        color: #8e44ad;
        margin-bottom: 15px;
        font-style: italic;
      }

      .card-translation {
        font-size: 1.5em;
        color: #27ae60;
        font-weight: bold;
      }

      .card-hint {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        color: #666;
        font-size: 0.9em;
      }

      /* Game 2: Memory Game */
      .memory-grid {
        display: grid;
        grid-template-columns: repeat(8, 1fr);
        gap: 10px;
        max-width: 800px;
        margin: 0 auto;
      }

      .memory-card {
        aspect-ratio: 1;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        cursor: pointer;
        transition: all 0.3s ease;
        color: white;
        font-weight: bold;
        position: relative;
        overflow: hidden;
        font-size: 0.7em;
      }

      .memory-card:hover {
        transform: scale(1.05);
      }

      .memory-card.flipped {
        background: white;
        color: #333;
        border: 2px solid #2196f3;
      }

      .memory-card.matched {
        background: #4caf50;
        color: white;
      }

      .memory-card-content {
        text-align: center;
        padding: 5px;
        word-break: break-word;
      }

      /* Game 3: Quiz */
      .quiz-question {
        background: #f8f9ff;
        border: 2px solid #2196f3;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
        text-align: center;
      }

      .quiz-question h3 {
        color: #1976d2;
        margin-bottom: 20px;
        font-size: 1.5em;
      }

      .quiz-options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-top: 20px;
      }

      .quiz-option {
        background: white;
        border: 2px solid #dee2e6;
        border-radius: 10px;
        padding: 15px;
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }

      .quiz-option:hover {
        border-color: #2196f3;
        background: #e3f2fd;
      }

      .quiz-option.correct {
        border-color: #4caf50;
        background: #e8f5e8;
        color: #155724;
      }

      .quiz-option.wrong {
        border-color: #f44336;
        background: #ffebee;
        color: #721c24;
      }

      .score-display {
        text-align: center;
        font-size: 1.2em;
        margin: 20px 0;
        padding: 15px;
        background: #f8f9fa;
        border-radius: 10px;
      }

      /* Category Game */
      .category-box {
        border: 2px dashed #ccc;
        padding: 20px;
        min-height: 120px;
        border-radius: 10px;
        background: #f9f9f9;
        transition: all 0.3s ease;
      }

      .category-box h4 {
        text-align: center;
        color: #666;
        margin-bottom: 10px;
        font-size: 1.1em;
      }

      .draggable-word {
        background: #667eea;
        color: white;
        padding: 8px 12px;
        border-radius: 20px;
        cursor: move;
        display: inline-block;
        margin: 5px;
        font-size: 0.9em;
        user-select: none;
        transition: all 0.3s ease;
      }

      .draggable-word:hover {
        background: #5a6fd8;
        transform: scale(1.05);
      }

      .category-word {
        background: #4caf50;
        color: white;
        padding: 5px 10px;
        margin: 2px;
        border-radius: 15px;
        display: inline-block;
        font-size: 0.8em;
      }

      /* Typing Game */
      .typing-input {
        width: 100%;
        padding: 15px;
        font-size: 1.2em;
        border: 2px solid #ddd;
        border-radius: 10px;
        margin: 20px 0;
        text-align: center;
      }

      .typing-input:focus {
        outline: none;
        border-color: #2196f3;
      }

      .typing-feedback {
        margin-top: 15px;
        font-size: 1.1em;
        font-weight: bold;
        text-align: center;
        padding: 10px;
        border-radius: 8px;
      }

      /* Speed Test Game */
      .speed-test-area {
        background: white;
        border: 2px solid #2196f3;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
      }

      .speed-test-word {
        font-size: 3em;
        text-align: center;
        margin: 30px 0;
        font-weight: bold;
        color: #1976d2;
      }

      .speed-test-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .stat-box {
        background: #f8f9ff;
        padding: 15px;
        border-radius: 10px;
        text-align: center;
        border: 2px solid #e3f2fd;
      }

      .stat-number {
        font-size: 2em;
        font-weight: bold;
        color: #1976d2;
      }

      .stat-label {
        color: #666;
        margin-top: 5px;
      }

      /* Word Builder Game */
      .word-builder-area {
        background: white;
        border: 2px solid #2196f3;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
      }

      .scrambled-letters {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
        margin: 20px 0;
      }

      .letter-tile {
        background: #667eea;
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.5em;
        font-weight: bold;
        transition: all 0.3s ease;
        user-select: none;
      }

      .letter-tile:hover {
        background: #5a6fd8;
        transform: scale(1.1);
      }

      .letter-tile.used {
        background: #ccc;
        cursor: not-allowed;
        transform: scale(0.9);
      }

      .word-builder-input {
        width: 100%;
        padding: 20px;
        font-size: 1.5em;
        text-align: center;
        border: 3px solid #ddd;
        border-radius: 10px;
        margin: 20px 0;
        letter-spacing: 3px;
        text-transform: lowercase;
      }

      .word-builder-input:focus {
        outline: none;
        border-color: #2196f3;
      }

      /* Sentence Builder Game */
      .sentence-builder-area {
        background: white;
        border: 2px solid #2196f3;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
      }

      .sentence-prompt {
        background: #f8f9ff;
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 20px;
        text-align: center;
        font-size: 1.2em;
        color: #1976d2;
      }

      .word-bank {
        display: flex;
        justify-content: center;
        flex-wrap: wrap;
        gap: 10px;
        margin: 20px 0;
        padding: 20px;
        background: #f0f0f0;
        border-radius: 10px;
      }

      .word-chip {
        background: #4caf50;
        color: white;
        padding: 10px 15px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 1em;
        transition: all 0.3s ease;
        user-select: none;
      }

      .word-chip:hover {
        background: #45a049;
        transform: scale(1.05);
      }

      .word-chip.used {
        background: #ccc;
        cursor: not-allowed;
      }

      .sentence-builder-drop {
        min-height: 60px;
        border: 2px dashed #ddd;
        border-radius: 10px;
        padding: 15px;
        margin: 20px 0;
        display: flex;
        flex-wrap: wrap;
        gap: 5px;
        align-items: center;
      }

      /* Audio fallback display */
      .audio-fallback {
        background: #f0f8ff;
        border: 2px solid #2196f3;
        border-radius: 10px;
        padding: 20px;
        margin: 15px 0;
        text-align: center;
      }

      .audio-fallback h4 {
        color: #1976d2;
        margin-bottom: 10px;
      }

      .pronunciation-display {
        font-size: 1.3em;
        color: #8e44ad;
        font-weight: bold;
        margin: 10px 0;
      }

      /* Audio Modal */
      .audio-modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        z-index: 2000;
        justify-content: center;
        align-items: center;
      }

      .modal-content {
        background: white;
        padding: 30px;
        border-radius: 15px;
        max-width: 80%;
        text-align: center;
      }

      .modal-content h2 {
        margin-bottom: 15px;
        color: #4a47a3;
      }

      .modal-content p {
        margin-bottom: 20px;
        color: #666;
      }

      .enable-audio-btn {
        background: #4caf50;
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        font-size: 1.1em;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .enable-audio-btn:hover {
        background: #45a049;
      }

      /* Listening Challenge Game - NEW */
      .listening-challenge-area {
        background: white;
        border: 2px solid #2196f3;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
        text-align: center;
      }

      .audio-wave {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 5px;
        margin: 30px 0;
        height: 80px;
      }

      .wave-bar {
        width: 8px;
        background: #2196f3;
        border-radius: 4px;
        animation: wave 1.5s ease-in-out infinite;
        transform-origin: bottom;
      }

      .wave-bar:nth-child(1) {
        animation-delay: 0s;
        height: 20px;
      }
      .wave-bar:nth-child(2) {
        animation-delay: 0.1s;
        height: 40px;
      }
      .wave-bar:nth-child(3) {
        animation-delay: 0.2s;
        height: 60px;
      }
      .wave-bar:nth-child(4) {
        animation-delay: 0.3s;
        height: 40px;
      }
      .wave-bar:nth-child(5) {
        animation-delay: 0.4s;
        height: 20px;
      }
      .wave-bar:nth-child(6) {
        animation-delay: 0.5s;
        height: 50px;
      }
      .wave-bar:nth-child(7) {
        animation-delay: 0.6s;
        height: 30px;
      }

      @keyframes wave {
        0%,
        100% {
          transform: scaleY(1);
        }
        50% {
          transform: scaleY(2);
        }
      }

      .listening-progress {
        background: #f0f0f0;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: #ddd;
        border-radius: 10px;
        overflow: hidden;
        margin: 10px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #4caf50, #45a049);
        width: 0%;
        transition: width 0.5s ease;
      }

      .difficulty-badge {
        display: inline-block;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.8em;
        font-weight: bold;
        margin: 5px;
      }

      .difficulty-easy {
        background: #4caf50;
        color: white;
      }
      .difficulty-medium {
        background: #ff9800;
        color: white;
      }
      .difficulty-hard {
        background: #f44336;
        color: white;
      }

      /* Speaking Practice Game - NEW */
      .speaking-practice-area {
        background: white;
        border: 2px solid #e91e63;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
        text-align: center;
      }

      .microphone-area {
        margin: 30px 0;
        position: relative;
      }

      .mic-button {
        width: 120px;
        height: 120px;
        border-radius: 50%;
        border: none;
        background: linear-gradient(135deg, #e91e63, #ad1457);
        color: white;
        font-size: 3em;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 10px 25px rgba(233, 30, 99, 0.3);
      }

      .mic-button:hover {
        transform: scale(1.1);
        box-shadow: 0 15px 35px rgba(233, 30, 99, 0.4);
      }

      .mic-button.recording {
        background: #f44336;
        animation: pulse 1.5s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
        100% {
          transform: scale(1);
        }
      }

      .recording-indicator {
        position: absolute;
        top: -20px;
        left: 50%;
        transform: translateX(-50%);
        background: #f44336;
        color: white;
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .recording-indicator.active {
        opacity: 1;
      }

      .speaking-feedback {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
        min-height: 80px;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-direction: column;
      }

      .accuracy-meter {
        width: 100%;
        max-width: 300px;
        margin: 20px auto;
      }

      .accuracy-label {
        display: flex;
        justify-content: space-between;
        margin-bottom: 10px;
        font-size: 0.9em;
        color: #666;
      }

      .accuracy-bar {
        width: 100%;
        height: 25px;
        background: #f0f0f0;
        border-radius: 15px;
        overflow: hidden;
        position: relative;
      }

      .accuracy-fill {
        height: 100%;
        border-radius: 15px;
        transition: all 0.8s ease;
        position: relative;
      }

      .accuracy-excellent {
        background: linear-gradient(90deg, #4caf50, #66bb6a);
      }
      .accuracy-good {
        background: linear-gradient(90deg, #8bc34a, #aed581);
      }
      .accuracy-fair {
        background: linear-gradient(90deg, #ffc107, #ffecb3);
      }
      .accuracy-poor {
        background: linear-gradient(90deg, #ff5722, #ff8a65);
      }

      .voice-comparison {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
        margin: 20px 0;
      }

      .voice-sample {
        background: #f8f9ff;
        border: 2px solid #e3f2fd;
        border-radius: 10px;
        padding: 15px;
        text-align: center;
      }

      .voice-sample h4 {
        color: #1976d2;
        margin-bottom: 10px;
      }

      .voice-sample button {
        background: #2196f3;
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .voice-sample button:hover {
        background: #1976d2;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .container {
          padding: 20px;
          margin: 10px;
        }

        .header h1 {
          font-size: 2em;
        }

        .memory-grid {
          grid-template-columns: repeat(6, 1fr);
          gap: 8px;
        }

        .quiz-options {
          grid-template-columns: 1fr;
        }

        .back-to-index {
          bottom: 20px;
          right: 20px;
          padding: 12px 20px;
          font-size: 0.9em;
        }

        .game-menu {
          grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        }

        .speed-test-stats {
          grid-template-columns: repeat(2, 1fr);
        }

        .voice-comparison {
          grid-template-columns: 1fr;
        }

        .mic-button {
          width: 100px;
          height: 100px;
          font-size: 2.5em;
        }
      }

      @media (max-width: 480px) {
        .memory-grid {
          grid-template-columns: repeat(4, 1fr);
        }

        .flashcard {
          padding: 20px;
          min-height: 250px;
        }

        .card-content {
          font-size: 1.5em;
        }

        .back-to-index {
          padding: 10px 15px;
          font-size: 0.8em;
        }

        .memory-card {
          font-size: 0.6em;
        }

        .speed-test-word {
          font-size: 2em;
        }

        .speed-test-stats {
          grid-template-columns: 1fr;
        }

        .mic-button {
          width: 80px;
          height: 80px;
          font-size: 2em;
        }
      }
    </style>
  </head>
  <body>
    <!-- Audio Activation Modal -->
    <div id="audioModal" class="audio-modal">
      <div class="modal-content">
        <h2>üîä K√≠ch ho·∫°t √¢m thanh</h2>
        <p>
          ƒê·ªÉ tr·∫£i nghi·ªám ƒë·∫ßy ƒë·ªß tr√≤ ch∆°i, vui l√≤ng b·∫•m n√∫t b√™n d∆∞·ªõi ƒë·ªÉ k√≠ch ho·∫°t
          √¢m thanh.
        </p>
        <button class="enable-audio-btn" onclick="enableAudio()">
          K√≠ch ho·∫°t √¢m thanh
        </button>
      </div>
    </div>

    <div class="container">
      <div class="header">
        <h1>üéÆ Tr√≤ ch∆°i Bu·ªïi 3 - Gia ƒë√¨nh v√† S·ªë ƒë·∫øm</h1>
        <div class="subtitle">
          T·ª´ v·ª±ng gia ƒë√¨nh, s·ªë ƒë·∫øm v√† th√¥ng tin c√° nh√¢n - 11 tr√≤ ch∆°i luy·ªán t·∫≠p
          th√∫ v·ªã
        </div>
      </div>

      <div class="game-menu" id="gameMenu">
        <div class="game-card" onclick="startGame('flashcards')">
          <div class="game-icon">üÉè</div>
          <div class="game-title">Th·∫ª ghi nh·ªõ</div>
          <div class="game-description">
            L·∫≠t th·∫ª ƒë·ªÉ xem nghƒ©a ti·∫øng Vi·ªát. H·ªçc t·ª´ v·ª±ng gia ƒë√¨nh v√† s·ªë ƒë·∫øm m·ªôt
            c√°ch tr·ª±c quan.
          </div>
          <div class="game-stats">üìö 78 t·ª´ ‚Ä¢ ‚è±Ô∏è 30-35 ph√∫t</div>
        </div>

        <div class="game-card" onclick="startGame('memory')">
          <div class="game-icon">üß†</div>
          <div class="game-title">Tr√≤ ch∆°i ghi nh·ªõ</div>
          <div class="game-description">
            T√¨m c·∫∑p t·ª´ ti·∫øng ƒê·ª©c v√† nghƒ©a ti·∫øng Vi·ªát. R√®n luy·ªán tr√≠ nh·ªõ v·ªõi t·ª´
            v·ª±ng gia ƒë√¨nh.
          </div>
          <div class="game-stats">üéØ 20 c·∫∑p ‚Ä¢ ‚è±Ô∏è 25 ph√∫t</div>
        </div>

        <div class="game-card" onclick="startGame('quiz')">
          <div class="game-icon">‚ùì</div>
          <div class="game-title">C√¢u h·ªèi tr·∫Øc nghi·ªám</div>
          <div class="game-description">
            Tr·∫£ l·ªùi c√¢u h·ªèi v·ªÅ t·ª´ v·ª±ng gia ƒë√¨nh, s·ªë ƒë·∫øm v√† th√¥ng tin c√° nh√¢n.
          </div>
          <div class="game-stats">üìù 78 c√¢u ‚Ä¢ ‚è±Ô∏è 45 ph√∫t</div>
        </div>

        <div class="game-card" onclick="startGame('listening')">
          <div class="game-icon">üéß</div>
          <div class="game-title">Luy·ªán nghe</div>
          <div class="game-description">
            Nghe t·ª´ ti·∫øng ƒê·ª©c v√† ch·ªçn nghƒ©a ƒë√∫ng. R√®n luy·ªán kh·∫£ nƒÉng nh·∫≠n bi·∫øt
            √¢m thanh.
          </div>
          <div class="game-stats">üîä 78 t·ª´ ‚Ä¢ ‚è±Ô∏è 40 ph√∫t</div>
        </div>

        <div class="game-card" onclick="startGame('category')">
          <div class="game-icon">üè∑Ô∏è</div>
          <div class="game-title">Ph√¢n lo·∫°i t·ª´ v·ª±ng</div>
          <div class="game-description">
            K√©o th·∫£ t·ª´ v√†o ƒë√∫ng nh√≥m. H·ªçc c√°ch ph√¢n lo·∫°i gia ƒë√¨nh, s·ªë ƒë·∫øm v√†
            th√¥ng tin c√° nh√¢n.
          </div>
          <div class="game-stats">üéØ 78 t·ª´ / 8 nh√≥m ‚Ä¢ ‚è±Ô∏è 30 ph√∫t</div>
        </div>

        <div class="game-card" onclick="startGame('typing')">
          <div class="game-icon">‚å®Ô∏è</div>
          <div class="game-title">G√µ t·ª´ v·ª±ng</div>
          <div class="game-description">
            Nghe t·ª´ ti·∫øng ƒê·ª©c v√† g√µ ch√≠nh x√°c. R√®n luy·ªán ch√≠nh t·∫£ t·ª´ v·ª±ng gia
            ƒë√¨nh.
          </div>
          <div class="game-stats">‚úçÔ∏è 78 t·ª´ ‚Ä¢ ‚è±Ô∏è 45 ph√∫t</div>
        </div>

        <div class="game-card new" onclick="startGame('speedtest')">
          <div class="new-badge">M·ªöI</div>
          <div class="game-icon">‚ö°</div>
          <div class="game-title">Ki·ªÉm tra t·ªëc ƒë·ªô</div>
          <div class="game-description">
            Tr·∫£ l·ªùi nhanh nghƒ©a c·ªßa t·ª´ ti·∫øng ƒê·ª©c. R√®n luy·ªán ph·∫£n x·∫° v·ªõi t·ª´ v·ª±ng
            gia ƒë√¨nh.
          </div>
          <div class="game-stats">üöÄ 60 gi√¢y ‚Ä¢ ‚è±Ô∏è 10 ph√∫t</div>
        </div>

        <div class="game-card new" onclick="startGame('wordbuilder')">
          <div class="new-badge">M·ªöI</div>
          <div class="game-icon">üß©</div>
          <div class="game-title">X·∫øp ch·ªØ c√°i</div>
          <div class="game-description">
            S·∫Øp x·∫øp c√°c ch·ªØ c√°i ƒë·ªÉ t·∫°o th√†nh t·ª´ ti·∫øng ƒê·ª©c. R√®n luy·ªán ch√≠nh t·∫£ v√†
            c·∫•u tr√∫c t·ª´.
          </div>
          <div class="game-stats">üî§ 78 t·ª´ ‚Ä¢ ‚è±Ô∏è 40 ph√∫t</div>
        </div>

        <div class="game-card new" onclick="startGame('sentencebuilder')">
          <div class="new-badge">M·ªöI</div>
          <div class="game-icon">üìù</div>
          <div class="game-title">Gh√©p c√¢u</div>
          <div class="game-description">
            S·∫Øp x·∫øp t·ª´ ƒë·ªÉ t·∫°o th√†nh c√¢u ƒë√∫ng ng·ªØ ph√°p v·ªÅ gia ƒë√¨nh v√† th√¥ng tin
            c√° nh√¢n.
          </div>
          <div class="game-stats">üéØ 25 c√¢u ‚Ä¢ ‚è±Ô∏è 30 ph√∫t</div>
        </div>

        <div
          class="game-card speaking"
          onclick="startGame('listeningchallenge')"
        >
          <div class="speaking-badge">NGHE</div>
          <div class="game-icon">üëÇ</div>
          <div class="game-title">Th·ª≠ th√°ch nghe</div>
          <div class="game-description">
            Luy·ªán nghe v·ªõi nhi·ªÅu m·ª©c ƒë·ªô kh√≥ khƒÉn. T·ª´ s·ªë ƒë·∫øm c∆° b·∫£n ƒë·∫øn t·ª´ v·ª±ng
            gia ƒë√¨nh n√¢ng cao.
          </div>
          <div class="game-stats">üéØ 78 t·ª´ / 3 m·ª©c ƒë·ªô ‚Ä¢ ‚è±Ô∏è 50 ph√∫t</div>
        </div>

        <div class="game-card speaking" onclick="startGame('speakingpractice')">
          <div class="speaking-badge">N√ìI</div>
          <div class="game-icon">üé§</div>
          <div class="game-title">Luy·ªán ph√°t √¢m</div>
          <div class="game-description">
            Thu √¢m gi·ªçng n√≥i v√† so s√°nh v·ªõi ph√°t √¢m chu·∫©n. C·∫£i thi·ªán k·ªπ nƒÉng
            ph√°t √¢m ti·∫øng ƒê·ª©c.
          </div>
          <div class="game-stats">üéôÔ∏è 78 t·ª´ ‚Ä¢ ‚è±Ô∏è 55 ph√∫t</div>
        </div>
      </div>

      <!-- Flashcards Game -->
      <div class="game-area" id="flashcardsGame">
        <div class="game-header">
          <div class="game-info">
            <h3>üÉè Th·∫ª ghi nh·ªõ</h3>
            <p>
              Th·∫ª <span id="currentCard">1</span> /
              <span id="totalCards">78</span>
            </p>
          </div>
          <div class="game-controls">
            <button class="btn btn-primary" onclick="prevCard()">
              ‚¨ÖÔ∏è Tr∆∞·ªõc
            </button>
            <button class="btn btn-primary" onclick="nextCard()">
              Ti·∫øp ‚û°Ô∏è
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="flashcard" id="flashcard" onclick="flipCard()">
          <div class="card-content" id="cardContent">Enkelin</div>
          <div class="card-pronunciation" id="cardPronunciation">
            […õ≈ã-k…ô-l…™n]
          </div>
          <div
            class="card-translation"
            id="cardTranslation"
            style="display: none"
          >
            ch√°u g√°i
          </div>
          <div class="card-hint">üí° B·∫•m ƒë·ªÉ xem nghƒ©a</div>
        </div>
      </div>

      <!-- Memory Game -->
      <div class="game-area" id="memoryGame">
        <div class="game-header">
          <div class="game-info">
            <h3>üß† Tr√≤ ch∆°i ghi nh·ªõ</h3>
            <p>
              ƒêi·ªÉm: <span id="memoryScore">0</span> ‚Ä¢ L∆∞·ª£t:
              <span id="memoryMoves">0</span> ‚Ä¢ C·∫∑p:
              <span id="memoryPairs">0</span>/20
            </p>
          </div>
          <div class="game-controls">
            <button class="btn btn-primary" onclick="resetMemory()">
              üîÑ Ch∆°i l·∫°i
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="memory-grid" id="memoryGrid">
          <!-- Memory cards will be generated by JavaScript -->
        </div>
      </div>

      <!-- Quiz Game -->
      <div class="game-area" id="quizGame">
        <div class="game-header">
          <div class="game-info">
            <h3>‚ùì C√¢u h·ªèi tr·∫Øc nghi·ªám</h3>
            <p>
              C√¢u <span id="currentQuestion">1</span> /
              <span id="totalQuestions">78</span>
            </p>
          </div>
          <div class="game-controls">
            <button
              class="btn btn-primary"
              onclick="nextQuestion()"
              id="nextBtn"
              style="display: none"
            >
              Ti·∫øp ‚û°Ô∏è
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="quiz-question" id="quizQuestion">
          <h3 id="questionText">T·ª´ "Enkelin" c√≥ nghƒ©a l√† g√¨?</h3>
          <div class="quiz-options" id="quizOptions">
            <!-- Options will be generated by JavaScript -->
          </div>
        </div>

        <div class="score-display" id="quizScore" style="display: none">
          ƒêi·ªÉm c·ªßa b·∫°n: <span id="finalScore">0</span>/78
        </div>
      </div>

      <!-- Listening Game -->
      <div class="game-area" id="listeningGame">
        <div class="game-header">
          <div class="game-info">
            <h3>üéß Luy·ªán nghe</h3>
            <p>
              T·ª´ <span id="currentListening">1</span> /
              <span id="totalListening">78</span>
            </p>
          </div>
          <div class="game-controls">
            <button class="btn btn-primary" onclick="playAudio()" id="playBtn">
              üîä Nghe l·∫°i
            </button>
            <button
              class="btn btn-primary"
              onclick="nextListening()"
              id="nextListeningBtn"
              style="display: none"
            >
              Ti·∫øp ‚û°Ô∏è
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="quiz-question">
          <h3>üéß Nghe v√† ch·ªçn nghƒ©a ƒë√∫ng:</h3>

          <div class="quiz-options" id="listeningOptions">
            <!-- Options will be generated by JavaScript -->
          </div>
        </div>

        <div class="score-display" id="listeningScore" style="display: none">
          ƒêi·ªÉm nghe: <span id="finalListeningScore">0</span>/78
        </div>
      </div>

      <!-- Category Game -->
      <div class="game-area" id="categoryGame">
        <div class="game-header">
          <div class="game-info">
            <h3>üè∑Ô∏è Ph√¢n lo·∫°i t·ª´ v·ª±ng</h3>
            <p>
              ƒêi·ªÉm: <span id="categoryScore">0</span> ‚Ä¢ C√≤n l·∫°i:
              <span id="remainingWords">78</span>
            </p>
          </div>
          <div class="game-controls">
            <button class="btn btn-primary" onclick="resetCategory()">
              üîÑ Ch∆°i l·∫°i
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div id="categoryContainer">
          <!-- Category game will be rendered here -->
        </div>
      </div>

      <!-- Typing Game -->
      <div class="game-area" id="typingGame">
        <div class="game-header">
          <div class="game-info">
            <h3>‚å®Ô∏è G√µ t·ª´ v·ª±ng</h3>
            <p>
              T·ª´ <span id="currentTyping">1</span> /
              <span id="totalTyping">78</span>
            </p>
          </div>
          <div class="game-controls">
            <button
              class="btn btn-primary"
              onclick="playTypingAudio()"
              id="playTypingBtn"
            >
              üîä Nghe l·∫°i
            </button>
            <button
              class="btn btn-primary"
              onclick="nextTyping()"
              id="nextTypingBtn"
              style="display: none"
            >
              Ti·∫øp ‚û°Ô∏è
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="quiz-question">
          <h3>‚å®Ô∏è Nghe v√† g√µ t·ª´ ti·∫øng ƒê·ª©c:</h3>
          <input
            type="text"
            id="typingInput"
            class="typing-input"
            placeholder="G√µ t·ª´ b·∫°n nghe ƒë∆∞·ª£c..."
          />
          <button
            class="btn btn-primary"
            onclick="checkTyping()"
            id="checkTypingBtn"
          >
            ‚úÖ Ki·ªÉm tra
          </button>
          <div id="typingFeedback" class="typing-feedback"></div>
        </div>

        <div class="score-display" id="typingScore" style="display: none">
          ƒêi·ªÉm g√µ t·ª´: <span id="finalTypingScore">0</span>/78
        </div>
      </div>

      <!-- Speed Test Game -->
      <div class="game-area" id="speedtestGame">
        <div class="game-header">
          <div class="game-info">
            <h3>‚ö° Ki·ªÉm tra t·ªëc ƒë·ªô</h3>
            <p id="speedTestStatus">S·∫µn s√†ng b·∫Øt ƒë·∫ßu?</p>
          </div>
          <div class="game-controls">
            <button
              class="btn btn-primary"
              onclick="startSpeedTest()"
              id="speedStartBtn"
            >
              üöÄ B·∫Øt ƒë·∫ßu
            </button>
            <button
              class="btn btn-primary"
              onclick="resetSpeedTest()"
              id="speedResetBtn"
              style="display: none"
            >
              üîÑ Ch∆°i l·∫°i
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="speed-test-area" id="speedTestArea">
          <div class="speed-test-word" id="speedTestWord">
            Nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ ch∆°i!
          </div>

          <div class="quiz-options" id="speedTestOptions" style="display: none">
            <!-- Options will be generated by JavaScript -->
          </div>

          <div class="speed-test-stats">
            <div class="stat-box">
              <div class="stat-number" id="speedScore">0</div>
              <div class="stat-label">ƒêi·ªÉm</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="speedTime">60</div>
              <div class="stat-label">Th·ªùi gian</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="speedCorrect">0</div>
              <div class="stat-label">ƒê√∫ng</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="speedWrong">0</div>
              <div class="stat-label">Sai</div>
            </div>
          </div>
        </div>
      </div>

      <!-- Word Builder Game -->
      <div class="game-area" id="wordbuilderGame">
        <div class="game-header">
          <div class="game-info">
            <h3>üß© X·∫øp ch·ªØ c√°i</h3>
            <p>
              T·ª´ <span id="currentWordBuilder">1</span> /
              <span id="totalWordBuilder">78</span>
            </p>
          </div>
          <div class="game-controls">
            <button
              class="btn btn-primary"
              onclick="checkWordBuilder()"
              id="checkWordBtn"
            >
              ‚úÖ Ki·ªÉm tra
            </button>
            <button
              class="btn btn-primary"
              onclick="nextWordBuilder()"
              id="nextWordBtn"
              style="display: none"
            >
              Ti·∫øp ‚û°Ô∏è
            </button>
            <button class="btn btn-secondary" onclick="clearWordBuilder()">
              üóëÔ∏è X√≥a
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="word-builder-area">
          <div class="quiz-question">
            <h3 id="wordBuilderPrompt">
              S·∫Øp x·∫øp ch·ªØ c√°i ƒë·ªÉ t·∫°o th√†nh t·ª´ c√≥ nghƒ©a: "ch√°u g√°i"
            </h3>

            <input
              type="text"
              id="wordBuilderInput"
              class="word-builder-input"
              placeholder="Nh·∫•p v√†o ch·ªØ c√°i ƒë·ªÉ x·∫øp t·ª´..."
              readonly
            />

            <div class="scrambled-letters" id="scrambledLetters">
              <!-- Letters will be generated by JavaScript -->
            </div>

            <div id="wordBuilderFeedback" class="typing-feedback"></div>
          </div>
        </div>

        <div class="score-display" id="wordBuilderScore" style="display: none">
          ƒêi·ªÉm x·∫øp ch·ªØ: <span id="finalWordBuilderScore">0</span>/78
        </div>
      </div>

      <!-- Sentence Builder Game -->
      <div class="game-area" id="sentencebuilderGame">
        <div class="game-header">
          <div class="game-info">
            <h3>üìù Gh√©p c√¢u</h3>
            <p>
              C√¢u <span id="currentSentence">1</span> /
              <span id="totalSentences">25</span>
            </p>
          </div>
          <div class="game-controls">
            <button
              class="btn btn-primary"
              onclick="checkSentence()"
              id="checkSentenceBtn"
            >
              ‚úÖ Ki·ªÉm tra
            </button>
            <button
              class="btn btn-primary"
              onclick="nextSentence()"
              id="nextSentenceBtn"
              style="display: none"
            >
              Ti·∫øp ‚û°Ô∏è
            </button>
            <button class="btn btn-secondary" onclick="clearSentence()">
              üóëÔ∏è X√≥a
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="sentence-builder-area">
          <div class="sentence-prompt" id="sentencePrompt">
            S·∫Øp x·∫øp c√°c t·ª´ ƒë·ªÉ t·∫°o th√†nh c√¢u: "Ch√°u g√°i t√¥i"
          </div>

          <div class="sentence-builder-drop" id="sentenceDropZone">
            <p style="color: #999">K√©o t·ª´ v√†o ƒë√¢y ƒë·ªÉ t·∫°o c√¢u...</p>
          </div>

          <div class="word-bank" id="wordBank">
            <!-- Words will be generated by JavaScript -->
          </div>

          <div id="sentenceFeedback" class="typing-feedback"></div>
        </div>

        <div class="score-display" id="sentenceScore" style="display: none">
          ƒêi·ªÉm gh√©p c√¢u: <span id="finalSentenceScore">0</span>/25
        </div>
      </div>

      <!-- Listening Challenge Game - NEW -->
      <div class="game-area" id="listeningchallengeGame">
        <div class="game-header">
          <div class="game-info">
            <h3>üëÇ Th·ª≠ th√°ch nghe</h3>
            <p>
              T·ª´ <span id="currentListeningChallenge">1</span> /
              <span id="totalListeningChallenge">78</span>
            </p>
          </div>
          <div class="game-controls">
            <button
              class="btn btn-primary"
              onclick="playListeningChallenge()"
              id="playListeningChallengeBtn"
            >
              üîä Ph√°t √¢m
            </button>
            <button
              class="btn btn-primary"
              onclick="nextListeningChallenge()"
              id="nextListeningChallengeBtn"
              style="display: none"
            >
              Ti·∫øp ‚û°Ô∏è
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="listening-challenge-area">
          <div class="difficulty-badge difficulty-easy" id="currentDifficulty">
            D·ªÖ
          </div>

          <div class="audio-wave" id="audioWave" style="display: none">
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
            <div class="wave-bar"></div>
          </div>

          <div class="listening-progress">
            <h4>üéØ Ti·∫øn ƒë·ªô theo m·ª©c ƒë·ªô</h4>
            <div>
              <div class="accuracy-label">
                <span>D·ªÖ</span>
                <span id="easyProgress">0/26</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="easyProgressBar"></div>
              </div>
            </div>
            <div>
              <div class="accuracy-label">
                <span>Trung b√¨nh</span>
                <span id="mediumProgress">0/26</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="mediumProgressBar"></div>
              </div>
            </div>
            <div>
              <div class="accuracy-label">
                <span>Kh√≥</span>
                <span id="hardProgress">0/26</span>
              </div>
              <div class="progress-bar">
                <div class="progress-fill" id="hardProgressBar"></div>
              </div>
            </div>
          </div>

          <div class="quiz-question">
            <h3 id="listeningChallengeQuestion">üéß Nghe v√† nh·∫≠n di·ªán t·ª´:</h3>
            <div class="quiz-options" id="listeningChallengeOptions">
              <!-- Options will be generated by JavaScript -->
            </div>
          </div>
        </div>

        <div
          class="score-display"
          id="listeningChallengeScore"
          style="display: none"
        >
          <h3>üèÜ K·∫øt qu·∫£ th·ª≠ th√°ch nghe</h3>
          <p>T·ªïng ƒëi·ªÉm: <span id="finalListeningChallengeScore">0</span>/780</p>
          <p>ƒê·ªô ch√≠nh x√°c: <span id="listeningAccuracy">0</span>%</p>
        </div>
      </div>

      <!-- Speaking Practice Game - NEW -->
      <div class="game-area" id="speakingpracticeGame">
        <div class="game-header">
          <div class="game-info">
            <h3>üé§ Luy·ªán ph√°t √¢m</h3>
            <p>
              T·ª´ <span id="currentSpeaking">1</span> /
              <span id="totalSpeaking">78</span>
            </p>
          </div>
          <div class="game-controls">
            <button
              class="btn btn-primary"
              onclick="playReferenceAudio()"
              id="playReferenceBtn"
            >
              üîä Nghe m·∫´u
            </button>
            <button
              class="btn btn-primary"
              onclick="nextSpeaking()"
              id="nextSpeakingBtn"
              style="display: none"
            >
              Ti·∫øp ‚û°Ô∏è
            </button>
            <button class="btn btn-back" onclick="backToMenu()">üè† Menu</button>
          </div>
        </div>

        <div class="speaking-practice-area">
          <div class="quiz-question">
            <h3 id="speakingPrompt">üé§ Ph√°t √¢m t·ª´: "Enkelin"</h3>
            <div class="card-pronunciation" id="speakingPronunciation">
              […õ≈ã-k…ô-l…™n]
            </div>
            <div class="card-translation" id="speakingTranslation">
              ch√°u g√°i
            </div>
          </div>

          <div class="microphone-area">
            <div class="recording-indicator" id="recordingIndicator">
              üî¥ ƒêang ghi √¢m...
            </div>
            <button
              class="mic-button"
              id="micButton"
              onclick="toggleRecording()"
            >
              üé§
            </button>
            <p style="margin-top: 15px; color: #666">Nh·∫•n ƒë·ªÉ b·∫Øt ƒë·∫ßu ghi √¢m</p>
          </div>

          <div
            class="voice-comparison"
            id="voiceComparison"
            style="display: none"
          >
            <div class="voice-sample">
              <h4>üîä √Çm thanh m·∫´u</h4>
              <button onclick="playReferenceAudio()">‚ñ∂Ô∏è Ph√°t</button>
            </div>
            <div class="voice-sample">
              <h4>üéôÔ∏è Ghi √¢m c·ªßa b·∫°n</h4>
              <button onclick="playUserRecording()" id="playUserBtn" disabled>
                ‚ñ∂Ô∏è Ph√°t
              </button>
            </div>
          </div>

          <div class="accuracy-meter" id="accuracyMeter" style="display: none">
            <div class="accuracy-label">
              <span>ƒê·ªô ch√≠nh x√°c ph√°t √¢m</span>
              <span id="accuracyPercentage">0%</span>
            </div>
            <div class="accuracy-bar">
              <div class="accuracy-fill" id="accuracyFill"></div>
            </div>
          </div>

          <div class="speaking-feedback" id="speakingFeedback">
            <p style="color: #666">Nh·∫•n n√∫t micro ƒë·ªÉ b·∫Øt ƒë·∫ßu luy·ªán ph√°t √¢m</p>
          </div>
        </div>

        <div class="score-display" id="speakingScore" style="display: none">
          <h3>üèÜ K·∫øt qu·∫£ luy·ªán ph√°t √¢m</h3>
          <p>ƒêi·ªÉm trung b√¨nh: <span id="finalSpeakingScore">0</span>/100</p>
          <p>T·ª´ ph√°t √¢m ƒë√∫ng: <span id="speakingCorrect">0</span>/78</p>
        </div>
      </div>
    </div>

    <!-- Back to Index Button -->
    <button
      class="back-to-index"
      id="backToIndex"
      onclick="window.history.back()"
    >
      üè† V·ªÅ trang ch·ªß
    </button>

    <script>
      // Vocabulary data for games - ƒê·∫¶Y ƒê·ª¶ 78 T·ª™ V·ª∞NG V·ªÄ GIA ƒê√åNH V√Ä S·ªê ƒê·∫æM
      const vocabulary = [
        // NH√ìM 1: GIA ƒê√åNH V√Ä QUAN H·ªÜ
        {
          german: "Enkelin",
          pronunciation: "[…õ≈ã-k…ô-l…™n]",
          vietnamese: "ch√°u g√°i",
          category: "Gia ƒë√¨nh",
          difficulty: "medium",
        },
        {
          german: "Enkel",
          pronunciation: "[…õ≈ã-k…ôl]",
          vietnamese: "ch√°u trai",
          category: "Gia ƒë√¨nh",
          difficulty: "medium",
        },
        {
          german: "Tochter",
          pronunciation: "[t…îx-t…ôr]",
          vietnamese: "con g√°i",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Sohn",
          pronunciation: "[zo:n]",
          vietnamese: "con trai",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Frau",
          pronunciation: "[frau]",
          vietnamese: "v·ª£, ph·ª• n·ªØ",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Mann",
          pronunciation: "[man]",
          vietnamese: "ch·ªìng, ƒë√†n √¥ng",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Vater",
          pronunciation: "[fa:-t…ôr]",
          vietnamese: "b·ªë",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Mutter",
          pronunciation: "[m ä-t…ôr]",
          vietnamese: "m·∫π",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Oma",
          pronunciation: "[o:-ma]",
          vietnamese: "b√†",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Opa",
          pronunciation: "[o:-pa]",
          vietnamese: "√¥ng",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Bruder",
          pronunciation: "[bru:-d…ôr]",
          vietnamese: "anh/em trai",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Schwester",
          pronunciation: "[ Év…õs-t…ôr]",
          vietnamese: "ch·ªã/em g√°i",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Kinder",
          pronunciation: "[k…™n-d…ôr]",
          vietnamese: "tr·∫ª em",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Kind",
          pronunciation: "[k…™nt]",
          vietnamese: "ƒë·ª©a tr·∫ª",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Eltern",
          pronunciation: "[…õl-t…ôrn]",
          vietnamese: "b·ªë m·∫π",
          category: "Gia ƒë√¨nh",
          difficulty: "easy",
        },
        {
          german: "Partner",
          pronunciation: "[part-n…ôr]",
          vietnamese: "b·∫°n ƒë·ªùi",
          category: "Gia ƒë√¨nh",
          difficulty: "medium",
        },
        {
          german: "Partnerin",
          pronunciation: "[part-n…ôr-…™n]",
          vietnamese: "b·∫°n ƒë·ªùi (n·ªØ)",
          category: "Gia ƒë√¨nh",
          difficulty: "medium",
        },
        {
          german: "Ehefrau",
          pronunciation: "[e:-…ô-frau]",
          vietnamese: "v·ª£",
          category: "Gia ƒë√¨nh",
          difficulty: "medium",
        },
        {
          german: "Cousin",
          pronunciation: "[ku-z…õÃÉ]",
          vietnamese: "anh h·ªç/em h·ªç (nam)",
          category: "Gia ƒë√¨nh",
          difficulty: "medium",
        },
        {
          german: "Cousine",
          pronunciation: "[ku-zi:-n…ô]",
          vietnamese: "ch·ªã h·ªç/em h·ªç (n·ªØ)",
          category: "Gia ƒë√¨nh",
          difficulty: "medium",
        },
        {
          german: "Freund",
          pronunciation: "[fr…îynt]",
          vietnamese: "b·∫°n (nam)",
          category: "Quan h·ªá",
          difficulty: "easy",
        },
        {
          german: "Freundin",
          pronunciation: "[fr…îyn-d…™n]",
          vietnamese: "b·∫°n (n·ªØ)",
          category: "Quan h·ªá",
          difficulty: "easy",
        },

        // NH√ìM 2: S·ªê ƒê·∫æM
        {
          german: "null",
          pronunciation: "[n äl]",
          vietnamese: "kh√¥ng",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "eins",
          pronunciation: "[a…™ns]",
          vietnamese: "m·ªôt",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "zwei",
          pronunciation: "[tsvai]",
          vietnamese: "hai",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "drei",
          pronunciation: "[dra…™]",
          vietnamese: "ba",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "vier",
          pronunciation: "[fi:r]",
          vietnamese: "b·ªën",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "f√ºnf",
          pronunciation: "[f ènf]",
          vietnamese: "nƒÉm",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "sechs",
          pronunciation: "[z…õks]",
          vietnamese: "s√°u",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "sieben",
          pronunciation: "[zi:-b…ôn]",
          vietnamese: "b·∫£y",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "acht",
          pronunciation: "[axt]",
          vietnamese: "t√°m",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "neun",
          pronunciation: "[n…îyn]",
          vietnamese: "ch√≠n",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "zehn",
          pronunciation: "[tse:n]",
          vietnamese: "m∆∞·ªùi",
          category: "S·ªë ƒë·∫øm",
          difficulty: "easy",
        },
        {
          german: "elf",
          pronunciation: "[…õlf]",
          vietnamese: "m∆∞·ªùi m·ªôt",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },
        {
          german: "zw√∂lf",
          pronunciation: "[tsv≈ìlf]",
          vietnamese: "m∆∞·ªùi hai",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },
        {
          german: "dreizehn",
          pronunciation: "[dra…™-tse:n]",
          vietnamese: "m∆∞·ªùi ba",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },
        {
          german: "vierzehn",
          pronunciation: "[fi:r-tse:n]",
          vietnamese: "m∆∞·ªùi b·ªën",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },
        {
          german: "f√ºnfzehn",
          pronunciation: "[f ènf-tse:n]",
          vietnamese: "m∆∞·ªùi lƒÉm",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },
        {
          german: "sechzehn",
          pronunciation: "[z…õ√ß-tse:n]",
          vietnamese: "m∆∞·ªùi s√°u",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },
        {
          german: "siebzehn",
          pronunciation: "[zi:p-tse:n]",
          vietnamese: "m∆∞·ªùi b·∫£y",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },
        {
          german: "achtzehn",
          pronunciation: "[axt-tse:n]",
          vietnamese: "m∆∞·ªùi t√°m",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },
        {
          german: "neunzehn",
          pronunciation: "[n…îyn-tse:n]",
          vietnamese: "m∆∞·ªùi ch√≠n",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },
        {
          german: "zwanzig",
          pronunciation: "[tsvant-s…™√ß]",
          vietnamese: "hai m∆∞·ªùi",
          category: "S·ªë ƒë·∫øm",
          difficulty: "medium",
        },

        // NH√ìM 3: TH√îNG TIN C√Å NH√ÇN
        {
          german: "Geburtsort",
          pronunciation: "[g…ô-burts-…îrt]",
          vietnamese: "n∆°i sinh",
          category: "Th√¥ng tin c√° nh√¢n",
          difficulty: "hard",
        },
        {
          german: "Wohnort",
          pronunciation: "[vo:n-…îrt]",
          vietnamese: "n∆°i ·ªü",
          category: "Th√¥ng tin c√° nh√¢n",
          difficulty: "hard",
        },
        {
          german: "Telefonnummer",
          pronunciation: "[te-l…ô-fo:n-n ä-m…ôr]",
          vietnamese: "s·ªë ƒëi·ªán tho·∫°i",
          category: "Th√¥ng tin c√° nh√¢n",
          difficulty: "hard",
        },
        {
          german: "Familienstand",
          pronunciation: "[fa-mi:-li-…ôn- Étant]",
          vietnamese: "t√¨nh tr·∫°ng h√¥n nh√¢n",
          category: "Th√¥ng tin c√° nh√¢n",
          difficulty: "hard",
        },
        {
          german: "verheiratet",
          pronunciation: "[f…ôr-ha…™-ra-t…ôt]",
          vietnamese: "ƒë√£ k·∫øt h√¥n",
          category: "T√¨nh tr·∫°ng",
          difficulty: "hard",
        },
        {
          german: "geschieden",
          pronunciation: "[g…ô- Éi:-d…ôn]",
          vietnamese: "ƒë√£ ly h√¥n",
          category: "T√¨nh tr·∫°ng",
          difficulty: "hard",
        },
        {
          german: "verwitwet",
          pronunciation: "[f…ôr-v…™t-v…ôt]",
          vietnamese: "g√≥a",
          category: "T√¨nh tr·∫°ng",
          difficulty: "hard",
        },
        {
          german: "ledig",
          pronunciation: "[le:-d…™√ß]",
          vietnamese: "ƒë·ªôc th√¢n",
          category: "T√¨nh tr·∫°ng",
          difficulty: "medium",
        },

        // NH√ìM 4: T√çNH T·ª™ V√Ä TR·∫†NG T·ª™
        {
          german: "nett",
          pronunciation: "[n…õt]",
          vietnamese: "d·ªÖ th∆∞∆°ng",
          category: "T√≠nh t·ª´",
          difficulty: "easy",
        },
        {
          german: "stolz",
          pronunciation: "[ Ét…îlts]",
          vietnamese: "t·ª± h√†o",
          category: "T√≠nh t·ª´",
          difficulty: "medium",
        },
        {
          german: "jung",
          pronunciation: "[j ä≈ã]",
          vietnamese: "tr·∫ª",
          category: "T√≠nh t·ª´",
          difficulty: "easy",
        },
        {
          german: "alt",
          pronunciation: "[alt]",
          vietnamese: "gi√†",
          category: "T√≠nh t·ª´",
          difficulty: "easy",
        },
        {
          german: "wirklich",
          pronunciation: "[v…™rk-l…™√ß]",
          vietnamese: "th·∫≠t s·ª±",
          category: "Tr·∫°ng t·ª´",
          difficulty: "medium",
        },
        {
          german: "sicher",
          pronunciation: "[z…™-√ß…ôr]",
          vietnamese: "ch·∫Øc ch·∫Øn",
          category: "Tr·∫°ng t·ª´",
          difficulty: "medium",
        },
        {
          german: "zusammen",
          pronunciation: "[tsu-za-m…ôn]",
          vietnamese: "c√πng nhau",
          category: "Tr·∫°ng t·ª´",
          difficulty: "medium",
        },
        {
          german: "da",
          pronunciation: "[da:]",
          vietnamese: "·ªü ƒë√≥",
          category: "Tr·∫°ng t·ª´",
          difficulty: "easy",
        },
        {
          german: "sch√∂n",
          pronunciation: "[ É√∏:n]",
          vietnamese: "ƒë·∫πp",
          category: "T√≠nh t·ª´",
          difficulty: "easy",
        },
        {
          german: "falsch",
          pronunciation: "[fal É]",
          vietnamese: "sai",
          category: "T√≠nh t·ª´",
          difficulty: "easy",
        },
        {
          german: "genau",
          pronunciation: "[g…ô-nau]",
          vietnamese: "ch√≠nh x√°c",
          category: "Tr·∫°ng t·ª´",
          difficulty: "easy",
        },

        // NH√ìM 5: T√ÄI LI·ªÜU V√Ä HO·∫†T ƒê·ªòNG
        {
          german: "Familienfotos",
          pronunciation: "[fa-mi:-li-…ôn-fo:-tos]",
          vietnamese: "·∫£nh gia ƒë√¨nh",
          category: "T√†i li·ªáu",
          difficulty: "hard",
        },
        {
          german: "Arbeitstag",
          pronunciation: "[ar-ba…™ts-ta:k]",
          vietnamese: "ng√†y l√†m vi·ªác",
          category: "Th·ªùi gian",
          difficulty: "hard",
        },
        {
          german: "Formular",
          pronunciation: "[f…îr-mu-la:r]",
          vietnamese: "m·∫´u ƒë∆°n",
          category: "T√†i li·ªáu",
          difficulty: "hard",
        },
        {
          german: "Partnerinterview",
          pronunciation: "[part-n…ôr-…™n-t…ôr-vju:]",
          vietnamese: "ph·ªèng v·∫•n ƒë·ªëi t√°c",
          category: "Ho·∫°t ƒë·ªông",
          difficulty: "hard",
        },
        {
          german: "Kettenspiel",
          pronunciation: "[k…õ-t…ôn- Épi:l]",
          vietnamese: "tr√≤ ch∆°i chu·ªói",
          category: "Ho·∫°t ƒë·ªông",
          difficulty: "hard",
        },
        {
          german: "R√§tsel",
          pronunciation: "[r…õ:t-s…ôl]",
          vietnamese: "c√¢u ƒë·ªë",
          category: "Ho·∫°t ƒë·ªông",
          difficulty: "medium",
        },
        {
          german: "Varianten",
          pronunciation: "[va-ri-an-t…ôn]",
          vietnamese: "bi·∫øn th·ªÉ",
          category: "T·ª´ v·ª±ng",
          difficulty: "hard",
        },
        {
          german: "Bilder",
          pronunciation: "[b…™l-d…ôr]",
          vietnamese: "h√¨nh ·∫£nh",
          category: "T√†i li·ªáu",
          difficulty: "easy",
        },
        {
          german: "Informationen",
          pronunciation: "[…™n-f…îr-ma-tsiÃØo:-n…ôn]",
          vietnamese: "th√¥ng tin",
          category: "T·ª´ v·ª±ng",
          difficulty: "medium",
        },
        {
          german: "Chef",
          pronunciation: "[ É…õf]",
          vietnamese: "s·∫øp",
          category: "Ngh·ªÅ nghi·ªáp",
          difficulty: "easy",
        },
        {
          german: "Paar",
          pronunciation: "[pa:r]",
          vietnamese: "c·∫∑p",
          category: "T·ª´ v·ª±ng",
          difficulty: "easy",
        },
        {
          german: "Paare",
          pronunciation: "[pa:-r…ô]",
          vietnamese: "c√°c c·∫∑p",
          category: "T·ª´ v·ª±ng",
          difficulty: "easy",
        },
        {
          german: "Zettel",
          pronunciation: "[ts…õ-t…ôl]",
          vietnamese: "m·∫£nh gi·∫•y",
          category: "T√†i li·ªáu",
          difficulty: "medium",
        },
        {
          german: "Liste",
          pronunciation: "[l…™s-t…ô]",
          vietnamese: "danh s√°ch",
          category: "T√†i li·ªáu",
          difficulty: "medium",
        },
        {
          german: "zweite",
          pronunciation: "[tsvai-t…ô]",
          vietnamese: "th·ª© hai",
          category: "S·ªë th·ª© t·ª±",
          difficulty: "medium",
        },

        // NH√ìM 6: LI√äN T·ª™ V√Ä TH√ÅN T·ª™
        {
          german: "denn",
          pronunciation: "[d…õn]",
          vietnamese: "v√¨",
          category: "Li√™n t·ª´",
          difficulty: "medium",
        },
        {
          german: "aber",
          pronunciation: "[a:-b…ôr]",
          vietnamese: "nh∆∞ng",
          category: "Li√™n t·ª´",
          difficulty: "easy",
        },
        {
          german: "so",
          pronunciation: "[zo:]",
          vietnamese: "nh∆∞ v·∫≠y",
          category: "Tr·∫°ng t·ª´",
          difficulty: "easy",
        },
        {
          german: "ach",
          pronunciation: "[ax]",
          vietnamese: "√¥i",
          category: "Th√°n t·ª´",
          difficulty: "easy",
        },

        // NH√ìM 7: ƒê·ªòNG T·ª™
        {
          german: "war",
          pronunciation: "[va:r]",
          vietnamese: "ƒë√£ l√†",
          category: "ƒê·ªông t·ª´",
          difficulty: "medium",
        },
        {
          german: "waren",
          pronunciation: "[va:-r…ôn]",
          vietnamese: "ƒë√£ l√† (s·ªë nhi·ªÅu)",
          category: "ƒê·ªông t·ª´",
          difficulty: "medium",
        },
        {
          german: "finden",
          pronunciation: "[f…™n-d…ôn]",
          vietnamese: "t√¨m th·∫•y",
          category: "ƒê·ªông t·ª´",
          difficulty: "medium",
        },
        {
          german: "klopfen",
          pronunciation: "[kl…îp-f…ôn]",
          vietnamese: "g√µ",
          category: "ƒê·ªông t·ª´",
          difficulty: "medium",
        },

        // NH√ìM 8: KH√ÅI NI·ªÜM ƒê·∫∂C BI·ªÜT
        {
          german: "Familienmitglieder",
          pronunciation: "[fa-mi:-li-…ôn-m…™t-gli:-d…ôr]",
          vietnamese: "th√†nh vi√™n gia ƒë√¨nh",
          category: "Gia ƒë√¨nh",
          difficulty: "hard",
        },
        {
          german: "Glieder",
          pronunciation: "[gli:-d…ôr]",
          vietnamese: "th√†nh vi√™n",
          category: "T·ª´ v·ª±ng",
          difficulty: "hard",
        },
        {
          german: "Rhythmus",
          pronunciation: "[ryt-m äs]",
          vietnamese: "nh·ªãp ƒëi·ªáu",
          category: "√Çm nh·∫°c",
          difficulty: "hard",
        },
        {
          german: "Satzakzent",
          pronunciation: "[zats-ak-ts…õnt]",
          vietnamese: "tr·ªçng √¢m c√¢u",
          category: "Ng·ªØ √¢m",
          difficulty: "hard",
        },
      ];

      // Sample sentences for sentence builder game
      const sampleSentences = [
        {
          german: ["meine", "Enkelin"],
          vietnamese: "Ch√°u g√°i t√¥i",
          words: ["meine", "Enkelin", "ist", "sehr", "nett", "jung"],
        },
        {
          german: ["der", "Enkel"],
          vietnamese: "Ch√°u trai",
          words: ["der", "Enkel", "mein", "ist", "alt", "f√ºnf"],
        },
        {
          german: ["unsere", "Tochter"],
          vietnamese: "Con g√°i ch√∫ng t√¥i",
          words: ["unsere", "Tochter", "ist", "sch√∂n", "jung", "nett"],
        },
        {
          german: ["mein", "Sohn"],
          vietnamese: "Con trai t√¥i",
          words: ["mein", "Sohn", "ist", "zwanzig", "Jahre", "alt"],
        },
        {
          german: ["seine", "Frau"],
          vietnamese: "V·ª£ anh ·∫•y",
          words: ["seine", "Frau", "ist", "sehr", "nett", "sch√∂n"],
        },
        {
          german: ["der", "Mann"],
          vietnamese: "Ng∆∞·ªùi ƒë√†n √¥ng",
          words: ["der", "Mann", "ist", "mein", "Vater", "alt"],
        },
        {
          german: ["mein", "Vater"],
          vietnamese: "B·ªë t√¥i",
          words: ["mein", "Vater", "ist", "f√ºnfzig", "Jahre", "alt"],
        },
        {
          german: ["die", "Mutter"],
          vietnamese: "Ng∆∞·ªùi m·∫π",
          words: ["die", "Mutter", "ist", "sehr", "nett", "jung"],
        },
        {
          german: ["meine", "Oma"],
          vietnamese: "B√† t√¥i",
          words: ["meine", "Oma", "ist", "sehr", "alt", "nett"],
        },
        {
          german: ["unser", "Opa"],
          vietnamese: "√îng ch√∫ng t√¥i",
          words: ["unser", "Opa", "ist", "achtzig", "Jahre", "alt"],
        },
        {
          german: ["mein", "Bruder"],
          vietnamese: "Anh/em trai t√¥i",
          words: ["mein", "Bruder", "ist", "sehr", "jung", "nett"],
        },
        {
          german: ["seine", "Schwester"],
          vietnamese: "Ch·ªã/em g√°i anh ·∫•y",
          words: ["seine", "Schwester", "ist", "f√ºnfzehn", "Jahre", "alt"],
        },
        {
          german: ["unsere", "Kinder"],
          vietnamese: "Nh·ªØng ƒë·ª©a con ch√∫ng t√¥i",
          words: ["unsere", "Kinder", "sind", "sehr", "nett", "jung"],
        },
        {
          german: ["das", "Kind"],
          vietnamese: "ƒê·ª©a tr·∫ª",
          words: ["das", "Kind", "ist", "f√ºnf", "Jahre", "alt"],
        },
        {
          german: ["meine", "Eltern"],
          vietnamese: "B·ªë m·∫π t√¥i",
          words: ["meine", "Eltern", "sind", "sehr", "nett", "alt"],
        },
        {
          german: ["ich", "bin", "verheiratet"],
          vietnamese: "T√¥i ƒë√£ k·∫øt h√¥n",
          words: ["ich", "bin", "verheiratet", "ledig", "geschieden", "jung"],
        },
        {
          german: ["er", "ist", "ledig"],
          vietnamese: "Anh ·∫•y ƒë·ªôc th√¢n",
          words: ["er", "ist", "ledig", "verheiratet", "jung", "alt"],
        },
        {
          german: ["wir", "sind", "jung"],
          vietnamese: "Ch√∫ng t√¥i tr·∫ª",
          words: ["wir", "sind", "jung", "alt", "nett", "sch√∂n"],
        },
        {
          german: ["das", "ist", "genau"],
          vietnamese: "ƒê√≥ l√† ch√≠nh x√°c",
          words: ["das", "ist", "genau", "falsch", "richtig", "wirklich"],
        },
        {
          german: ["sie", "sind", "zusammen"],
          vietnamese: "H·ªç ·ªü c√πng nhau",
          words: ["sie", "sind", "zusammen", "da", "hier", "jung"],
        },
        {
          german: ["eins", "zwei", "drei"],
          vietnamese: "M·ªôt hai ba",
          words: ["eins", "zwei", "drei", "vier", "f√ºnf", "sechs"],
        },
        {
          german: ["ich", "bin", "zwanzig"],
          vietnamese: "T√¥i hai m∆∞·ªùi tu·ªïi",
          words: ["ich", "bin", "zwanzig", "Jahre", "alt", "jung"],
        },
        {
          german: ["er", "war", "da"],
          vietnamese: "Anh ·∫•y ƒë√£ ·ªü ƒë√≥",
          words: ["er", "war", "da", "hier", "jung", "alt"],
        },
        {
          german: ["sie", "waren", "nett"],
          vietnamese: "H·ªç ƒë√£ d·ªÖ th∆∞∆°ng",
          words: ["sie", "waren", "nett", "sch√∂n", "jung", "alt"],
        },
        {
          german: ["das", "ist", "sch√∂n"],
          vietnamese: "ƒê√≥ l√† ƒë·∫πp",
          words: ["das", "ist", "sch√∂n", "nett", "jung", "alt"],
        },
      ];

      let currentGameData = {};
      let audioSupported = false;
      let audioEnabled = false;
      let mediaRecorder = null;
      let audioChunks = [];
      let userRecordingBlob = null;

      // Test audio support
      function testAudioSupport() {
        try {
          if ("speechSynthesis" in window) {
            // Test if voices are available
            const voices = speechSynthesis.getVoices();
            const germanVoice = voices.find((voice) =>
              voice.lang.startsWith("de")
            );
            audioSupported = germanVoice ? true : false;
          }
        } catch (error) {
          audioSupported = false;
        }
      }

      // Show audio activation modal for mobile
      function checkMobileAudio() {
        if (
          /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(
            navigator.userAgent
          )
        ) {
          document.getElementById("audioModal").style.display = "flex";
        } else {
          audioEnabled = true;
        }
      }

      // Enable audio function
      function enableAudio() {
        // Try to play a silent audio to enable audio context
        const audioContext = new (window.AudioContext ||
          window.webkitAudioContext)();
        const oscillator = audioContext.createOscillator();
        oscillator.type = "sine";
        oscillator.frequency.setValueAtTime(1, audioContext.currentTime); // Almost silent
        oscillator.connect(audioContext.destination);
        oscillator.start();
        oscillator.stop(audioContext.currentTime + 0.1);

        audioEnabled = true;
        document.getElementById("audioModal").style.display = "none";

        // Test Web Speech API
        testAudioSupport();
      }

      // Enhanced audio function with fallback
      function speakGerman(text, fallbackElement = null, rate = 0.7) {
        if (!audioEnabled) {
          // Show visual fallback
          if (fallbackElement) {
            const word = vocabulary.find((w) => w.german === text);
            if (word) {
              fallbackElement.style.display = "block";
              fallbackElement.querySelector(
                ".pronunciation-display"
              ).textContent = `${word.german} ${word.pronunciation}`;
            }
          }
          return;
        }

        if (!audioSupported || !("speechSynthesis" in window)) {
          // Show visual fallback
          if (fallbackElement) {
            const word = vocabulary.find((w) => w.german === text);
            if (word) {
              fallbackElement.style.display = "block";
              fallbackElement.querySelector(
                ".pronunciation-display"
              ).textContent = `${word.german} ${word.pronunciation}`;
            }
          }
          return;
        }

        try {
          // Cancel any ongoing speech
          speechSynthesis.cancel();

          const utterance = new SpeechSynthesisUtterance(text);
          const voices = speechSynthesis.getVoices();

          // Try to find German voice
          const germanVoice = voices.find(
            (voice) =>
              voice.lang.startsWith("de") ||
              voice.name.toLowerCase().includes("german")
          );

          if (germanVoice) {
            utterance.voice = germanVoice;
          }

          utterance.lang = "de-DE";
          utterance.rate = rate;
          utterance.pitch = 1;
          utterance.volume = 1;

          // Hide fallback if audio works
          if (fallbackElement) {
            fallbackElement.style.display = "none";
          }

          speechSynthesis.speak(utterance);
        } catch (error) {
          console.log("Audio error:", error);
          // Show fallback on error
          if (fallbackElement) {
            const word = vocabulary.find((w) => w.german === text);
            if (word) {
              fallbackElement.style.display = "block";
              fallbackElement.querySelector(
                ".pronunciation-display"
              ).textContent = `${word.german} ${word.pronunciation}`;
            }
          }
        }
      }

      // Initialize audio on page load
      window.addEventListener("load", () => {
        testAudioSupport();
        checkMobileAudio();

        // Re-test after voices are loaded
        if ("speechSynthesis" in window) {
          speechSynthesis.addEventListener("voiceschanged", () => {
            testAudioSupport();
          });
        }
      });

      // Back to index button visibility
      const backToIndexBtn = document.getElementById("backToIndex");

      window.addEventListener("scroll", () => {
        if (window.scrollY > 300) {
          backToIndexBtn.classList.add("visible");
        } else {
          backToIndexBtn.classList.remove("visible");
        }
      });

      // Game control functions
      function startGame(gameType) {
        if (
          !audioEnabled &&
          (gameType === "listening" ||
            gameType === "typing" ||
            gameType === "speedtest" ||
            gameType === "listeningchallenge" ||
            gameType === "speakingpractice")
        ) {
          document.getElementById("audioModal").style.display = "flex";
          return;
        }

        document.getElementById("gameMenu").style.display = "none";
        document
          .querySelectorAll(".game-area")
          .forEach((area) => area.classList.remove("active"));

        switch (gameType) {
          case "flashcards":
            document.getElementById("flashcardsGame").classList.add("active");
            initFlashcards();
            break;
          case "memory":
            document.getElementById("memoryGame").classList.add("active");
            initMemoryGame();
            break;
          case "quiz":
            document.getElementById("quizGame").classList.add("active");
            initQuizGame();
            break;
          case "listening":
            document.getElementById("listeningGame").classList.add("active");
            initListeningGame();
            break;
          case "category":
            document.getElementById("categoryGame").classList.add("active");
            initCategoryGame();
            break;
          case "typing":
            document.getElementById("typingGame").classList.add("active");
            initTypingGame();
            break;
          case "speedtest":
            document.getElementById("speedtestGame").classList.add("active");
            initSpeedTest();
            break;
          case "wordbuilder":
            document.getElementById("wordbuilderGame").classList.add("active");
            initWordBuilder();
            break;
          case "sentencebuilder":
            document
              .getElementById("sentencebuilderGame")
              .classList.add("active");
            initSentenceBuilder();
            break;
          case "listeningchallenge":
            document
              .getElementById("listeningchallengeGame")
              .classList.add("active");
            initListeningChallenge();
            break;
          case "speakingpractice":
            document
              .getElementById("speakingpracticeGame")
              .classList.add("active");
            initSpeakingPractice();
            break;
        }
      }

      function backToMenu() {
        // Stop any ongoing speech
        if ("speechSynthesis" in window) {
          speechSynthesis.cancel();
        }

        // Stop recording if active
        if (mediaRecorder && mediaRecorder.state === "recording") {
          mediaRecorder.stop();
        }

        // Clear any timers
        if (currentGameData.speedTest && currentGameData.speedTest.timer) {
          clearInterval(currentGameData.speedTest.timer);
        }

        document
          .querySelectorAll(".game-area")
          .forEach((area) => area.classList.remove("active"));
        document.getElementById("gameMenu").style.display = "grid";
      }

      // Flashcards Game
      function initFlashcards() {
        currentGameData.flashcards = {
          currentIndex: 0,
          cards: vocabulary,
          isFlipped: false,
        };

        document.getElementById("totalCards").textContent =
          currentGameData.flashcards.cards.length;
        showFlashcard();
      }

      function showFlashcard() {
        const data = currentGameData.flashcards;
        const card = data.cards[data.currentIndex];

        document.getElementById("currentCard").textContent =
          data.currentIndex + 1;
        document.getElementById("cardContent").textContent = card.german;
        document.getElementById("cardPronunciation").textContent =
          card.pronunciation;
        document.getElementById("cardTranslation").textContent =
          card.vietnamese;

        // Reset card state
        document.getElementById("flashcard").classList.remove("flipped");
        document.getElementById("cardTranslation").style.display = "none";
        data.isFlipped = false;
      }

      function flipCard() {
        const data = currentGameData.flashcards;
        const flashcard = document.getElementById("flashcard");
        const translation = document.getElementById("cardTranslation");

        if (!data.isFlipped) {
          flashcard.classList.add("flipped");
          translation.style.display = "block";
          data.isFlipped = true;
        }
      }

      function nextCard() {
        const data = currentGameData.flashcards;
        if (data.currentIndex < data.cards.length - 1) {
          data.currentIndex++;
          showFlashcard();
        }
      }

      function prevCard() {
        const data = currentGameData.flashcards;
        if (data.currentIndex > 0) {
          data.currentIndex--;
          showFlashcard();
        }
      }

      // Memory Game - Updated to handle 78 words (20 pairs)
      function initMemoryGame() {
        // Take 20 words for 20 pairs (40 cards total)
        const selectedWords = vocabulary.slice(0, 20);

        const memoryCards = [];

        // Create pairs (German word + Vietnamese meaning)
        selectedWords.forEach((word) => {
          memoryCards.push({
            type: "german",
            content: word.german,
            id: word.german,
          });
          memoryCards.push({
            type: "vietnamese",
            content: word.vietnamese,
            id: word.german,
          });
        });

        // Shuffle cards
        for (let i = memoryCards.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [memoryCards[i], memoryCards[j]] = [memoryCards[j], memoryCards[i]];
        }

        currentGameData.memory = {
          cards: memoryCards,
          flippedCards: [],
          matchedPairs: 0,
          moves: 0,
          score: 0,
        };

        renderMemoryGrid();
      }

      function renderMemoryGrid() {
        const grid = document.getElementById("memoryGrid");
        grid.innerHTML = "";

        currentGameData.memory.cards.forEach((card, index) => {
          const cardElement = document.createElement("div");
          cardElement.className = "memory-card";
          cardElement.innerHTML = `<div class="memory-card-content">?</div>`;
          cardElement.onclick = () => flipMemoryCard(index);
          grid.appendChild(cardElement);
        });
      }

      function flipMemoryCard(index) {
        const data = currentGameData.memory;

        if (data.flippedCards.length === 2 || data.flippedCards.includes(index))
          return;

        const cardElement = document.querySelectorAll(".memory-card")[index];
        const card = data.cards[index];

        cardElement.classList.add("flipped");
        cardElement.querySelector(".memory-card-content").textContent =
          card.content;
        data.flippedCards.push(index);

        if (data.flippedCards.length === 2) {
          data.moves++;
          document.getElementById("memoryMoves").textContent = data.moves;

          setTimeout(() => checkMemoryMatch(), 1000);
        }
      }

      function checkMemoryMatch() {
        const data = currentGameData.memory;
        const [first, second] = data.flippedCards;
        const firstCard = data.cards[first];
        const secondCard = data.cards[second];

        if (firstCard.id === secondCard.id) {
          // Match found
          document
            .querySelectorAll(".memory-card")
            [first].classList.add("matched");
          document
            .querySelectorAll(".memory-card")
            [second].classList.add("matched");
          data.matchedPairs++;
          data.score += 10;

          document.getElementById("memoryPairs").textContent =
            data.matchedPairs;

          if (data.matchedPairs === 20) {
            setTimeout(
              () => alert("üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ ho√†n th√†nh tr√≤ ch∆°i!"),
              500
            );
          }
        } else {
          // No match
          const firstElement = document.querySelectorAll(".memory-card")[first];
          const secondElement =
            document.querySelectorAll(".memory-card")[second];

          firstElement.classList.remove("flipped");
          secondElement.classList.remove("flipped");
          firstElement.querySelector(".memory-card-content").textContent = "?";
          secondElement.querySelector(".memory-card-content").textContent = "?";
        }

        document.getElementById("memoryScore").textContent = data.score;
        data.flippedCards = [];
      }

      function resetMemory() {
        initMemoryGame();
        document.getElementById("memoryScore").textContent = "0";
        document.getElementById("memoryMoves").textContent = "0";
        document.getElementById("memoryPairs").textContent = "0";
      }

      // Quiz Game - Updated to use all 78 words
      function initQuizGame() {
        const questions = [];

        vocabulary.forEach((word) => {
          const wrongAnswers = vocabulary
            .filter((w) => w.vietnamese !== word.vietnamese)
            .sort(() => Math.random() - 0.5)
            .slice(0, 3)
            .map((w) => w.vietnamese);

          const options = [word.vietnamese, ...wrongAnswers].sort(
            () => Math.random() - 0.5
          );

          questions.push({
            question: `T·ª´ "${word.german}" c√≥ nghƒ©a l√† g√¨?`,
            options: options,
            correct: word.vietnamese,
          });
        });

        // Shuffle questions
        questions.sort(() => Math.random() - 0.5);

        currentGameData.quiz = {
          questions: questions,
          currentIndex: 0,
          score: 0,
          answered: false,
        };

        document.getElementById("totalQuestions").textContent =
          questions.length;
        showQuizQuestion();
      }

      function showQuizQuestion() {
        const data = currentGameData.quiz;
        const question = data.questions[data.currentIndex];

        document.getElementById("currentQuestion").textContent =
          data.currentIndex + 1;
        document.getElementById("questionText").textContent = question.question;

        const optionsContainer = document.getElementById("quizOptions");
        optionsContainer.innerHTML = "";

        question.options.forEach((option) => {
          const optionElement = document.createElement("div");
          optionElement.className = "quiz-option";
          optionElement.textContent = option;
          optionElement.onclick = () =>
            selectQuizOption(option, question.correct);
          optionsContainer.appendChild(optionElement);
        });

        data.answered = false;
        document.getElementById("nextBtn").style.display = "none";
      }

      function selectQuizOption(selected, correct) {
        if (currentGameData.quiz.answered) return;

        currentGameData.quiz.answered = true;

        document.querySelectorAll(".quiz-option").forEach((option) => {
          if (option.textContent === correct) {
            option.classList.add("correct");
          } else if (option.textContent === selected && selected !== correct) {
            option.classList.add("wrong");
          }
        });

        if (selected === correct) {
          currentGameData.quiz.score++;
        }

        setTimeout(() => {
          document.getElementById("nextBtn").style.display = "inline-block";
        }, 1000);
      }

      function nextQuestion() {
        const data = currentGameData.quiz;

        if (data.currentIndex < data.questions.length - 1) {
          data.currentIndex++;
          showQuizQuestion();
        } else {
          // Show final score
          document.getElementById("quizQuestion").style.display = "none";
          document.getElementById("nextBtn").style.display = "none";
          document.getElementById("quizScore").style.display = "block";
          document.getElementById("finalScore").textContent = data.score;
        }
      }

      // Listening Game - Updated to use all 78 words
      function initListeningGame() {
        // Shuffle all vocabulary words
        const shuffledWords = [...vocabulary].sort(() => Math.random() - 0.5);

        currentGameData.listening = {
          words: shuffledWords,
          currentIndex: 0,
          score: 0,
          answered: false,
        };

        document.getElementById("totalListening").textContent =
          shuffledWords.length;
        showListeningQuestion();
      }

      function showListeningQuestion() {
        const data = currentGameData.listening;
        const word = data.words[data.currentIndex];

        document.getElementById("currentListening").textContent =
          data.currentIndex + 1;

        // Create wrong answers
        const wrongAnswers = vocabulary
          .filter((w) => w.vietnamese !== word.vietnamese)
          .sort(() => Math.random() - 0.5)
          .slice(0, 3)
          .map((w) => w.vietnamese);

        const options = [word.vietnamese, ...wrongAnswers].sort(
          () => Math.random() - 0.5
        );

        const optionsContainer = document.getElementById("listeningOptions");
        optionsContainer.innerHTML = "";

        options.forEach((option) => {
          const optionElement = document.createElement("div");
          optionElement.className = "quiz-option";
          optionElement.textContent = option;
          optionElement.onclick = () =>
            selectListeningOption(option, word.vietnamese);
          optionsContainer.appendChild(optionElement);
        });

        data.answered = false;
        document.getElementById("nextListeningBtn").style.display = "none";

        // Auto play audio with fallback
        setTimeout(() => playAudio(), 500);
      }

      function playAudio() {
        const data = currentGameData.listening;
        const word = data.words[data.currentIndex];
        const fallbackElement = document.getElementById("audioFallback");

        speakGerman(word.german, fallbackElement);
      }

      function selectListeningOption(selected, correct) {
        if (currentGameData.listening.answered) return;

        currentGameData.listening.answered = true;

        document
          .querySelectorAll("#listeningOptions .quiz-option")
          .forEach((option) => {
            if (option.textContent === correct) {
              option.classList.add("correct");
            } else if (
              option.textContent === selected &&
              selected !== correct
            ) {
              option.classList.add("wrong");
            }
          });

        if (selected === correct) {
          currentGameData.listening.score++;
        }

        setTimeout(() => {
          document.getElementById("nextListeningBtn").style.display =
            "inline-block";
        }, 1000);
      }

      function nextListening() {
        const data = currentGameData.listening;

        if (data.currentIndex < data.words.length - 1) {
          data.currentIndex++;
          showListeningQuestion();
        } else {
          // Show final score
          document.querySelector(
            "#listeningGame .quiz-question"
          ).style.display = "none";
          document.getElementById("nextListeningBtn").style.display = "none";
          document.getElementById("listeningScore").style.display = "block";
          document.getElementById("finalListeningScore").textContent =
            data.score;
        }
      }

      // Category Game - Updated to use all 78 words
      function initCategoryGame() {
        // Get all unique categories
        const allCategories = [
          ...new Set(vocabulary.map((word) => word.category)),
        ];

        currentGameData.category = {
          categories: allCategories,
          words: [...vocabulary].sort(() => Math.random() - 0.5),
          score: 0,
          completed: [],
        };

        document.getElementById("remainingWords").textContent =
          vocabulary.length;
        renderCategoryGame();
      }

      function renderCategoryGame() {
        const container = document.getElementById("categoryContainer");
        container.innerHTML = `
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; margin-bottom: 20px;">
                    ${currentGameData.category.categories
                      .map(
                        (cat) => `
                        <div class="category-box" data-category="${cat}">
                            <h4>${cat}</h4>
                            <div class="category-content"></div>
                        </div>
                    `
                      )
                      .join("")}
                </div>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; justify-content: center;">
                    ${currentGameData.category.words
                      .map(
                        (word) => `
                        <div class="draggable-word" draggable="true" data-category="${word.category}">
                            ${word.german}
                        </div>
                    `
                      )
                      .join("")}
                </div>
            `;

        // Add drag and drop functionality
        addDragDropListeners();
      }

      function addDragDropListeners() {
        const draggableWords = document.querySelectorAll(".draggable-word");
        const categoryBoxes = document.querySelectorAll(".category-box");

        draggableWords.forEach((word) => {
          word.addEventListener("dragstart", (e) => {
            e.dataTransfer.setData("text/plain", word.textContent);
            e.dataTransfer.setData("category", word.dataset.category);
          });
        });

        categoryBoxes.forEach((box) => {
          box.addEventListener("dragover", (e) => {
            e.preventDefault();
            box.style.background = "#e3f2fd";
          });

          box.addEventListener("dragleave", () => {
            box.style.background = "#f9f9f9";
          });

          box.addEventListener("drop", (e) => {
            e.preventDefault();
            const word = e.dataTransfer.getData("text/plain");
            const wordCategory = e.dataTransfer.getData("category");
            const boxCategory = box.dataset.category;

            if (wordCategory === boxCategory) {
              // Correct!
              box.querySelector(
                ".category-content"
              ).innerHTML += `<span class="category-word">${word}</span>`;
              const wordElement = Array.from(
                document.querySelectorAll(".draggable-word")
              ).find((el) => el.textContent === word);
              if (wordElement) wordElement.remove();

              currentGameData.category.score += 10;
              document.getElementById("categoryScore").textContent =
                currentGameData.category.score;
              document.getElementById("remainingWords").textContent =
                document.querySelectorAll(".draggable-word").length;

              if (document.querySelectorAll(".draggable-word").length === 0) {
                setTimeout(
                  () =>
                    alert(
                      "üéâ Ch√∫c m·ª´ng! B·∫°n ƒë√£ ph√¢n lo·∫°i ƒë√∫ng t·∫•t c·∫£ t·ª´ v·ª±ng!"
                    ),
                  500
                );
              }
            } else {
              // Wrong!
              box.style.background = "#ffebee";
              setTimeout(() => {
                box.style.background = "#f9f9f9";
              }, 1000);
            }
          });
        });
      }

      function resetCategory() {
        initCategoryGame();
        document.getElementById("categoryScore").textContent = "0";
      }

      // Continue with other game functions...
      // [The rest of the functions would continue similarly]

      // Initialize back to index button
      setTimeout(() => {
        backToIndexBtn.classList.add("visible");
      }, 1000);
    </script>
  </body>
</html>
