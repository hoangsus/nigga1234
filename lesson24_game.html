<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Luy·ªán t·∫≠p: Lebensmittel einkaufen</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #ff6b6b, #ee5a24);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .header p {
        font-size: 1.2em;
        opacity: 0.9;
      }

      .nav-tabs {
        display: flex;
        background: #f8f9fa;
        border-bottom: 2px solid #dee2e6;
      }

      .nav-tab {
        flex: 1;
        padding: 15px;
        background: none;
        border: none;
        cursor: pointer;
        font-size: 1.1em;
        font-weight: bold;
        transition: all 0.3s;
      }

      .nav-tab.active {
        background: #007bff;
        color: white;
      }

      .nav-tab:hover {
        background: #0056b3;
        color: white;
      }

      .content {
        padding: 30px;
      }

      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      /* Vocabulary Section */
      .vocab-section {
        margin-bottom: 40px;
      }

      .vocab-section h3 {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        padding: 15px;
        border-radius: 10px;
        margin-bottom: 20px;
        text-align: center;
        font-size: 1.3em;
      }

      .vocab-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .vocab-card {
        background: linear-gradient(135deg, #a8edea, #fed6e3);
        padding: 20px;
        border-radius: 10px;
        text-align: center;
        transition: transform 0.3s;
        cursor: pointer;
      }

      .vocab-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      }

      .vocab-card h4 {
        color: #2c3e50;
        margin-bottom: 10px;
        font-size: 1.3em;
      }

      .vocab-card p {
        color: #34495e;
        font-size: 1.1em;
        margin: 5px 0;
      }

      .price {
        color: #e74c3c;
        font-weight: bold;
        font-size: 1.2em;
      }

      .audio-btn {
        background: #28a745;
        color: white;
        border: none;
        padding: 8px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-size: 0.9em;
        margin: 5px;
        transition: all 0.3s;
      }

      .audio-btn:hover {
        background: #218838;
        transform: scale(1.05);
      }

      /* Dialog Section */
      .dialog-container {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 25px;
        margin: 20px 0;
      }

      .dialog-section {
        margin-bottom: 30px;
      }

      .dialog-section h3 {
        background: linear-gradient(135deg, #fd79a8, #fdcb6e);
        color: white;
        padding: 12px 20px;
        border-radius: 8px;
        margin-bottom: 20px;
        text-align: center;
      }

      .dialog-line {
        margin: 15px 0;
        padding: 20px;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s;
        position: relative;
      }

      .seller {
        background: linear-gradient(135deg, #74b9ff, #0984e3);
        color: white;
        margin-left: 50px;
      }

      .customer {
        background: linear-gradient(135deg, #00b894, #00a085);
        color: white;
        margin-right: 50px;
      }

      .dialog-line:hover {
        transform: scale(1.02);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
      }

      .german {
        font-weight: bold;
        font-size: 1.2em;
        margin-bottom: 8px;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }

      .vietnamese {
        font-size: 1em;
        opacity: 0.95;
      }

      .line-number {
        background: rgba(255, 255, 255, 0.2);
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.9em;
        margin-right: 10px;
      }

      /* Quiz Section */
      .quiz-card {
        background: white;
        border: 2px solid #e9ecef;
        border-radius: 10px;
        padding: 25px;
        margin: 20px 0;
        transition: all 0.3s;
      }

      .quiz-card.correct {
        border-color: #28a745;
        background: #d4edda;
      }

      .quiz-card.incorrect {
        border-color: #dc3545;
        background: #f8d7da;
      }

      .question {
        font-size: 1.2em;
        font-weight: bold;
        margin-bottom: 15px;
        color: #2c3e50;
      }

      .options {
        display: grid;
        gap: 10px;
        margin: 15px 0;
      }

      .option {
        padding: 12px 20px;
        background: #f8f9fa;
        border: 2px solid #dee2e6;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .option:hover {
        background: #e9ecef;
        border-color: #007bff;
      }

      .option.selected {
        background: #007bff;
        color: white;
        border-color: #007bff;
      }

      .option.correct {
        background: #28a745;
        color: white;
        border-color: #28a745;
      }

      .option.incorrect {
        background: #dc3545;
        color: white;
        border-color: #dc3545;
      }

      .btn {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 8px;
        cursor: pointer;
        font-size: 1.1em;
        font-weight: bold;
        transition: all 0.3s;
        margin: 10px 5px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .btn:active {
        transform: translateY(0);
      }

      .score {
        text-align: center;
        font-size: 1.3em;
        font-weight: bold;
        color: #2c3e50;
        margin: 20px 0;
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: #e9ecef;
        border-radius: 10px;
        overflow: hidden;
        margin: 20px 0;
      }

      .progress {
        height: 100%;
        background: linear-gradient(135deg, #667eea, #764ba2);
        transition: width 0.5s ease;
        border-radius: 10px;
      }

      .practice-scenario {
        background: linear-gradient(135deg, #ffecd2, #fcb69f);
        padding: 20px;
        border-radius: 10px;
        margin: 20px 0;
      }

      .tips-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
        gap: 15px;
        margin: 20px 0;
      }

      .tip-card {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 8px;
        border-left: 4px solid #007bff;
      }

      @media (max-width: 768px) {
        .nav-tabs {
          flex-direction: column;
        }
        .vocab-grid {
          grid-template-columns: 1fr;
        }
        .seller,
        .customer {
          margin: 0;
        }
        .content {
          padding: 15px;
        }
        .german {
          flex-direction: column;
          align-items: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üõí Lebensmittel einkaufen</h1>
        <p>Luy·ªán t·∫≠p mua s·∫Øm th·ª±c ph·∫©m b·∫±ng ti·∫øng ƒê·ª©c - Phi√™n b·∫£n d·ªãch chu·∫©n</p>
      </div>

      <div class="nav-tabs">
        <button class="nav-tab active" onclick="showTab('vocabulary')">
          üìö T·ª´ v·ª±ng theo ph·∫ßn
        </button>
        <button class="nav-tab" onclick="showTab('dialog')">
          üí¨ H·ªôi tho·∫°i chu·∫©n
        </button>
        <button class="nav-tab" onclick="showTab('quiz')">üéØ Ki·ªÉm tra</button>
        <button class="nav-tab" onclick="showTab('practice')">
          üé≠ Th·ª±c h√†nh
        </button>
      </div>

      <div class="content">
        <!-- Vocabulary Tab -->
        <div id="vocabulary" class="tab-content active">
          <h2>üìö T·ª´ v·ª±ng theo t·ª´ng ph·∫ßn h·ªôi tho·∫°i</h2>

          <!-- Ph·∫ßn 1: L·ªùi ch√†o v√† gi·ªõi thi·ªáu -->
          <div class="vocab-section">
            <h3>üçé Ph·∫ßn 1: L·ªùi ch√†o v√† gi·ªõi thi·ªáu s·∫£n ph·∫©m</h3>
            <div class="vocab-grid">
              <div class="vocab-card">
                <h4>Liebe Kunden!</h4>
                <p>K√≠nh ch√†o qu√Ω kh√°ch!</p>
                <button class="audio-btn" onclick="playAudio('liebe-kunden')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>die Obst- und Gem√ºseabteilung</h4>
                <p>qu·∫ßy hoa qu·∫£ v√† rau c·ªß</p>
                <button class="audio-btn" onclick="playAudio('obst-gemuese')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>die √Ñpfel</h4>
                <p>t√°o</p>
                <p class="price">1 Euro 59/kg</p>
                <button class="audio-btn" onclick="playAudio('aepfel')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>die Birnen</h4>
                <p>l√™</p>
                <p class="price">1 Euro 75/kg</p>
                <button class="audio-btn" onclick="playAudio('birnen')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>im Sonderangebot</h4>
                <p>trong ch∆∞∆°ng tr√¨nh khuy·∫øn m√£i</p>
                <button class="audio-btn" onclick="playAudio('sonderangebot')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>die Tomaten</h4>
                <p>c√† chua</p>
                <p class="price">1 Euro 44/0.5kg</p>
                <button class="audio-btn" onclick="playAudio('tomaten')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>die Kartoffeln</h4>
                <p>khoai t√¢y</p>
                <p class="price">1 Euro 85/kg</p>
                <button class="audio-btn" onclick="playAudio('kartoffeln')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>die Bananen</h4>
                <p>chu·ªëi</p>
                <p class="price">1 Euro 90/0.5kg</p>
                <button class="audio-btn" onclick="playAudio('bananen')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Greifen Sie zu!</h4>
                <p>M·ªùi qu√Ω kh√°ch ch·ªçn mua!</p>
                <button class="audio-btn" onclick="playAudio('greifen-zu')">
                  üîä Nghe
                </button>
              </div>
            </div>
          </div>

          <!-- Ph·∫ßn 2: Khuy·∫øn m√£i ƒë·∫∑c bi·ªát -->
          <div class="vocab-section">
            <h3>üõí Ph·∫ßn 2: Khuy·∫øn m√£i ƒë·∫∑c bi·ªát</h3>
            <div class="vocab-grid">
              <div class="vocab-card">
                <h4>das franz√∂sische Wei√übrot</h4>
                <p>b√°nh m√¨ tr·∫Øng Ph√°p</p>
                <p class="price">99 Cent</p>
                <button class="audio-btn" onclick="playAudio('weissbrot')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>McGary Pommes frites</h4>
                <p>khoai t√¢y chi√™n McGary</p>
                <p class="price">1 Euro 25/g√≥i</p>
                <button class="audio-btn" onclick="playAudio('pommes')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Bio-Milch Almenhof</h4>
                <p>s·ªØa h·ªØu c∆° Almenhof</p>
                <p class="price">1 Euro 07/l√≠t</p>
                <button class="audio-btn" onclick="playAudio('biomilch')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Klosterbach Mineralwasser</h4>
                <p>n∆∞·ªõc kho√°ng Klosterbach</p>
                <p class="price">59 Cent/l√≠t</p>
                <button class="audio-btn" onclick="playAudio('mineralwasser')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Wohlst√§tter Apfelsaft</h4>
                <p>n∆∞·ªõc √©p t√°o Wohlst√§tter</p>
                <p class="price">79 Cent/l√≠t</p>
                <button class="audio-btn" onclick="playAudio('apfelsaft')">
                  üîä Nghe
                </button>
              </div>
            </div>
          </div>

          <!-- Ph·∫ßn 3: C·ª•m t·ª´ giao ti·∫øp -->
          <div class="vocab-section">
            <h3>üí¨ Ph·∫ßn 3: C·ª•m t·ª´ giao ti·∫øp quan tr·ªçng</h3>
            <div class="vocab-grid">
              <div class="vocab-card">
                <h4>Guten Tag!</h4>
                <p>Ch√†o b·∫°n!</p>
                <button class="audio-btn" onclick="playAudio('guten-tag')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Ich h√§tte gern...</h4>
                <p>T√¥i mu·ªën...</p>
                <button class="audio-btn" onclick="playAudio('haette-gern')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Sonst noch etwas?</h4>
                <p>C√≤n g√¨ n·ªØa kh√¥ng?</p>
                <button class="audio-btn" onclick="playAudio('sonst-noch')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Das ist alles</h4>
                <p>Th·∫ø l√† h·∫øt</p>
                <button class="audio-btn" onclick="playAudio('das-ist-alles')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Das macht zusammen...</h4>
                <p>T·ªïng c·ªông l√†...</p>
                <button class="audio-btn" onclick="playAudio('macht-zusammen')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Wie teuer sind...?</h4>
                <p>... gi√° bao nhi√™u?</p>
                <button class="audio-btn" onclick="playAudio('wie-teuer')">
                  üîä Nghe
                </button>
              </div>
            </div>
          </div>

          <!-- Ph·∫ßn 4: Qu·∫ßy th·ªãt -->
          <div class="vocab-section">
            <h3>ü•© Ph·∫ßn 4: Qu·∫ßy th·ªãt v√† x√∫c x√≠ch</h3>
            <div class="vocab-grid">
              <div class="vocab-card">
                <h4>Meine Damen und Herren</h4>
                <p>K√≠nh th∆∞a qu√Ω b√† v√† qu√Ω √¥ng</p>
                <button class="audio-btn" onclick="playAudio('damen-herren')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Wurst- und Fleischabteilung</h4>
                <p>qu·∫ßy x√∫c x√≠ch v√† th·ªãt</p>
                <button class="audio-btn" onclick="playAudio('wurst-fleisch')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Parmaschinken aus Italien</h4>
                <p>giƒÉm b√¥ng Parma t·ª´ √ù</p>
                <button class="audio-btn" onclick="playAudio('parmaschinken')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Serranoschinken aus Spanien</h4>
                <p>giƒÉm b√¥ng Serrano t·ª´ T√¢y Ban Nha</p>
                <button
                  class="audio-btn"
                  onclick="playAudio('serranoschinken')"
                >
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>ein ganzes H√§hnchen</h4>
                <p>m·ªôt con g√† nguy√™n con</p>
                <p class="price">2 Euro 95</p>
                <button class="audio-btn" onclick="playAudio('haehnchen')">
                  üîä Nghe
                </button>
              </div>
              <div class="vocab-card">
                <h4>Fischabteilung im ersten Stock</h4>
                <p>qu·∫ßy c√° ·ªü t·∫ßng m·ªôt</p>
                <button class="audio-btn" onclick="playAudio('fischabteilung')">
                  üîä Nghe
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Dialog Tab -->
        <div id="dialog" class="tab-content">
          <h2>üí¨ H·ªôi tho·∫°i ho√†n ch·ªânh - B·∫£n d·ªãch chu·∫©n (30 c√¢u)</h2>

          <div class="dialog-container">
            <div class="dialog-section">
              <h3>üçé Ph·∫ßn 1: L·ªùi ch√†o v√† gi·ªõi thi·ªáu s·∫£n ph·∫©m (C√¢u 1-6)</h3>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">1</span>Liebe Kunden!
                  <button class="audio-btn" onclick="playAudio('line1')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">K√≠nh ch√†o qu√Ω kh√°ch h√†ng!</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">2</span>In unserer Obst- und
                  Gem√ºseabteilung bieten wir Ihnen heute:
                  <button class="audio-btn" onclick="playAudio('line2')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  H√¥m nay t·∫°i qu·∫ßy hoa qu·∫£ v√† rau c·ªß ch√∫ng t√¥i c√≥:
                </div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">3</span>1 Kilo √Ñpfel f√ºr 1 Euro 59,
                  das Kilo Birnen f√ºr 1 Euro 75.
                  <button class="audio-btn" onclick="playAudio('line3')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  1 kg t√°o gi√° 1 Euro 59, 1 kg l√™ gi√° 1 Euro 75.
                </div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">4</span>Im Sonderangebot diese
                  Woche:
                  <button class="audio-btn" onclick="playAudio('line4')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">Khuy·∫øn m√£i ƒë·∫∑c bi·ªát tu·∫ßn n√†y:</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">5</span>Tomaten, das Pfund f√ºr 1
                  Euro 44, und Kartoffeln, festkochende, das Kilo f√ºr 1 Euro 85,
                  Bananen, das Pfund, 1 Euro 90.
                  <button class="audio-btn" onclick="playAudio('line5')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  C√† chua, n·ª≠a kg gi√° 1 Euro 44, v√† khoai t√¢y c·ª©ng, 1 kg gi√° 1
                  Euro 85, chu·ªëi, n·ª≠a kg, 1 Euro 90.
                </div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">6</span>Greifen Sie zu!
                  <button class="audio-btn" onclick="playAudio('line6')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">M·ªùi qu√Ω kh√°ch ch·ªçn mua!</div>
              </div>
            </div>

            <div class="dialog-section">
              <h3>üõí Ph·∫ßn 2: Khuy·∫øn m√£i ƒë·∫∑c bi·ªát (C√¢u 7-11)</h3>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">7</span>Und heute im Sonderangebot:
                  <button class="audio-btn" onclick="playAudio('line7')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">V√† h√¥m nay c√≥ khuy·∫øn m√£i ƒë·∫∑c bi·ªát:</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">8</span>Franz√∂sisches Wei√übrot,
                  frisch und knusprig, nur noch 99 Cent.
                  <button class="audio-btn" onclick="playAudio('line8')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  B√°nh m√¨ tr·∫Øng Ph√°p, t∆∞∆°i v√† gi√≤n, ch·ªâ c√≤n 99 cent.
                </div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">9</span>McGary Pommes frites, die
                  Packung nur 1 Euro 25.
                  <button class="audio-btn" onclick="playAudio('line9')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  Khoai t√¢y chi√™n McGary, g√≥i ch·ªâ 1 Euro 25.
                </div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">10</span>Bio-Milch Almenhof, der
                  Liter f√ºr 1 Euro 07.
                  <button class="audio-btn" onclick="playAudio('line10')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  S·ªØa h·ªØu c∆° Almenhof, 1 l√≠t gi√° 1 Euro 07.
                </div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">11</span>In unserer
                  Getr√§nkeabteilung gibt es Klosterbach Mineralwasser, die
                  Literflasche heute f√ºr nur 59 Cent, Wohlst√§tter Apfelsaft, den
                  Liter f√ºr 79 Cent.
                  <button class="audio-btn" onclick="playAudio('line11')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  T·∫°i qu·∫ßy ƒë·ªì u·ªëng c√≥ n∆∞·ªõc kho√°ng Klosterbach, chai 1 l√≠t h√¥m
                  nay ch·ªâ 59 Cent, n∆∞·ªõc √©p t√°o Wohlst√§tter, 1 l√≠t gi√° 79 Cent.
                </div>
              </div>
            </div>

            <div class="dialog-section">
              <h3>üõçÔ∏è Ph·∫ßn 3: Cu·ªôc h·ªôi tho·∫°i mua s·∫Øm (C√¢u 12-25)</h3>

              <div class="dialog-line customer">
                <div class="german">
                  <span class="line-number">12</span>Guten Tag, ich h√§tte gern
                  ein Kilo √Ñpfel.
                  <button class="audio-btn" onclick="playAudio('line12')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">Ch√†o b·∫°n, t√¥i mu·ªën 1 kg t√°o.</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">13</span>Gerne.
                  <button class="audio-btn" onclick="playAudio('line13')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">ƒê∆∞·ª£c th√¥i.</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">14</span>Sonst noch etwas?
                  <button class="audio-btn" onclick="playAudio('line14')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">C√≤n g√¨ n·ªØa kh√¥ng?</div>
              </div>

              <div class="dialog-line customer">
                <div class="german">
                  <span class="line-number">15</span>Ja, die Bananen sehen sch√∂n
                  aus.
                  <button class="audio-btn" onclick="playAudio('line15')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">V√¢ng, chu·ªëi tr√¥ng ƒë·∫πp qu√°.</div>
              </div>

              <div class="dialog-line customer">
                <div class="german">
                  <span class="line-number">16</span>Bitte f√ºnf Bananen.
                  <button class="audio-btn" onclick="playAudio('line16')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">L√†m ∆°n cho 5 qu·∫£ chu·ªëi.</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">17</span>Haben Sie noch einen
                  Wunsch?
                  <button class="audio-btn" onclick="playAudio('line17')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">Anh c√≤n mu·ªën g√¨ n·ªØa kh√¥ng?</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">18</span>Wir haben Birnen, aus der
                  Region, ganz frisch, das Kilo f√ºr 1 Euro 50.
                  <button class="audio-btn" onclick="playAudio('line18')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  Ch√∫ng t√¥i c√≥ l√™ t·ª´ v√πng ƒë·ªãa ph∆∞∆°ng, r·∫•t t∆∞∆°i, 1 kg gi√° 1 Euro
                  50.
                </div>
              </div>

              <div class="dialog-line customer">
                <div class="german">
                  <span class="line-number">19</span>Gut, dann auch noch ein
                  Kilo Birnen.
                  <button class="audio-btn" onclick="playAudio('line19')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">T·ªët, v·∫≠y th√™m 1 kg l√™ n·ªØa.</div>
              </div>

              <div class="dialog-line customer">
                <div class="german">
                  <span class="line-number">20</span>Das ist alles.
                  <button class="audio-btn" onclick="playAudio('line20')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">Th·∫ø l√† h·∫øt.</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">21</span>Die √Ñpfel, die Bananen und
                  die Birnen ... das macht zusammen 4 Euro 90.
                  <button class="audio-btn" onclick="playAudio('line21')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  T√°o, chu·ªëi v√† l√™... t·ªïng c·ªông l√† 4 Euro 90.
                </div>
              </div>

              <div class="dialog-line customer">
                <div class="german">
                  <span class="line-number">22</span>Oh, wie dumm, ich sehe
                  gerade, ich habe nur drei Euro dabei.
                  <button class="audio-btn" onclick="playAudio('line22')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  √îi, th·∫≠t t·ªá, t√¥i m·ªõi th·∫•y t√¥i ch·ªâ c√≥ 3 Euro th√¥i.
                </div>
              </div>

              <div class="dialog-line customer">
                <div class="german">
                  <span class="line-number">23</span>Wie teuer sind die Bananen?
                  <button class="audio-btn" onclick="playAudio('line23')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">Chu·ªëi gi√° bao nhi√™u?</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">24</span>2 Euro.
                  <button class="audio-btn" onclick="playAudio('line24')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">2 Euro.</div>
              </div>

              <div class="dialog-line customer">
                <div class="german">
                  <span class="line-number">25</span>Dann geben Sie mir nur die
                  √Ñpfel und die Birnen.
                  <button class="audio-btn" onclick="playAudio('line25')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">V·∫≠y ch·ªâ ƒë∆∞a t√¥i t√°o v√† l√™ th√¥i.</div>
              </div>
            </div>

            <div class="dialog-section">
              <h3>ü•© Ph·∫ßn 4: Qu·∫ßy th·ªãt v√† x√∫c x√≠ch (C√¢u 26-30)</h3>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">26</span>Meine Damen und Herren,
                  besuchen Sie unsere Wurst- und Fleischabteilung.
                  <button class="audio-btn" onclick="playAudio('line26')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  K√≠nh th∆∞a qu√Ω b√† v√† qu√Ω √¥ng, m·ªùi qu√Ω kh√°ch gh√© thƒÉm qu·∫ßy x√∫c
                  x√≠ch v√† th·ªãt c·ªßa ch√∫ng t√¥i.
                </div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">27</span>Heute: Parmaschinken aus
                  Italien und Serranoschinken aus Spanien, frisch angekommen --
                  eine besondere Spezialit√§t.
                  <button class="audio-btn" onclick="playAudio('line27')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  H√¥m nay: GiƒÉm b√¥ng Parma t·ª´ √ù v√† giƒÉm b√¥ng Serrano t·ª´ T√¢y Ban
                  Nha, v·ª´a m·ªõi v·ªÅ -- m·ªôt ƒë·∫∑c s·∫£n ƒë·∫∑c bi·ªát.
                </div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">28</span>Heute besonders billig: ein
                  ganzes H√§hnchen f√ºr nur 2 Euro 95.
                  <button class="audio-btn" onclick="playAudio('line28')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  H√¥m nay ƒë·∫∑c bi·ªát r·∫ª: m·ªôt con g√† nguy√™n con ch·ªâ 2 Euro 95.
                </div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">29</span>Und 2 H√§hnchen gibt es zum
                  Preis von f√ºnf Euro.
                  <button class="audio-btn" onclick="playAudio('line29')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">V√† 2 con g√† c√≥ gi√° 5 Euro.</div>
              </div>

              <div class="dialog-line seller">
                <div class="german">
                  <span class="line-number">30</span>Besuchen Sie auch unsere
                  Fischabteilung im ersten Stock.
                  <button class="audio-btn" onclick="playAudio('line30')">
                    üîä
                  </button>
                </div>
                <div class="vietnamese">
                  M·ªùi qu√Ω kh√°ch c≈©ng gh√© thƒÉm qu·∫ßy c√° ·ªü t·∫ßng m·ªôt.
                </div>
              </div>
            </div>
          </div>

          <button class="btn" onclick="playFullDialog()">
            üîä Nghe to√†n b·ªô h·ªôi tho·∫°i
          </button>
          <button class="btn" onclick="playBySection()">
            üìñ Nghe t·ª´ng ph·∫ßn
          </button>
        </div>

        <!-- Quiz Tab -->
        <div id="quiz" class="tab-content">
          <h2>üéØ Ki·ªÉm tra ki·∫øn th·ª©c - Phi√™n b·∫£n n√¢ng cao</h2>
          <div class="score">
            ƒêi·ªÉm: <span id="score">0</span>/<span id="total">0</span>
          </div>
          <div class="progress-bar">
            <div class="progress" id="progress-bar"></div>
          </div>

          <div id="quiz-container"></div>

          <button class="btn" onclick="startQuiz()">üîÑ L√†m l·∫°i</button>
          <button
            class="btn"
            onclick="nextQuestion()"
            id="next-btn"
            style="display: none"
          >
            ‚û°Ô∏è C√¢u ti·∫øp theo
          </button>
        </div>

        <!-- Practice Tab -->
        <div id="practice" class="tab-content">
          <h2>üé≠ Th·ª±c h√†nh giao ti·∫øp th·ª±c t·∫ø</h2>

          <div class="practice-scenario">
            <h3>üé¨ T√¨nh hu·ªëng 1: Mua hoa qu·∫£</h3>
            <p>
              <strong>B·ªëi c·∫£nh:</strong> B·∫°n ƒëang ·ªü si√™u th·ªã v√† mu·ªën mua t√°o,
              chu·ªëi. B·∫°n c√≥ 5 Euro.
            </p>

            <div class="dialog-line seller">
              <div class="german">
                Guten Tag! Wie kann ich Ihnen helfen?
                <button class="audio-btn" onclick="playAudio('practice1')">
                  üîä
                </button>
              </div>
              <div class="vietnamese">
                Ch√†o b·∫°n! T√¥i c√≥ th·ªÉ gi√∫p g√¨ cho b·∫°n?
              </div>
            </div>

            <div style="margin: 20px 0">
              <h4>üéØ H√£y tr·∫£ l·ªùi b·∫±ng ti·∫øng ƒê·ª©c:</h4>
              <button class="btn" onclick="showResponse('greeting')">
                Ch√†o v√† h·ªèi gi√° t√°o
              </button>
              <button class="btn" onclick="showResponse('direct')">
                Tr·ª±c ti·∫øp n√≥i mu·ªën mua g√¨
              </button>
            </div>

            <div id="response-area"></div>
          </div>

          <div class="practice-scenario">
            <h3>üé¨ T√¨nh hu·ªëng 2: H·ªèi gi√° v√† m·∫∑c c·∫£</h3>
            <p>
              <strong>B·ªëi c·∫£nh:</strong> B·∫°n mu·ªën mua g√† nh∆∞ng th·∫•y h∆°i ƒë·∫Øt.
            </p>

            <div class="dialog-line seller">
              <div class="german">
                Ein ganzes H√§hnchen kostet 2 Euro 95.
                <button class="audio-btn" onclick="playAudio('practice2')">
                  üîä
                </button>
              </div>
              <div class="vietnamese">M·ªôt con g√† nguy√™n con gi√° 2 Euro 95.</div>
            </div>

            <div style="margin: 20px 0">
              <h4>üéØ B·∫°n s·∫Ω n√≥i g√¨?</h4>
              <button class="btn" onclick="showResponse('expensive')">
                N√≥i h∆°i ƒë·∫Øt
              </button>
              <button class="btn" onclick="showResponse('discount')">
                H·ªèi c√≥ gi·∫£m gi√° kh√¥ng
              </button>
            </div>

            <div id="response-area2"></div>
          </div>

          <div class="tips-grid">
            <div class="tip-card">
              <h4>üí° M·∫πo ph√°t √¢m</h4>
              <p>√ú trong "f√ºr" ƒë·ªçc nh∆∞ "∆∞" trong ti·∫øng Vi·ªát</p>
            </div>
            <div class="tip-card">
              <h4>üó£Ô∏è M·∫πo giao ti·∫øp</h4>
              <p>Lu√¥n n√≥i "Bitte" (l√†m ∆°n) v√† "Danke" (c·∫£m ∆°n)</p>
            </div>
            <div class="tip-card">
              <h4>üí∞ M·∫πo t√≠nh ti·ªÅn</h4>
              <p>"Das macht..." = "T·ªïng c·ªông l√†..."</p>
            </div>
            <div class="tip-card">
              <h4>üéØ M·∫πo h·ªçc thu·ªôc</h4>
              <p>Luy·ªán t·∫≠p theo t·ª´ng ph·∫ßn, kh√¥ng h·ªçc l·ªôn x·ªôn</p>
            </div>
          </div>

          <div class="dialog-container">
            <h3>üìö B√†i t·∫≠p n√¢ng cao</h3>
            <p>
              <strong>Th·ª≠ th√°ch:</strong> H√£y t·∫°o ra cu·ªôc h·ªôi tho·∫°i ho√†n ch·ªânh
              v·ªõi c√°c y√™u c·∫ßu:
            </p>
            <ul style="margin: 15px 0; padding-left: 20px">
              <li>Ch√†o h·ªèi l·ªãch s·ª±</li>
              <li>H·ªèi gi√° √≠t nh·∫•t 3 lo·∫°i th·ª±c ph·∫©m</li>
              <li>Mua 2 lo·∫°i, t·ª´ ch·ªëi 1 lo·∫°i</li>
              <li>H·ªèi t·ªïng ti·ªÅn v√† thanh to√°n</li>
              <li>C·∫£m ∆°n v√† ch√†o t·∫°m bi·ªát</li>
            </ul>

            <button class="btn" onclick="startAdvancedPractice()">
              üöÄ B·∫Øt ƒë·∫ßu th·ª≠ th√°ch
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Tab switching
      function showTab(tabName) {
        const tabs = document.querySelectorAll(".tab-content");
        tabs.forEach((tab) => tab.classList.remove("active"));

        const navTabs = document.querySelectorAll(".nav-tab");
        navTabs.forEach((tab) => tab.classList.remove("active"));

        document.getElementById(tabName).classList.add("active");
        event.target.classList.add("active");
      }

      // Text-to-Speech mapping for German audio
      const germanTexts = {
        // Vocabulary audio
        "liebe-kunden": "Liebe Kunden!",
        "obst-gemuese": "die Obst- und Gem√ºseabteilung",
        aepfel: "die √Ñpfel",
        birnen: "die Birnen",
        sonderangebot: "im Sonderangebot",
        tomaten: "die Tomaten",
        kartoffeln: "die Kartoffeln",
        bananen: "die Bananen",
        "greifen-zu": "Greifen Sie zu!",
        weissbrot: "das franz√∂sische Wei√übrot",
        pommes: "McGary Pommes frites",
        biomilch: "Bio-Milch Almenhof",
        mineralwasser: "Klosterbach Mineralwasser",
        apfelsaft: "Wohlst√§tter Apfelsaft",
        "guten-tag": "Guten Tag!",
        "haette-gern": "Ich h√§tte gern",
        "sonst-noch": "Sonst noch etwas?",
        "das-ist-alles": "Das ist alles",
        "macht-zusammen": "Das macht zusammen",
        "wie-teuer": "Wie teuer sind",
        "damen-herren": "Meine Damen und Herren",
        "wurst-fleisch": "Wurst- und Fleischabteilung",
        parmaschinken: "Parmaschinken aus Italien",
        serranoschinken: "Serranoschinken aus Spanien",
        haehnchen: "ein ganzes H√§hnchen",
        fischabteilung: "Fischabteilung im ersten Stock",

        // Dialog lines audio
        line1: "Liebe Kunden!",
        line2: "In unserer Obst- und Gem√ºseabteilung bieten wir Ihnen heute:",
        line3:
          "Ein Kilo √Ñpfel f√ºr einen Euro neunundf√ºnfzig, das Kilo Birnen f√ºr einen Euro f√ºnfundsiebzig.",
        line4: "Im Sonderangebot diese Woche:",
        line5:
          "Tomaten, das Pfund f√ºr einen Euro vierundvierzig, und Kartoffeln, festkochende, das Kilo f√ºr einen Euro f√ºnfundachtzig, Bananen, das Pfund, einen Euro neunzig.",
        line6: "Greifen Sie zu!",
        line7: "Und heute im Sonderangebot:",
        line8:
          "Franz√∂sisches Wei√übrot, frisch und knusprig, nur noch neunundneunzig Cent.",
        line9:
          "McGary Pommes frites, die Packung nur einen Euro f√ºnfundzwanzig.",
        line10: "Bio-Milch Almenhof, der Liter f√ºr einen Euro sieben.",
        line11:
          "In unserer Getr√§nkeabteilung gibt es Klosterbach Mineralwasser, die Literflasche heute f√ºr nur neunundf√ºnfzig Cent, Wohlst√§tter Apfelsaft, den Liter f√ºr neunundsiebzig Cent.",
        line12: "Guten Tag, ich h√§tte gern ein Kilo √Ñpfel.",
        line13: "Gerne.",
        line14: "Sonst noch etwas?",
        line15: "Ja, die Bananen sehen sch√∂n aus.",
        line16: "Bitte f√ºnf Bananen.",
        line17: "Haben Sie noch einen Wunsch?",
        line18:
          "Wir haben Birnen, aus der Region, ganz frisch, das Kilo f√ºr einen Euro f√ºnfzig.",
        line19: "Gut, dann auch noch ein Kilo Birnen.",
        line20: "Das ist alles.",
        line21:
          "Die √Ñpfel, die Bananen und die Birnen, das macht zusammen vier Euro neunzig.",
        line22: "Oh, wie dumm, ich sehe gerade, ich habe nur drei Euro dabei.",
        line23: "Wie teuer sind die Bananen?",
        line24: "Zwei Euro.",
        line25: "Dann geben Sie mir nur die √Ñpfel und die Birnen.",
        line26:
          "Meine Damen und Herren, besuchen Sie unsere Wurst- und Fleischabteilung.",
        line27:
          "Heute: Parmaschinken aus Italien und Serranoschinken aus Spanien, frisch angekommen, eine besondere Spezialit√§t.",
        line28:
          "Heute besonders billig: ein ganzes H√§hnchen f√ºr nur zwei Euro f√ºnfundneunzig.",
        line29: "Und zwei H√§hnchen gibt es zum Preis von f√ºnf Euro.",
        line30: "Besuchen Sie auch unsere Fischabteilung im ersten Stock.",

        // Practice responses
        practice1: "Guten Tag! Wie kann ich Ihnen helfen?",
        practice2: "Ein ganzes H√§hnchen kostet zwei Euro f√ºnfundneunzig.",
        response1: "Guten Tag! Wie teuer sind die √Ñpfel?",
        response2: "Ich h√§tte gern ein Kilo √Ñpfel, bitte.",
        response3: "Das ist etwas teuer.",
        response4: "Gibt es einen Rabatt?",
      };

      // Real German Text-to-Speech function
      function playAudio(id) {
        // Check if browser supports Speech Synthesis
        if (!("speechSynthesis" in window)) {
          alert(
            "‚ö†Ô∏è Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ Text-to-Speech. Vui l√≤ng c·∫≠p nh·∫≠t tr√¨nh duy·ªát!"
          );
          return;
        }

        const text = germanTexts[id];
        if (!text) {
          console.warn(`No German text found for ID: ${id}`);
          return;
        }

        // Cancel any ongoing speech
        speechSynthesis.cancel();

        // Create speech utterance
        const utterance = new SpeechSynthesisUtterance(text);

        // Configure for German
        utterance.lang = "de-DE"; // German language
        utterance.rate = 0.8; // Slower speed for learning
        utterance.pitch = 1.0; // Normal pitch
        utterance.volume = 1.0; // Full volume

        // Visual feedback
        const button = event.target;
        const originalText = button.textContent;
        const originalBg = button.style.background;

        button.textContent = "üîä ƒêang ph√°t...";
        button.style.background = "#ffc107";
        button.disabled = true;

        // Speech events
        utterance.onstart = function () {
          console.log(`üîä Playing German audio: "${text}"`);
        };

        utterance.onend = function () {
          button.textContent = originalText;
          button.style.background = originalBg || "#28a745";
          button.disabled = false;
        };

        utterance.onerror = function (event) {
          console.error("Speech error:", event.error);
          button.textContent = originalText;
          button.style.background = originalBg || "#28a745";
          button.disabled = false;
        };

        // Try to find German voice
        const voices = speechSynthesis.getVoices();
        const germanVoice = voices.find((voice) => voice.lang.startsWith("de"));
        if (germanVoice) {
          utterance.voice = germanVoice;
        }

        // Speak the text
        speechSynthesis.speak(utterance);
      }

      // Load voices when page loads
      function loadVoices() {
        const voices = speechSynthesis.getVoices();
        const germanVoices = voices.filter((voice) =>
          voice.lang.startsWith("de")
        );

        if (germanVoices.length === 0) {
          console.warn("‚ö†Ô∏è No German voices detected.");
        } else {
          console.log(
            `‚úÖ Found ${germanVoices.length} German voice(s):`,
            germanVoices.map((v) => v.name)
          );
        }
      }

      // Load voices on page load and when voices change
      speechSynthesis.onvoiceschanged = loadVoices;

      // Quiz functionality
      const quizQuestions = [
        {
          question: "L√†m th·∫ø n√†o ƒë·ªÉ n√≥i 'T√¥i mu·ªën 1 kg t√°o' b·∫±ng ti·∫øng ƒê·ª©c?",
          options: [
            "Ich m√∂chte ein Kilo √Ñpfel",
            "Ich h√§tte gern ein Kilo √Ñpfel",
            "Ich will ein Kilo √Ñpfel",
            "Ich brauche ein Kilo √Ñpfel",
          ],
          correct: 1,
        },
        {
          question: "Gi√° l√™ t·ª´ v√πng ƒë·ªãa ph∆∞∆°ng l√† bao nhi√™u?",
          options: ["1 Euro 50", "1 Euro 75", "1 Euro 90", "1 Euro 44"],
          correct: 0,
        },
        {
          question: "'Sonst noch etwas?' c√≥ nghƒ©a l√† g√¨?",
          options: [
            "Bao nhi√™u ti·ªÅn?",
            "C√≤n g√¨ n·ªØa kh√¥ng?",
            "C·∫£m ∆°n b·∫°n",
            "T·∫°m bi·ªát",
          ],
          correct: 1,
        },
        {
          question: "B√°nh m√¨ tr·∫Øng Ph√°p gi√° bao nhi√™u?",
          options: ["1 Euro 07", "99 Cent", "79 Cent", "59 Cent"],
          correct: 1,
        },
        {
          question: "GiƒÉm b√¥ng Parma ƒë·∫øn t·ª´ ƒë√¢u?",
          options: ["T√¢y Ban Nha", "Ph√°p", "√ù", "ƒê·ª©c"],
          correct: 2,
        },
        {
          question: "'Das macht zusammen 4 Euro 90' c√≥ nghƒ©a l√† g√¨?",
          options: [
            "T·ªïng c·ªông l√† 4 Euro 90",
            "C√≤n l·∫°i 4 Euro 90",
            "Gi·∫£m gi√° 4 Euro 90",
            "Th√™m 4 Euro 90",
          ],
          correct: 0,
        },
        {
          question: "M·ªôt con g√† nguy√™n con gi√° bao nhi√™u?",
          options: ["2 Euro 95", "5 Euro", "1 Euro 85", "1 Euro 25"],
          correct: 0,
        },
        {
          question: "N∆∞·ªõc kho√°ng Klosterbach gi√° bao nhi√™u?",
          options: ["79 Cent", "99 Cent", "59 Cent", "1 Euro 07"],
          correct: 2,
        },
        {
          question: "'Greifen Sie zu!' c√≥ nghƒ©a l√† g√¨?",
          options: [
            "C·∫£m ∆°n b·∫°n",
            "T·∫°m bi·ªát",
            "M·ªùi qu√Ω kh√°ch ch·ªçn mua",
            "Xin l·ªói",
          ],
          correct: 2,
        },
        {
          question: "Qu·∫ßy c√° ·ªü t·∫ßng n√†o?",
          options: ["T·∫ßng tr·ªát", "T·∫ßng m·ªôt", "T·∫ßng hai", "T·∫ßng ba"],
          correct: 1,
        },
        {
          question: "Khoai t√¢y chi√™n McGary gi√° bao nhi√™u?",
          options: ["1 Euro 07", "1 Euro 25", "1 Euro 44", "1 Euro 85"],
          correct: 1,
        },
        {
          question: "'Wie dumm' trong ng·ªØ c·∫£nh n√†y c√≥ nghƒ©a l√† g√¨?",
          options: ["Th·∫≠t tuy·ªát", "Th·∫≠t t·ªá", "Th·∫≠t ƒë·∫Øt", "Th·∫≠t r·∫ª"],
          correct: 1,
        },
        {
          question: "C√°ch l·ªãch s·ª± ƒë·ªÉ ch√†o kh√°ch h√†ng trong c·ª≠a h√†ng l√† g√¨?",
          options: ["Hallo!", "Guten Tag!", "Liebe Kunden!", "Wie geht's?"],
          correct: 2,
        },
        {
          question: "'Haben Sie noch einen Wunsch?' c√≥ nghƒ©a l√† g√¨?",
          options: [
            "B·∫°n c√≥ ti·ªÅn kh√¥ng?",
            "Anh c√≤n mu·ªën g√¨ n·ªØa kh√¥ng?",
            "B·∫°n c√≥ th·∫ª kh√¥ng?",
            "Anh ·ªü ƒë√¢u?",
          ],
          correct: 1,
        },
        {
          question: "2 con g√† c√≥ gi√° bao nhi√™u?",
          options: ["2 Euro 95", "4 Euro 90", "5 Euro", "6 Euro"],
          correct: 2,
        },
      ];

      let currentQuestion = 0;
      let score = 0;
      let answered = false;

      function startQuiz() {
        currentQuestion = 0;
        score = 0;
        answered = false;
        document.getElementById("score").textContent = score;
        document.getElementById("total").textContent = quizQuestions.length;
        updateProgressBar();
        showQuestion();
      }

      function showQuestion() {
        if (currentQuestion >= quizQuestions.length) {
          showFinalScore();
          return;
        }

        const question = quizQuestions[currentQuestion];
        const container = document.getElementById("quiz-container");

        container.innerHTML = `
                <div class="quiz-card">
                    <div class="question">${currentQuestion + 1}. ${
          question.question
        }</div>
                    <div class="options">
                        ${question.options
                          .map(
                            (option, index) =>
                              `<div class="option" onclick="selectAnswer(${index})">${option}</div>`
                          )
                          .join("")}
                    </div>
                </div>
            `;

        answered = false;
        document.getElementById("next-btn").style.display = "none";
      }

      function selectAnswer(selectedIndex) {
        if (answered) return;

        const question = quizQuestions[currentQuestion];
        const options = document.querySelectorAll(".option");
        const quizCard = document.querySelector(".quiz-card");

        options[selectedIndex].classList.add("selected");

        setTimeout(() => {
          options.forEach((option, index) => {
            if (index === question.correct) {
              option.classList.add("correct");
            } else if (index === selectedIndex && index !== question.correct) {
              option.classList.add("incorrect");
            }
          });

          if (selectedIndex === question.correct) {
            score++;
            quizCard.classList.add("correct");
          } else {
            quizCard.classList.add("incorrect");
          }

          document.getElementById("score").textContent = score;
          answered = true;
          document.getElementById("next-btn").style.display = "inline-block";
        }, 500);
      }

      function nextQuestion() {
        currentQuestion++;
        updateProgressBar();
        showQuestion();
      }

      function updateProgressBar() {
        const progress = (currentQuestion / quizQuestions.length) * 100;
        document.getElementById("progress-bar").style.width = progress + "%";
      }

      function showFinalScore() {
        const container = document.getElementById("quiz-container");
        const percentage = Math.round((score / quizQuestions.length) * 100);
        let message = "";

        if (percentage >= 90) {
          message = "üéâ Xu·∫•t s·∫Øc! B·∫°n ƒë√£ th√†nh th·∫°o b√†i h·ªçc!";
        } else if (percentage >= 80) {
          message = "üëç R·∫•t t·ªët! B·∫°n ƒë√£ n·∫Øm v·ªØng h·∫ßu h·∫øt n·ªôi dung!";
        } else if (percentage >= 60) {
          message = "üòä Kh√° ·ªïn! H√£y √¥n luy·ªán th√™m m·ªôt ch√∫t.";
        } else {
          message = "üí™ H√£y xem l·∫°i t·ª´ v·ª±ng v√† th·ª≠ l·∫°i nh√©!";
        }

        container.innerHTML = `
                <div class="quiz-card">
                    <h3>üèÜ K·∫øt qu·∫£ cu·ªëi c√πng</h3>
                    <div class="score" style="font-size: 2em; margin: 20px 0;">
                        ${score}/${quizQuestions.length} (${percentage}%)
                    </div>
                    <p style="font-size: 1.2em; text-align: center;">${message}</p>
                </div>
            `;

        document.getElementById("next-btn").style.display = "none";
      }

      // Practice responses
      function showResponse(type) {
        const responseArea = document.getElementById("response-area");
        let response = "";

        if (type === "greeting") {
          response = `
                    <div class="dialog-line customer">
                        <div class="german">Guten Tag! Wie teuer sind die √Ñpfel? <button class="audio-btn" onclick="playAudio('response1')">üîä</button></div>
                        <div class="vietnamese">Ch√†o b·∫°n! T√°o gi√° bao nhi√™u?</div>
                    </div>
                `;
        } else if (type === "direct") {
          response = `
                    <div class="dialog-line customer">
                        <div class="german">Ich h√§tte gern ein Kilo √Ñpfel, bitte. <button class="audio-btn" onclick="playAudio('response2')">üîä</button></div>
                        <div class="vietnamese">T√¥i mu·ªën 1 kg t√°o, l√†m ∆°n.</div>
                    </div>
                `;
        } else if (type === "expensive") {
          response = `
                    <div class="dialog-line customer">
                        <div class="german">Das ist etwas teuer. <button class="audio-btn" onclick="playAudio('response3')">üîä</button></div>
                        <div class="vietnamese">H∆°i ƒë·∫Øt nh·ªâ.</div>
                    </div>
                `;
        } else if (type === "discount") {
          response = `
                    <div class="dialog-line customer">
                        <div class="german">Gibt es einen Rabatt? <button class="audio-btn" onclick="playAudio('response4')">üîä</button></div>
                        <div class="vietnamese">C√≥ gi·∫£m gi√° kh√¥ng?</div>
                    </div>
                `;
        }

        responseArea.innerHTML = response;
      }

      function startAdvancedPractice() {
        alert(
          "üéØ Th·ª≠ th√°ch n√¢ng cao!\n\nH√£y t·∫°o cu·ªôc h·ªôi tho·∫°i ho√†n ch·ªânh v√† th·ª±c h√†nh v·ªõi b·∫°n b√® ho·∫∑c tr∆∞·ªõc g∆∞∆°ng."
        );
      }

      // Audio functions
      function playFullDialog() {
        if (!("speechSynthesis" in window)) {
          alert("‚ö†Ô∏è Tr√¨nh duy·ªát c·ªßa b·∫°n kh√¥ng h·ªó tr·ª£ Text-to-Speech!");
          return;
        }

        // Cancel any ongoing speech
        speechSynthesis.cancel();

        // Collect all dialog lines in order
        const allLines = [];
        for (let i = 1; i <= 30; i++) {
          const text = germanTexts[`line${i}`];
          if (text) {
            allLines.push(text);
          }
        }

        let currentIndex = 0;

        function speakNext() {
          if (currentIndex >= allLines.length) {
            alert("‚úÖ ƒê√£ ph√°t xong to√†n b·ªô h·ªôi tho·∫°i!");
            return;
          }

          const utterance = new SpeechSynthesisUtterance(
            allLines[currentIndex]
          );
          utterance.lang = "de-DE";
          utterance.rate = 0.7;
          utterance.pitch = 1.0;
          utterance.volume = 1.0;

          // Find German voice
          const voices = speechSynthesis.getVoices();
          const germanVoice = voices.find((voice) =>
            voice.lang.startsWith("de")
          );
          if (germanVoice) {
            utterance.voice = germanVoice;
          }

          utterance.onend = function () {
            currentIndex++;
            setTimeout(speakNext, 1500); // 1.5 second pause between lines
          };

          utterance.onerror = function () {
            currentIndex++;
            setTimeout(speakNext, 500);
          };

          speechSynthesis.speak(utterance);
        }

        alert(
          "üîä B·∫Øt ƒë·∫ßu ph√°t to√†n b·ªô 30 c√¢u h·ªôi tho·∫°i!\nNh·∫•n OK ƒë·ªÉ ti·∫øp t·ª•c..."
        );
        speakNext();
      }

      function playBySection() {
        const section = prompt(`üìñ Ch·ªçn ph·∫ßn mu·ªën nghe (nh·∫≠p s·ªë 1-4):
            
1. Ph·∫ßn 1: Gi·ªõi thi·ªáu s·∫£n ph·∫©m (C√¢u 1-6)
2. Ph·∫ßn 2: Khuy·∫øn m√£i ƒë·∫∑c bi·ªát (C√¢u 7-11)  
3. Ph·∫ßn 3: Cu·ªôc h·ªôi tho·∫°i mua s·∫Øm (C√¢u 12-25)
4. Ph·∫ßn 4: Qu·∫ßy th·ªãt v√† x√∫c x√≠ch (C√¢u 26-30)

Nh·∫≠p s·ªë (1-4):`);

        if (!section || !["1", "2", "3", "4"].includes(section)) {
          alert("‚ùå Vui l√≤ng nh·∫≠p s·ªë t·ª´ 1 ƒë·∫øn 4!");
          return;
        }

        let startLine, endLine, sectionName;

        switch (section) {
          case "1":
            startLine = 1;
            endLine = 6;
            sectionName = "Gi·ªõi thi·ªáu s·∫£n ph·∫©m";
            break;
          case "2":
            startLine = 7;
            endLine = 11;
            sectionName = "Khuy·∫øn m√£i ƒë·∫∑c bi·ªát";
            break;
          case "3":
            startLine = 12;
            endLine = 25;
            sectionName = "Cu·ªôc h·ªôi tho·∫°i mua s·∫Øm";
            break;
          case "4":
            startLine = 26;
            endLine = 30;
            sectionName = "Qu·∫ßy th·ªãt v√† x√∫c x√≠ch";
            break;
        }

        // Cancel any ongoing speech
        speechSynthesis.cancel();

        // Collect lines for this section
        const sectionLines = [];
        for (let i = startLine; i <= endLine; i++) {
          const text = germanTexts[`line${i}`];
          if (text) {
            sectionLines.push(text);
          }
        }

        let currentIndex = 0;

        function speakNext() {
          if (currentIndex >= sectionLines.length) {
            alert(`‚úÖ ƒê√£ ph√°t xong ph·∫ßn ${section}: ${sectionName}!`);
            return;
          }

          const utterance = new SpeechSynthesisUtterance(
            sectionLines[currentIndex]
          );
          utterance.lang = "de-DE";
          utterance.rate = 0.7;
          utterance.pitch = 1.0;
          utterance.volume = 1.0;

          // Find German voice
          const voices = speechSynthesis.getVoices();
          const germanVoice = voices.find((voice) =>
            voice.lang.startsWith("de")
          );
          if (germanVoice) {
            utterance.voice = germanVoice;
          }

          utterance.onend = function () {
            currentIndex++;
            setTimeout(speakNext, 1200); // 1.2 second pause
          };

          utterance.onerror = function () {
            currentIndex++;
            setTimeout(speakNext, 500);
          };

          speechSynthesis.speak(utterance);
        }

        alert(
          `üîä B·∫Øt ƒë·∫ßu ph√°t Ph·∫ßn ${section}: ${sectionName}!\nNh·∫•n OK ƒë·ªÉ ti·∫øp t·ª•c...`
        );
        speakNext();
      }

      // Initialize
      window.onload = function () {
        startQuiz();
        loadVoices();
      };
    </script>
  </body>
</html>
