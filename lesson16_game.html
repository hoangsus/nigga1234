<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Luy·ªán T·∫≠p Gi·ªù Ti·∫øng ƒê·ª©c</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .game-container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            max-width: 800px;
            width: 100%;
            padding: 30px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #333;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        .game-modes {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 30px;
        }

        .mode-btn {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            cursor: pointer;
            font-size: 1.1em;
            transition: all 0.3s ease;
        }

        .mode-btn:hover {
            background: #45a049;
            transform: translateY(-2px);
        }

        .mode-btn.active {
            background: #2196F3;
        }

        .game-area {
            background: #f9f9f9;
            border-radius: 15px;
            padding: 30px;
            margin-bottom: 20px;
            text-align: center;
        }

        .clock-display {
            font-size: 4em;
            font-weight: bold;
            color: #333;
            margin-bottom: 20px;
            font-family: 'Courier New', monospace;
        }

        .question {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
        }

        .answer-input {
            font-size: 1.2em;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            width: 100%;
            max-width: 400px;
            margin-bottom: 20px;
        }

        .buttons {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 20px;
        }

        .btn {
            background: #2196F3;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .btn:hover {
            background: #1976D2;
            transform: translateY(-2px);
        }

        .btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .feedback {
            font-size: 1.2em;
            margin-bottom: 20px;
            padding: 15px;
            border-radius: 10px;
        }

        .feedback.correct {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .feedback.incorrect {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .score {
            display: flex;
            justify-content: space-between;
            background: #e3f2fd;
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .score-item {
            text-align: center;
        }

        .score-number {
            font-size: 2em;
            font-weight: bold;
            color: #1976D2;
        }

        .score-label {
            color: #666;
            font-size: 0.9em;
        }

        .time-reference {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .time-reference h3 {
            color: #856404;
            margin-bottom: 15px;
        }

        .time-examples {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
            font-size: 0.9em;
        }

        .time-example {
            background: white;
            padding: 8px;
            border-radius: 5px;
            border-left: 4px solid #ffc107;
        }

        .pronunciation-guide {
            background: #e8f5e8;
            border: 1px solid #c3e6cb;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
        }

        .pronunciation-guide h3 {
            color: #155724;
            margin-bottom: 15px;
        }

        .voice-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-bottom: 20px;
        }

        .voice-btn {
            background: #ff9800;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s ease;
        }

        .voice-btn:hover {
            background: #f57c00;
        }

        .voice-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        @media (max-width: 600px) {
            .game-container {
                padding: 20px;
            }
            
            .clock-display {
                font-size: 2.5em;
            }
            
            .buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .game-modes {
                flex-direction: column;
                align-items: center;
            }
        }
    </style>
</head>
<body>
    <div class="game-container">
        <div class="header">
            <h1>üïê Luy·ªán T·∫≠p Gi·ªù Ti·∫øng ƒê·ª©c</h1>
            <p>H·ªçc c√°ch n√≥i gi·ªù trong ti·∫øng ƒê·ª©c m·ªôt c√°ch th√∫ v·ªã!</p>
        </div>

        <div class="game-modes">
            <button class="mode-btn active" onclick="setGameMode('reading')">ƒê·ªçc Gi·ªù</button>
            <button class="mode-btn" onclick="setGameMode('writing')">Vi·∫øt Gi·ªù</button>
            <button class="mode-btn" onclick="setGameMode('listening')">Nghe & Vi·∫øt</button>
            <button class="mode-btn" onclick="setGameMode('regional')">Ph∆∞∆°ng Ng·ªØ</button>
        </div>

        <div class="score">
            <div class="score-item">
                <div class="score-number" id="correct">0</div>
                <div class="score-label">ƒê√∫ng</div>
            </div>
            <div class="score-item">
                <div class="score-number" id="total">0</div>
                <div class="score-label">T·ªïng</div>
            </div>
            <div class="score-item">
                <div class="score-number" id="accuracy">0%</div>
                <div class="score-label">ƒê·ªô ch√≠nh x√°c</div>
            </div>
        </div>

        <div class="game-area">
            <div class="clock-display" id="clockDisplay">--:--</div>
            <div class="question" id="question">Nh·∫•n "C√¢u h·ªèi m·ªõi" ƒë·ªÉ b·∫Øt ƒë·∫ßu!</div>
            
            <div class="voice-controls" id="voiceControls" style="display: none;">
                <button class="voice-btn" onclick="speakGerman()">üîä Nghe ti·∫øng ƒê·ª©c</button>
                <button class="voice-btn" onclick="speakVietnamese()">üîä Nghe ti·∫øng Vi·ªát</button>
            </div>

            <input type="text" class="answer-input" id="answerInput" placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi c·ªßa b·∫°n..." style="display: none;">
            
            <div class="buttons">
                <button class="btn" onclick="newQuestion()">C√¢u h·ªèi m·ªõi</button>
                <button class="btn" onclick="checkAnswer()" id="checkBtn" style="display: none;">Ki·ªÉm tra</button>
                <button class="btn" onclick="showAnswer()" id="showBtn">Hi·ªán ƒë√°p √°n</button>
            </div>

            <div class="feedback" id="feedback" style="display: none;"></div>
        </div>

        <div class="time-reference">
            <h3>üìö Tham kh·∫£o HO√ÄN CH·ªàNH c√°ch n√≥i gi·ªù:</h3>
            <div class="time-examples">
                <div class="time-example"><strong>Gi·ªù tr√≤n:</strong> 8:00 = acht Uhr</div>
                <div class="time-example"><strong>15 ph√∫t:</strong> 8:15 = Viertel nach acht</div>
                <div class="time-example"><strong>30 ph√∫t:</strong> 8:30 = halb neun (!)</div>
                <div class="time-example"><strong>45 ph√∫t:</strong> 8:45 = Viertel vor neun</div>
                <div class="time-example"><strong>5 ph√∫t sau:</strong> 8:05 = f√ºnf nach acht</div>
                <div class="time-example"><strong>10 ph√∫t sau:</strong> 8:10 = zehn nach acht</div>
                <div class="time-example"><strong>20 ph√∫t sau:</strong> 8:20 = zwanzig nach acht</div>
                <div class="time-example"><strong>25 ph√∫t sau:</strong> 8:25 = f√ºnf vor halb neun</div>
                <div class="time-example"><strong>35 ph√∫t sau:</strong> 8:35 = f√ºnf nach halb neun</div>
                <div class="time-example"><strong>40 ph√∫t sau:</strong> 8:40 = zwanzig vor neun</div>
                <div class="time-example"><strong>50 ph√∫t sau:</strong> 8:50 = zehn vor neun</div>
                <div class="time-example"><strong>55 ph√∫t sau:</strong> 8:55 = f√ºnf vor neun</div>
                <div class="time-example"><strong>Kho·∫£ng:</strong> 8:03 = kurz nach acht</div>
                <div class="time-example"><strong>Kho·∫£ng:</strong> 8:57 = kurz vor neun</div>
                <div class="time-example"><strong>24h:</strong> 20:00 = zwanzig Uhr</div>
                <div class="time-example"><strong>ƒê√¥ng ƒê·ª©c:</strong> 8:15 = viertel neun</div>
                <div class="time-example"><strong>ƒê√¥ng ƒê·ª©c:</strong> 8:45 = dreiviertel neun</div>
            </div>
        </div>

        <div class="pronunciation-guide">
            <h3>üó£Ô∏è H∆∞·ªõng d·∫´n ph√°t √¢m:</h3>
            <p><strong>Uhr</strong> [uÀê…êÃØ] - gi·ªù | <strong>halb</strong> [halp] - r∆∞·ª°i | <strong>Viertel</strong> [Ààf…™ ÅtlÃ©] - 15 ph√∫t</p>
            <p><strong>nach</strong> [naÀêx] - sau | <strong>vor</strong> [foÀê…êÃØ] - tr∆∞·ªõc | <strong>kurz</strong> [k ä Åts] - s·∫Øp</p>
        </div>
    </div>

    <script>
        let currentMode = 'reading';
        let currentTime = null;
        let currentAnswer = '';
        let correctCount = 0;
        let totalCount = 0;
        let gameActive = false;

        // D·ªØ li·ªáu th·ªùi gian HO√ÄN CH·ªàNH cho ti·∫øng ƒê·ª©c
        const timeData = {
            formal: {
                '1:00': 'ein Uhr', '2:00': 'zwei Uhr', '3:00': 'drei Uhr', '4:00': 'vier Uhr', 
                '5:00': 'f√ºnf Uhr', '6:00': 'sechs Uhr', '7:00': 'sieben Uhr', '8:00': 'acht Uhr',
                '9:00': 'neun Uhr', '10:00': 'zehn Uhr', '11:00': 'elf Uhr', '12:00': 'zw√∂lf Uhr',
                '13:00': 'dreizehn Uhr', '14:00': 'vierzehn Uhr', '15:00': 'f√ºnfzehn Uhr', 
                '16:00': 'sechzehn Uhr', '17:00': 'siebzehn Uhr', '18:00': 'achtzehn Uhr',
                '19:00': 'neunzehn Uhr', '20:00': 'zwanzig Uhr', '21:00': 'einundzwanzig Uhr',
                '22:00': 'zweiundzwanzig Uhr', '23:00': 'dreiundzwanzig Uhr', '0:00': 'null Uhr',
                '8:05': 'acht Uhr f√ºnf', '8:10': 'acht Uhr zehn', '8:20': 'acht Uhr zwanzig',
                '8:25': 'acht Uhr f√ºnfundzwanzig', '8:35': 'acht Uhr f√ºnfunddrei√üig',
                '8:40': 'acht Uhr vierzig', '8:50': 'acht Uhr f√ºnfzig', '8:55': 'acht Uhr f√ºnfundf√ºnfzig',
                '17:45': 'siebzehn Uhr f√ºnfundvierzig', '18:15': 'achtzehn Uhr f√ºnfzehn',
                '17:30': 'siebzehn Uhr drei√üig', '18:40': 'achtzehn Uhr vierzig',
                '17:50': 'siebzehn Uhr f√ºnfzig', '18:03': 'achtzehn Uhr drei',
                '17:57': 'siebzehn Uhr siebenundf√ºnfzig', '12:25': 'zw√∂lf Uhr f√ºnfundzwanzig',
                '12:35': 'zw√∂lf Uhr f√ºnfunddrei√üig', '14:22': 'vierzehn Uhr zweiundzwanzig',
                '16:33': 'sechzehn Uhr dreiunddrei√üig', '21:47': 'einundzwanzig Uhr siebenundvierzig'
            },
            informal: {
                '1:00': 'ein Uhr', '2:00': 'zwei Uhr', '3:00': 'drei Uhr', '4:00': 'vier Uhr',
                '5:00': 'f√ºnf Uhr', '6:00': 'sechs Uhr', '7:00': 'sieben Uhr', '8:00': 'acht Uhr',
                '9:00': 'neun Uhr', '10:00': 'zehn Uhr', '11:00': 'elf Uhr', '12:00': 'zw√∂lf Uhr',
                '13:00': 'ein Uhr (nachmittags)', '14:00': 'zwei Uhr (nachmittags)', 
                '15:00': 'drei Uhr (nachmittags)', '16:00': 'vier Uhr (nachmittags)',
                '17:00': 'f√ºnf Uhr (nachmittags)', '18:00': 'sechs Uhr (abends)',
                '19:00': 'sieben Uhr (abends)', '20:00': 'acht Uhr (abends)',
                '21:00': 'neun Uhr (abends)', '22:00': 'zehn Uhr (abends)',
                '23:00': 'elf Uhr (nachts)', '0:00': 'zw√∂lf Uhr (Mitternacht)',
                // Quarter hours - Viertel
                '8:15': 'Viertel nach acht', '9:15': 'Viertel nach neun', 
                '10:15': 'Viertel nach zehn', '11:15': 'Viertel nach elf',
                '14:15': 'Viertel nach zwei', '17:15': 'Viertel nach f√ºnf',
                '18:15': 'Viertel nach sechs', '20:15': 'Viertel nach acht',
                '8:45': 'Viertel vor neun', '9:45': 'Viertel vor zehn',
                '10:45': 'Viertel vor elf', '11:45': 'Viertel vor zw√∂lf',
                '17:45': 'Viertel vor sechs', '18:45': 'Viertel vor sieben',
                '20:45': 'Viertel vor neun', '22:45': 'Viertel vor elf',
                // Half hours - halb (wichtig: halb = half TO the next hour!)
                '7:30': 'halb acht', '8:30': 'halb neun', '9:30': 'halb zehn',
                '10:30': 'halb elf', '11:30': 'halb zw√∂lf', '12:30': 'halb eins',
                '13:30': 'halb zwei', '14:30': 'halb drei', '15:30': 'halb vier',
                '16:30': 'halb f√ºnf', '17:30': 'halb sechs', '18:30': 'halb sieben',
                '19:30': 'halb acht', '20:30': 'halb neun', '21:30': 'halb zehn',
                // 5 minutes before/after half
                '7:25': 'f√ºnf vor halb acht', '8:25': 'f√ºnf vor halb neun',
                '12:25': 'f√ºnf vor halb eins', '17:25': 'f√ºnf vor halb sechs',
                '7:35': 'f√ºnf nach halb acht', '8:35': 'f√ºnf nach halb neun',
                '12:35': 'f√ºnf nach halb eins', '17:35': 'f√ºnf nach halb sechs',
                // 10 minutes before/after
                '8:10': 'zehn nach acht', '9:10': 'zehn nach neun',
                '17:10': 'zehn nach f√ºnf', '20:10': 'zehn nach acht',
                '8:50': 'zehn vor neun', '9:50': 'zehn vor zehn',
                '17:50': 'zehn vor sechs', '20:50': 'zehn vor neun',
                // 20 minutes before/after
                '8:20': 'zwanzig nach acht', '9:20': 'zwanzig nach neun',
                '17:20': 'zwanzig nach f√ºnf', '20:20': 'zwanzig nach acht',
                '8:40': 'zwanzig vor neun', '9:40': 'zwanzig vor zehn',
                '17:40': 'zwanzig vor sechs', '20:40': 'zwanzig vor neun',
                // kurz vor/nach (approximately 1-5 minutes)
                '8:03': 'kurz nach acht', '9:02': 'kurz nach neun',
                '17:04': 'kurz nach f√ºnf', '20:01': 'kurz nach acht',
                '8:57': 'kurz vor neun', '9:58': 'kurz vor zehn',
                '17:56': 'kurz vor sechs', '20:59': 'kurz vor neun',
                // Additional variations
                '8:05': 'f√ºnf nach acht', '17:55': 'f√ºnf vor sechs',
                '14:22': 'zweiundzwanzig nach zwei', '16:38': 'zweiundzwanzig vor f√ºnf'
            },
            // Special regional variations (especially East German)
            regional: {
                '8:15': 'viertel neun', // East German style
                '8:45': 'dreiviertel neun', // East German style  
                '7:30': 'halb acht',
                '7:25': 'f√ºnf vor halb acht',
                '7:35': 'f√ºnf nach halb acht'
            }
        };

        // Verb conjugations
        const verbData = {
            'kommen': {
                'ich': 'komme',
                'du': 'kommst',
                'er/sie/es': 'kommt',
                'wir': 'kommen',
                'ihr': 'kommt',
                'sie': 'kommen'
            },
            'hei√üen': {
                'ich': 'hei√üe',
                'du': 'hei√üt',
                'er/sie/es': 'hei√üt',
                'wir': 'hei√üen',
                'ihr': 'hei√üt',
                'sie': 'hei√üen'
            },
            'arbeiten': {
                'ich': 'arbeite',
                'du': 'arbeitest',
                'er/sie/es': 'arbeitet',
                'wir': 'arbeiten',
                'ihr': 'arbeitet',
                'sie': 'arbeiten'
            }
        };

        function setGameMode(mode) {
            currentMode = mode;
            document.querySelectorAll('.mode-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');
            
            const voiceControls = document.getElementById('voiceControls');
            const answerInput = document.getElementById('answerInput');
            const checkBtn = document.getElementById('checkBtn');
            
            if (mode === 'listening') {
                voiceControls.style.display = 'flex';
                answerInput.style.display = 'block';
                checkBtn.style.display = 'inline-block';
            } else if (mode === 'writing' || mode === 'regional') {
                voiceControls.style.display = 'none';
                answerInput.style.display = 'block';
                checkBtn.style.display = 'inline-block';
            } else {
                voiceControls.style.display = 'none';
                answerInput.style.display = 'none';
                checkBtn.style.display = 'none';
            }
            
            newQuestion();
        }

        function newQuestion() {
            gameActive = true;
            document.getElementById('feedback').style.display = 'none';
            document.getElementById('answerInput').value = '';
            
            if (currentMode === 'reading') {
                generateReadingQuestion();
            } else if (currentMode === 'writing') {
                generateWritingQuestion();
            } else if (currentMode === 'listening') {
                generateListeningQuestion();
            } else if (currentMode === 'regional') {
                generateRegionalQuestion();
            }
        }

        function generateReadingQuestion() {
            const allTimes = {...timeData.formal, ...timeData.informal};
            const times = Object.keys(allTimes);
            const randomTime = times[Math.floor(Math.random() * times.length)];
            const useInformal = Math.random() > 0.5;
            
            currentTime = randomTime;
            
            // T√¨m ƒë√°p √°n trong c·∫£ formal v√† informal
            if (useInformal && timeData.informal[randomTime]) {
                currentAnswer = timeData.informal[randomTime];
            } else {
                currentAnswer = timeData.formal[randomTime] || timeData.informal[randomTime];
            }
            
            document.getElementById('clockDisplay').textContent = randomTime;
            document.getElementById('question').textContent = `H√£y ƒë·ªçc th·ªùi gian n√†y b·∫±ng ti·∫øng ƒê·ª©c (${useInformal ? 'th√¥ng th∆∞·ªùng' : 'ch√≠nh th·ª©c'}):`;
        }

        function generateWritingQuestion() {
            const allTimes = {...timeData.formal, ...timeData.informal};
            const times = Object.keys(allTimes);
            const randomTime = times[Math.floor(Math.random() * times.length)];
            const useInformal = Math.random() > 0.5;
            
            currentTime = randomTime;
            
            if (useInformal && timeData.informal[randomTime]) {
                currentAnswer = timeData.informal[randomTime];
            } else {
                currentAnswer = timeData.formal[randomTime] || timeData.informal[randomTime];
            }
            
            document.getElementById('clockDisplay').textContent = randomTime;
            document.getElementById('question').textContent = `Vi·∫øt th·ªùi gian n√†y b·∫±ng ti·∫øng ƒê·ª©c (${useInformal ? 'th√¥ng th∆∞·ªùng' : 'ch√≠nh th·ª©c'}):`;
        }

        function generateListeningQuestion() {
            const allTimes = {...timeData.formal, ...timeData.informal};
            const times = Object.keys(allTimes);
            const randomTime = times[Math.floor(Math.random() * times.length)];
            const useInformal = Math.random() > 0.5;
            
            currentTime = randomTime;
            
            if (useInformal && timeData.informal[randomTime]) {
                currentAnswer = timeData.informal[randomTime];
            } else {
                currentAnswer = timeData.formal[randomTime] || timeData.informal[randomTime];
            }
            
            document.getElementById('clockDisplay').textContent = 'üîä Nghe v√† vi·∫øt';
            document.getElementById('question').textContent = 'Nghe th·ªùi gian b·∫±ng ti·∫øng ƒê·ª©c v√† vi·∫øt l·∫°i:';
        }

        function generateRegionalQuestion() {
            const regionalTimes = Object.keys(timeData.regional);
            const randomTime = regionalTimes[Math.floor(Math.random() * regionalTimes.length)];
            
            currentTime = randomTime;
            currentAnswer = timeData.regional[randomTime];
            
            document.getElementById('clockDisplay').textContent = randomTime;
            document.getElementById('question').textContent = 'Vi·∫øt th·ªùi gian theo c√°ch n√≥i ƒê√¥ng ƒê·ª©c (viertel/dreiviertel):';
        }

        function speakGerman() {
            if ('speechSynthesis' in window && currentAnswer) {
                const utterance = new SpeechSynthesisUtterance(currentAnswer);
                utterance.lang = 'de-DE';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        function speakVietnamese() {
            if ('speechSynthesis' in window && currentTime) {
                const vietnameseTime = convertToVietnamese(currentTime);
                const utterance = new SpeechSynthesisUtterance(vietnameseTime);
                utterance.lang = 'vi-VN';
                utterance.rate = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        function convertToVietnamese(time) {
            const [hours, minutes] = time.split(':');
            const h = parseInt(hours);
            const m = parseInt(minutes);
            
            let result = '';
            if (h < 12) {
                result += h + ' gi·ªù';
            } else {
                result += h + ' gi·ªù';
            }
            
            if (m > 0) {
                result += ' ' + m + ' ph√∫t';
            }
            
            if (h < 12) {
                result += ' s√°ng';
            } else {
                result += ' chi·ªÅu';
            }
            
            return result;
        }

        function checkAnswer() {
            if (!gameActive) return;
            
            const userAnswer = document.getElementById('answerInput').value.trim().toLowerCase();
            const correctAnswer = currentAnswer.toLowerCase();
            
            totalCount++;
            
            const feedback = document.getElementById('feedback');
            feedback.style.display = 'block';
            
            if (userAnswer === correctAnswer || isAnswerClose(userAnswer, correctAnswer)) {
                correctCount++;
                feedback.className = 'feedback correct';
                feedback.innerHTML = `‚úÖ Ch√≠nh x√°c! <br><strong>ƒê√°p √°n:</strong> ${currentAnswer}`;
            } else {
                feedback.className = 'feedback incorrect';
                feedback.innerHTML = `‚ùå Sai r·ªìi! <br><strong>ƒê√°p √°n ƒë√∫ng:</strong> ${currentAnswer}<br><strong>B·∫°n ƒë√£ vi·∫øt:</strong> ${document.getElementById('answerInput').value}`;
            }
            
            updateScore();
            gameActive = false;
        }

        function isAnswerClose(userAnswer, correctAnswer) {
            // Lo·∫°i b·ªè d·∫•u ngo·∫∑c v√† kho·∫£ng tr·∫Øng th·ª´a
            const cleanCorrect = correctAnswer.toLowerCase().replace(/\s*\([^)]*\)/g, '').trim();
            const cleanUser = userAnswer.toLowerCase().trim();
            
            // Ki·ªÉm tra c√°c bi·∫øn th·ªÉ c√≥ th·ªÉ ch·∫•p nh·∫≠n ƒë∆∞·ª£c
            const variations = [
                cleanCorrect,
                correctAnswer.replace('kurz ', '').toLowerCase(), // B·ªè "kurz"
                correctAnswer.replace('(f√ºnf) ', '').toLowerCase(), // B·ªè "(f√ºnf)"
                correctAnswer.replace(/\s*\([^)]*\)/g, '').toLowerCase(), // B·ªè t·∫•t c·∫£ ngo·∫∑c
                // Ch·∫•p nh·∫≠n c·∫£ formal v√† informal cho c√πng 1 th·ªùi gian
                timeData.formal[currentTime] ? timeData.formal[currentTime].toLowerCase() : '',
                timeData.informal[currentTime] ? timeData.informal[currentTime].toLowerCase().replace(/\s*\([^)]*\)/g, '') : '',
                timeData.regional[currentTime] ? timeData.regional[currentTime].toLowerCase() : ''
            ].filter(v => v); // Lo·∫°i b·ªè c√°c gi√° tr·ªã r·ªóng
            
            // Ki·ªÉm tra c√°c bi·∫øn th·ªÉ East German
            if (currentTime === '8:15') {
                variations.push('viertel neun', 'viertel nach acht');
            }
            if (currentTime === '8:45') {
                variations.push('dreiviertel neun', 'viertel vor neun');
            }
            
            return variations.some(variation => {
                return cleanUser === variation ||
                       cleanUser.includes(variation.replace(/\s+/g, '')) ||
                       variation.includes(cleanUser);
            });
        }

        function showAnswer() {
            if (!currentAnswer) return;
            
            const feedback = document.getElementById('feedback');
            feedback.style.display = 'block';
            feedback.className = 'feedback';
            feedback.style.background = '#e3f2fd';
            feedback.style.color = '#1565c0';
            feedback.innerHTML = `üí° <strong>ƒê√°p √°n:</strong> ${currentAnswer}`;
            
            // Ph√°t √¢m ƒë√°p √°n
            speakGerman();
        }

        function updateScore() {
            document.getElementById('correct').textContent = correctCount;
            document.getElementById('total').textContent = totalCount;
            document.getElementById('accuracy').textContent = totalCount > 0 ? Math.round((correctCount / totalCount) * 100) + '%' : '0%';
        }

        // Cho ph√©p nh·∫•n Enter ƒë·ªÉ ki·ªÉm tra ƒë√°p √°n
        document.getElementById('answerInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                checkAnswer();
            }
        });

        // Kh·ªüi t·∫°o game
        newQuestion();
    </script>
</body>
</html>