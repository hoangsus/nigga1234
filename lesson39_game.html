<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Luy·ªán T·∫≠p Ti·∫øng ƒê·ª©c - German Practice</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #4caf50, #45a049);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5rem;
        margin-bottom: 10px;
      }

      .header p {
        font-size: 1.1rem;
        opacity: 0.9;
      }

      .mode-selector {
        padding: 30px;
        text-align: center;
        border-bottom: 2px solid #f0f0f0;
      }

      .mode-buttons {
        display: flex;
        gap: 20px;
        justify-content: center;
        flex-wrap: wrap;
      }

      .mode-btn {
        padding: 15px 30px;
        border: none;
        border-radius: 10px;
        font-size: 1.1rem;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 200px;
      }

      .mode-btn.study {
        background: linear-gradient(135deg, #2196f3, #1976d2);
        color: white;
      }

      .mode-btn.test {
        background: linear-gradient(135deg, #ff5722, #d84315);
        color: white;
      }

      .mode-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .content {
        padding: 30px;
        min-height: 400px;
      }

      .card {
        background: #f8f9fa;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
      }

      .keyword {
        font-size: 3rem;
        font-weight: bold;
        color: #2c3e50;
        text-align: center;
        margin-bottom: 20px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .question-section {
        background: #e3f2fd;
        border-left: 5px solid #2196f3;
        padding: 20px;
        margin: 20px 0;
        border-radius: 0 10px 10px 0;
      }

      .answer-section {
        background: #e8f5e8;
        border-left: 5px solid #4caf50;
        padding: 20px;
        margin: 20px 0;
        border-radius: 0 10px 10px 0;
      }

      .german-text {
        font-size: 1.3rem;
        font-weight: bold;
        color: #1565c0;
        margin-bottom: 10px;
      }

      .vietnamese-text {
        font-size: 1.1rem;
        color: #666;
        font-style: italic;
      }

      .controls {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin: 20px 0;
        flex-wrap: wrap;
      }

      .btn {
        padding: 12px 24px;
        border: none;
        border-radius: 8px;
        font-size: 1rem;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
      }

      .btn-primary {
        background: #2196f3;
        color: white;
      }

      .btn-success {
        background: #4caf50;
        color: white;
      }

      .btn-warning {
        background: #ff9800;
        color: white;
      }

      .btn-danger {
        background: #f44336;
        color: white;
      }

      .btn:hover {
        transform: translateY(-1px);
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
      }

      .timer {
        position: fixed;
        top: 20px;
        right: 20px;
        background: #f44336;
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        font-size: 1.2rem;
        font-weight: bold;
        box-shadow: 0 5px 15px rgba(244, 67, 54, 0.3);
        z-index: 1000;
      }

      .progress {
        background: #e0e0e0;
        border-radius: 10px;
        height: 10px;
        margin: 20px 0;
        overflow: hidden;
      }

      .progress-bar {
        background: linear-gradient(90deg, #4caf50, #45a049);
        height: 100%;
        border-radius: 10px;
        transition: width 0.3s ease;
      }

      .score {
        text-align: center;
        font-size: 1.2rem;
        margin: 10px 0;
      }

      .hidden {
        display: none;
      }

      .fade-in {
        animation: fadeIn 0.5s ease-in;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .tips {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 10px;
        padding: 15px;
        margin: 20px 0;
      }

      .tips h3 {
        color: #856404;
        margin-bottom: 10px;
      }

      .tips ul {
        color: #856404;
        margin-left: 20px;
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 2rem;
        }

        .keyword {
          font-size: 2rem;
        }

        .mode-buttons {
          flex-direction: column;
          align-items: center;
        }

        .controls {
          flex-direction: column;
          align-items: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üá©üá™ Luy·ªán T·∫≠p Ti·∫øng ƒê·ª©c</h1>
        <p>√în t·∫≠p t·ª´ v·ª±ng v√† c√¢u h·ªèi - tr·∫£ l·ªùi c∆° b·∫£n</p>
      </div>

      <div class="mode-selector" id="modeSelector">
        <h2 style="margin-bottom: 20px">Ch·ªçn ch·∫ø ƒë·ªô h·ªçc t·∫≠p</h2>
        <div class="mode-buttons">
          <button class="mode-btn study" onclick="startStudyMode()">
            üìö Ch·∫ø ƒë·ªô √¥n luy·ªán
            <br /><small>H·ªçc t·ª´ v·ª±ng v·ªõi ti·∫øng n√≥i</small>
          </button>
          <button class="mode-btn test" onclick="startTestMode()">
            ‚è±Ô∏è Ch·∫ø ƒë·ªô ki·ªÉm tra 2 ph√∫t
            <br /><small>Luy·ªán t·∫≠p nhanh</small>
          </button>
        </div>
      </div>

      <div class="content" id="studyContent">
        <div class="tips">
          <h3>üí° M·∫πo h·ªçc t·∫≠p hi·ªáu qu·∫£:</h3>
          <ul>
            <li>Nghe v√† l·∫∑p l·∫°i nhi·ªÅu l·∫ßn ƒë·ªÉ c·∫£i thi·ªán ph√°t √¢m</li>
            <li>
              Ch√∫ √Ω ng·ªØ ph√°p: ƒë·ªông t·ª´ chia theo ng√¥i (ich spiele, Sie spielen)
            </li>
            <li>
              H·ªçc thu·ªôc c√°c c·ª•m t·ª´ c∆° b·∫£n: "am Wochenende", "mit meinen
              Freunden"
            </li>
            <li>C√¢u tr·∫£ l·ªùi ng·∫Øn g·ªçn nh∆∞ng ƒë·∫ßy ƒë·ªß √Ω</li>
          </ul>
        </div>
      </div>

      <div class="timer hidden" id="timer">2:00</div>
    </div>

    <script>
      // D·ªØ li·ªáu b√†i h·ªçc t·ª´ file docx - s·ª≠a l·∫°i ng·ªØ ph√°p v√† ƒë·ªïi th√†nh c√¢u tr·∫£ l·ªùi t√≠ch c·ª±c
      const vocabularyData = {
        Freizeit: [
          {
            keyword: "Hobby",
            question: "Was sind Ihre Hobbys?",
            questionVN: "S·ªü th√≠ch c·ªßa b·∫°n l√† g√¨?",
            answer: "Meine Hobbys sind Fu√üball spielen und kochen.",
            answerVN: "S·ªü th√≠ch c·ªßa t√¥i l√† ch∆°i b√≥ng ƒë√° v√† n·∫•u ƒÉn.",
            simpleAnswer: "Meine Hobbys sind Fu√üball und Kochen.",
          },
          {
            keyword: "Wochenende",
            question: "Was machen Sie am Wochenende?",
            questionVN: "B·∫°n l√†m g√¨ v√†o cu·ªëi tu·∫ßn?",
            answer:
              "Am Wochenende spiele ich Fu√üball mit meinen Freunden im Park.",
            answerVN: "Cu·ªëi tu·∫ßn t√¥i ch∆°i b√≥ng ƒë√° v·ªõi b·∫°n b√® ·ªü c√¥ng vi√™n.",
            simpleAnswer: "Ich spiele Fu√üball mit Freunden.",
          },
          {
            keyword: "Wann?",
            question: "Wann spielen Sie Fu√üball mit Ihren Freunden?",
            questionVN: "Khi n√†o b·∫°n ch∆°i b√≥ng ƒë√° v·ªõi b·∫°n b√®?",
            answer:
              "Ich spiele Fu√üball mit meinen Freunden am Wochenende im Park.",
            answerVN: "T√¥i ch∆°i b√≥ng ƒë√° v·ªõi b·∫°n b√® v√†o cu·ªëi tu·∫ßn ·ªü c√¥ng vi√™n.",
            simpleAnswer: "Ich spiele am Wochenende.",
          },
          {
            keyword: "Fu√üball",
            question:
              "Wo spielen Sie am Wochenende Fu√üball mit Ihren Freunden?",
            questionVN: "B·∫°n ch∆°i b√≥ng ƒë√° v·ªõi b·∫°n b√® ·ªü ƒë√¢u v√†o cu·ªëi tu·∫ßn?",
            answer:
              "Ich spiele am Wochenende Fu√üball mit meinen Freunden im Park.",
            answerVN: "T√¥i ch∆°i b√≥ng ƒë√° v·ªõi b·∫°n b√® ·ªü c√¥ng vi√™n v√†o cu·ªëi tu·∫ßn.",
            simpleAnswer: "Ich spiele im Park.",
          },
          {
            keyword: "Lieblingssport",
            question: "Was ist Ihr Lieblingssport?",
            questionVN: "M√¥n th·ªÉ thao y√™u th√≠ch c·ªßa b·∫°n l√† g√¨?",
            answer: "Mein Lieblingssport ist Fu√üball.",
            answerVN: "M√¥n th·ªÉ thao y√™u th√≠ch c·ªßa t√¥i l√† b√≥ng ƒë√°.",
            simpleAnswer: "Mein Lieblingssport ist Fu√üball.",
          },
          {
            keyword: "Sonntag",
            question: "Was machen Sie am Sonntag?",
            questionVN: "B·∫°n l√†m g√¨ v√†o ch·ªß nh·∫≠t?",
            answer:
              "Am Sonntag spiele ich Fu√üball mit meinen Freunden im Park.",
            answerVN: "Ch·ªß nh·∫≠t t√¥i ch∆°i b√≥ng ƒë√° v·ªõi b·∫°n b√® ·ªü c√¥ng vi√™n.",
            simpleAnswer: "Ich spiele Fu√üball mit Freunden.",
          },
        ],
        Reisen: [
          {
            keyword: "Wohin?",
            question: "Wohin reisen Sie im Sommer?",
            questionVN: "B·∫°n ƒëi du l·ªãch ƒë√¢u v√†o m√πa h√®?",
            answer: "Im Sommer reise ich nach Hanoi.",
            answerVN: "M√πa h√® t√¥i ƒëi du l·ªãch H√† N·ªôi.",
            simpleAnswer: "Ich reise nach Hanoi.",
          },
          {
            keyword: "Hotel",
            question: "√úbernachten Sie oft im Urlaub in Hotels?",
            questionVN: "B·∫°n c√≥ th∆∞·ªùng ·ªü kh√°ch s·∫°n khi ƒëi du l·ªãch kh√¥ng?",
            answer:
              "Ja, ich √ºbernachte gern in Hotels. Sie sind sehr komfortabel.",
            answerVN: "C√≥, t√¥i th√≠ch ·ªü kh√°ch s·∫°n. Ch√∫ng r·∫•t tho·∫£i m√°i.",
            simpleAnswer: "Ja, ich √ºbernachte gern in Hotels.",
          },
          {
            keyword: "Urlaub",
            question: "Wo machen Sie Urlaub im Sommer?",
            questionVN: "B·∫°n ngh·ªâ ph√©p ·ªü ƒë√¢u v√†o m√πa h√®?",
            answer: "Im Sommer mache ich Urlaub in Hanoi.",
            answerVN: "M√πa h√® t√¥i ngh·ªâ ph√©p ·ªü H√† N·ªôi.",
            simpleAnswer: "Ich mache Urlaub in Hanoi.",
          },
          {
            keyword: "L√§nder",
            question: "In welchen L√§ndern machen Sie Ihre Reise?",
            questionVN: "B·∫°n du l·ªãch nh·ªØng n∆∞·ªõc n√†o?",
            answer: "Ich mache meine Reise in Deutschland und Vietnam.",
            answerVN: "T√¥i du l·ªãch ·ªü ƒê·ª©c v√† Vi·ªát Nam.",
            simpleAnswer: "Ich reise in Deutschland und Vietnam.",
          },
          {
            keyword: "Auto",
            question: "Reisen Sie mit dem Auto nach Hanoi?",
            questionVN: "B·∫°n c√≥ ƒëi du l·ªãch H√† N·ªôi b·∫±ng √¥ t√¥ kh√¥ng?",
            answer: "Ja, ich reise gern mit dem Auto. Das ist sehr praktisch.",
            answerVN: "C√≥, t√¥i th√≠ch ƒëi b·∫±ng √¥ t√¥. R·∫•t ti·ªán l·ª£i.",
            simpleAnswer: "Ja, ich reise mit dem Auto.",
          },
          {
            keyword: "Wann?",
            question: "Wann machen Sie Ihre Reise in diesem Jahr?",
            questionVN: "Khi n√†o b·∫°n ƒëi du l·ªãch trong nƒÉm nay?",
            answer: "In diesem Jahr mache ich meine Reise im Sommer.",
            answerVN: "NƒÉm nay t√¥i ƒëi du l·ªãch v√†o m√πa h√®.",
            simpleAnswer: "Ich reise im Sommer.",
          },
        ],
        Sport: [
          {
            keyword: "Fu√üball",
            question:
              "Spielen Sie am Samstag mit Ihren Freunden Fu√üball im Park?",
            questionVN:
              "B·∫°n c√≥ ch∆°i b√≥ng ƒë√° v·ªõi b·∫°n b√® ·ªü c√¥ng vi√™n th·ª© 7 kh√¥ng?",
            answer:
              "Ja, ich spiele jeden Samstag mit meinen Freunden Fu√üball im Park.",
            answerVN: "C√≥, t√¥i ch∆°i b√≥ng ƒë√° v·ªõi b·∫°n b√® ·ªü c√¥ng vi√™n m·ªói th·ª© 7.",
            simpleAnswer: "Ja, ich spiele am Samstag Fu√üball.",
          },
          {
            keyword: "Fahrrad fahren",
            question:
              "Fahren Sie am Samstag mit Ihren Freunden Fahrrad um den Hoan Kiem See?",
            questionVN:
              "B·∫°n c√≥ ƒë·∫°p xe v·ªõi b·∫°n b√® quanh h·ªì Ho√†n Ki·∫øm th·ª© 7 kh√¥ng?",
            answer:
              "Ja, ich fahre gern am Samstag mit meinen Freunden Fahrrad um den Hoan Kiem See.",
            answerVN:
              "C√≥, t√¥i th√≠ch ƒë·∫°p xe v·ªõi b·∫°n b√® quanh h·ªì Ho√†n Ki·∫øm th·ª© 7.",
            simpleAnswer: "Ja, ich fahre am Samstag Fahrrad.",
          },
          {
            keyword: "schwimmen",
            question: "Wo schwimmen Sie am Samstag?",
            questionVN: "B·∫°n b∆°i ·ªü ƒë√¢u v√†o th·ª© 7?",
            answer: "Ich schwimme am Samstag im Schwimmbad.",
            answerVN: "T√¥i b∆°i ·ªü b·ªÉ b∆°i v√†o th·ª© 7.",
            simpleAnswer: "Ich schwimme im Schwimmbad.",
          },
          {
            keyword: "wandern",
            question: "Wo wandern Sie am Samstag?",
            questionVN: "B·∫°n ƒëi b·ªô ƒë∆∞·ªùng d√†i ·ªü ƒë√¢u v√†o th·ª© 7?",
            answer: "Am Samstag wandere ich in den Bergen.",
            answerVN: "Th·ª© 7 t√¥i ƒëi b·ªô ƒë∆∞·ªùng d√†i ·ªü n√∫i.",
            simpleAnswer: "Ich wandere in den Bergen.",
          },
          {
            keyword: "Verein",
            question: "Spielen Sie in einem Sportverein?",
            questionVN: "B·∫°n c√≥ ch∆°i trong c√¢u l·∫°c b·ªô th·ªÉ thao kh√¥ng?",
            answer:
              "Ja, ich spiele in einem Fu√üballverein. Das macht viel Spa√ü.",
            answerVN: "C√≥, t√¥i ch∆°i trong c√¢u l·∫°c b·ªô b√≥ng ƒë√°. R·∫•t vui.",
            simpleAnswer: "Ja, ich spiele in einem Fu√üballverein.",
          },
          {
            keyword: "Wochenende",
            question: "Machen Sie Sport am Wochenende?",
            questionVN: "B·∫°n c√≥ ch∆°i th·ªÉ thao cu·ªëi tu·∫ßn kh√¥ng?",
            answer:
              "Ja, ich mache gern Sport am Wochenende. Ich spiele Fu√üball.",
            answerVN:
              "C√≥, t√¥i th√≠ch ch∆°i th·ªÉ thao cu·ªëi tu·∫ßn. T√¥i ch∆°i b√≥ng ƒë√°.",
            simpleAnswer: "Ja, ich mache Sport am Wochenende.",
          },
        ],
        Wochenende: [
          {
            keyword: "Ausflug",
            question:
              "Machen Sie einen Ausflug mit Ihren Eltern am Wochenende in die Berge?",
            questionVN: "B·∫°n c√≥ ƒëi ch∆°i v·ªõi b·ªë m·∫π l√™n n√∫i cu·ªëi tu·∫ßn kh√¥ng?",
            answer:
              "Ja, ich mache gern einen Ausflug mit meinen Eltern in die Berge.",
            answerVN: "C√≥, t√¥i th√≠ch ƒëi ch∆°i v·ªõi b·ªë m·∫π l√™n n√∫i.",
            simpleAnswer: "Ja, ich mache einen Ausflug.",
          },
          {
            keyword: "Sport",
            question: "Machen Sie Sport am Samstag mit Ihren Freunden im Park?",
            questionVN:
              "B·∫°n c√≥ ch∆°i th·ªÉ thao v·ªõi b·∫°n b√® ·ªü c√¥ng vi√™n th·ª© 7 kh√¥ng?",
            answer:
              "Ja, ich mache gern Sport am Samstag mit meinen Freunden im Park.",
            answerVN:
              "C√≥, t√¥i th√≠ch ch∆°i th·ªÉ thao v·ªõi b·∫°n b√® ·ªü c√¥ng vi√™n th·ª© 7.",
            simpleAnswer: "Ja, ich mache Sport am Samstag.",
          },
          {
            keyword: "fernsehen",
            question:
              "M√∂chten Sie am Samstag mit Ihren Eltern zu Hause fernsehen?",
            questionVN: "B·∫°n c√≥ mu·ªën xem TV v·ªõi b·ªë m·∫π ·ªü nh√† th·ª© 7 kh√¥ng?",
            answer: "Ja, ich sehe gern am Samstag mit meinen Eltern fern.",
            answerVN: "C√≥, t√¥i th√≠ch xem TV v·ªõi b·ªë m·∫π th·ª© 7.",
            simpleAnswer: "Ja, ich sehe gern fern.",
          },
          {
            keyword: "Kino",
            question: "M√∂chten Sie am Samstag mit Ihren Eltern ins Kino gehen?",
            questionVN: "B·∫°n c√≥ mu·ªën ƒëi xem phim v·ªõi b·ªë m·∫π th·ª© 7 kh√¥ng?",
            answer: "Ja, ich gehe gern am Samstag mit meinen Eltern ins Kino.",
            answerVN: "C√≥, t√¥i th√≠ch ƒëi xem phim v·ªõi b·ªë m·∫π th·ª© 7.",
            simpleAnswer: "Ja, ich gehe gern ins Kino.",
          },
          {
            keyword: "kochen",
            question:
              "M√∂chten Sie am Samstag mit Ihren Eltern zu Hause kochen?",
            questionVN: "B·∫°n c√≥ mu·ªën n·∫•u ƒÉn v·ªõi b·ªë m·∫π ·ªü nh√† th·ª© 7 kh√¥ng?",
            answer: "Ja, ich koche gern am Samstag mit meinen Eltern zu Hause.",
            answerVN: "C√≥, t√¥i th√≠ch n·∫•u ƒÉn v·ªõi b·ªë m·∫π ·ªü nh√† th·ª© 7.",
            simpleAnswer: "Ja, ich koche gern.",
          },
          {
            keyword: "schlafen",
            question: "M√∂chten Sie am Wochenende zu Hause schlafen?",
            questionVN: "B·∫°n c√≥ mu·ªën ng·ªß ·ªü nh√† cu·ªëi tu·∫ßn kh√¥ng?",
            answer:
              "Ja, ich schlafe gern am Wochenende zu Hause. Das ist sehr entspannend.",
            answerVN: "C√≥, t√¥i th√≠ch ng·ªß ·ªü nh√† cu·ªëi tu·∫ßn. R·∫•t th∆∞ gi√£n.",
            simpleAnswer: "Ja, ich schlafe gern zu Hause.",
          },
        ],
      };

      // Bi·∫øn to√†n c·ª•c
      let currentMode = "study";
      let currentItems = [];
      let currentIndex = 0;
      let timer = null;
      let timeLeft = 120; // 2 ph√∫t
      let score = 0;
      let totalQuestions = 0;
      let showAnswer = false;

      // Kh·ªüi t·∫°o t·∫•t c·∫£ items
      function getAllItems() {
        const allItems = [];
        for (const category in vocabularyData) {
          allItems.push(...vocabularyData[category]);
        }
        return shuffleArray(allItems);
      }

      // X√°o tr·ªôn m·∫£ng
      function shuffleArray(array) {
        const shuffled = [...array];
        for (let i = shuffled.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
        }
        return shuffled;
      }

      // Text-to-Speech
      function speak(text, lang = "de-DE") {
        if ("speechSynthesis" in window) {
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.lang = lang;
          utterance.rate = 0.8;
          speechSynthesis.speak(utterance);
        }
      }

      // B·∫Øt ƒë·∫ßu ch·∫ø ƒë·ªô √¥n luy·ªán
      function startStudyMode() {
        currentMode = "study";
        currentItems = getAllItems();
        currentIndex = 0;
        showAnswer = false;

        document.getElementById("modeSelector").classList.add("hidden");
        showStudyCard();
      }

      // B·∫Øt ƒë·∫ßu ch·∫ø ƒë·ªô ki·ªÉm tra
      function startTestMode() {
        currentMode = "test";
        currentItems = getAllItems().slice(0, 20); // Gi·ªõi h·∫°n 20 c√¢u
        currentIndex = 0;
        score = 0;
        totalQuestions = 0;
        timeLeft = 120;
        showAnswer = false;

        document.getElementById("modeSelector").classList.add("hidden");
        document.getElementById("timer").classList.remove("hidden");

        startTimer();
        showTestCard();
      }

      // Hi·ªÉn th·ªã th·∫ª √¥n luy·ªán
      function showStudyCard() {
        if (currentIndex >= currentItems.length) {
          currentIndex = 0;
        }

        const item = currentItems[currentIndex];
        const content = document.getElementById("studyContent");

        content.innerHTML = `
                <div class="card fade-in">
                    <div class="keyword">${item.keyword}</div>
                    
                    <div class="question-section">
                        <div class="german-text">${item.question}</div>
                        <div class="vietnamese-text">${item.questionVN}</div>
                    </div>
                    
                    <div class="controls">
                        <button class="btn btn-primary" onclick="speak('${
                          item.question
                        }')">
                            üîä Nghe c√¢u h·ªèi
                        </button>
                        <button class="btn btn-success" onclick="toggleAnswer()">
                            ${showAnswer ? "üôà ·∫®n ƒë√°p √°n" : "üëÅÔ∏è Xem ƒë√°p √°n"}
                        </button>
                    </div>
                    
                    <div id="answerSection" class="${
                      showAnswer ? "" : "hidden"
                    }">
                        <div class="answer-section">
                            <div class="german-text">C√¢u tr·∫£ l·ªùi ƒë·∫ßy ƒë·ªß: ${
                              item.answer
                            }</div>
                            <div class="vietnamese-text">${item.answerVN}</div>
                            <div class="german-text" style="color: #FF5722; margin-top: 10px;">
                                C√¢u tr·∫£ l·ªùi ng·∫Øn: ${item.simpleAnswer}
                            </div>
                        </div>
                        
                        <div class="controls">
                            <button class="btn btn-primary" onclick="speak('${
                              item.answer
                            }')">
                                üîä Nghe ƒë√°p √°n ƒë·∫ßy ƒë·ªß
                            </button>
                            <button class="btn btn-warning" onclick="speak('${
                              item.simpleAnswer
                            }')">
                                üîä Nghe ƒë√°p √°n ng·∫Øn
                            </button>
                        </div>
                    </div>
                    
                    <div class="controls" style="margin-top: 30px;">
                        <button class="btn btn-primary" onclick="previousCard()">‚¨ÖÔ∏è Tr∆∞·ªõc</button>
                        <button class="btn btn-success" onclick="nextCard()">Ti·∫øp ‚û°Ô∏è</button>
                        <button class="btn btn-danger" onclick="backToMenu()">üè† V·ªÅ menu</button>
                    </div>
                    
                    <div class="progress">
                        <div class="progress-bar" style="width: ${
                          ((currentIndex + 1) / currentItems.length) * 100
                        }%"></div>
                    </div>
                    <div class="score">Th·∫ª ${currentIndex + 1} / ${
          currentItems.length
        }</div>
                </div>
            `;
      }

      // Hi·ªÉn th·ªã th·∫ª ki·ªÉm tra
      function showTestCard() {
        if (currentIndex >= currentItems.length) {
          endTest();
          return;
        }

        const item = currentItems[currentIndex];
        const content = document.getElementById("studyContent");

        content.innerHTML = `
                <div class="card fade-in">
                    <div class="keyword">${item.keyword}</div>
                    
                    <div class="question-section">
                        <h3>ƒêo√°n c√¢u h·ªèi t·ª´ t·ª´ kh√≥a n√†y:</h3>
                        <div class="vietnamese-text">G·ª£i √Ω: ${
                          item.questionVN
                        }</div>
                    </div>
                    
                    <div class="controls">
                        <button class="btn btn-primary" onclick="showTestAnswer()">
                            üëÅÔ∏è Xem c√¢u h·ªèi & ƒë√°p √°n
                        </button>
                        <button class="btn btn-success" onclick="speak('${
                          item.keyword
                        }')">
                            üîä Nghe t·ª´ kh√≥a
                        </button>
                    </div>
                    
                    <div id="testAnswerSection" class="${
                      showAnswer ? "" : "hidden"
                    }">
                        <div class="question-section">
                            <div class="german-text">C√¢u h·ªèi: ${
                              item.question
                            }</div>
                        </div>
                        
                        <div class="answer-section">
                            <div class="german-text">ƒê√°p √°n ng·∫Øn: ${
                              item.simpleAnswer
                            }</div>
                            <div class="vietnamese-text">${item.answerVN}</div>
                        </div>
                        
                        <div class="controls">
                            <button class="btn btn-primary" onclick="speak('${
                              item.question
                            }')">üîä Nghe c√¢u h·ªèi</button>
                            <button class="btn btn-warning" onclick="speak('${
                              item.simpleAnswer
                            }')">üîä Nghe ƒë√°p √°n</button>
                        </div>
                        
                        <div class="controls" style="margin-top: 20px;">
                            <button class="btn btn-success" onclick="markCorrect()">‚úÖ Bi·∫øt</button>
                            <button class="btn btn-danger" onclick="markIncorrect()">‚ùå Kh√¥ng bi·∫øt</button>
                        </div>
                    </div>
                    
                    <div class="progress">
                        <div class="progress-bar" style="width: ${
                          ((currentIndex + 1) / currentItems.length) * 100
                        }%"></div>
                    </div>
                    <div class="score">
                        C√¢u ${currentIndex + 1} / ${
          currentItems.length
        } | ƒê√∫ng: ${score}/${totalQuestions}
                    </div>
                </div>
            `;
      }

      // B·∫≠t/t·∫Øt hi·ªÉn th·ªã ƒë√°p √°n trong ch·∫ø ƒë·ªô √¥n luy·ªán
      function toggleAnswer() {
        showAnswer = !showAnswer;
        showStudyCard();
      }

      // Hi·ªÉn th·ªã ƒë√°p √°n trong ch·∫ø ƒë·ªô ki·ªÉm tra
      function showTestAnswer() {
        showAnswer = true;
        showTestCard();
      }

      // ƒê√°nh d·∫•u c√¢u ƒë√∫ng
      function markCorrect() {
        score++;
        totalQuestions++;
        nextTestCard();
      }

      // ƒê√°nh d·∫•u c√¢u sai
      function markIncorrect() {
        totalQuestions++;
        nextTestCard();
      }

      // Chuy·ªÉn th·∫ª ti·∫øp theo
      function nextCard() {
        showAnswer = false;
        currentIndex++;
        showStudyCard();
      }

      // Chuy·ªÉn th·∫ª tr∆∞·ªõc
      function previousCard() {
        showAnswer = false;
        currentIndex =
          currentIndex > 0 ? currentIndex - 1 : currentItems.length - 1;
        showStudyCard();
      }

      // Chuy·ªÉn c√¢u h·ªèi ti·∫øp theo trong test
      function nextTestCard() {
        showAnswer = false;
        currentIndex++;
        showTestCard();
      }

      // B·∫Øt ƒë·∫ßu timer
      function startTimer() {
        timer = setInterval(() => {
          timeLeft--;
          const minutes = Math.floor(timeLeft / 60);
          const seconds = timeLeft % 60;
          document.getElementById("timer").textContent = `${minutes}:${seconds
            .toString()
            .padStart(2, "0")}`;

          if (timeLeft <= 0) {
            endTest();
          }
        }, 1000);
      }

      // K·∫øt th√∫c b√†i test
      function endTest() {
        clearInterval(timer);
        document.getElementById("timer").classList.add("hidden");

        const percentage =
          totalQuestions > 0 ? Math.round((score / totalQuestions) * 100) : 0;
        let feedback = "";
        let emoji = "";

        if (percentage >= 80) {
          feedback = "Xu·∫•t s·∫Øc! B·∫°n ƒë√£ n·∫Øm v·ªØng t·ª´ v·ª±ng ti·∫øng ƒê·ª©c.";
          emoji = "üèÜ";
        } else if (percentage >= 60) {
          feedback = "T·ªët! B·∫°n c·∫ßn √¥n luy·ªán th√™m m·ªôt ch√∫t.";
          emoji = "üëç";
        } else {
          feedback = "C·∫ßn c·ªë g·∫Øng h∆°n! H√£y √¥n luy·ªán th√™m nh√©.";
          emoji = "üí™";
        }

        const content = document.getElementById("studyContent");
        content.innerHTML = `
                <div class="card fade-in" style="text-align: center;">
                    <div style="font-size: 4rem; margin-bottom: 20px;">${emoji}</div>
                    <h2 style="color: #2c3e50; margin-bottom: 20px;">K·∫øt qu·∫£ b√†i test</h2>
                    
                    <div style="font-size: 3rem; font-weight: bold; color: #4CAF50; margin: 20px 0;">
                        ${score}/${totalQuestions}
                    </div>
                    
                    <div style="font-size: 2rem; color: #FF5722; margin-bottom: 20px;">
                        ${percentage}%
                    </div>
                    
                    <div style="font-size: 1.2rem; color: #666; margin-bottom: 30px;">
                        ${feedback}
                    </div>
                    
                    <div class="tips">
                        <h3>üìù L·ªùi khuy√™n ƒë·ªÉ c·∫£i thi·ªán:</h3>
                        <ul style="text-align: left;">
                            <li>√în luy·ªán c√°c t·ª´ v·ª±ng c√≤n y·∫øu trong ch·∫ø ƒë·ªô h·ªçc t·∫≠p</li>
                            <li>Luy·ªán ph√°t √¢m b·∫±ng c√°ch nghe v√† l·∫∑p l·∫°i</li>
                            <li>H·ªçc thu·ªôc c√°c m·∫´u c√¢u tr·∫£ l·ªùi ng·∫Øn</li>
                            <li>Th·ª±c h√†nh th∆∞·ªùng xuy√™n m·ªói ng√†y</li>
                        </ul>
                    </div>
                    
                    <div class="controls" style="margin-top: 30px;">
                        <button class="btn btn-primary" onclick="startTestMode()">üîÑ L√†m l·∫°i test</button>
                        <button class="btn btn-success" onclick="startStudyMode()">üìö √în luy·ªán</button>
                        <button class="btn btn-danger" onclick="backToMenu()">üè† V·ªÅ menu</button>
                    </div>
                </div>
            `;
      }

      // V·ªÅ menu ch√≠nh
      function backToMenu() {
        clearInterval(timer);
        document.getElementById("timer").classList.add("hidden");
        document.getElementById("modeSelector").classList.remove("hidden");

        const content = document.getElementById("studyContent");
        content.innerHTML = `
                <div class="tips">
                    <h3>üí° M·∫πo h·ªçc t·∫≠p hi·ªáu qu·∫£:</h3>
                    <ul>
                        <li>Nghe v√† l·∫∑p l·∫°i nhi·ªÅu l·∫ßn ƒë·ªÉ c·∫£i thi·ªán ph√°t √¢m</li>
                        <li>Ch√∫ √Ω ng·ªØ ph√°p: ƒë·ªông t·ª´ chia theo ng√¥i (ich spiele, Sie spielen)</li>
                        <li>H·ªçc thu·ªôc c√°c c·ª•m t·ª´ c∆° b·∫£n: "am Wochenende", "mit meinen Freunden"</li>
                        <li>C√¢u tr·∫£ l·ªùi ng·∫Øn g·ªçn nh∆∞ng ƒë·∫ßy ƒë·ªß √Ω</li>
                    </ul>
                </div>
            `;

        // Reset c√°c bi·∫øn
        currentIndex = 0;
        showAnswer = false;
        score = 0;
        totalQuestions = 0;
        timeLeft = 120;
      }

      // Kh·ªüi t·∫°o ·ª©ng d·ª•ng
      function initApp() {
        // Ki·ªÉm tra h·ªó tr·ª£ Speech Synthesis
        if (!("speechSynthesis" in window)) {
          console.warn("Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ text-to-speech");
        }

        // Th√™m keyboard shortcuts
        document.addEventListener("keydown", function (e) {
          if (currentMode === "study") {
            if (e.key === "ArrowRight" || e.key === " ") {
              e.preventDefault();
              nextCard();
            } else if (e.key === "ArrowLeft") {
              e.preventDefault();
              previousCard();
            } else if (e.key === "Enter") {
              e.preventDefault();
              toggleAnswer();
            }
          } else if (currentMode === "test" && showAnswer) {
            if (e.key === "1") {
              e.preventDefault();
              markCorrect();
            } else if (e.key === "2") {
              e.preventDefault();
              markIncorrect();
            }
          }

          if (e.key === "Escape") {
            e.preventDefault();
            backToMenu();
          }
        });
      }

      // Kh·ªüi t·∫°o khi trang load
      window.addEventListener("load", initApp);
    </script>
  </body>
</html>
