<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Game luy·ªán t·∫≠p t·ª´ v·ª±ng ti·∫øng ƒê·ª©c - Th·ªùi gian & ƒê·ªì v·∫≠t</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
        overflow-x: hidden;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        text-align: center;
        background: white;
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .header h1 {
        color: #4a69bd;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .header p {
        color: #666;
        font-size: 1.2em;
        margin-bottom: 20px;
      }

      .game-selector {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .game-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
        text-align: center;
      }

      .game-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }

      .game-card.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        transform: translateY(-5px);
      }

      .game-icon {
        font-size: 3em;
        margin-bottom: 15px;
        display: block;
      }

      .game-title {
        font-size: 1.5em;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .game-description {
        font-size: 1em;
        opacity: 0.8;
      }

      .game-area {
        background: white;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
        min-height: 500px;
        display: none;
      }

      .game-area.active {
        display: block;
      }

      .game-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .game-header h2 {
        color: #4a69bd;
        font-size: 2em;
        margin-bottom: 10px;
      }

      .score-board {
        display: flex;
        justify-content: center;
        gap: 30px;
        margin-bottom: 30px;
      }

      .score-item {
        background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);
        color: white;
        padding: 15px 25px;
        border-radius: 15px;
        text-align: center;
        font-weight: bold;
        font-size: 1.2em;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .question-area {
        text-align: center;
        margin-bottom: 30px;
      }

      .question {
        font-size: 1.8em;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 20px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 15px;
        border-left: 5px solid #667eea;
      }

      .options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }

      .option {
        background: #f8f9fa;
        border: 3px solid #e9ecef;
        border-radius: 15px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1.2em;
        font-weight: bold;
        text-align: center;
      }

      .option:hover {
        background: #e3f2fd;
        border-color: #2196f3;
        transform: translateY(-5px);
      }

      .option.correct {
        background: #d4edda;
        border-color: #28a745;
        color: #155724;
      }

      .option.incorrect {
        background: #f8d7da;
        border-color: #dc3545;
        color: #721c24;
      }

      .option.disabled {
        pointer-events: none;
        opacity: 0.6;
      }

      .game-controls {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-top: 30px;
      }

      .btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 25px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .btn.success {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      }

      .btn.danger {
        background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
      }

      .feedback {
        text-align: center;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        font-size: 1.2em;
        font-weight: bold;
        display: none;
      }

      .feedback.correct {
        background: #d4edda;
        color: #155724;
        border: 2px solid #28a745;
      }

      .feedback.incorrect {
        background: #f8d7da;
        color: #721c24;
        border: 2px solid #dc3545;
      }

      .feedback.show {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .memory-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 15px;
        max-width: 600px;
        margin: 0 auto;
      }

      .memory-card {
        aspect-ratio: 1;
        background: #f8f9fa;
        border: 3px solid #e9ecef;
        border-radius: 15px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.2em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .memory-card:hover {
        transform: scale(1.05);
        border-color: #667eea;
      }

      .memory-card.flipped {
        background: #e3f2fd;
        border-color: #2196f3;
      }

      .memory-card.matched {
        background: #d4edda;
        border-color: #28a745;
        pointer-events: none;
      }

      .typing-input {
        width: 100%;
        max-width: 500px;
        padding: 20px;
        font-size: 1.5em;
        border: 3px solid #e9ecef;
        border-radius: 15px;
        text-align: center;
        margin: 20px auto;
        display: block;
        background: #f8f9fa;
      }

      .typing-input:focus {
        outline: none;
        border-color: #667eea;
        background: white;
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: #e9ecef;
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 20px;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        width: 0%;
        transition: width 0.3s ease;
      }

      .game-stats {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        margin-top: 30px;
      }

      .stat-item {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 15px;
        padding: 20px;
        text-align: center;
      }

      .stat-value {
        font-size: 2em;
        font-weight: bold;
        color: #667eea;
      }

      .stat-label {
        color: #666;
        font-size: 0.9em;
      }

      .speaker-btn {
        background: linear-gradient(135deg, #17a2b8 0%, #6610f2 100%);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.2em;
        margin-left: 10px;
        transition: all 0.3s ease;
      }

      .speaker-btn:hover {
        transform: scale(1.1);
      }

      .timer {
        font-size: 1.5em;
        font-weight: bold;
        color: #dc3545;
        margin-bottom: 20px;
      }

      .word-card {
        background: #f8f9fa;
        border: 3px solid #e9ecef;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .word-card:hover {
        background: #e3f2fd;
        border-color: #2196f3;
        transform: translateY(-5px);
      }

      .word-german {
        font-size: 1.8em;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 10px;
      }

      .word-pronunciation {
        color: #8e44ad;
        font-style: italic;
        margin-bottom: 15px;
      }

      .word-vietnamese {
        color: #27ae60;
        font-size: 1.2em;
        font-weight: bold;
      }

      .hidden {
        display: none;
      }

      .game-complete {
        text-align: center;
        padding: 40px;
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        border-radius: 20px;
        margin-top: 30px;
      }

      .game-complete h3 {
        font-size: 2em;
        margin-bottom: 20px;
      }

      .game-complete p {
        font-size: 1.2em;
        margin-bottom: 10px;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .container {
          padding: 10px;
        }

        .header h1 {
          font-size: 2em;
        }

        .game-selector {
          grid-template-columns: 1fr;
        }

        .memory-grid {
          grid-template-columns: repeat(3, 1fr);
        }

        .options {
          grid-template-columns: 1fr;
        }

        .score-board {
          flex-direction: column;
          gap: 15px;
        }

        .game-controls {
          flex-direction: column;
          align-items: center;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üéÆ Game luy·ªán t·∫≠p t·ª´ v·ª±ng ti·∫øng ƒê·ª©c</h1>
        <p>Th·ªùi gian & ƒê·ªì v·∫≠t - 48 t·ª´ v·ª±ng v·ªõi 5 tr√≤ ch∆°i th√∫ v·ªã</p>
      </div>

      <div class="game-selector">
        <div class="game-card active" onclick="selectGame('quiz')">
          <div class="game-icon">üß†</div>
          <div class="game-title">Quiz Tr·∫Øc nghi·ªám</div>
          <div class="game-description">Ch·ªçn ƒë√°p √°n ƒë√∫ng cho t·ª´ng c√¢u h·ªèi</div>
        </div>

        <div class="game-card" onclick="selectGame('memory')">
          <div class="game-icon">üß©</div>
          <div class="game-title">Memory Game</div>
          <div class="game-description">
            L·∫≠t th·∫ª t√¨m c·∫∑p t·ª´ ti·∫øng ƒê·ª©c - ti·∫øng Vi·ªát
          </div>
        </div>

        <div class="game-card" onclick="selectGame('typing')">
          <div class="game-icon">‚å®Ô∏è</div>
          <div class="game-title">Typing Game</div>
          <div class="game-description">
            G√µ t·ª´ ti·∫øng ƒê·ª©c theo nghƒ©a ti·∫øng Vi·ªát
          </div>
        </div>

        <div class="game-card" onclick="selectGame('listening')">
          <div class="game-icon">üéß</div>
          <div class="game-title">Listening Game</div>
          <div class="game-description">Nghe ph√°t √¢m v√† ch·ªçn t·ª´ ƒë√∫ng</div>
        </div>

        <div class="game-card" onclick="selectGame('flashcard')">
          <div class="game-icon">üìö</div>
          <div class="game-title">Flashcard</div>
          <div class="game-description">H·ªçc t·ª´ v·ª±ng v·ªõi th·∫ª ghi nh·ªõ</div>
        </div>
      </div>

      <!-- Quiz Game -->
      <div id="quiz-game" class="game-area active">
        <div class="game-header">
          <h2>üß† Quiz Tr·∫Øc nghi·ªám</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                C√¢u h·ªèi: <span id="quiz-current">1</span>/<span id="quiz-total"
                  >20</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>ƒêi·ªÉm: <span id="quiz-score">0</span></div>
            </div>
            <div class="score-item">
              <div>ƒê√∫ng: <span id="quiz-correct">0</span></div>
            </div>
          </div>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="quiz-progress"></div>
        </div>

        <div class="question-area">
          <div class="question" id="quiz-question">
            T·ª´ ti·∫øng ƒê·ª©c c·ªßa "ƒë·ªìng h·ªì" l√† g√¨?
          </div>
          <button class="speaker-btn" onclick="speakQuizWord()">üîä</button>
        </div>

        <div class="feedback" id="quiz-feedback"></div>

        <div class="options" id="quiz-options">
          <!-- Options will be generated by JavaScript -->
        </div>

        <div class="game-controls">
          <button
            class="btn"
            id="quiz-next"
            onclick="nextQuizQuestion()"
            disabled
          >
            C√¢u ti·∫øp theo
          </button>
          <button class="btn" onclick="restartQuiz()">Ch∆°i l·∫°i</button>
        </div>
      </div>

      <!-- Memory Game -->
      <div id="memory-game" class="game-area">
        <div class="game-header">
          <h2>üß© Memory Game</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                C·∫∑p t√¨m ƒë∆∞·ª£c: <span id="memory-matches">0</span>/<span
                  id="memory-total"
                  >12</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>L∆∞·ª£t ch∆°i: <span id="memory-moves">0</span></div>
            </div>
            <div class="score-item timer">
              <div>Th·ªùi gian: <span id="memory-time">0</span>s</div>
            </div>
          </div>
        </div>

        <div class="memory-grid" id="memory-grid">
          <!-- Memory cards will be generated by JavaScript -->
        </div>

        <div class="game-controls">
          <button class="btn" onclick="restartMemory()">Ch∆°i l·∫°i</button>
        </div>
      </div>

      <!-- Typing Game -->
      <div id="typing-game" class="game-area">
        <div class="game-header">
          <h2>‚å®Ô∏è Typing Game</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                T·ª´: <span id="typing-current">1</span>/<span id="typing-total"
                  >20</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>ƒê√∫ng: <span id="typing-score">0</span></div>
            </div>
            <div class="score-item timer">
              <div>Th·ªùi gian: <span id="typing-time">60</span>s</div>
            </div>
          </div>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="typing-progress"></div>
        </div>

        <div class="question-area">
          <div class="question" id="typing-question">
            G√µ t·ª´ ti·∫øng ƒê·ª©c c√≥ nghƒ©a l√†: "ƒë·ªìng h·ªì"
          </div>
          <button class="speaker-btn" onclick="speakTypingWord()">üîä</button>
        </div>

        <input
          type="text"
          class="typing-input"
          id="typing-input"
          placeholder="G√µ t·ª´ ti·∫øng ƒê·ª©c..."
          autocomplete="off"
        />

        <div class="feedback" id="typing-feedback"></div>

        <div class="game-controls">
          <button
            class="btn"
            id="typing-next"
            onclick="nextTypingQuestion()"
            disabled
          >
            T·ª´ ti·∫øp theo
          </button>
          <button class="btn" onclick="restartTyping()">Ch∆°i l·∫°i</button>
        </div>
      </div>

      <!-- Listening Game -->
      <div id="listening-game" class="game-area">
        <div class="game-header">
          <h2>üéß Listening Game</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                C√¢u h·ªèi: <span id="listening-current">1</span>/<span
                  id="listening-total"
                  >20</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>ƒêi·ªÉm: <span id="listening-score">0</span></div>
            </div>
            <div class="score-item">
              <div>ƒê√∫ng: <span id="listening-correct">0</span></div>
            </div>
          </div>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="listening-progress"></div>
        </div>

        <div class="question-area">
          <div class="question">Nghe ph√°t √¢m v√† ch·ªçn nghƒ©a ƒë√∫ng:</div>
          <button class="speaker-btn" onclick="playListeningWord()">
            üîä Nghe t·ª´
          </button>
        </div>

        <div class="feedback" id="listening-feedback"></div>

        <div class="options" id="listening-options">
          <!-- Options will be generated by JavaScript -->
        </div>

        <div class="game-controls">
          <button
            class="btn"
            id="listening-next"
            onclick="nextListeningQuestion()"
            disabled
          >
            C√¢u ti·∫øp theo
          </button>
          <button class="btn" onclick="restartListening()">Ch∆°i l·∫°i</button>
        </div>
      </div>

      <!-- Flashcard Game -->
      <div id="flashcard-game" class="game-area">
        <div class="game-header">
          <h2>üìö Flashcard</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                Th·∫ª: <span id="flashcard-current">1</span>/<span
                  id="flashcard-total"
                  >48</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>ƒê√£ h·ªçc: <span id="flashcard-learned">0</span></div>
            </div>
            <div class="score-item">
              <div>Kh√≥: <span id="flashcard-difficult">0</span></div>
            </div>
          </div>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="flashcard-progress"></div>
        </div>

        <div class="word-card" id="flashcard-card" onclick="flipFlashcard()">
          <div class="word-german" id="flashcard-german">die Uhr</div>
          <div class="word-pronunciation hidden" id="flashcard-pronunciation">
            [di ur]
          </div>
          <div class="word-vietnamese hidden" id="flashcard-vietnamese">
            ƒë·ªìng h·ªì
          </div>
        </div>

        <div class="game-controls">
          <button class="btn danger" onclick="markDifficult()">üòÖ Kh√≥</button>
          <button class="btn" onclick="flipFlashcard()">üîÑ L·∫≠t th·∫ª</button>
          <button class="btn success" onclick="markLearned()">
            ‚úÖ ƒê√£ bi·∫øt
          </button>
        </div>

        <div class="game-controls">
          <button class="btn" onclick="previousFlashcard()">‚Üê Tr∆∞·ªõc</button>
          <button class="btn" onclick="nextFlashcard()">Ti·∫øp theo ‚Üí</button>
        </div>
      </div>
    </div>

    <script>
      // Vocabulary data
      const vocabulary = [
        {
          german: "die Uhr",
          pronunciation: "[di ur]",
          vietnamese: "ƒë·ªìng h·ªì",
          category: "time",
        },
        {
          german: "die Zeit",
          pronunciation: "[di tsait]",
          vietnamese: "th·ªùi gian",
          category: "time",
        },
        {
          german: "die Sekunde",
          pronunciation: "[di ze-kun-de]",
          vietnamese: "gi√¢y",
          category: "time",
        },
        {
          german: "die Minute",
          pronunciation: "[di mi-nu-te]",
          vietnamese: "ph√∫t",
          category: "time",
        },
        {
          german: "die Stunde",
          pronunciation: "[di shun-de]",
          vietnamese: "gi·ªù",
          category: "time",
        },
        {
          german: "der Tag",
          pronunciation: "[der tak]",
          vietnamese: "ng√†y",
          category: "time",
        },
        {
          german: "die Woche",
          pronunciation: "[di vo-khe]",
          vietnamese: "tu·∫ßn",
          category: "time",
        },
        {
          german: "der Monat",
          pronunciation: "[der mo-nat]",
          vietnamese: "th√°ng",
          category: "time",
        },
        {
          german: "das Jahr",
          pronunciation: "[das yar]",
          vietnamese: "nƒÉm",
          category: "time",
        },
        {
          german: "am Morgen",
          pronunciation: "[am mor-gen]",
          vietnamese: "bu·ªïi s√°ng",
          category: "time",
        },
        {
          german: "am Mittag",
          pronunciation: "[am mi-tak]",
          vietnamese: "bu·ªïi tr∆∞a",
          category: "time",
        },
        {
          german: "am Abend",
          pronunciation: "[am a-bent]",
          vietnamese: "bu·ªïi t·ªëi",
          category: "time",
        },
        {
          german: "in der Nacht",
          pronunciation: "[in der nakht]",
          vietnamese: "ban ƒë√™m",
          category: "time",
        },
        {
          german: "Montag",
          pronunciation: "[mon-tak]",
          vietnamese: "Th·ª© hai",
          category: "days",
        },
        {
          german: "Dienstag",
          pronunciation: "[dins-tak]",
          vietnamese: "Th·ª© ba",
          category: "days",
        },
        {
          german: "Mittwoch",
          pronunciation: "[mit-vokh]",
          vietnamese: "Th·ª© t∆∞",
          category: "days",
        },
        {
          german: "Donnerstag",
          pronunciation: "[do-ners-tak]",
          vietnamese: "Th·ª© nƒÉm",
          category: "days",
        },
        {
          german: "Freitag",
          pronunciation: "[frai-tak]",
          vietnamese: "Th·ª© s√°u",
          category: "days",
        },
        {
          german: "Samstag",
          pronunciation: "[zams-tak]",
          vietnamese: "Th·ª© b·∫£y",
          category: "days",
        },
        {
          german: "Sonntag",
          pronunciation: "[zon-tak]",
          vietnamese: "Ch·ªß nh·∫≠t",
          category: "days",
        },
        {
          german: "der Fr√ºhling",
          pronunciation: "[der fr√ºh-ling]",
          vietnamese: "m√πa xu√¢n",
          category: "seasons",
        },
        {
          german: "der Sommer",
          pronunciation: "[der zo-mer]",
          vietnamese: "m√πa h√®",
          category: "seasons",
        },
        {
          german: "der Herbst",
          pronunciation: "[der herpst]",
          vietnamese: "m√πa thu",
          category: "seasons",
        },
        {
          german: "der Winter",
          pronunciation: "[der vin-ter]",
          vietnamese: "m√πa ƒë√¥ng",
          category: "seasons",
        },
        {
          german: "das Auto",
          pronunciation: "[das au-to]",
          vietnamese: "xe h∆°i",
          category: "objects",
        },
        {
          german: "das Bild",
          pronunciation: "[das bilt]",
          vietnamese: "h√¨nh ·∫£nh",
          category: "objects",
        },
        {
          german: "der Bleistift",
          pronunciation: "[der blai-shtift]",
          vietnamese: "b√∫t ch√¨",
          category: "objects",
        },
        {
          german: "die Brille",
          pronunciation: "[di bri-le]",
          vietnamese: "k√≠nh m·∫Øt",
          category: "objects",
        },
        {
          german: "das Buch",
          pronunciation: "[das bukh]",
          vietnamese: "s√°ch",
          category: "objects",
        },
        {
          german: "die CD",
          pronunciation: "[di tse-de]",
          vietnamese: "ƒëƒ©a CD",
          category: "objects",
        },
        {
          german: "der Computer",
          pronunciation: "[der kom-pyu-ter]",
          vietnamese: "m√°y t√≠nh",
          category: "objects",
        },
        {
          german: "das Fahrrad",
          pronunciation: "[das far-rat]",
          vietnamese: "xe ƒë·∫°p",
          category: "objects",
        },
        {
          german: "der Fernseher",
          pronunciation: "[der fern-ze-her]",
          vietnamese: "tivi",
          category: "objects",
        },
        {
          german: "der Fu√üball",
          pronunciation: "[der fus-bal]",
          vietnamese: "b√≥ng ƒë√°",
          category: "objects",
        },
        {
          german: "das Handy",
          pronunciation: "[das hen-di]",
          vietnamese: "ƒëi·ªán tho·∫°i di ƒë·ªông",
          category: "objects",
        },
        {
          german: "das Heft",
          pronunciation: "[das heft]",
          vietnamese: "v·ªü",
          category: "objects",
        },
        {
          german: "der Herd",
          pronunciation: "[der hert]",
          vietnamese: "b·∫øp",
          category: "objects",
        },
        {
          german: "die Kaffeemaschine",
          pronunciation: "[di ka-fe-ma-shi-ne]",
          vietnamese: "m√°y pha c√† ph√™",
          category: "objects",
        },
        {
          german: "der K√ºhlschrank",
          pronunciation: "[der k√ºhl-shrank]",
          vietnamese: "t·ªß l·∫°nh",
          category: "objects",
        },
        {
          german: "die Lampe",
          pronunciation: "[di lam-pe]",
          vietnamese: "ƒë√®n",
          category: "objects",
        },
        {
          german: "das Radio",
          pronunciation: "[das ra-di-o]",
          vietnamese: "ƒë√†i radio",
          category: "objects",
        },
        {
          german: "die Schere",
          pronunciation: "[di she-re]",
          vietnamese: "k√©o",
          category: "objects",
        },
        {
          german: "der Stuhl",
          pronunciation: "[der shtul]",
          vietnamese: "gh·∫ø",
          category: "objects",
        },
        {
          german: "die Tasche",
          pronunciation: "[di ta-she]",
          vietnamese: "t√∫i x√°ch",
          category: "objects",
        },
        {
          german: "die Tasse",
          pronunciation: "[di ta-se]",
          vietnamese: "t√°ch",
          category: "objects",
        },
        {
          german: "der Tisch",
          pronunciation: "[der tish]",
          vietnamese: "b√†n",
          category: "objects",
        },
        {
          german: "die Waschmaschine",
          pronunciation: "[di vash-ma-shi-ne]",
          vietnamese: "m√°y gi·∫∑t",
          category: "objects",
        },
        {
          german: "das W√∂rterbuch",
          pronunciation: "[das v√∂r-ter-bukh]",
          vietnamese: "t·ª´ ƒëi·ªÉn",
          category: "objects",
        },
      ];

      // Game state variables
      let currentGame = "quiz";
      let quizState = {
        currentQuestion: 0,
        score: 0,
        correct: 0,
        questions: [],
        isAnswered: false,
      };

      let memoryState = {
        cards: [],
        flippedCards: [],
        matches: 0,
        moves: 0,
        startTime: null,
        timer: null,
      };

      let typingState = {
        currentWord: 0,
        score: 0,
        words: [],
        timer: null,
        timeLeft: 60,
      };

      let listeningState = {
        currentQuestion: 0,
        score: 0,
        correct: 0,
        questions: [],
        isAnswered: false,
      };

      let flashcardState = {
        currentCard: 0,
        learned: 0,
        difficult: 0,
        isFlipped: false,
      };

      // Speech synthesis function
      function speak(text) {
        speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        const voices = speechSynthesis.getVoices();
        const germanVoice = voices.find(
          (voice) =>
            voice.lang.includes("de") ||
            voice.name.toLowerCase().includes("german") ||
            voice.name.toLowerCase().includes("deutsch")
        );

        if (germanVoice) {
          utterance.voice = germanVoice;
        }
        utterance.lang = "de-DE";
        utterance.rate = 0.8;
        speechSynthesis.speak(utterance);
      }

      // Game selection
      function selectGame(gameType) {
        currentGame = gameType;

        // Update game cards
        document.querySelectorAll(".game-card").forEach((card) => {
          card.classList.remove("active");
        });
        event.target.closest(".game-card").classList.add("active");

        // Hide all game areas
        document.querySelectorAll(".game-area").forEach((area) => {
          area.classList.remove("active");
        });

        // Show selected game
        document.getElementById(gameType + "-game").classList.add("active");

        // Initialize the selected game
        switch (gameType) {
          case "quiz":
            initQuiz();
            break;
          case "memory":
            initMemory();
            break;
          case "typing":
            initTyping();
            break;
          case "listening":
            initListening();
            break;
          case "flashcard":
            initFlashcard();
            break;
        }
      }

      // Utility functions
      function shuffleArray(array) {
        const newArray = [...array];
        for (let i = newArray.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
        }
        return newArray;
      }

      function getRandomWords(exclude = [], count = 3) {
        const filtered = vocabulary.filter((word) => !exclude.includes(word));
        return shuffleArray(filtered).slice(0, count);
      }

      // QUIZ GAME
      function initQuiz() {
        quizState = {
          currentQuestion: 0,
          score: 0,
          correct: 0,
          questions: shuffleArray(vocabulary).slice(0, 20),
          isAnswered: false,
        };

        updateQuizUI();
        showQuizQuestion();
      }

      function updateQuizUI() {
        document.getElementById("quiz-current").textContent =
          quizState.currentQuestion + 1;
        document.getElementById("quiz-total").textContent =
          quizState.questions.length;
        document.getElementById("quiz-score").textContent = quizState.score;
        document.getElementById("quiz-correct").textContent = quizState.correct;

        const progress =
          (quizState.currentQuestion / quizState.questions.length) * 100;
        document.getElementById("quiz-progress").style.width = progress + "%";
      }

      function showQuizQuestion() {
        if (quizState.currentQuestion >= quizState.questions.length) {
          showQuizComplete();
          return;
        }

        const currentWord = quizState.questions[quizState.currentQuestion];
        const questionType =
          Math.random() > 0.5 ? "germanToVietnamese" : "vietnameseToGerman";

        let questionText, correctAnswer;

        if (questionType === "germanToVietnamese") {
          questionText = `Nghƒ©a c·ªßa "${currentWord.german}" l√† g√¨?`;
          correctAnswer = currentWord.vietnamese;
        } else {
          questionText = `T·ª´ ti·∫øng ƒê·ª©c c·ªßa "${currentWord.vietnamese}" l√† g√¨?`;
          correctAnswer = currentWord.german;
        }

        document.getElementById("quiz-question").textContent = questionText;

        // Generate options
        const wrongOptions = getRandomWords([currentWord], 3);
        const options = shuffleArray([
          correctAnswer,
          ...wrongOptions.map((w) =>
            questionType === "germanToVietnamese" ? w.vietnamese : w.german
          ),
        ]);

        const optionsContainer = document.getElementById("quiz-options");
        optionsContainer.innerHTML = "";

        options.forEach((option) => {
          const optionElement = document.createElement("div");
          optionElement.className = "option";
          optionElement.textContent = option;
          optionElement.onclick = () => selectQuizOption(option, correctAnswer);
          optionsContainer.appendChild(optionElement);
        });

        quizState.isAnswered = false;
        document.getElementById("quiz-next").disabled = true;
        document.getElementById("quiz-feedback").classList.remove("show");
      }

      function selectQuizOption(selected, correct) {
        if (quizState.isAnswered) return;

        quizState.isAnswered = true;
        const isCorrect = selected === correct;

        document.querySelectorAll(".option").forEach((option) => {
          option.classList.add("disabled");
          if (option.textContent === correct) {
            option.classList.add("correct");
          } else if (option.textContent === selected && !isCorrect) {
            option.classList.add("incorrect");
          }
        });

        const feedback = document.getElementById("quiz-feedback");
        if (isCorrect) {
          quizState.score += 10;
          quizState.correct++;
          feedback.textContent = "‚úÖ Ch√≠nh x√°c! Tuy·ªát v·ªùi!";
          feedback.className = "feedback correct show";
        } else {
          feedback.textContent = `‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√†: ${correct}`;
          feedback.className = "feedback incorrect show";
        }

        updateQuizUI();
        document.getElementById("quiz-next").disabled = false;
      }

      function nextQuizQuestion() {
        quizState.currentQuestion++;
        updateQuizUI();
        showQuizQuestion();
      }

      function restartQuiz() {
        initQuiz();
      }

      function speakQuizWord() {
        const currentWord = quizState.questions[quizState.currentQuestion];
        if (currentWord) {
          speak(currentWord.german);
        }
      }

      function showQuizComplete() {
        const accuracy = Math.round(
          (quizState.correct / quizState.questions.length) * 100
        );
        document.getElementById("quiz-options").innerHTML = `
                <div class="game-complete">
                    <h3>üéâ Ho√†n th√†nh Quiz!</h3>
                    <p>ƒêi·ªÉm s·ªë: ${quizState.score}</p>
                    <p>ƒê√∫ng: ${quizState.correct}/${quizState.questions.length}</p>
                    <p>ƒê·ªô ch√≠nh x√°c: ${accuracy}%</p>
                </div>
            `;
      }

      // MEMORY GAME
      function initMemory() {
        const selectedWords = shuffleArray(vocabulary).slice(0, 12);
        const cards = [];

        selectedWords.forEach((word) => {
          cards.push({ type: "german", word: word, text: word.german });
          cards.push({ type: "vietnamese", word: word, text: word.vietnamese });
        });

        memoryState = {
          cards: shuffleArray(cards),
          flippedCards: [],
          matches: 0,
          moves: 0,
          startTime: Date.now(),
          timer: setInterval(updateMemoryTimer, 1000),
        };

        updateMemoryUI();
        renderMemoryGrid();
      }

      function updateMemoryUI() {
        document.getElementById("memory-matches").textContent =
          memoryState.matches;
        document.getElementById("memory-total").textContent = "12";
        document.getElementById("memory-moves").textContent = memoryState.moves;
      }

      function updateMemoryTimer() {
        const elapsed = Math.floor((Date.now() - memoryState.startTime) / 1000);
        document.getElementById("memory-time").textContent = elapsed;
      }

      function renderMemoryGrid() {
        const grid = document.getElementById("memory-grid");
        grid.innerHTML = "";

        memoryState.cards.forEach((card, index) => {
          const cardElement = document.createElement("div");
          cardElement.className = "memory-card";
          cardElement.innerHTML = "?";
          cardElement.onclick = () => flipMemoryCard(index);
          cardElement.dataset.index = index;
          grid.appendChild(cardElement);
        });
      }

      function flipMemoryCard(index) {
        const cardElement = document.querySelector(`[data-index="${index}"]`);
        const card = memoryState.cards[index];

        if (
          cardElement.classList.contains("flipped") ||
          cardElement.classList.contains("matched") ||
          memoryState.flippedCards.length >= 2
        ) {
          return;
        }

        cardElement.classList.add("flipped");
        cardElement.innerHTML = card.text;
        memoryState.flippedCards.push({ index, card });

        if (memoryState.flippedCards.length === 2) {
          memoryState.moves++;
          updateMemoryUI();

          setTimeout(() => {
            checkMemoryMatch();
          }, 1000);
        }
      }

      function checkMemoryMatch() {
        const [first, second] = memoryState.flippedCards;
        const firstElement = document.querySelector(
          `[data-index="${first.index}"]`
        );
        const secondElement = document.querySelector(
          `[data-index="${second.index}"]`
        );

        if (first.card.word.german === second.card.word.german) {
          // Match found
          firstElement.classList.add("matched");
          secondElement.classList.add("matched");
          memoryState.matches++;

          if (memoryState.matches === 12) {
            clearInterval(memoryState.timer);
            showMemoryComplete();
          }
        } else {
          // No match
          firstElement.classList.remove("flipped");
          secondElement.classList.remove("flipped");
          firstElement.innerHTML = "?";
          secondElement.innerHTML = "?";
        }

        memoryState.flippedCards = [];
        updateMemoryUI();
      }

      function showMemoryComplete() {
        const elapsed = Math.floor((Date.now() - memoryState.startTime) / 1000);
        document.getElementById("memory-grid").innerHTML = `
                <div class="game-complete" style="grid-column: 1 / -1;">
                    <h3>üéâ Ho√†n th√†nh Memory Game!</h3>
                    <p>Th·ªùi gian: ${elapsed} gi√¢y</p>
                    <p>S·ªë l∆∞·ª£t: ${memoryState.moves}</p>
                    <p>Hi·ªáu su·∫•t: ${Math.round(
                      (24 / memoryState.moves) * 100
                    )}%</p>
                </div>
            `;
      }

      function restartMemory() {
        if (memoryState.timer) {
          clearInterval(memoryState.timer);
        }
        initMemory();
      }

      // TYPING GAME
      function initTyping() {
        typingState = {
          currentWord: 0,
          score: 0,
          words: shuffleArray(vocabulary).slice(0, 20),
          timer: null,
          timeLeft: 60,
        };

        updateTypingUI();
        showTypingQuestion();
        startTypingTimer();

        const input = document.getElementById("typing-input");
        input.value = "";
        input.focus();
        input.onkeypress = handleTypingKeypress;
      }

      function updateTypingUI() {
        document.getElementById("typing-current").textContent =
          typingState.currentWord + 1;
        document.getElementById("typing-total").textContent =
          typingState.words.length;
        document.getElementById("typing-score").textContent = typingState.score;
        document.getElementById("typing-time").textContent =
          typingState.timeLeft;

        const progress =
          (typingState.currentWord / typingState.words.length) * 100;
        document.getElementById("typing-progress").style.width = progress + "%";
      }

      function showTypingQuestion() {
        if (
          typingState.currentWord >= typingState.words.length ||
          typingState.timeLeft <= 0
        ) {
          showTypingComplete();
          return;
        }

        const currentWord = typingState.words[typingState.currentWord];
        document.getElementById(
          "typing-question"
        ).textContent = `G√µ t·ª´ ti·∫øng ƒê·ª©c c√≥ nghƒ©a l√†: "${currentWord.vietnamese}"`;

        document.getElementById("typing-input").value = "";
        document.getElementById("typing-input").focus();
        document.getElementById("typing-next").disabled = true;
        document.getElementById("typing-feedback").classList.remove("show");
      }

      function handleTypingKeypress(event) {
        if (event.key === "Enter") {
          checkTypingAnswer();
        }
      }

      function checkTypingAnswer() {
        const input = document.getElementById("typing-input");
        const userAnswer = input.value.trim().toLowerCase();
        const correctAnswer =
          typingState.words[typingState.currentWord].german.toLowerCase();

        const feedback = document.getElementById("typing-feedback");
        if (userAnswer === correctAnswer) {
          typingState.score++;
          feedback.textContent = "‚úÖ Ch√≠nh x√°c! Tuy·ªát v·ªùi!";
          feedback.className = "feedback correct show";
        } else {
          feedback.textContent = `‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√†: ${
            typingState.words[typingState.currentWord].german
          }`;
          feedback.className = "feedback incorrect show";
        }

        updateTypingUI();
        document.getElementById("typing-next").disabled = false;
      }

      function nextTypingQuestion() {
        typingState.currentWord++;
        updateTypingUI();
        showTypingQuestion();
      }

      function startTypingTimer() {
        typingState.timer = setInterval(() => {
          typingState.timeLeft--;
          updateTypingUI();

          if (typingState.timeLeft <= 0) {
            clearInterval(typingState.timer);
            showTypingComplete();
          }
        }, 1000);
      }

      function restartTyping() {
        if (typingState.timer) {
          clearInterval(typingState.timer);
        }
        initTyping();
      }

      function speakTypingWord() {
        const currentWord = typingState.words[typingState.currentWord];
        if (currentWord) {
          speak(currentWord.german);
        }
      }

      function showTypingComplete() {
        if (typingState.timer) {
          clearInterval(typingState.timer);
        }

        const accuracy =
          Math.round((typingState.score / typingState.currentWord) * 100) || 0;
        document.getElementById("typing-input").style.display = "none";
        document.getElementById("typing-feedback").innerHTML = `
                <div class="game-complete">
                    <h3>‚è∞ H·∫øt th·ªùi gian!</h3>
                    <p>T·ª´ ƒë√∫ng: ${typingState.score}/${typingState.currentWord}</p>
                    <p>ƒê·ªô ch√≠nh x√°c: ${accuracy}%</p>
                </div>
            `;
        document.getElementById("typing-feedback").className = "feedback show";
      }

      // LISTENING GAME
      function initListening() {
        listeningState = {
          currentQuestion: 0,
          score: 0,
          correct: 0,
          questions: shuffleArray(vocabulary).slice(0, 20),
          isAnswered: false,
        };

        updateListeningUI();
        showListeningQuestion();
      }

      function updateListeningUI() {
        document.getElementById("listening-current").textContent =
          listeningState.currentQuestion + 1;
        document.getElementById("listening-total").textContent =
          listeningState.questions.length;
        document.getElementById("listening-score").textContent =
          listeningState.score;
        document.getElementById("listening-correct").textContent =
          listeningState.correct;

        const progress =
          (listeningState.currentQuestion / listeningState.questions.length) *
          100;
        document.getElementById("listening-progress").style.width =
          progress + "%";
      }

      function showListeningQuestion() {
        if (listeningState.currentQuestion >= listeningState.questions.length) {
          showListeningComplete();
          return;
        }

        const currentWord =
          listeningState.questions[listeningState.currentQuestion];
        const correctAnswer = currentWord.vietnamese;

        // Generate options
        const wrongOptions = getRandomWords([currentWord], 3);
        const options = shuffleArray([
          correctAnswer,
          ...wrongOptions.map((w) => w.vietnamese),
        ]);

        const optionsContainer = document.getElementById("listening-options");
        optionsContainer.innerHTML = "";

        options.forEach((option) => {
          const optionElement = document.createElement("div");
          optionElement.className = "option";
          optionElement.textContent = option;
          optionElement.onclick = () =>
            selectListeningOption(option, correctAnswer);
          optionsContainer.appendChild(optionElement);
        });

        listeningState.isAnswered = false;
        document.getElementById("listening-next").disabled = true;
        document.getElementById("listening-feedback").classList.remove("show");

        // Auto play the word
        setTimeout(() => {
          playListeningWord();
        }, 500);
      }

      function playListeningWord() {
        const currentWord =
          listeningState.questions[listeningState.currentQuestion];
        if (currentWord) {
          speak(currentWord.german);
        }
      }

      function selectListeningOption(selected, correct) {
        if (listeningState.isAnswered) return;

        listeningState.isAnswered = true;
        const isCorrect = selected === correct;

        document
          .querySelectorAll("#listening-options .option")
          .forEach((option) => {
            option.classList.add("disabled");
            if (option.textContent === correct) {
              option.classList.add("correct");
            } else if (option.textContent === selected && !isCorrect) {
              option.classList.add("incorrect");
            }
          });

        const feedback = document.getElementById("listening-feedback");
        if (isCorrect) {
          listeningState.score += 10;
          listeningState.correct++;
          feedback.textContent = "‚úÖ Ch√≠nh x√°c! Tuy·ªát v·ªùi!";
          feedback.className = "feedback correct show";
        } else {
          feedback.textContent = `‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√†: ${correct}`;
          feedback.className = "feedback incorrect show";
        }

        updateListeningUI();
        document.getElementById("listening-next").disabled = false;
      }

      function nextListeningQuestion() {
        listeningState.currentQuestion++;
        updateListeningUI();
        showListeningQuestion();
      }

      function restartListening() {
        initListening();
      }

      function showListeningComplete() {
        const accuracy = Math.round(
          (listeningState.correct / listeningState.questions.length) * 100
        );
        document.getElementById("listening-options").innerHTML = `
                <div class="game-complete">
                    <h3>üéâ Ho√†n th√†nh Listening Game!</h3>
                    <p>ƒêi·ªÉm s·ªë: ${listeningState.score}</p>
                    <p>ƒê√∫ng: ${listeningState.correct}/${listeningState.questions.length}</p>
                    <p>ƒê·ªô ch√≠nh x√°c: ${accuracy}%</p>
                </div>
            `;
      }

      // FLASHCARD GAME
      function initFlashcard() {
        flashcardState = {
          currentCard: 0,
          learned: 0,
          difficult: 0,
          isFlipped: false,
        };

        updateFlashcardUI();
        showFlashcard();
      }

      function updateFlashcardUI() {
        document.getElementById("flashcard-current").textContent =
          flashcardState.currentCard + 1;
        document.getElementById("flashcard-total").textContent =
          vocabulary.length;
        document.getElementById("flashcard-learned").textContent =
          flashcardState.learned;
        document.getElementById("flashcard-difficult").textContent =
          flashcardState.difficult;

        const progress = (flashcardState.currentCard / vocabulary.length) * 100;
        document.getElementById("flashcard-progress").style.width =
          progress + "%";
      }

      function showFlashcard() {
        if (flashcardState.currentCard >= vocabulary.length) {
          showFlashcardComplete();
          return;
        }

        const currentWord = vocabulary[flashcardState.currentCard];
        document.getElementById("flashcard-german").textContent =
          currentWord.german;
        document.getElementById("flashcard-pronunciation").textContent =
          currentWord.pronunciation;
        document.getElementById("flashcard-vietnamese").textContent =
          currentWord.vietnamese;

        // Reset flip state
        flashcardState.isFlipped = false;
        document
          .getElementById("flashcard-pronunciation")
          .classList.add("hidden");
        document.getElementById("flashcard-vietnamese").classList.add("hidden");
      }

      function flipFlashcard() {
        flashcardState.isFlipped = !flashcardState.isFlipped;

        const pronunciation = document.getElementById(
          "flashcard-pronunciation"
        );
        const vietnamese = document.getElementById("flashcard-vietnamese");

        if (flashcardState.isFlipped) {
          pronunciation.classList.remove("hidden");
          vietnamese.classList.remove("hidden");

          // Speak the word when flipped
          const currentWord = vocabulary[flashcardState.currentCard];
          speak(currentWord.german);
        } else {
          pronunciation.classList.add("hidden");
          vietnamese.classList.add("hidden");
        }
      }

      function markLearned() {
        flashcardState.learned++;
        nextFlashcard();
      }

      function markDifficult() {
        flashcardState.difficult++;
        nextFlashcard();
      }

      function nextFlashcard() {
        flashcardState.currentCard++;
        updateFlashcardUI();
        showFlashcard();
      }

      function previousFlashcard() {
        if (flashcardState.currentCard > 0) {
          flashcardState.currentCard--;
          updateFlashcardUI();
          showFlashcard();
        }
      }

      function showFlashcardComplete() {
        const accuracy = Math.round(
          (flashcardState.learned / vocabulary.length) * 100
        );
        document.getElementById("flashcard-card").innerHTML = `
                <div class="game-complete">
                    <h3>üìö Ho√†n th√†nh t·∫•t c·∫£ Flashcard!</h3>
                    <p>ƒê√£ h·ªçc: ${flashcardState.learned}</p>
                    <p>Kh√≥: ${flashcardState.difficult}</p>
                    <p>T·ª∑ l·ªá th√†nh th·∫°o: ${accuracy}%</p>
                </div>
            `;
      }

      // Initialize the first game
      window.onload = function () {
        initQuiz();
      };
    </script>
  </body>
</html>
