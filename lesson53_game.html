<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üéÆ B1 Sprechen Master Game - Luy·ªán thi n√≥i B1 Goethe</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
      }

      .game-container {
        max-width: 1200px;
        width: 100%;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
      }

      .game-header {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 30px;
        text-align: center;
        position: relative;
      }

      .game-header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
      }

      .stats-bar {
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
        gap: 15px;
      }

      .stat-item {
        background: rgba(255, 255, 255, 0.2);
        padding: 15px 25px;
        border-radius: 15px;
        backdrop-filter: blur(10px);
        flex: 1;
      }

      .stat-label {
        font-size: 0.9em;
        opacity: 0.9;
      }

      .stat-value {
        font-size: 2em;
        font-weight: bold;
        margin-top: 5px;
      }

      .game-content {
        padding: 40px;
      }

      .menu-screen,
      .game-screen,
      .results-screen {
        display: none;
      }

      .menu-screen.active,
      .game-screen.active,
      .results-screen.active {
        display: block;
        animation: fadeIn 0.5s;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .game-modes {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 25px;
        margin-top: 30px;
      }

      .game-mode-card {
        background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
        padding: 30px;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s;
        border: 3px solid transparent;
        position: relative;
        overflow: hidden;
      }

      .game-mode-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        opacity: 0;
        transition: opacity 0.3s;
      }

      .game-mode-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
        border-color: #667eea;
      }

      .game-mode-card:hover::before {
        opacity: 0.1;
      }

      .game-mode-card > * {
        position: relative;
        z-index: 1;
      }

      .mode-icon {
        font-size: 4em;
        margin-bottom: 15px;
      }

      .mode-title {
        font-size: 1.5em;
        font-weight: bold;
        color: #333;
        margin-bottom: 10px;
      }

      .mode-desc {
        color: #666;
        line-height: 1.6;
      }

      .mode-difficulty {
        display: flex;
        gap: 5px;
        margin-top: 15px;
      }

      .difficulty-dot {
        width: 12px;
        height: 12px;
        border-radius: 50%;
        background: #ddd;
      }

      .difficulty-dot.active {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }

      .question-card {
        background: #f8f9fa;
        padding: 40px;
        border-radius: 15px;
        margin-bottom: 30px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
      }

      .question-text {
        font-size: 1.4em;
        color: #333;
        margin-bottom: 30px;
        line-height: 1.8;
      }

      .situation {
        background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        padding: 20px;
        border-radius: 10px;
        margin-bottom: 25px;
        font-style: italic;
      }

      .options-grid {
        display: grid;
        gap: 15px;
      }

      .option-btn {
        background: white;
        padding: 20px;
        border: 3px solid #e0e0e0;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s;
        text-align: left;
        font-size: 1.1em;
        position: relative;
        overflow: hidden;
      }

      .option-btn:hover {
        border-color: #667eea;
        transform: translateX(5px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
      }

      .option-btn.correct {
        background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        border-color: #28a745;
        animation: correctPulse 0.5s;
      }

      .option-btn.wrong {
        background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        border-color: #dc3545;
        animation: wrongShake 0.5s;
      }

      @keyframes correctPulse {
        0%,
        100% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.05);
        }
      }

      @keyframes wrongShake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-10px);
        }
        75% {
          transform: translateX(10px);
        }
      }

      .fill-blank-input {
        width: 100%;
        padding: 15px;
        font-size: 1.2em;
        border: 3px solid #e0e0e0;
        border-radius: 10px;
        margin: 20px 0;
        transition: all 0.3s;
      }

      .fill-blank-input:focus {
        outline: none;
        border-color: #667eea;
        box-shadow: 0 0 20px rgba(102, 126, 234, 0.2);
      }

      .sentence-builder {
        min-height: 150px;
        background: white;
        border: 3px solid #667eea;
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        align-items: flex-start;
      }

      .word-bank {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        margin: 20px 0;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 12px;
      }

      .draggable-word {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 12px 24px;
        border-radius: 25px;
        cursor: pointer;
        user-select: none;
        font-weight: 600;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
        transition: all 0.3s;
      }

      .draggable-word:hover {
        transform: scale(1.1);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
      }

      .draggable-word.used {
        opacity: 0.3;
        pointer-events: none;
      }

      .btn {
        padding: 15px 40px;
        font-size: 1.1em;
        border: none;
        border-radius: 12px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s;
        text-transform: uppercase;
        letter-spacing: 1px;
      }

      .btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
      }

      .btn-primary:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.5);
      }

      .btn-secondary {
        background: #6c757d;
        color: white;
      }

      .btn-secondary:hover {
        background: #5a6268;
        transform: translateY(-3px);
      }

      .btn-success {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
      }

      .button-group {
        display: flex;
        gap: 15px;
        justify-content: center;
        margin-top: 30px;
        flex-wrap: wrap;
      }

      .progress-bar {
        width: 100%;
        height: 25px;
        background: #e0e0e0;
        border-radius: 15px;
        overflow: hidden;
        margin-bottom: 30px;
        position: relative;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.5s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
        font-size: 0.9em;
      }

      .timer {
        position: absolute;
        top: 30px;
        right: 30px;
        background: rgba(255, 255, 255, 0.3);
        padding: 15px 25px;
        border-radius: 15px;
        backdrop-filter: blur(10px);
        font-size: 1.5em;
        font-weight: bold;
      }

      .feedback-box {
        padding: 25px;
        border-radius: 12px;
        margin: 25px 0;
        display: none;
        animation: slideIn 0.5s;
      }

      @keyframes slideIn {
        from {
          transform: translateY(-20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }

      .feedback-box.show {
        display: block;
      }

      .feedback-box.correct {
        background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
        border: 3px solid #28a745;
      }

      .feedback-box.wrong {
        background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
        border: 3px solid #dc3545;
      }

      .feedback-title {
        font-size: 1.3em;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .results-summary {
        text-align: center;
        padding: 40px;
      }

      .score-circle {
        width: 200px;
        height: 200px;
        border-radius: 50%;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        margin: 30px auto;
        box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
      }

      .score-number {
        font-size: 4em;
        font-weight: bold;
      }

      .score-label {
        font-size: 1.2em;
        margin-top: 10px;
      }

      .performance-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .performance-item {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 12px;
        text-align: center;
      }

      .performance-value {
        font-size: 2.5em;
        font-weight: bold;
        color: #667eea;
        margin: 10px 0;
      }

      .achievement-badge {
        display: inline-block;
        background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
        padding: 10px 20px;
        border-radius: 20px;
        margin: 10px;
        font-weight: bold;
        box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
      }

      .hint-box {
        background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        padding: 20px;
        border-radius: 12px;
        margin: 20px 0;
        border-left: 5px solid #ff9a56;
      }

      .matching-game {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 30px;
        margin: 30px 0;
      }

      .matching-column {
        display: flex;
        flex-direction: column;
        gap: 15px;
      }

      .match-item {
        padding: 20px;
        background: white;
        border: 3px solid #e0e0e0;
        border-radius: 12px;
        cursor: pointer;
        transition: all 0.3s;
        text-align: center;
      }

      .match-item:hover {
        border-color: #667eea;
        transform: scale(1.05);
      }

      .match-item.selected {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-color: #667eea;
      }

      .match-item.matched {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        border-color: #28a745;
        pointer-events: none;
      }

      .combo-counter {
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        font-size: 5em;
        font-weight: bold;
        color: #667eea;
        opacity: 0;
        pointer-events: none;
        z-index: 1000;
        text-shadow: 3px 3px 6px rgba(0, 0, 0, 0.3);
      }

      .combo-counter.show {
        animation: comboAnimation 1s;
      }

      @keyframes comboAnimation {
        0% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(0.5);
        }
        50% {
          opacity: 1;
          transform: translate(-50%, -50%) scale(1.5);
        }
        100% {
          opacity: 0;
          transform: translate(-50%, -50%) scale(1);
        }
      }

      @media (max-width: 768px) {
        .game-header h1 {
          font-size: 1.8em;
        }

        .stats-bar {
          flex-direction: column;
        }

        .game-content {
          padding: 20px;
        }

        .game-modes {
          grid-template-columns: 1fr;
        }

        .matching-game {
          grid-template-columns: 1fr;
        }

        .score-circle {
          width: 150px;
          height: 150px;
        }

        .score-number {
          font-size: 3em;
        }
      }
    </style>
  </head>
  <body>
    <div class="combo-counter" id="comboCounter"></div>

    <div class="game-container">
      <div class="game-header">
        <h1>üéÆ B1 SPRECHEN MASTER</h1>
        <p>Luy·ªán t·∫≠p n√≥i ti·∫øng ƒê·ª©c B1 Goethe qua game</p>

        <div class="stats-bar">
          <div class="stat-item">
            <div class="stat-label">üèÜ ƒêi·ªÉm</div>
            <div class="stat-value" id="totalScore">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">üìä ƒê·ªô ch√≠nh x√°c</div>
            <div class="stat-value" id="accuracy">0%</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">üî• Streak</div>
            <div class="stat-value" id="streak">0</div>
          </div>
          <div class="stat-item">
            <div class="stat-label">‚≠ê Level</div>
            <div class="stat-value" id="level">1</div>
          </div>
        </div>
      </div>

      <div class="game-content">
        <!-- MENU SCREEN -->
        <div class="menu-screen active" id="menuScreen">
          <h2
            style="
              text-align: center;
              color: #333;
              margin-bottom: 30px;
              font-size: 2em;
            "
          >
            Ch·ªçn ch·∫ø ƒë·ªô ch∆°i
          </h2>

          <div class="game-modes">
            <div class="game-mode-card" onclick="startGame('multiple-choice')">
              <div class="mode-icon">üéØ</div>
              <div class="mode-title">Tr·∫Øc nghi·ªám Redemittel</div>
              <div class="mode-desc">
                Ch·ªçn c·ª•m t·ª´ ƒë√∫ng trong c√°c t√¨nh hu·ªëng giao ti·∫øp. Luy·ªán Teil 1 &
                3.
              </div>
              <div class="mode-difficulty">
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot"></div>
              </div>
            </div>

            <div class="game-mode-card" onclick="startGame('fill-blank')">
              <div class="mode-icon">‚úçÔ∏è</div>
              <div class="mode-title">ƒêi·ªÅn t·ª´ v√†o ch·ªó tr·ªëng</div>
              <div class="mode-desc">
                Ho√†n thi·ªán c√¢u v·ªõi t·ª´ ƒë√∫ng. Luy·ªán ng·ªØ ph√°p v√† t·ª´ v·ª±ng.
              </div>
              <div class="mode-difficulty">
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot active"></div>
              </div>
            </div>

            <div class="game-mode-card" onclick="startGame('sentence-builder')">
              <div class="mode-icon">üß©</div>
              <div class="mode-title">X·∫øp c√¢u</div>
              <div class="mode-desc">
                S·∫Øp x·∫øp c√°c t·ª´ ƒë·ªÉ t·∫°o th√†nh c√¢u ƒë√∫ng. Luy·ªán c·∫•u tr√∫c c√¢u.
              </div>
              <div class="mode-difficulty">
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot"></div>
              </div>
            </div>

            <div class="game-mode-card" onclick="startGame('matching')">
              <div class="mode-icon">üîó</div>
              <div class="mode-title">Gh√©p c·∫∑p Deutsch-Vi·ªát</div>
              <div class="mode-desc">
                Gh√©p c·ª•m ti·∫øng ƒê·ª©c v·ªõi nghƒ©a ti·∫øng Vi·ªát. Luy·ªán t·ª´ v·ª±ng nhanh.
              </div>
              <div class="mode-difficulty">
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot"></div>
                <div class="difficulty-dot"></div>
              </div>
            </div>

            <div
              class="game-mode-card"
              onclick="startGame('situation-response')"
            >
              <div class="mode-icon">üí¨</div>
              <div class="mode-title">Ph·∫£n ·ª©ng t√¨nh hu·ªëng</div>
              <div class="mode-desc">
                Ch·ªçn c√°ch ph·∫£n ·ª©ng ph√π h·ª£p trong c√°c t√¨nh hu·ªëng th·ª±c t·∫ø Teil 1.
              </div>
              <div class="mode-difficulty">
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot active"></div>
              </div>
            </div>

            <div class="game-mode-card" onclick="startGame('speed-round')">
              <div class="mode-icon">‚ö°</div>
              <div class="mode-title">V√≤ng t·ªëc ƒë·ªô</div>
              <div class="mode-desc">
                60 gi√¢y ƒë·ªÉ tr·∫£ l·ªùi c√†ng nhi·ªÅu c√¢u c√†ng t·ªët. Th·ª≠ th√°ch t·ªëc ƒë·ªô!
              </div>
              <div class="mode-difficulty">
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot active"></div>
                <div class="difficulty-dot active"></div>
              </div>
            </div>
          </div>
        </div>

        <!-- GAME SCREEN -->
        <div class="game-screen" id="gameScreen">
          <div class="progress-bar">
            <div class="progress-fill" id="progressFill">C√¢u 1/10</div>
          </div>

          <div id="gameArea"></div>

          <div class="feedback-box" id="feedbackBox">
            <div class="feedback-title" id="feedbackTitle"></div>
            <div id="feedbackText"></div>
          </div>

          <div class="button-group">
            <button
              class="btn btn-primary"
              id="submitBtn"
              onclick="checkAnswer()"
            >
              Ki·ªÉm tra
            </button>
            <button
              class="btn btn-secondary"
              id="nextBtn"
              onclick="nextQuestion()"
              style="display: none"
            >
              C√¢u ti·∫øp theo ‚Üí
            </button>
            <button class="btn btn-secondary" onclick="returnToMenu()">
              ‚Üê Quay l·∫°i menu
            </button>
          </div>
        </div>

        <!-- RESULTS SCREEN -->
        <div class="results-screen" id="resultsScreen">
          <div class="results-summary">
            <h2 style="color: #667eea; font-size: 2.5em; margin-bottom: 20px">
              üéâ Ho√†n th√†nh!
            </h2>

            <div class="score-circle">
              <div class="score-number" id="finalScore">0</div>
              <div class="score-label">ƒëi·ªÉm</div>
            </div>

            <div class="performance-grid">
              <div class="performance-item">
                <div>‚úÖ ƒê√∫ng</div>
                <div class="performance-value" id="correctCount">0</div>
              </div>
              <div class="performance-item">
                <div>‚ùå Sai</div>
                <div class="performance-value" id="wrongCount">0</div>
              </div>
              <div class="performance-item">
                <div>üìä ƒê·ªô ch√≠nh x√°c</div>
                <div class="performance-value" id="finalAccuracy">0%</div>
              </div>
              <div class="performance-item">
                <div>üî• Streak t·ªët nh·∫•t</div>
                <div class="performance-value" id="bestStreak">0</div>
              </div>
            </div>

            <div id="achievementsList"></div>

            <div
              id="performanceMessage"
              style="font-size: 1.3em; margin: 30px 0; color: #666"
            ></div>

            <div class="button-group">
              <button class="btn btn-success" onclick="restartGame()">
                üîÑ Ch∆°i l·∫°i
              </button>
              <button class="btn btn-primary" onclick="returnToMenu()">
                üè† V·ªÅ menu
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      // Game State
      let gameState = {
        mode: "",
        currentQuestion: 0,
        totalQuestions: 10,
        score: 0,
        correct: 0,
        wrong: 0,
        streak: 0,
        bestStreak: 0,
        level: 1,
        timeLeft: 60,
        timerInterval: null,
        selectedAnswer: null,
      };

      // Question Banks - Game data tr·ª±c ti·∫øp t·ª´ t√†i li·ªáu B1
      const questionBanks = {
        "multiple-choice": [
          {
            question:
              "Partner n√≥i: 'Ich schlage vor, dass wir nach Freiburg fahren.' B·∫°n mu·ªën ƒê·ªíNG √ù. N√™n n√≥i g√¨?",
            options: [
              "Das ist eine gute Idee! Ich bin einverstanden.",
              "Nein, das finde ich nicht so gut.",
              "Ich habe aber eine Sache nicht verstanden.",
              "Entschuldigung, ich m√∂chte dazu auch etwas sagen.",
            ],
            correct: 0,
            explanation:
              "ƒê√¢y l√† c√°ch b√†y t·ªè ƒë·ªìng √Ω ph·ªï bi·∫øn nh·∫•t trong Teil 1. D√πng 'Das ist eine gute Idee' + 'Ich bin einverstanden' ƒë·ªÉ nh·∫•n m·∫°nh s·ª± ƒë·ªìng √Ω.",
          },
          {
            question:
              "Trong Teil 2, b·∫°n mu·ªën gi·ªõi thi·ªáu ch·ªß ƒë·ªÅ thuy·∫øt tr√¨nh. N√™n d√πng c·ª•m n√†o?",
            options: [
              "Was mich betrifft, ich...",
              "Meine Pr√§sentation ist zu dem Thema: ...",
              "In meinem Heimatland...",
              "Hiermit ist meine Pr√§sentation zu Ende.",
            ],
            correct: 1,
            explanation:
              "ƒê√¢y l√† c√°ch chu·∫©n ƒë·ªÉ gi·ªõi thi·ªáu ch·ªß ƒë·ªÅ trong ph·∫ßn m·ªü ƒë·∫ßu Teil 2. Lu√¥n b·∫Øt ƒë·∫ßu v·ªõi 'Meine Pr√§sentation ist zu dem Thema: ...'.",
          },
          {
            question:
              "Partner h·ªèi √Ω ki·∫øn b·∫°n: 'Was h√§ltst du davon?' B·∫°n mu·ªën T·ª™ CH·ªêI l·ªãch s·ª±. Ch·ªçn c√¢u n√†o?",
            options: [
              "Super! Das finde ich auch toll.",
              "Ja, klar! Ich glaube schon.",
              "Nein, das finde ich nicht so gut, weil...",
              "Gut, das kann ich machen.",
            ],
            correct: 2,
            explanation:
              "T·ª´ ch·ªëi l·ªãch s·ª± b·∫±ng c√°ch d√πng 'Nein, das finde ich nicht so gut' v√† LU√îN ƒë∆∞a ra l√Ω do v·ªõi 'weil'.",
          },
          {
            question:
              "Trong Teil 3, b·∫°n mu·ªën ƒë·∫∑t c√¢u h·ªèi cho partner. N√™n d√πng c·ª•m n√†o?",
            options: [
              "Vielen Dank f√ºrs Zuh√∂ren!",
              "Ich h√§tte gern eine Frage f√ºr Sie.",
              "Das ist eine gute Idee!",
              "Mein Vortrag besteht aus folgenden Teilen.",
            ],
            correct: 1,
            explanation:
              "ƒê√¢y l√† c√°ch l·ªãch s·ª± ƒë·ªÉ b·∫Øt ƒë·∫ßu ƒë·∫∑t c√¢u h·ªèi trong Teil 3. D√πng Konjunktiv II 'h√§tte' ƒë·ªÉ th·ªÉ hi·ªán s·ª± l·ªãch s·ª±.",
          },
          {
            question:
              "B·∫°n mu·ªën n√≥i v·ªÅ kinh nghi·ªám c√° nh√¢n trong Teil 2. C·ª•m n√†o ph√π h·ª£p?",
            options: [
              "In meinem Heimatland ist...",
              "Was mich betrifft, ich...",
              "Ein Vorteil ist, dass...",
              "Damit komme ich zum Schluss.",
            ],
            correct: 1,
            explanation:
              "D√πng 'Was mich betrifft' (V·ªÅ ph·∫ßn t√¥i) ƒë·ªÉ b·∫Øt ƒë·∫ßu ph·∫ßn chia s·∫ª kinh nghi·ªám c√° nh√¢n trong Folie 2.",
          },
          {
            question:
              "Partner ƒë·ªÅ xu·∫•t m·ªôt √Ω b·∫°n kh√¥ng th√≠ch. B·∫°n mu·ªën ƒë∆∞a ra ƒê·ªÄ XU·∫§T KH√ÅC. N√™n n√≥i g√¨?",
            options: [
              "Ich bin damit einverstanden.",
              "Das stimmt! Auch ich bin der Meinung.",
              "Aber ich habe geh√∂rt, dass... (ƒë·ªÅ xu·∫•t kh√°c)",
              "Genau, das finde ich auch.",
            ],
            correct: 2,
            explanation:
              "Sau khi t·ª´ ch·ªëi, d√πng 'Aber' ƒë·ªÉ ƒë∆∞a ra ƒë·ªÅ xu·∫•t m·ªõi. ƒê√¢y l√† chi·∫øn thu·∫≠t quan tr·ªçng khi partner ·ªü tr√¨nh ƒë·ªô ngang b·∫±ng.",
          },
          {
            question: "Trong Teil 2, b·∫°n mu·ªën n√™u ∆ØU ƒêI·ªÇM. Ch·ªçn c·ª•m n√†o?",
            options: [
              "Ein Vorteil ist, dass...",
              "Ein Nachteil ist, dass...",
              "Ich habe einmal Folgendes erlebt:",
              "Liebe Zuh√∂rer!",
            ],
            correct: 0,
            explanation:
              "'Ein Vorteil ist, dass...' l√† c√°ch chu·∫©n ƒë·ªÉ n√™u ∆∞u ƒëi·ªÉm trong Folie 4. Sau 'dass' l√† m·ªánh ƒë·ªÅ ph·ª• v·ªõi ƒë·ªông t·ª´ cu·ªëi c√¢u.",
          },
          {
            question: "B·∫°n kh√¥ng nghe r√µ partner n√≥i g√¨. N√™n h·ªèi th·∫ø n√†o?",
            options: [
              "Das ist eine gute Idee!",
              "K√∂nnten Sie das bitte wiederholen?",
              "Ich bin einverstanden.",
              "Vielen Dank f√ºr Ihre Frage.",
            ],
            correct: 1,
            explanation:
              "ƒê√¢y l√† c√°ch l·ªãch s·ª± ƒë·ªÉ nh·ªù partner nh·∫Øc l·∫°i. D√πng Konjunktiv II 'k√∂nnten' + 'bitte' ƒë·ªÉ th·ªÉ hi·ªán s·ª± l·ªãch s·ª±.",
          },
          {
            question: "K·∫øt th√∫c Teil 2, b·∫°n n√™n n√≥i g√¨?",
            options: [
              "Zuerst m√∂chte ich √ºber...",
              "Was mich betrifft...",
              "Hiermit ist meine Pr√§sentation zu Ende. Vielen Dank f√ºrs Zuh√∂ren!",
              "Ich schlage vor, dass...",
            ],
            correct: 2,
            explanation:
              "ƒê√¢y l√† c√°ch k·∫øt th√∫c b√†i thuy·∫øt tr√¨nh chuy√™n nghi·ªáp. Lu√¥n c·∫£m ∆°n ng∆∞·ªùi nghe v√† h·ªèi 'Haben Sie noch Fragen?'",
          },
          {
            question:
              "Partner ph·∫£n h·ªìi t√≠ch c·ª±c v·ªÅ b√†i c·ªßa b·∫°n trong Teil 3. B·∫°n n√™n ƒë√°p l·∫°i th·∫ø n√†o?",
            options: [
              "Nein, das stimmt nicht.",
              "Vielen Dank, es freut mich, dass dir/Ihnen meine Pr√§sentation gefallen hat.",
              "Ich habe eine Frage.",
              "Das ist keine gute Idee.",
            ],
            correct: 1,
            explanation:
              "C·∫£m ∆°n v√† b√†y t·ªè vui m·ª´ng khi nh·∫≠n ph·∫£n h·ªìi t√≠ch c·ª±c. Th·ªÉ hi·ªán s·ª± l·ªãch s·ª± v√† chuy√™n nghi·ªáp.",
          },
        ],
        "fill-blank": [
          {
            question: "Ich _____ vor, dass wir nach M√ºnchen fahren.",
            answer: "schlage",
            hint: "ƒê·ªông t·ª´ 'ƒë·ªÅ xu·∫•t' - chia ng√¥i ich. (vorschlagen - schlage vor)",
            explanation:
              "D√πng 'schlage vor' (ƒë·ªÅ xu·∫•t) trong Teil 1. ƒê√¢y l√† separable verb, 'vor' ƒë·ª©ng cu·ªëi c√¢u trong m·ªánh ƒë·ªÅ ch√≠nh.",
          },
          {
            question: "Das ist eine gute _____!",
            answer: "Idee",
            hint: "Danh t·ª´ n·ªØ (die) nghƒ©a l√† '√Ω t∆∞·ªüng', vi·∫øt hoa ch·ªØ c√°i ƒë·∫ßu",
            explanation:
              "C·ª•m 'Das ist eine gute Idee!' d√πng ƒë·ªÉ ƒë·ªìng √Ω. Danh t·ª´ trong ti·∫øng ƒê·ª©c lu√¥n vi·∫øt hoa.",
          },
          {
            question:
              "Meine Pr√§sentation ist zu dem _____: 'Lernen im Internet'.",
            answer: "Thema",
            hint: "Danh t·ª´ trung t√≠nh (das) nghƒ©a l√† 'ch·ªß ƒë·ªÅ', vi·∫øt hoa",
            explanation:
              "D√πng 'Thema' ƒë·ªÉ gi·ªõi thi·ªáu ch·ªß ƒë·ªÅ thuy·∫øt tr√¨nh trong Teil 2. 'zu dem Thema' = 'v·ªÅ ch·ªß ƒë·ªÅ'.",
          },
          {
            question: "Was mich _____, ich lerne oft online.",
            answer: "betrifft",
            hint: "ƒê·ªông t·ª´ 'li√™n quan ƒë·∫øn' - chia ng√¥i es (was)",
            explanation:
              "'Was mich betrifft' = 'V·ªÅ ph·∫ßn t√¥i' - c·ª•m c·ªë ƒë·ªãnh ƒë·ªÉ m·ªü ƒë·∫ßu ph·∫ßn chia s·∫ª kinh nghi·ªám trong Teil 2.",
          },
          {
            question: "Ein _____ ist, dass Online-Lernen flexibel ist.",
            answer: "Vorteil",
            hint: "Danh t·ª´ nam (der) nghƒ©a l√† '∆∞u ƒëi·ªÉm', vi·∫øt hoa",
            explanation:
              "D√πng 'Vorteil' ƒë·ªÉ n√™u ∆∞u ƒëi·ªÉm trong Teil 2, Folie 4. T∆∞∆°ng t·ª± c√≥ 'Nachteil' (nh∆∞·ª£c ƒëi·ªÉm).",
          },
          {
            question: "Ich bin damit _____.",
            answer: "einverstanden",
            hint: "T√≠nh t·ª´ nghƒ©a l√† 'ƒë·ªìng √Ω', kh√¥ng vi·∫øt hoa",
            explanation:
              "'Ich bin damit einverstanden' = 'T√¥i ƒë·ªìng √Ω v·ªõi ƒëi·ªÅu ƒë√≥'. C·∫•u tr√∫c quan tr·ªçng trong Teil 1.",
          },
          {
            question: "In meinem _____ ist die Situation anders.",
            answer: "Heimatland",
            hint: "Danh t·ª´ trung t√≠nh (das) nghƒ©a l√† 'qu√™ h∆∞∆°ng/t·ªï qu·ªëc', vi·∫øt hoa",
            explanation:
              "D√πng 'Heimatland' khi n√≥i v·ªÅ t√¨nh h√¨nh ·ªü qu√™ nh√† trong Teil 2, Folie 3.",
          },
          {
            question: "Ich _____ gern eine Frage f√ºr Sie.",
            answer: "h√§tte",
            hint: "ƒê·ªông t·ª´ haben ·ªü d·∫°ng Konjunktiv II ng√¥i ich",
            explanation:
              "'Ich h√§tte gern...' l√† c√°ch l·ªãch s·ª± ƒë·ªÉ b√†y t·ªè mong mu·ªën. D√πng trong Teil 3 khi ƒë·∫∑t c√¢u h·ªèi.",
          },
          {
            question: "Damit komme ich zum _____ meiner Pr√§sentation.",
            answer: "Schluss",
            hint: "Danh t·ª´ nam (der) nghƒ©a l√† 'k·∫øt th√∫c', vi·∫øt hoa",
            explanation:
              "D√πng 'zum Schluss' ƒë·ªÉ k·∫øt th√∫c b√†i thuy·∫øt tr√¨nh trong Teil 2. 'Schluss' vi·∫øt hoa v√¨ l√† danh t·ª´.",
          },
          {
            question: "K√∂nnten Sie das bitte _____?",
            answer: "wiederholen",
            hint: "ƒê·ªông t·ª´ nguy√™n th·ªÉ nghƒ©a l√† 'l·∫∑p l·∫°i', kh√¥ng t√°ch ti·ªÅn t·ªë",
            explanation:
              "Nh·ªù partner nh·∫Øc l·∫°i khi kh√¥ng nghe r√µ. 'wiederholen' kh√¥ng ph·∫£i separable verb n√™n gi·ªØ nguy√™n.",
          },
        ],
        "sentence-builder": [
          {
            question: "S·∫Øp x·∫øp c√°c t·ª´ th√†nh c√¢u ƒë√∫ng (ƒê·ªÅ xu·∫•t):",
            words: [
              "Ich",
              "schlage",
              "vor,",
              "dass",
              "wir",
              "nach",
              "Berlin",
              "fahren.",
            ],
            correct: "Ich schlage vor, dass wir nach Berlin fahren.",
            explanation:
              "C·∫•u tr√∫c ƒë·ªÅ xu·∫•t chu·∫©n trong Teil 1: 'Ich schlage vor, dass...' + m·ªánh ƒë·ªÅ ph·ª• (ƒë·ªông t·ª´ cu·ªëi).",
          },
          {
            question: "S·∫Øp x·∫øp th√†nh c√¢u ƒë√∫ng (Gi·ªõi thi·ªáu ch·ªß ƒë·ªÅ):",
            words: [
              "Meine",
              "Pr√§sentation",
              "ist",
              "zu",
              "dem",
              "Thema:",
              "Sport.",
            ],
            correct: "Meine Pr√§sentation ist zu dem Thema: Sport.",
            explanation:
              "Gi·ªõi thi·ªáu ch·ªß ƒë·ªÅ trong Teil 2. 'zu dem Thema' c√≥ th·ªÉ vi·∫øt t·∫Øt th√†nh 'zum Thema'.",
          },
          {
            question: "S·∫Øp x·∫øp th√†nh c√¢u ƒë√∫ng (ƒê·ªìng √Ω):",
            words: ["Das", "ist", "eine", "gute", "Idee!"],
            correct: "Das ist eine gute Idee!",
            explanation:
              "B√†y t·ªè ƒë·ªìng √Ω ƒë∆°n gi·∫£n v√† hi·ªáu qu·∫£ nh·∫•t. C√≥ th·ªÉ th√™m 'Ich bin einverstanden' ƒë·ªÉ nh·∫•n m·∫°nh.",
          },
          {
            question: "S·∫Øp x·∫øp th√†nh c√¢u ƒë√∫ng (Kinh nghi·ªám):",
            words: [
              "Was",
              "mich",
              "betrifft,",
              "ich",
              "lerne",
              "gern",
              "Deutsch.",
            ],
            correct: "Was mich betrifft, ich lerne gern Deutsch.",
            explanation:
              "Chia s·∫ª kinh nghi·ªám c√° nh√¢n trong Teil 2, Folie 2. Sau d·∫•u ph·∫©y b·∫Øt ƒë·∫ßu m·ªánh ƒë·ªÅ m·ªõi.",
          },
          {
            question: "S·∫Øp x·∫øp th√†nh c√¢u ƒë√∫ng (∆Øu ƒëi·ªÉm):",
            words: [
              "Ein",
              "Vorteil",
              "ist,",
              "dass",
              "man",
              "flexibel",
              "lernen",
              "kann.",
            ],
            correct: "Ein Vorteil ist, dass man flexibel lernen kann.",
            explanation:
              "N√™u ∆∞u ƒëi·ªÉm v·ªõi m·ªánh ƒë·ªÅ 'dass' - ƒë·ªông t·ª´ chia (kann) + ƒë·ªông t·ª´ nguy√™n th·ªÉ (lernen) ·ªü cu·ªëi.",
          },
          {
            question: "S·∫Øp x·∫øp th√†nh c√¢u ƒë√∫ng (ƒê·∫∑t c√¢u h·ªèi):",
            words: ["Ich", "h√§tte", "gern", "eine", "Frage", "f√ºr", "Sie."],
            correct: "Ich h√§tte gern eine Frage f√ºr Sie.",
            explanation:
              "ƒê·∫∑t c√¢u h·ªèi l·ªãch s·ª± trong Teil 3. Konjunktiv II 'h√§tte' th·ªÉ hi·ªán s·ª± l·ªãch s·ª±.",
          },
          {
            question: "S·∫Øp x·∫øp th√†nh c√¢u ƒë√∫ng (T√¨nh h√¨nh qu√™ nh√†):",
            words: [
              "In",
              "meinem",
              "Heimatland",
              "ist",
              "die",
              "Situation",
              "anders.",
            ],
            correct: "In meinem Heimatland ist die Situation anders.",
            explanation:
              "M√¥ t·∫£ t√¨nh h√¨nh ·ªü qu√™ nh√† trong Teil 2, Folie 3. C√≥ th·ªÉ thay 'anders' b·∫±ng '√§hnlich/gleich'.",
          },
          {
            question: "S·∫Øp x·∫øp th√†nh c√¢u ƒë√∫ng (T·ª´ ch·ªëi):",
            words: ["Nein,", "das", "finde", "ich", "nicht", "so", "gut."],
            correct: "Nein, das finde ich nicht so gut.",
            explanation:
              "T·ª´ ch·ªëi l·ªãch s·ª± m·ªôt ƒë·ªÅ xu·∫•t. LU√îN ƒë∆∞a ra l√Ω do sau ƒë√≥ v·ªõi 'weil...'.",
          },
          {
            question: "S·∫Øp x·∫øp th√†nh c√¢u ƒë√∫ng (C·∫£m ∆°n):",
            words: ["Vielen", "Dank", "f√ºrs", "Zuh√∂ren!"],
            correct: "Vielen Dank f√ºrs Zuh√∂ren!",
            explanation:
              "C·∫£m ∆°n ng∆∞·ªùi nghe khi k·∫øt th√∫c Teil 2. 'f√ºrs' = 'f√ºr das' (d√†nh cho vi·ªác).",
          },
          {
            question: "S·∫Øp x·∫øp th√†nh c√¢u ƒë√∫ng (ƒê·ªìng √Ω m·∫°nh):",
            words: ["Ich", "bin", "damit", "einverstanden."],
            correct: "Ich bin damit einverstanden.",
            explanation:
              "Th·ªÉ hi·ªán s·ª± ƒë·ªìng √Ω r√µ r√†ng. 'damit' = 'v·ªõi ƒëi·ªÅu ƒë√≥' (ch·ªâ v·ªÅ ƒë·ªÅ xu·∫•t v·ª´a nghe).",
          },
        ],
        matching: [
          {
            pairs: [
              { de: "Ich schlage vor, dass...", vi: "T√¥i ƒë·ªÅ xu·∫•t r·∫±ng..." },
              { de: "Das ist eine gute Idee!", vi: "ƒê√≥ l√† m·ªôt √Ω t∆∞·ªüng hay!" },
              { de: "Was h√§ltst du davon?", vi: "B·∫°n nghƒ© sao v·ªÅ ƒëi·ªÅu ƒë√≥?" },
              { de: "Ich bin einverstanden.", vi: "T√¥i ƒë·ªìng √Ω." },
              { de: "Was mich betrifft...", vi: "V·ªÅ ph·∫ßn t√¥i..." },
            ],
          },
          {
            pairs: [
              { de: "Ein Vorteil ist, dass...", vi: "M·ªôt ∆∞u ƒëi·ªÉm l√†..." },
              { de: "Ein Nachteil ist, dass...", vi: "M·ªôt nh∆∞·ª£c ƒëi·ªÉm l√†..." },
              { de: "In meinem Heimatland...", vi: "·ªû qu√™ h∆∞∆°ng t√¥i..." },
              { de: "Meiner Meinung nach...", vi: "Theo √Ω ki·∫øn c·ªßa t√¥i..." },
              {
                de: "Zum Schluss m√∂chte ich sagen...",
                vi: "Cu·ªëi c√πng t√¥i mu·ªën n√≥i...",
              },
            ],
          },
          {
            pairs: [
              { de: "Ich h√§tte gern eine Frage.", vi: "T√¥i mu·ªën h·ªèi m·ªôt c√¢u." },
              {
                de: "Vielen Dank f√ºr Ihre Frage.",
                vi: "C·∫£m ∆°n c√¢u h·ªèi c·ªßa b·∫°n.",
              },
              { de: "Das ist interessant.", vi: "ƒêi·ªÅu ƒë√≥ th·∫≠t th√∫ v·ªã." },
              {
                de: "K√∂nnten Sie das wiederholen?",
                vi: "B·∫°n c√≥ th·ªÉ nh·∫Øc l·∫°i ƒë∆∞·ª£c kh√¥ng?",
              },
              { de: "Ich verstehe nicht ganz.", vi: "T√¥i kh√¥ng hi·ªÉu h·∫≥n." },
            ],
          },
        ],
        "situation-response": [
          {
            situation:
              "Partner n√≥i: 'Ich schlage vor, dass wir mit dem Zug fahren, weil das umweltfreundlich ist. Was meinst du?'",
            scenario: "B·∫°n ƒë·ªìng √Ω v√† mu·ªën b·ªï sung th√™m l√Ω do",
            options: [
              "Das ist eine gute Idee! Au√üerdem ist der Zug auch bequemer als das Auto. Wann fahren wir?",
              "Nein, das finde ich nicht so gut. Ich w√ºrde lieber mit dem Auto fahren.",
              "Ich wei√ü nicht. Vielleicht k√∂nnen wir sp√§ter entscheiden.",
              "Das verstehe ich nicht. Kannst du das wiederholen?",
            ],
            correct: 0,
            explanation:
              "ƒê·ªìng √Ω + b·ªï sung l√Ω do v·ªõi 'Au√üerdem' (H∆°n n·ªØa) + h·ªèi ti·∫øp v·ªÅ chi ti·∫øt kh√°c. ƒê√¢y l√† c√°ch th·ªÉ hi·ªán s·ª± h·ª£p t√°c t·ªët.",
          },
          {
            situation:
              "Partner n√≥i: 'Wir k√∂nnten im Hotel √ºbernachten. Das ist am bequemsten.'",
            scenario:
              "B·∫°n kh√¥ng ƒë·ªìng √Ω v√¨ kh√°ch s·∫°n ƒë·∫Øt, mu·ªën ƒë·ªÅ xu·∫•t ·ªü nh√† tr·∫ª",
            options: [
              "Ja, das stimmt! Hotels sind immer die beste Option.",
              "Nein, das finde ich nicht so gut, weil Hotels zu teuer sind. Ich schlage vor, dass wir in der Jugendherberge √ºbernachten. Das ist billiger. Was h√§ltst du davon?",
              "Ich bin einverstanden. Das machen wir!",
              "Super! Dann buche ich gleich ein Hotelzimmer.",
            ],
            correct: 1,
            explanation:
              "T·ª´ ch·ªëi l·ªãch s·ª± + l√Ω do + ƒë·ªÅ xu·∫•t m·ªõi + h·ªèi √Ω ki·∫øn. ƒê√¢y l√† c·∫•u tr√∫c 5 c√¢u khi partner ngang b·∫±ng.",
          },
          {
            situation:
              "Gi√°m kh·∫£o h·ªèi: 'Warum haben Sie dieses Thema gew√§hlt?' (T·∫°i sao b·∫°n ch·ªçn ch·ªß ƒë·ªÅ n√†y?)",
            scenario: "Teil 3 - Tr·∫£ l·ªùi c√¢u h·ªèi v·ªÅ b√†i thuy·∫øt tr√¨nh",
            options: [
              "Ich wei√ü nicht. Das war nur ein Zufall.",
              "Weil ich das Thema sehr interessant finde und pers√∂nliche Erfahrung damit habe. Au√üerdem ist dieses Thema in meinem Heimatland sehr aktuell.",
              "Das m√∂chte ich nicht sagen.",
              "K√∂nnen Sie die Frage wiederholen?",
            ],
            correct: 1,
            explanation:
              "ƒê∆∞a ra l√Ω do c·ª• th·ªÉ v·ªõi 'weil' v√† li√™n h·ªá v·ªõi kinh nghi·ªám b·∫£n th√¢n. Th√™m 'Au√üerdem' ƒë·ªÉ b·ªï sung l√Ω do th·ª© hai.",
          },
          {
            situation:
              "Partner h·ªèi: 'Was k√∂nnen wir dort machen?' (Ch√∫ng ta c√≥ th·ªÉ l√†m g√¨ ·ªü ƒë√≥?)",
            scenario: "Teil 1 - N√≥i v·ªÅ ho·∫°t ƒë·ªông",
            options: [
              "Ich wei√ü es nicht genau.",
              "Wir k√∂nnten wandern gehen und die Natur genie√üen. Au√üerdem gibt es dort auch interessante Museen. Was meinst du?",
              "Das ist mir egal. Du kannst entscheiden.",
              "Vielleicht nichts Besonderes.",
            ],
            correct: 1,
            explanation:
              "ƒê∆∞a ra nhi·ªÅu ƒë·ªÅ xu·∫•t ho·∫°t ƒë·ªông v·ªõi 'Wir k√∂nnten...' + 'Au√üerdem' (H∆°n n·ªØa) + h·ªèi √Ω ki·∫øn partner.",
          },
          {
            situation:
              "Partner kh√¥ng ƒë·ªìng √Ω: 'Nein, ich finde das nicht so gut.'",
            scenario: "Ph·∫£n ·ª©ng khi partner t·ª´ ch·ªëi ƒë·ªÅ xu·∫•t c·ªßa b·∫°n",
            options: [
              "Warum nicht? Du musst mir zustimmen!",
              "Okay, das ist kein Problem. Was w√§re denn dein Vorschlag?",
              "Das ist dumm. Meine Idee ist besser.",
              "Dann machen wir gar nichts!",
            ],
            correct: 1,
            explanation:
              "Ch·∫•p nh·∫≠n √Ω ki·∫øn v·ªõi 'Okay, das ist kein Problem' + h·ªèi ƒë·ªÅ xu·∫•t c·ªßa partner (th·ªÉ hi·ªán s·ª± h·ª£p t√°c v√† linh ho·∫°t).",
          },
          {
            situation: "B·∫°n v·ª´a thuy·∫øt tr√¨nh xong Teil 2",
            scenario: "K·∫øt th√∫c b√†i thuy·∫øt tr√¨nh",
            options: [
              "Ich gehe jetzt. Auf Wiedersehen!",
              "Hiermit ist meine Pr√§sentation zu Ende. Vielen Dank f√ºrs Zuh√∂ren! Haben Sie noch Fragen?",
              "Das war's. Fertig.",
              "Ich habe nichts mehr zu sagen.",
            ],
            correct: 1,
            explanation:
              "K·∫øt th√∫c chuy√™n nghi·ªáp: tuy√™n b·ªë k·∫øt th√∫c + c·∫£m ∆°n + m·ªü ra cho c√¢u h·ªèi. Ba y·∫øu t·ªë n√†y PH·∫¢I c√≥.",
          },
        ],
        "speed-round": [
          { q: "ƒê·ªÅ xu·∫•t: Ich _____ vor, dass...", a: "schlage" },
          { q: "ƒê·ªìng √Ω: Das ist eine gute _____!", a: "Idee" },
          { q: "H·ªèi √Ω ki·∫øn: Was _____ du davon?", a: "h√§ltst" },
          {
            q: "Gi·ªõi thi·ªáu ch·ªß ƒë·ªÅ: Meine Pr√§sentation ist zu dem _____",
            a: "Thema",
          },
          { q: "∆Øu ƒëi·ªÉm: Ein _____ ist, dass...", a: "Vorteil" },
          { q: "Nh∆∞·ª£c ƒëi·ªÉm: Ein _____ ist, dass...", a: "Nachteil" },
          { q: "Qu√™ h∆∞∆°ng: In meinem _____", a: "Heimatland" },
          { q: "T·ª´ ch·ªëi: Nein, das finde ich nicht so _____", a: "gut" },
          { q: "√ù ki·∫øn: Meiner _____ nach...", a: "Meinung" },
          { q: "Kinh nghi·ªám: Was mich _____", a: "betrifft" },
          { q: "C√¢u h·ªèi: Ich _____ gern eine Frage", a: "h√§tte" },
          { q: "K·∫øt th√∫c: Vielen Dank f√ºrs _____!", a: "Zuh√∂ren" },
          { q: "ƒê·ªìng √Ω: Ich bin _____", a: "einverstanden" },
          { q: "L·∫∑p l·∫°i: K√∂nnten Sie das _____?", a: "wiederholen" },
          { q: "K·∫øt lu·∫≠n: Zum _____ m√∂chte ich sagen...", a: "Schluss" },
        ],
      };

      // Start Game
      function startGame(mode) {
        gameState.mode = mode;
        gameState.currentQuestion = 0;
        gameState.score = 0;
        gameState.correct = 0;
        gameState.wrong = 0;
        gameState.streak = 0;
        gameState.selectedAnswer = null;

        document.getElementById("menuScreen").classList.remove("active");
        document.getElementById("gameScreen").classList.add("active");

        if (mode === "speed-round") {
          gameState.timeLeft = 60;
          startTimer();
        }

        loadQuestion();
      }

      // Load Question
      function loadQuestion() {
        const mode = gameState.mode;
        const questionIndex = gameState.currentQuestion;
        const gameArea = document.getElementById("gameArea");
        const feedbackBox = document.getElementById("feedbackBox");

        feedbackBox.classList.remove("show");
        document.getElementById("submitBtn").style.display = "block";
        document.getElementById("nextBtn").style.display = "none";
        gameState.selectedAnswer = null;

        // Update progress
        const progress = ((questionIndex + 1) / gameState.totalQuestions) * 100;
        document.getElementById("progressFill").style.width = progress + "%";
        document.getElementById("progressFill").textContent = `C√¢u ${
          questionIndex + 1
        }/${gameState.totalQuestions}`;

        let html = "";

        if (mode === "multiple-choice") {
          const q = questionBanks[mode][questionIndex];
          html = `
                    <div class="question-card">
                        <div class="question-text">${q.question}</div>
                        <div class="options-grid">
                            ${q.options
                              .map(
                                (opt, i) => `
                                <div class="option-btn" onclick="selectOption(${i})">
                                    ${opt}
                                </div>
                            `
                              )
                              .join("")}
                        </div>
                    </div>
                `;
        } else if (mode === "fill-blank") {
          const q = questionBanks[mode][questionIndex];
          html = `
                    <div class="question-card">
                        <div class="question-text">${q.question}</div>
                        <div class="hint-box">üí° G·ª£i √Ω: ${q.hint}</div>
                        <input type="text" class="fill-blank-input" id="answerInput" 
                               placeholder="Nh·∫≠p c√¢u tr·∫£ l·ªùi..." 
                               onkeypress="if(event.key==='Enter') checkAnswer()">
                    </div>
                `;
        } else if (mode === "sentence-builder") {
          const q = questionBanks[mode][questionIndex];
          const shuffled = [...q.words].sort(() => Math.random() - 0.5);
          html = `
                    <div class="question-card">
                        <div class="question-text">${q.question}</div>
                        <div class="sentence-builder" id="sentenceBuilder"></div>
                        <div class="word-bank">
                            ${shuffled
                              .map(
                                (word) => `
                                <div class="draggable-word" onclick="addToSentence(this)">${word}</div>
                            `
                              )
                              .join("")}
                        </div>
                    </div>
                `;
        } else if (mode === "matching") {
          const q =
            questionBanks[mode][
              Math.floor(Math.random() * questionBanks[mode].length)
            ];
          gameState.matchingPairs = q.pairs;
          const shuffledLeft = [...q.pairs].sort(() => Math.random() - 0.5);
          const shuffledRight = [...q.pairs].sort(() => Math.random() - 0.5);

          html = `
                    <div class="question-card">
                        <div class="question-text">Gh√©p c·∫∑p Ti·∫øng ƒê·ª©c - Ti·∫øng Vi·ªát</div>
                        <div class="matching-game">
                            <div class="matching-column" id="leftColumn">
                                ${shuffledLeft
                                  .map(
                                    (pair, i) => `
                                    <div class="match-item" data-text="${pair.de}" onclick="selectMatch(this, 'left')">
                                        ${pair.de}
                                    </div>
                                `
                                  )
                                  .join("")}
                            </div>
                            <div class="matching-column" id="rightColumn">
                                ${shuffledRight
                                  .map(
                                    (pair, i) => `
                                    <div class="match-item" data-text="${pair.vi}" onclick="selectMatch(this, 'right')">
                                        ${pair.vi}
                                    </div>
                                `
                                  )
                                  .join("")}
                            </div>
                        </div>
                    </div>
                `;
          gameState.matchingState = {
            selectedLeft: null,
            selectedRight: null,
            matches: 0,
          };
        } else if (mode === "situation-response") {
          const q = questionBanks[mode][questionIndex];
          html = `
                    <div class="question-card">
                        <div class="situation">
                            <strong>üé¨ T√¨nh hu·ªëng:</strong><br>
                            ${q.situation}
                        </div>
                        <div class="hint-box">
                            <strong>üìù Nhi·ªám v·ª•:</strong> ${q.scenario}
                        </div>
                        <div class="options-grid">
                            ${q.options
                              .map(
                                (opt, i) => `
                                <div class="option-btn" onclick="selectOption(${i})">
                                    ${opt}
                                </div>
                            `
                              )
                              .join("")}
                        </div>
                    </div>
                `;
        } else if (mode === "speed-round") {
          const q =
            questionBanks[mode][questionIndex % questionBanks[mode].length];
          html = `
                    <div class="question-card">
                        <div class="timer">${gameState.timeLeft}s</div>
                        <div class="question-text">${q.q}</div>
                        <input type="text" class="fill-blank-input" id="answerInput" 
                               placeholder="Tr·∫£ l·ªùi nhanh!" 
                               onkeypress="if(event.key==='Enter') checkAnswer()"
                               autofocus>
                    </div>
                `;
        }

        gameArea.innerHTML = html;

        if (mode === "fill-blank" || mode === "speed-round") {
          setTimeout(
            () => document.getElementById("answerInput")?.focus(),
            100
          );
        }
      }

      // Select Option
      function selectOption(index) {
        gameState.selectedAnswer = index;
        document.querySelectorAll(".option-btn").forEach((btn, i) => {
          btn.style.background =
            i === index
              ? "linear-gradient(135deg, #667eea 0%, #764ba2 100%)"
              : "white";
          btn.style.color = i === index ? "white" : "#333";
        });
      }

      // Add word to sentence (for sentence builder)
      function addToSentence(wordEl) {
        if (wordEl.classList.contains("used")) return;

        const builder = document.getElementById("sentenceBuilder");
        const clone = wordEl.cloneNode(true);

        clone.onclick = function () {
          wordEl.classList.remove("used");
          this.remove();
        };

        builder.appendChild(clone);
        wordEl.classList.add("used");
      }

      // Matching game functions
      function selectMatch(element, side) {
        if (element.classList.contains("matched")) return;

        const column = side === "left" ? "leftColumn" : "rightColumn";
        document.querySelectorAll(`#${column} .match-item`).forEach((item) => {
          if (!item.classList.contains("matched")) {
            item.classList.remove("selected");
          }
        });

        element.classList.add("selected");

        if (side === "left") {
          gameState.matchingState.selectedLeft = element.dataset.text;
        } else {
          gameState.matchingState.selectedRight = element.dataset.text;
        }

        if (
          gameState.matchingState.selectedLeft &&
          gameState.matchingState.selectedRight
        ) {
          checkMatch();
        }
      }

      function checkMatch() {
        const leftText = gameState.matchingState.selectedLeft;
        const rightText = gameState.matchingState.selectedRight;

        const pair = gameState.matchingPairs.find(
          (p) => p.de === leftText && p.vi === rightText
        );

        const leftEl = document.querySelector(
          `#leftColumn .match-item[data-text="${leftText}"]`
        );
        const rightEl = document.querySelector(
          `#rightColumn .match-item[data-text="${rightText}"]`
        );

        if (pair) {
          leftEl.classList.add("matched");
          rightEl.classList.add("matched");
          leftEl.classList.remove("selected");
          rightEl.classList.remove("selected");

          gameState.matchingState.matches++;
          gameState.score += 10;
          gameState.correct++;
          gameState.streak++;
          updateStats();

          if (gameState.matchingState.matches === 5) {
            setTimeout(() => {
              showFeedback(true, "matching", 0);
              document.getElementById("submitBtn").style.display = "none";
              document.getElementById("nextBtn").style.display = "block";
            }, 500);
          }
        } else {
          leftEl.style.animation = "wrongShake 0.5s";
          rightEl.style.animation = "wrongShake 0.5s";

          setTimeout(() => {
            leftEl.classList.remove("selected");
            rightEl.classList.remove("selected");
            leftEl.style.animation = "";
            rightEl.style.animation = "";
          }, 500);

          gameState.wrong++;
          gameState.streak = 0;
          updateStats();
        }

        gameState.matchingState.selectedLeft = null;
        gameState.matchingState.selectedRight = null;
      }

      // Check Answer
      function checkAnswer() {
        const mode = gameState.mode;
        const questionIndex = gameState.currentQuestion;
        let isCorrect = false;
        let userAnswer = "";

        if (mode === "multiple-choice" || mode === "situation-response") {
          const q = questionBanks[mode][questionIndex];
          isCorrect = gameState.selectedAnswer === q.correct;

          document.querySelectorAll(".option-btn").forEach((btn, i) => {
            if (i === q.correct) {
              btn.classList.add("correct");
            } else if (i === gameState.selectedAnswer && !isCorrect) {
              btn.classList.add("wrong");
            }
            btn.style.pointerEvents = "none";
          });
        } else if (mode === "fill-blank") {
          const q = questionBanks[mode][questionIndex];
          userAnswer = document
            .getElementById("answerInput")
            .value.trim()
            .toLowerCase();
          isCorrect = userAnswer === q.answer.toLowerCase();

          document.getElementById("answerInput").style.borderColor = isCorrect
            ? "#28a745"
            : "#dc3545";
          document.getElementById("answerInput").disabled = true;
        } else if (mode === "speed-round") {
          const q =
            questionBanks[mode][questionIndex % questionBanks[mode].length];
          userAnswer = document
            .getElementById("answerInput")
            .value.trim()
            .toLowerCase();
          isCorrect = userAnswer === q.a.toLowerCase();

          if (isCorrect) {
            gameState.currentQuestion++;
            gameState.score += 10;
            gameState.correct++;
            gameState.streak++;

            if (gameState.streak > gameState.bestStreak) {
              gameState.bestStreak = gameState.streak;
            }

            updateStats();

            if (gameState.timeLeft > 0) {
              loadQuestion();
            } else {
              showResults();
            }
            return;
          } else {
            gameState.wrong++;
            gameState.streak = 0;
            document.getElementById("answerInput").value = "";
            document.getElementById("answerInput").style.borderColor =
              "#dc3545";
            setTimeout(() => {
              document.getElementById("answerInput").style.borderColor =
                "#e0e0e0";
              document.getElementById("answerInput").focus();
            }, 500);
            updateStats();
            return;
          }
        } else if (mode === "sentence-builder") {
          const q = questionBanks[mode][questionIndex];
          const builder = document.getElementById("sentenceBuilder");
          userAnswer = Array.from(builder.children)
            .map((el) => el.textContent)
            .join(" ");
          isCorrect = userAnswer === q.correct;
        } else if (mode === "matching") {
          return; // Matching is handled separately
        }

        // Update score and streak
        if (isCorrect) {
          gameState.score += 10 + gameState.streak * 2;
          gameState.correct++;
          gameState.streak++;

          if (gameState.streak > gameState.bestStreak) {
            gameState.bestStreak = gameState.streak;
          }

          if (gameState.streak >= 3) {
            showCombo(gameState.streak);
          }
        } else {
          gameState.wrong++;
          gameState.streak = 0;
        }

        updateStats();
        showFeedback(isCorrect, mode, questionIndex);

        document.getElementById("submitBtn").style.display = "none";
        document.getElementById("nextBtn").style.display = "block";
      }

      // Show Feedback
      function showFeedback(isCorrect, mode, questionIndex) {
        const feedbackBox = document.getElementById("feedbackBox");
        const feedbackTitle = document.getElementById("feedbackTitle");
        const feedbackText = document.getElementById("feedbackText");

        let explanation = "";

        if (mode === "matching") {
          explanation = "B·∫°n ƒë√£ gh√©p ƒë√∫ng t·∫•t c·∫£ c√°c c·∫∑p!";
        } else if (questionBanks[mode] && questionBanks[mode][questionIndex]) {
          explanation = questionBanks[mode][questionIndex].explanation || "";
        }

        if (isCorrect) {
          feedbackBox.className = "feedback-box correct show";
          feedbackTitle.textContent = "‚úÖ Ch√≠nh x√°c!";
          feedbackText.textContent = explanation;
        } else {
          feedbackBox.className = "feedback-box wrong show";
          feedbackTitle.textContent = "‚ùå Ch∆∞a ƒë√∫ng";
          feedbackText.textContent = explanation;
        }
      }

      // Next Question
      function nextQuestion() {
        gameState.currentQuestion++;

        if (gameState.currentQuestion >= gameState.totalQuestions) {
          showResults();
        } else {
          loadQuestion();
        }
      }

      // Show Results
      function showResults() {
        if (gameState.timerInterval) {
          clearInterval(gameState.timerInterval);
        }

        document.getElementById("gameScreen").classList.remove("active");
        document.getElementById("resultsScreen").classList.add("active");

        const total = gameState.correct + gameState.wrong;
        const accuracy =
          total > 0 ? Math.round((gameState.correct / total) * 100) : 0;

        document.getElementById("finalScore").textContent = gameState.score;
        document.getElementById("correctCount").textContent = gameState.correct;
        document.getElementById("wrongCount").textContent = gameState.wrong;
        document.getElementById("finalAccuracy").textContent = accuracy + "%";
        document.getElementById("bestStreak").textContent =
          gameState.bestStreak;

        // Performance message
        let message = "";
        let achievements = "";

        if (accuracy >= 90) {
          message = "üåü Xu·∫•t s·∫Øc! B·∫°n ƒë√£ th√†nh th·∫°o Redemittel!";
          achievements +=
            '<span class="achievement-badge">üèÜ B·∫≠c Th·∫ßy B1</span>';
        } else if (accuracy >= 75) {
          message = "üëç R·∫•t t·ªët! Ti·∫øp t·ª•c luy·ªán t·∫≠p!";
          achievements +=
            '<span class="achievement-badge">‚≠ê H·ªçc Vi√™n Gi·ªèi</span>';
        } else if (accuracy >= 60) {
          message = "üí™ Kh√° t·ªët! H√£y √¥n l·∫°i m·ªôt s·ªë ph·∫ßn.";
          achievements +=
            '<span class="achievement-badge">üìö H·ªçc Vi√™n ChƒÉm Ch·ªâ</span>';
        } else {
          message = "üìñ C·∫ßn c·ªë g·∫Øng th√™m! ƒê·ª´ng b·ªè cu·ªôc!";
        }

        if (gameState.bestStreak >= 5) {
          achievements +=
            '<span class="achievement-badge">üî• Streak Master</span>';
        }

        if (gameState.score >= 150) {
          achievements += '<span class="achievement-badge">üíØ ƒêi·ªÉm Cao</span>';
        }

        document.getElementById("performanceMessage").textContent = message;
        document.getElementById("achievementsList").innerHTML = achievements;
      }

      // Update Stats
      function updateStats() {
        const total = gameState.correct + gameState.wrong;
        const accuracy =
          total > 0 ? Math.round((gameState.correct / total) * 100) : 0;

        document.getElementById("totalScore").textContent = gameState.score;
        document.getElementById("accuracy").textContent = accuracy + "%";
        document.getElementById("streak").textContent = gameState.streak;

        // Calculate level based on score
        gameState.level = Math.floor(gameState.score / 50) + 1;
        document.getElementById("level").textContent = gameState.level;
      }

      // Show Combo
      function showCombo(streak) {
        const comboCounter = document.getElementById("comboCounter");
        comboCounter.textContent = `üî• ${streak}x COMBO!`;
        comboCounter.classList.add("show");

        setTimeout(() => {
          comboCounter.classList.remove("show");
        }, 1000);
      }

      // Timer for Speed Round
      function startTimer() {
        gameState.timerInterval = setInterval(() => {
          gameState.timeLeft--;

          const timerEl = document.querySelector(".timer");
          if (timerEl) {
            timerEl.textContent = gameState.timeLeft + "s";

            if (gameState.timeLeft <= 10) {
              timerEl.style.background =
                "linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%)";
            }
          }

          if (gameState.timeLeft <= 0) {
            clearInterval(gameState.timerInterval);
            showResults();
          }
        }, 1000);
      }

      // Return to Menu
      function returnToMenu() {
        if (gameState.timerInterval) {
          clearInterval(gameState.timerInterval);
        }

        document
          .querySelectorAll(".menu-screen, .game-screen, .results-screen")
          .forEach((screen) => {
            screen.classList.remove("active");
          });

        document.getElementById("menuScreen").classList.add("active");
      }

      // Restart Game
      function restartGame() {
        startGame(gameState.mode);
      }

      // Initialize
      updateStats();
    </script>
  </body>
</html>
