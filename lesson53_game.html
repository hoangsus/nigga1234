<!DOCTYPE html>
<html lang="de">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>B1 Sprechen - Luy·ªán T·∫≠p Game</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
        color: #333;
      }

      .container {
        max-width: 1000px;
        margin: 0 auto;
      }

      .game-header {
        background: white;
        padding: 30px;
        border-radius: 20px;
        text-align: center;
        margin-bottom: 30px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
      }

      .game-header h1 {
        color: #667eea;
        font-size: 2.5em;
        margin-bottom: 10px;
      }

      .score-board {
        display: flex;
        justify-content: space-around;
        margin-top: 20px;
        flex-wrap: wrap;
      }

      .score-item {
        background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
        padding: 15px 30px;
        border-radius: 15px;
        font-weight: bold;
        font-size: 1.2em;
        margin: 5px;
      }

      .game-menu {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .game-card {
        background: white;
        padding: 30px;
        border-radius: 20px;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .game-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.2);
      }

      .game-card .icon {
        font-size: 4em;
        margin-bottom: 15px;
      }

      .game-card h3 {
        color: #667eea;
        margin-bottom: 10px;
        font-size: 1.5em;
      }

      .game-card p {
        color: #666;
        line-height: 1.6;
      }

      .game-area {
        background: white;
        padding: 40px;
        border-radius: 20px;
        box-shadow: 0 10px 40px rgba(0, 0, 0, 0.2);
        display: none;
      }

      .game-area.active {
        display: block;
        animation: fadeIn 0.5s;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.95);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .question-box {
        background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
        padding: 30px;
        border-radius: 15px;
        margin-bottom: 30px;
        font-size: 1.3em;
        line-height: 1.8;
      }

      .options {
        display: grid;
        gap: 15px;
        margin-bottom: 20px;
      }

      .option-btn {
        background: white;
        border: 3px solid #667eea;
        padding: 20px;
        border-radius: 15px;
        cursor: pointer;
        transition: all 0.3s;
        font-size: 1.1em;
        text-align: left;
      }

      .option-btn:hover {
        background: #667eea;
        color: white;
        transform: translateX(10px);
      }

      .option-btn.correct {
        background: #28a745;
        color: white;
        border-color: #28a745;
      }

      .option-btn.wrong {
        background: #dc3545;
        color: white;
        border-color: #dc3545;
      }

      .option-btn.disabled {
        pointer-events: none;
        opacity: 0.6;
      }

      .btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 15px 40px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1.1em;
        font-weight: bold;
        transition: all 0.3s;
        margin: 10px;
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
      }

      .feedback {
        padding: 20px;
        border-radius: 15px;
        margin: 20px 0;
        font-size: 1.1em;
      }

      .feedback.correct {
        background: #d4edda;
        border: 2px solid #28a745;
        color: #155724;
      }

      .feedback.wrong {
        background: #f8d7da;
        border: 2px solid #dc3545;
        color: #721c24;
      }

      .practice-area {
        background: #f8f9fa;
        padding: 25px;
        border-radius: 15px;
        margin: 20px 0;
        border-left: 5px solid #667eea;
      }

      .timer {
        background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
        padding: 15px 30px;
        border-radius: 15px;
        font-size: 1.5em;
        font-weight: bold;
        text-align: center;
        margin-bottom: 20px;
      }

      .scenario-box {
        background: linear-gradient(135deg, #ffecd2 0%, #fcb69f 100%);
        padding: 25px;
        border-radius: 15px;
        margin-bottom: 25px;
      }

      .scenario-box h4 {
        color: #333;
        margin-bottom: 15px;
        font-size: 1.3em;
      }

      .role-play {
        background: white;
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        border-left: 4px solid #667eea;
      }

      .role-play strong {
        color: #667eea;
        font-size: 1.1em;
      }

      .progress-bar {
        width: 100%;
        height: 30px;
        background: #e0e0e0;
        border-radius: 15px;
        overflow: hidden;
        margin: 20px 0;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(90deg, #667eea 0%, #764ba2 100%);
        transition: width 0.3s;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-weight: bold;
      }

      .hint-box {
        background: #fff3cd;
        border: 2px solid #ffc107;
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
      }

      .hint-box h5 {
        color: #856404;
        margin-bottom: 10px;
      }

      .answer-input {
        width: 100%;
        padding: 15px;
        border: 2px solid #667eea;
        border-radius: 10px;
        font-size: 1.1em;
        margin: 10px 0;
      }

      .dialog-box {
        background: #e3f2fd;
        padding: 20px;
        border-radius: 10px;
        margin: 15px 0;
        border-left: 4px solid #2196f3;
      }

      .celebration {
        text-align: center;
        padding: 40px;
        animation: bounce 1s;
      }

      .celebration .emoji {
        font-size: 5em;
      }

      @keyframes bounce {
        0%,
        20%,
        50%,
        80%,
        100% {
          transform: translateY(0);
        }
        40% {
          transform: translateY(-30px);
        }
        60% {
          transform: translateY(-15px);
        }
      }

      .vocabulary-card {
        background: white;
        border: 2px solid #667eea;
        padding: 20px;
        border-radius: 15px;
        margin: 10px 0;
        cursor: pointer;
        transition: all 0.3s;
      }

      .vocabulary-card:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 20px rgba(102, 126, 234, 0.3);
      }

      .vocabulary-card.flipped {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
      }

      .level-badge {
        display: inline-block;
        padding: 5px 15px;
        border-radius: 20px;
        font-weight: bold;
        font-size: 0.9em;
        margin: 5px;
      }

      .level-beginner {
        background: #28a745;
        color: white;
      }
      .level-intermediate {
        background: #ffc107;
        color: #333;
      }
      .level-advanced {
        background: #dc3545;
        color: white;
      }

      @media (max-width: 768px) {
        .game-header h1 {
          font-size: 1.8em;
        }

        .game-menu {
          grid-template-columns: 1fr;
        }

        .game-area {
          padding: 20px;
        }

        .score-board {
          flex-direction: column;
        }
      }

      .audio-btn {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 1em;
        margin: 5px;
      }

      .audio-btn:hover {
        opacity: 0.8;
      }

      .recording {
        background: #dc3545;
        animation: pulse 1s infinite;
      }

      @keyframes pulse {
        0%,
        100% {
          opacity: 1;
        }
        50% {
          opacity: 0.5;
        }
      }

      .speech-text {
        background: #f8f9fa;
        padding: 15px;
        border-radius: 10px;
        margin: 10px 0;
        min-height: 50px;
        border: 2px dashed #667eea;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <div class="game-header">
        <h1>üéÆ B1 SPRECHEN - LUY·ªÜN T·∫¨P GAME</h1>
        <p style="color: #666; margin-top: 10px">
          Luy·ªán t·∫≠p t·∫•t c·∫£ k·ªπ nƒÉng n√≥i cho k·ª≥ thi B1 Goethe
        </p>
        <div class="score-board">
          <div class="score-item">üèÜ ƒêi·ªÉm: <span id="totalScore">0</span></div>
          <div class="score-item">
            ‚úÖ ƒê√∫ng: <span id="correctCount">0</span>
          </div>
          <div class="score-item">‚ùå Sai: <span id="wrongCount">0</span></div>
          <div class="score-item">
            üéØ C·∫•p ƒë·ªô: <span id="level">Beginner</span>
          </div>
        </div>
      </div>

      <!-- Game Menu -->
      <div id="gameMenu" class="game-menu">
        <div class="game-card" onclick="startGame('redemittel')">
          <div class="icon">üí¨</div>
          <h3>Redemittel Quiz</h3>
          <p>Tr·∫Øc nghi·ªám c√°c c·ª•m t·ª´ giao ti·∫øp quan tr·ªçng</p>
          <span class="level-badge level-beginner">D·ªÖ</span>
        </div>

        <div class="game-card" onclick="startGame('situation')">
          <div class="icon">üó£Ô∏è</div>
          <h3>T√¨nh Hu·ªëng Teil 1</h3>
          <p>Luy·ªán t·∫≠p l√™n k·∫ø ho·∫°ch c√πng nhau</p>
          <span class="level-badge level-intermediate">Trung b√¨nh</span>
        </div>

        <div class="game-card" onclick="startGame('presentation')">
          <div class="icon">üìä</div>
          <h3>Thuy·∫øt Tr√¨nh Teil 2</h3>
          <p>Luy·ªán t·∫≠p c·∫•u tr√∫c b√†i thuy·∫øt tr√¨nh</p>
          <span class="level-badge level-intermediate">Trung b√¨nh</span>
        </div>

        <div class="game-card" onclick="startGame('dialogue')">
          <div class="icon">üí≠</div>
          <h3>ƒê·ªëi Tho·∫°i Teil 3</h3>
          <p>Luy·ªán ph·∫£n h·ªìi v√† ƒë·∫∑t c√¢u h·ªèi</p>
          <span class="level-badge level-intermediate">Trung b√¨nh</span>
        </div>

        <div class="game-card" onclick="startGame('strategy')">
          <div class="icon">üéØ</div>
          <h3>Chi·∫øn Thu·∫≠t Partner</h3>
          <p>H·ªçc c√°ch ·ª©ng ph√≥ v·ªõi 3 lo·∫°i partner</p>
          <span class="level-badge level-advanced">Kh√≥</span>
        </div>

        <div class="game-card" onclick="startGame('vocabulary')">
          <div class="icon">üìö</div>
          <h3>Flashcards</h3>
          <p>√în l·∫°i t·ª´ v·ª±ng v√† c·ª•m t·ª´ quan tr·ªçng</p>
          <span class="level-badge level-beginner">D·ªÖ</span>
        </div>

        <div class="game-card" onclick="startGame('roleplay')">
          <div class="icon">üé≠</div>
          <h3>Role-Play</h3>
          <p>M√¥ ph·ªèng b√†i thi th·ª±c t·∫ø</p>
          <span class="level-badge level-advanced">Kh√≥</span>
        </div>

        <div class="game-card" onclick="startGame('speed')">
          <div class="icon">‚ö°</div>
          <h3>Speed Challenge</h3>
          <p>Tr·∫£ l·ªùi nhanh trong th·ªùi gian gi·ªõi h·∫°n</p>
          <span class="level-badge level-advanced">Kh√≥</span>
        </div>
      </div>

      <!-- Game Area -->
      <div id="gameArea" class="game-area"></div>
    </div>

    <script>
      // Game State
      let gameState = {
        score: 0,
        correct: 0,
        wrong: 0,
        level: "Beginner",
        currentGame: null,
        currentQuestion: 0,
        timer: null,
      };

      // Questions Database
      const redemittelQuestions = [
        {
          question: "B·∫°n mu·ªën ƒë·ªÅ xu·∫•t m·ªôt √Ω t∆∞·ªüng. C·ª•m t·ª´ n√†o ph√π h·ª£p?",
          options: [
            "Ich schlage vor, dass...",
            "Ich bin dagegen, weil...",
            "Das finde ich nicht gut.",
            "Ich verstehe nicht.",
          ],
          correct: 0,
          explanation:
            "‚úÖ 'Ich schlage vor, dass...' l√† c·ª•m t·ª´ ƒë√∫ng ƒë·ªÉ ƒë∆∞a ra ƒë·ªÅ xu·∫•t.",
        },
        {
          question: "Partner ƒë·ªÅ ngh·ªã m·ªôt √Ω t·ªët. B·∫°n mu·ªën ƒë·ªìng √Ω. N√≥i g√¨?",
          options: [
            "Da bin ich anderer Meinung.",
            "Das ist eine gute Idee!",
            "Ich wei√ü nicht.",
            "Nein, das geht nicht.",
          ],
          correct: 1,
          explanation:
            "‚úÖ 'Das ist eine gute Idee!' th·ªÉ hi·ªán s·ª± ƒë·ªìng √Ω t√≠ch c·ª±c.",
        },
        {
          question: "B·∫°n kh√¥ng ƒë·ªìng √Ω v·ªõi ƒë·ªÅ xu·∫•t c·ªßa partner. C·ª•m t·ª´ ph√π h·ª£p?",
          options: [
            "Ja, genau!",
            "Das stimmt!",
            "Da bin ich aber ganz anderer Meinung.",
            "Das ist super!",
          ],
          correct: 2,
          explanation:
            "‚úÖ 'Da bin ich aber ganz anderer Meinung.' l√† c√°ch l·ªãch s·ª± ƒë·ªÉ ph·∫£n ƒë·ªëi.",
        },
        {
          question: "B·∫°n mu·ªën h·ªèi √Ω ki·∫øn partner. N√≥i g√¨?",
          options: [
            "Das ist falsch!",
            "Was h√§ltst du davon?",
            "Ich bin fertig.",
            "Das geht nicht.",
          ],
          correct: 1,
          explanation: "‚úÖ 'Was h√§ltst du davon?' l√† c√°ch h·ªèi √Ω ki·∫øn l·ªãch s·ª±.",
        },
        {
          question: "B·∫Øt ƒë·∫ßu b√†i thuy·∫øt tr√¨nh Teil 2, b·∫°n n√™n n√≥i g√¨?",
          options: [
            "Tsch√ºss!",
            "Ich wei√ü nicht.",
            "Liebe Zuh√∂rer, ich begr√º√üe Sie herzlich.",
            "Das ist alles.",
          ],
          correct: 2,
          explanation: "‚úÖ C√¢u ch√†o m·ªü ƒë·∫ßu chuy√™n nghi·ªáp cho b√†i thuy·∫øt tr√¨nh.",
        },
        {
          question: "Gi·ªõi thi·ªáu ch·ªß ƒë·ªÅ b√†i thuy·∫øt tr√¨nh, d√πng c·ª•m t·ª´ n√†o?",
          options: [
            "Meine Pr√§sentation ist zu dem Thema...",
            "Ich verstehe das nicht.",
            "Das ist schwer.",
            "Auf Wiedersehen!",
          ],
          correct: 0,
          explanation:
            "‚úÖ 'Meine Pr√§sentation ist zu dem Thema...' l√† c√°ch gi·ªõi thi·ªáu ch·ªß ƒë·ªÅ chu·∫©n.",
        },
        {
          question: "Chia s·∫ª kinh nghi·ªám c√° nh√¢n trong b√†i thuy·∫øt tr√¨nh, d√πng:",
          options: [
            "Ich kenne das nicht.",
            "Was mich betrifft, ich...",
            "Das ist unm√∂glich.",
            "Ich bin m√ºde.",
          ],
          correct: 1,
          explanation:
            "‚úÖ 'Was mich betrifft, ich...' l√† c√°ch t·ª± nhi√™n ƒë·ªÉ chia s·∫ª kinh nghi·ªám.",
        },
        {
          question: "N√™u ∆∞u ƒëi·ªÉm trong b√†i thuy·∫øt tr√¨nh:",
          options: [
            "Ein Vorteil ist, dass...",
            "Das ist schlecht.",
            "Ich verstehe nichts.",
            "Das geht nicht.",
          ],
          correct: 0,
          explanation: "‚úÖ 'Ein Vorteil ist, dass...' d√πng ƒë·ªÉ n√™u ∆∞u ƒëi·ªÉm.",
        },
        {
          question: "K·∫øt th√∫c b√†i thuy·∫øt tr√¨nh Teil 2:",
          options: [
            "Ich bin fertig. Tsch√ºss!",
            "Das war's.",
            "Hiermit ist meine Pr√§sentation zu Ende. Vielen Dank f√ºrs Zuh√∂ren!",
            "Okay, genug!",
          ],
          correct: 2,
          explanation: "‚úÖ K·∫øt th√∫c chuy√™n nghi·ªáp v·ªõi l·ªùi c·∫£m ∆°n kh√°n gi·∫£.",
        },
        {
          question: "Ph·∫£n h·ªìi b√†i thuy·∫øt tr√¨nh c·ªßa partner (Teil 3):",
          options: [
            "Das war langweilig.",
            "Ihr Vortrag war sehr interessant.",
            "Ich habe nicht zugeh√∂rt.",
            "Das verstehe ich nicht.",
          ],
          correct: 1,
          explanation:
            "‚úÖ 'Ihr Vortrag war sehr interessant.' l√† ph·∫£n h·ªìi t√≠ch c·ª±c v√† l·ªãch s·ª±.",
        },
        {
          question: "ƒê·∫∑t c√¢u h·ªèi cho partner sau b√†i thuy·∫øt tr√¨nh:",
          options: [
            "Ich m√∂chte Sie fragen: ...?",
            "Das ist falsch!",
            "Ich bin nicht einverstanden.",
            "Das geht mich nichts an.",
          ],
          correct: 0,
          explanation:
            "‚úÖ 'Ich m√∂chte Sie fragen: ...?' l√† c√°ch l·ªãch s·ª± ƒë·ªÉ ƒë·∫∑t c√¢u h·ªèi.",
        },
        {
          question: "B·∫°n kh√¥ng nghe r√µ partner n√≥i g√¨. N√≥i g√¨?",
          options: [
            "Du sprichst zu leise!",
            "K√∂nnten Sie das bitte wiederholen?",
            "Das ist falsch!",
            "Ich h√∂re nicht zu.",
          ],
          correct: 1,
          explanation: "‚úÖ C√°ch l·ªãch s·ª± ƒë·ªÉ y√™u c·∫ßu nh·∫Øc l·∫°i.",
        },
        {
          question: "Th·ªëng nh·∫•t v·ªõi partner v·ªÅ m·ªôt k·∫ø ho·∫°ch:",
          options: [
            "Nein!",
            "Ja, so machen wir es.",
            "Das will ich nicht.",
            "Ich gehe jetzt.",
          ],
          correct: 1,
          explanation:
            "‚úÖ 'Ja, so machen wir es.' th·ªÉ hi·ªán s·ª± th·ªëng nh·∫•t v√† s·∫µn s√†ng.",
        },
        {
          question: "M√¥ t·∫£ t√¨nh h√¨nh ·ªü qu√™ nh√† trong Teil 2:",
          options: [
            "In meinem Heimatland...",
            "Ich wei√ü es nicht.",
            "Das ist mir egal.",
            "Keine Ahnung!",
          ],
          correct: 0,
          explanation:
            "‚úÖ 'In meinem Heimatland...' l√† c√°ch t·ª± nhi√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu m√¥ t·∫£.",
        },
        {
          question: "N√™u √Ω ki·∫øn c√° nh√¢n:",
          options: [
            "Alle denken so.",
            "Meiner Meinung nach...",
            "Das ist falsch.",
            "Ich sage nichts.",
          ],
          correct: 1,
          explanation:
            "‚úÖ 'Meiner Meinung nach...' l√† c√°ch chu·∫©n ƒë·ªÉ n√™u √Ω ki·∫øn.",
        },
      ];

      const situationScenarios = [
        {
          title: "Wochenendausflug planen",
          points: [
            "Wohin?",
            "Wann genau? / Wie lange?",
            "Wie? / Mit welchem Verkehrsmittel?",
            "Wo √ºbernachten?",
            "Aktivit√§ten dort?",
            "Was mitnehmen?",
            "Erlaubnis der Eltern?",
          ],
          partnerType: "normal",
          dialogue: [
            {
              speaker: "Sie",
              text: "Wei√üt du was? Ich habe geh√∂rt, dass es im Schwarzwald viel zu sehen gibt. Ich schlage vor, dass wir einen Ausflug dorthin machen. Was h√§ltst du davon?",
            },
            {
              speaker: "Partner",
              text: "Das ist eine gute Idee! Wohin genau sollen wir fahren?",
            },
            {
              speaker: "Sie",
              text: "Ich schlage vor, dass wir nach Freiburg fahren, weil es dort sehr sch√∂n ist. Was meinst du?",
            },
          ],
        },
        {
          title: "Geburtstagsparty organisieren",
          points: [
            "Wann?",
            "Wo?",
            "Wie viele G√§ste?",
            "Essen und Trinken?",
            "Musik und Unterhaltung?",
            "Geschenke?",
            "Dekoration?",
          ],
          partnerType: "stark",
          dialogue: [
            {
              speaker: "Partner",
              text: "Ich schlage vor, wir machen die Party am Samstag. Was h√§ltst du davon?",
            },
            {
              speaker: "Sie",
              text: "Das ist eine gute Idee! Ich denke, bei mir zu Hause w√§re gut. Was meinst du?",
            },
          ],
        },
        {
          title: "Gemeinsam Deutsch lernen",
          points: [
            "Wo lernen?",
            "Wie oft pro Woche?",
            "Welche Materialien?",
            "Online oder offline?",
            "Welche Themen?",
            "Wie lange pro Sitzung?",
            "Kosten teilen?",
          ],
          partnerType: "schwach",
          dialogue: [
            {
              speaker: "Sie",
              text: "Ich schlage vor, dass wir zweimal pro Woche zusammen lernen. Was h√§ltst du davon?",
            },
            { speaker: "Partner", text: "[schweigt oder antwortet unklar]" },
            {
              speaker: "Sie",
              text: "Gut, das machen wir! Und wo sollen wir lernen? In der Bibliothek ist es ruhig. Was meinst du?",
            },
          ],
        },
      ];

      const presentationTopics = [
        {
          topic: "Lernen im Internet",
          structure: [
            {
              slide: 1,
              title: "Begr√º√üen + Thema",
              example:
                "Liebe Zuh√∂rer! Meine Pr√§sentation ist zu dem Thema: Lernen im Internet",
            },
            {
              slide: 2,
              title: "Erfahrung",
              example:
                "Was mich betrifft, ich lerne oft online. Ich habe einmal einen Programmier-Kurs gemacht...",
            },
            {
              slide: 3,
              title: "Situation im Heimatland",
              example:
                "In meinem Heimatland Vietnam ist Online-Lernen sehr popul√§r...",
            },
            {
              slide: 4,
              title: "Vor- und Nachteile",
              example:
                "Ein Vorteil ist, dass man flexibel lernen kann. Ein Nachteil ist, dass man viel Disziplin braucht...",
            },
            {
              slide: 5,
              title: "Ende",
              example:
                "Hiermit ist meine Pr√§sentation zu Ende. Vielen Dank f√ºrs Zuh√∂ren!",
            },
          ],
        },
        {
          topic: "Sport und Gesundheit",
          structure: [
            {
              slide: 1,
              title: "Begr√º√üen + Thema",
              example: "Guten Tag! Ich spreche heute √ºber Sport und Gesundheit",
            },
            {
              slide: 2,
              title: "Erfahrung",
              example: "Ich pers√∂nlich treibe dreimal pro Woche Sport...",
            },
            {
              slide: 3,
              title: "Situation im Heimatland",
              example: "In Vietnam wird Sport immer wichtiger...",
            },
            {
              slide: 4,
              title: "Vor- und Nachteile",
              example:
                "Einerseits ist Sport sehr gesund, andererseits kostet es Zeit...",
            },
            {
              slide: 5,
              title: "Ende",
              example: "Damit komme ich zum Schluss. Haben Sie noch Fragen?",
            },
          ],
        },
        {
          topic: "Soziale Medien",
          structure: [
            {
              slide: 1,
              title: "Begr√º√üen + Thema",
              example:
                "Ich begr√º√üe Sie herzlich. Das Thema meiner Pr√§sentation ist: Soziale Medien",
            },
            {
              slide: 2,
              title: "Erfahrung",
              example:
                "Ich nutze t√§glich soziale Medien wie Facebook und Instagram...",
            },
            {
              slide: 3,
              title: "Situation im Heimatland",
              example:
                "In meinem Heimatland sind soziale Medien sehr beliebt...",
            },
            {
              slide: 4,
              title: "Vor- und Nachteile",
              example:
                "Ein Vorteil ist die schnelle Kommunikation, aber ein Nachteil ist die Zeitverschwendung...",
            },
            {
              slide: 5,
              title: "Ende",
              example:
                "Ich hoffe, mein Vortrag hat Ihnen gefallen. Vielen Dank!",
            },
          ],
        },
      ];

      const vocabularyCards = [
        {
          front: "Ich schlage vor, dass...",
          back: "T√¥i ƒë·ªÅ ngh·ªã r·∫±ng...",
          category: "Vorschl√§ge",
        },
        {
          front: "Was h√§ltst du davon?",
          back: "B·∫°n nghƒ© sao v·ªÅ ƒëi·ªÅu ƒë√≥?",
          category: "Meinung fragen",
        },
        {
          front: "Das ist eine gute Idee!",
          back: "ƒê√≥ l√† m·ªôt √Ω t∆∞·ªüng hay!",
          category: "Zustimmung",
        },
        {
          front: "Da bin ich anderer Meinung",
          back: "T√¥i c√≥ √Ω ki·∫øn kh√°c",
          category: "Ablehnung",
        },
        {
          front: "Meiner Meinung nach...",
          back: "Theo √Ω ki·∫øn c·ªßa t√¥i...",
          category: "Meinung √§u√üern",
        },
        {
          front: "Was mich betrifft, ich...",
          back: "V·ªÅ ph·∫ßn t√¥i, t√¥i...",
          category: "Erfahrung",
        },
        {
          front: "In meinem Heimatland...",
          back: "·ªû qu√™ h∆∞∆°ng t√¥i...",
          category: "Situation",
        },
        {
          front: "Ein Vorteil ist, dass...",
          back: "M·ªôt ∆∞u ƒëi·ªÉm l√†...",
          category: "Vorteile",
        },
        {
          front: "Ein Nachteil ist, dass...",
          back: "M·ªôt nh∆∞·ª£c ƒëi·ªÉm l√†...",
          category: "Nachteile",
        },
        {
          front: "Hiermit ist meine Pr√§sentation zu Ende",
          back: "ƒê·∫øn ƒë√¢y b√†i thuy·∫øt tr√¨nh c·ªßa t√¥i k·∫øt th√∫c",
          category: "Ende",
        },
        {
          front: "Ihr Vortrag war sehr interessant",
          back: "B√†i thuy·∫øt tr√¨nh c·ªßa b·∫°n r·∫•t th√∫ v·ªã",
          category: "R√ºckmeldung",
        },
        {
          front: "Ich m√∂chte Sie fragen: ...?",
          back: "T√¥i mu·ªën h·ªèi b·∫°n: ...?",
          category: "Fragen",
        },
        {
          front: "K√∂nnten Sie das bitte wiederholen?",
          back: "B·∫°n c√≥ th·ªÉ l·∫∑p l·∫°i ƒë∆∞·ª£c kh√¥ng?",
          category: "Verst√§ndnis",
        },
        {
          front: "Ja, so machen wir es",
          back: "V√¢ng, ch√∫ng ta l√†m nh∆∞ v·∫≠y",
          category: "Einigung",
        },
        {
          front: "Ich bin damit einverstanden",
          back: "T√¥i ƒë·ªìng √Ω v·ªõi ƒëi·ªÅu ƒë√≥",
          category: "Zustimmung",
        },
      ];

      // Update Score
      function updateScore(points, isCorrect) {
        gameState.score += points;
        if (isCorrect) {
          gameState.correct++;
        } else {
          gameState.wrong++;
        }

        // Update level
        if (gameState.score < 50) gameState.level = "Beginner";
        else if (gameState.score < 150) gameState.level = "Intermediate";
        else gameState.level = "Advanced";

        document.getElementById("totalScore").textContent = gameState.score;
        document.getElementById("correctCount").textContent = gameState.correct;
        document.getElementById("wrongCount").textContent = gameState.wrong;
        document.getElementById("level").textContent = gameState.level;
      }

      // Start Game
      function startGame(gameType) {
        document.getElementById("gameMenu").style.display = "none";
        document.getElementById("gameArea").classList.add("active");
        gameState.currentGame = gameType;
        gameState.currentQuestion = 0;

        switch (gameType) {
          case "redemittel":
            startRedemittelQuiz();
            break;
          case "situation":
            startSituationGame();
            break;
          case "presentation":
            startPresentationGame();
            break;
          case "dialogue":
            startDialogueGame();
            break;
          case "strategy":
            startStrategyGame();
            break;
          case "vocabulary":
            startVocabularyGame();
            break;
          case "roleplay":
            startRolePlayGame();
            break;
          case "speed":
            startSpeedChallenge();
            break;
        }
      }

      // Redemittel Quiz
      function startRedemittelQuiz() {
        const gameArea = document.getElementById("gameArea");
        gameArea.innerHTML = `
                <h2>üí¨ Redemittel Quiz</h2>
                <div class="progress-bar">
                    <div class="progress-fill" id="progress" style="width: 0%">0/${redemittelQuestions.length}</div>
                </div>
                <div id="quizContent"></div>
            `;
        showRedemittelQuestion();
      }

      function showRedemittelQuestion() {
        if (gameState.currentQuestion >= redemittelQuestions.length) {
          showQuizComplete();
          return;
        }

        const question = redemittelQuestions[gameState.currentQuestion];
        const content = document.getElementById("quizContent");

        content.innerHTML = `
                <div class="question-box">
                    <strong>C√¢u ${gameState.currentQuestion + 1}:</strong><br>
                    ${question.question}
                </div>
                <div class="options" id="options">
                    ${question.options
                      .map(
                        (opt, idx) => `
                        <div class="option-btn" onclick="checkAnswer(${idx}, ${question.correct})">${opt}</div>
                    `
                      )
                      .join("")}
                </div>
                <div id="feedback"></div>
            `;

        updateProgress();
      }

      function checkAnswer(selected, correct) {
        const options = document.querySelectorAll(".option-btn");
        const feedback = document.getElementById("feedback");
        const question = redemittelQuestions[gameState.currentQuestion];

        options.forEach((opt, idx) => {
          opt.classList.add("disabled");
          if (idx === correct) {
            opt.classList.add("correct");
          } else if (idx === selected) {
            opt.classList.add("wrong");
          }
        });

        if (selected === correct) {
          updateScore(10, true);
          feedback.innerHTML = `
                    <div class="feedback correct">
                        <strong>üéâ Ch√≠nh x√°c!</strong><br>
                        ${question.explanation}
                        <br><br>
                        <button class="btn" onclick="nextQuestion()">C√¢u ti·∫øp theo ‚Üí</button>
                    </div>
                `;
        } else {
          updateScore(-5, false);
          feedback.innerHTML = `
                    <div class="feedback wrong">
                        <strong>‚ùå Ch∆∞a ƒë√∫ng!</strong><br>
                        ƒê√°p √°n ƒë√∫ng: <strong>${
                          redemittelQuestions[gameState.currentQuestion]
                            .options[correct]
                        }</strong><br>
                        ${question.explanation}
                        <br><br>
                        <button class="btn" onclick="nextQuestion()">C√¢u ti·∫øp theo ‚Üí</button>
                    </div>
                `;
        }
      }

      function nextQuestion() {
        gameState.currentQuestion++;
        showRedemittelQuestion();
      }

      function updateProgress() {
        const progress = document.getElementById("progress");
        const percentage =
          (gameState.currentQuestion / redemittelQuestions.length) * 100;
        progress.style.width = percentage + "%";
        progress.textContent = `${gameState.currentQuestion}/${redemittelQuestions.length}`;
      }

      function showQuizComplete() {
        const content = document.getElementById("quizContent");
        const percentage = Math.round(
          (gameState.correct / redemittelQuestions.length) * 100
        );

        content.innerHTML = `
                <div class="celebration">
                    <div class="emoji">üéâ</div>
                    <h2>Ho√†n th√†nh!</h2>
                    <p style="font-size: 1.3em; margin: 20px 0;">
                        B·∫°n ƒë√£ tr·∫£ l·ªùi ƒë√∫ng <strong>${gameState.correct}/${
          redemittelQuestions.length
        }</strong> c√¢u<br>
                        T·ª∑ l·ªá ƒë√∫ng: <strong>${percentage}%</strong>
                    </p>
                    ${
                      percentage >= 80
                        ? '<p style="color: #28a745; font-size: 1.2em;">üåü Xu·∫•t s·∫Øc! B·∫°n ƒë√£ n·∫Øm v·ªØng Redemittel!</p>'
                        : percentage >= 60
                        ? '<p style="color: #ffc107; font-size: 1.2em;">üëç Kh√° t·ªët! H√£y luy·ªán t·∫≠p th√™m nh√©!</p>'
                        : '<p style="color: #dc3545; font-size: 1.2em;">üí™ C·ªë g·∫Øng l√™n! √în l·∫°i Redemittel nh√©!</p>'
                    }
                    <button class="btn" onclick="startGame('redemittel')">Ch∆°i l·∫°i</button>
                    <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                </div>
            `;
      }

      // Situation Game (Teil 1)
      function startSituationGame() {
        const gameArea = document.getElementById("gameArea");
        const scenario =
          situationScenarios[
            Math.floor(Math.random() * situationScenarios.length)
          ];

        gameArea.innerHTML = `
                <h2>üó£Ô∏è T√¨nh Hu·ªëng Teil 1: ${scenario.title}</h2>
                
                <div class="scenario-box">
                    <h4>üìã C√°c ƒëi·ªÉm c·∫ßn th·∫£o lu·∫≠n:</h4>
                    <ul>
                        ${scenario.points.map((p) => `<li>${p}</li>`).join("")}
                    </ul>
                </div>

                <div class="practice-area">
                    <h4>üí° Partner Type: <span style="color: #667eea;">${
                      scenario.partnerType === "stark"
                        ? "Gi·ªèi h∆°n b·∫°n"
                        : scenario.partnerType === "schwach"
                        ? "Y·∫øu h∆°n b·∫°n"
                        : "Ngang b·∫±ng"
                    }</span></h4>
                    
                    <h4 style="margin-top: 20px;">üé≠ V√≠ d·ª• ƒë·ªëi tho·∫°i:</h4>
                    ${scenario.dialogue
                      .map(
                        (d) => `
                        <div class="role-play">
                            <strong>${d.speaker}:</strong> ${d.text}
                        </div>
                    `
                      )
                      .join("")}
                </div>

                <div class="hint-box">
                    <h5>üí° G·ª£i √Ω:</h5>
                    <p><strong>C·∫•u tr√∫c c·ªßa B·∫†N:</strong></p>
                    <ol>
                        ${
                          scenario.partnerType === "schwach"
                            ? `
                            <li>ƒê·ªÅ ngh·ªã üí° (Ich schlage vor, dass...)</li>
                            <li>L√Ω do üìù (weil...)</li>
                            <li>H·ªèi √Ω ki·∫øn ‚ùì (Was h√§ltst du davon?)</li>
                            <li>‚ö†Ô∏è N·∫øu partner im l·∫∑ng ‚Üí T·ª± ch·ªët v√† chuy·ªÉn ƒëi·ªÉm!</li>
                        `
                            : scenario.partnerType === "stark"
                            ? `
                            <li>ƒê·ªìng √Ω ‚úÖ (Das ist eine gute Idee!)</li>
                            <li>ƒê·ªÅ ngh·ªã üí° (Ich schlage vor, dass...)</li>
                            <li>L√Ω do üìù (weil...)</li>
                            <li>H·ªèi √Ω ki·∫øn ‚ùì (Was meinst du?)</li>
                        `
                            : `
                            <li>T·ª´ ch·ªëi l·ªãch s·ª± ‚ùå (Nein, das finde ich nicht so gut)</li>
                            <li>L√Ω do t·ª´ ch·ªëi üìù (weil...)</li>
                            <li>ƒê·ªÅ ngh·ªã kh√°c üí° (Aber ich habe geh√∂rt, dass...)</li>
                            <li>L√Ω do ƒë·ªÅ ngh·ªã m·ªõi üìù</li>
                            <li>H·ªèi √Ω ki·∫øn ‚ùì</li>
                        `
                        }
                    </ol>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="generateNewSituation()">T√¨nh hu·ªëng m·ªõi</button>
                    <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                </div>
            `;

        updateScore(5, true);
      }

      function generateNewSituation() {
        startSituationGame();
      }

      // Presentation Game (Teil 2)
      function startPresentationGame() {
        const gameArea = document.getElementById("gameArea");
        const topic =
          presentationTopics[
            Math.floor(Math.random() * presentationTopics.length)
          ];

        gameArea.innerHTML = `
                <h2>üìä Thuy·∫øt Tr√¨nh Teil 2: ${topic.topic}</h2>
                
                <div class="scenario-box">
                    <h4>‚è±Ô∏è Th·ªùi gian: 3 ph√∫t chu·∫©n b·ªã + 3 ph√∫t thuy·∫øt tr√¨nh</h4>
                </div>

                <h3 style="margin-top: 30px;">üìë C·∫•u tr√∫c b√†i thuy·∫øt tr√¨nh:</h3>
                
                ${topic.structure
                  .map(
                    (slide, idx) => `
                    <div class="practice-area" style="margin-bottom: 20px;">
                        <h4>Slide ${slide.slide}: ${slide.title}</h4>
                        <div class="example">
                            <strong>V√≠ d·ª•:</strong><br>
                            <em>${slide.example}</em>
                        </div>
                        <div style="margin-top: 15px;">
                            <strong>‚úçÔ∏è Th·ª±c h√†nh c·ªßa b·∫°n:</strong>
                            <textarea class="answer-input" rows="3" placeholder="Vi·∫øt c√¢u c·ªßa b·∫°n t·∫°i ƒë√¢y..."></textarea>
                        </div>
                    </div>
                `
                  )
                  .join("")}

                <div class="hint-box">
                    <h5>üí° L∆∞u √Ω quan tr·ªçng:</h5>
                    <ul>
                        <li>‚úì N√≥i T·ª∞ NHI√äN, kh√¥ng h·ªçc thu·ªôc</li>
                        <li>‚úì D√πng LI√äN T·ª™: zuerst, dann, danach, zum Schluss</li>
                        <li>‚úì Nh√¨n v√†o GI√ÅM KH·∫¢O khi n√≥i</li>
                        <li>‚úì Gi·ªØ T·ªêC ƒê·ªò v·ª´a ph·∫£i</li>
                        <li>‚úì D√πng C·ª¨ CH·ªà TAY ph√π h·ª£p</li>
                    </ul>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="generateNewPresentation()">Ch·ªß ƒë·ªÅ m·ªõi</button>
                    <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                </div>
            `;

        updateScore(5, true);
      }

      function generateNewPresentation() {
        startPresentationGame();
      }

      // Dialogue Game (Teil 3)
      function startDialogueGame() {
        const gameArea = document.getElementById("gameArea");

        const situations = [
          {
            context: "Partner v·ª´a thuy·∫øt tr√¨nh v·ªÅ 'Sport und Gesundheit'",
            tasks: [
              "ƒê∆∞a ph·∫£n h·ªìi t√≠ch c·ª±c v·ªÅ b√†i thuy·∫øt tr√¨nh",
              "ƒê·∫∑t 1-2 c√¢u h·ªèi li√™n quan ƒë·∫øn ch·ªß ƒë·ªÅ",
              "Chia s·∫ª quan ƒëi·ªÉm c·ªßa b·∫°n",
            ],
          },
          {
            context: "Partner v·ª´a thuy·∫øt tr√¨nh v·ªÅ 'Lernen mit Internet'",
            tasks: [
              "Khen ng·ª£i ƒëi·ªÉm hay trong b√†i thuy·∫øt tr√¨nh",
              "H·ªèi v·ªÅ kinh nghi·ªám c√° nh√¢n c·ªßa partner",
              "So s√°nh v·ªõi t√¨nh h√¨nh ·ªü qu√™ nh√† b·∫°n",
            ],
          },
        ];

        const situation =
          situations[Math.floor(Math.random() * situations.length)];

        gameArea.innerHTML = `
                <h2>üí¨ ƒê·ªëi Tho·∫°i Teil 3</h2>
                
                <div class="scenario-box">
                    <h4>üìù T√¨nh hu·ªëng:</h4>
                    <p style="font-size: 1.1em;">${situation.context}</p>
                </div>

                <div class="practice-area">
                    <h4>üéØ Nhi·ªám v·ª• c·ªßa b·∫°n:</h4>
                    <ol>
                        ${situation.tasks.map((t) => `<li>${t}</li>`).join("")}
                    </ol>
                </div>

                <div class="hint-box">
                    <h5>üí° Redemittel h·ªØu √≠ch:</h5>
                    <p><strong>Ph·∫£n h·ªìi:</strong></p>
                    <ul>
                        <li>Ihr Vortrag war sehr interessant.</li>
                        <li>Mir hat Ihr Vortrag sehr gut gefallen.</li>
                        <li>Ich habe (sehr) interessant gefunden, dass...</li>
                    </ul>
                    
                    <p><strong>ƒê·∫∑t c√¢u h·ªèi:</strong></p>
                    <ul>
                        <li>Ich h√§tte gern eine Frage f√ºr Sie.</li>
                        <li>Ich m√∂chte Sie fragen: ...?</li>
                        <li>K√∂nnten Sie mir bitte sagen/erkl√§ren...?</li>
                    </ul>
                </div>

                <div class="practice-area">
                    <h4>‚úçÔ∏è Th·ª±c h√†nh c·ªßa b·∫°n:</h4>
                    
                    <p><strong>1. Ph·∫£n h·ªìi:</strong></p>
                    <textarea class="answer-input" rows="2" placeholder="Vi·∫øt ph·∫£n h·ªìi c·ªßa b·∫°n..."></textarea>
                    
                    <p style="margin-top: 15px;"><strong>2. C√¢u h·ªèi th·ª© nh·∫•t:</strong></p>
                    <textarea class="answer-input" rows="2" placeholder="ƒê·∫∑t c√¢u h·ªèi..."></textarea>
                    
                    <p style="margin-top: 15px;"><strong>3. C√¢u h·ªèi th·ª© hai:</strong></p>
                    <textarea class="answer-input" rows="2" placeholder="ƒê·∫∑t c√¢u h·ªèi..."></textarea>
                    
                    <p style="margin-top: 15px;"><strong>4. Chia s·∫ª quan ƒëi·ªÉm:</strong></p>
                    <textarea class="answer-input" rows="3" placeholder="Chia s·∫ª √Ω ki·∫øn c·ªßa b·∫°n..."></textarea>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="generateNewDialogue()">T√¨nh hu·ªëng m·ªõi</button>
                    <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                </div>
            `;

        updateScore(5, true);
      }

      function generateNewDialogue() {
        startDialogueGame();
      }

      // Strategy Game
      function startStrategyGame() {
        const gameArea = document.getElementById("gameArea");

        gameArea.innerHTML = `
                <h2>üéØ Chi·∫øn Thu·∫≠t ·ª®ng Ph√≥ Partner</h2>
                
                <div class="grid" style="margin-top: 30px;">
                    <div class="card">
                        <div class="icon">‚¨ÜÔ∏è</div>
                        <h3>Partner GI·ªéI H∆†N</h3>
                        <div style="text-align: left; margin-top: 20px;">
                            <p><strong>Partner n√≥i (3 c√¢u):</strong></p>
                            <ol style="margin-left: 20px;">
                                <li>ƒê·ªÅ ngh·ªã üí°</li>
                                <li>L√Ω do üìù</li>
                                <li>H·ªèi √Ω ki·∫øn ‚ùì</li>
                            </ol>
                            
                            <p style="margin-top: 15px;"><strong>B·∫†N n√≥i (4 c√¢u):</strong></p>
                            <ol style="margin-left: 20px;">
                                <li>ƒê·ªìng √Ω ‚úÖ</li>
                                <li>ƒê·ªÅ ngh·ªã üí°</li>
                                <li>L√Ω do üìù</li>
                                <li>H·ªèi √Ω ki·∫øn ‚ùì</li>
                            </ol>
                        </div>
                        <button class="btn" style="margin-top: 20px;" onclick="practicePartnerType('stark')">Luy·ªán t·∫≠p</button>
                    </div>

                    <div class="card">
                        <div class="icon">‚öñÔ∏è</div>
                        <h3>Partner NGANG B·∫∞NG</h3>
                        <div style="text-align: left; margin-top: 20px;">
                            <p><strong>B·∫†N n√≥i (5 c√¢u):</strong></p>
                            <ol style="margin-left: 20px;">
                                <li>T·ª´ ch·ªëi l·ªãch s·ª± ‚ùå</li>
                                <li>L√Ω do t·ª´ ch·ªëi üìù</li>
                                <li>ƒê·ªÅ ngh·ªã kh√°c üí°</li>
                                <li>L√Ω do m·ªõi üìù</li>
                                <li>H·ªèi √Ω ki·∫øn ‚ùì</li>
                            </ol>
                            
                            <p style="margin-top: 10px; color: #666;"><em>C√≥ tranh lu·∫≠n t·ª± nhi√™n!</em></p>
                        </div>
                        <button class="btn" style="margin-top: 20px;" onclick="practicePartnerType('normal')">Luy·ªán t·∫≠p</button>
                    </div>

                    <div class="card">
                        <div class="icon">‚¨áÔ∏è</div>
                        <h3>Partner Y·∫æU H∆†N</h3>
                        <div style="text-align: left; margin-top: 20px;">
                            <p><strong>‚ö†Ô∏è B·∫†N n√≥i TR∆Ø·ªöC (3 c√¢u):</strong></p>
                            <ol style="margin-left: 20px;">
                                <li>ƒê·ªÅ ngh·ªã üí°</li>
                                <li>L√Ω do üìù</li>
                                <li>H·ªèi √Ω ki·∫øn ‚ùì</li>
                            </ol>
                            
                            <p style="margin-top: 10px;"><strong>N·∫øu partner im l·∫∑ng:</strong></p>
                            <p style="margin-left: 20px;">‚Üí T·ª± CH·ªêT ngay!<br>‚Üí Chuy·ªÉn ƒëi·ªÉm ti·∫øp theo!</p>
                        </div>
                        <button class="btn" style="margin-top: 20px;" onclick="practicePartnerType('schwach')">Luy·ªán t·∫≠p</button>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                </div>
            `;

        updateScore(5, true);
      }

      function practicePartnerType(type) {
        const gameArea = document.getElementById("gameArea");

        const examples = {
          stark: {
            title: "Partner Gi·ªèi H∆°n - Luy·ªán T·∫≠p",
            partner:
              "Ich habe gelesen, dass es im Schwarzwald viel zu sehen gibt. Ich schlage vor, dass wir nach Freiburg fahren, weil es dort sehr sch√∂n ist. Was h√§ltst du davon?",
            hint: "B·∫°n n√™n: ƒê·ªìng √Ω + ƒê·ªÅ ngh·ªã th√™m + L√Ω do + H·ªèi √Ω ki·∫øn",
          },
          normal: {
            title: "Partner Ngang B·∫±ng - Luy·ªán T·∫≠p",
            partner:
              "Ich denke, wir sollten mit dem Auto fahren. Was meinst du?",
            hint: "B·∫°n n√™n: T·ª´ ch·ªëi l·ªãch s·ª± + L√Ω do + ƒê·ªÅ ngh·ªã kh√°c + L√Ω do m·ªõi + H·ªèi √Ω ki·∫øn",
          },
          schwach: {
            title: "Partner Y·∫øu H∆°n - Luy·ªán T·∫≠p",
            partner: "[Partner im l·∫∑ng ho·∫∑c n√≥i r·∫•t ng·∫Øn]",
            hint: "B·∫°n n√™n: N√ìI TR∆Ø·ªöC! ƒê·ªÅ ngh·ªã + L√Ω do + H·ªèi √Ω ki·∫øn ‚Üí N·∫øu im l·∫∑ng qu√° 3 gi√¢y ‚Üí T·ª± ch·ªët!",
          },
        };

        const example = examples[type];

        gameArea.innerHTML = `
                <h2>${example.title}</h2>
                
                <div class="role-play" style="margin: 30px 0;">
                    <strong>Partner:</strong> ${example.partner}
                </div>

                <div class="hint-box">
                    <h5>üí° G·ª£i √Ω:</h5>
                    <p>${example.hint}</p>
                </div>

                <div class="practice-area">
                    <h4>‚úçÔ∏è Ph·∫£n h·ªìi c·ªßa b·∫°n:</h4>
                    <textarea class="answer-input" rows="5" placeholder="Vi·∫øt ph·∫£n h·ªìi c·ªßa b·∫°n t·∫°i ƒë√¢y..."></textarea>
                    
                    <button class="btn" style="margin-top: 15px;" onclick="showSampleAnswer('${type}')">Xem c√¢u tr·∫£ l·ªùi m·∫´u</button>
                </div>

                <div id="sampleAnswer"></div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn" onclick="startStrategyGame()">Quay l·∫°i</button>
                    <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                </div>
            `;
      }

      function showSampleAnswer(type) {
        const samples = {
          stark:
            "Das ist eine gute Idee! Freiburg ist wirklich sch√∂n. Ich schlage vor, dass wir auch die Umgebung besuchen, weil dort viele interessante Wanderwege sind. Was h√§ltst du davon?",
          normal:
            "Nein, das finde ich nicht so gut, weil das Benzin sehr teuer ist. Ich schlage vor, dass wir mit dem Zug fahren, weil das umweltfreundlicher und g√ºnstiger ist. Was meinst du?",
          schwach:
            "Ich schlage vor, dass wir nach Freiburg fahren, weil es dort viel zu sehen gibt. Was h√§ltst du davon? [im l·∫∑ng 3 gi√¢y] Gut, das ist eine gute Idee! Wir fahren also nach Freiburg. Und wann genau? Ich denke am Freitag ist besser...",
        };

        document.getElementById("sampleAnswer").innerHTML = `
                <div class="example" style="margin-top: 20px;">
                    <strong>‚úÖ C√¢u tr·∫£ l·ªùi m·∫´u:</strong><br><br>
                    <em>${samples[type]}</em>
                </div>
            `;
      }

      // Vocabulary Flashcards
      function startVocabularyGame() {
        const gameArea = document.getElementById("gameArea");
        let currentCard = 0;
        let isFlipped = false;

        function showCard() {
          const card = vocabularyCards[currentCard];
          const content = isFlipped ? card.back : card.front;

          gameArea.innerHTML = `
                    <h2>üìö Flashcards - √în Redemittel</h2>
                    
                    <div class="progress-bar">
                        <div class="progress-fill" style="width: ${
                          (currentCard / vocabularyCards.length) * 100
                        }%">
                            ${currentCard + 1}/${vocabularyCards.length}
                        </div>
                    </div>

                    <div style="text-align: center; margin: 30px 0;">
                        <div class="level-badge level-intermediate">${
                          card.category
                        }</div>
                    </div>
                    
                    <div class="vocabulary-card ${
                      isFlipped ? "flipped" : ""
                    }" onclick="flipCard()" 
                         style="cursor: pointer; min-height: 200px; display: flex; align-items: center; justify-content: center; font-size: 1.5em; text-align: center;">
                        ${content}
                    </div>
                    
                    <p style="text-align: center; color: #666; margin-top: 20px;">
                        ${isFlipped ? "üáªüá≥ Ti·∫øng Vi·ªát" : "üá©üá™ Ti·∫øng ƒê·ª©c"}<br>
                        <em>Nh·∫•n v√†o th·∫ª ƒë·ªÉ l·∫≠t</em>
                    </p>

                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn" onclick="previousCard()" ${
                          currentCard === 0 ? "disabled" : ""
                        }>‚Üê Tr∆∞·ªõc</button>
                        <button class="btn" onclick="nextCard()">Ti·∫øp theo ‚Üí</button>
                        <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                    </div>
                `;
        }

        window.flipCard = function () {
          isFlipped = !isFlipped;
          showCard();
        };

        window.nextCard = function () {
          if (currentCard < vocabularyCards.length - 1) {
            currentCard++;
            isFlipped = false;
            showCard();
            updateScore(2, true);
          } else {
            gameArea.innerHTML = `
                        <div class="celebration">
                            <div class="emoji">üéâ</div>
                            <h2>Ho√†n th√†nh t·∫•t c·∫£ flashcards!</h2>
                            <p style="font-size: 1.2em; margin: 20px 0;">
                                B·∫°n ƒë√£ √¥n xong ${vocabularyCards.length} c·ª•m t·ª´ quan tr·ªçng!
                            </p>
                            <button class="btn" onclick="startVocabularyGame()">√în l·∫°i</button>
                            <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                        </div>
                    `;
          }
        };

        window.previousCard = function () {
          if (currentCard > 0) {
            currentCard--;
            isFlipped = false;
            showCard();
          }
        };

        showCard();
      }

      // Role-Play Game
      function startRolePlayGame() {
        const gameArea = document.getElementById("gameArea");

        gameArea.innerHTML = `
                <h2>üé≠ Role-Play - M√¥ Ph·ªèng Thi Th·∫≠t</h2>
                
                <div class="timer" id="timer">‚è±Ô∏è Th·ªùi gian: 15:00</div>

                <div class="scenario-box">
                    <h4>üìù ƒê·ªÅ b√†i:</h4>
                    <p><strong>Teil 1:</strong> Wochenendausflug in den Schwarzwald planen (4 ph√∫t)</p>
                    <p><strong>Teil 2:</strong> Pr√§sentation √ºber "Lernen im Internet" (3 ph√∫t)</p>
                    <p><strong>Teil 3:</strong> Diskussion √ºber das Thema (5 ph√∫t)</p>
                </div>

                <div class="practice-area">
                    <h4>üéØ H∆∞·ªõng d·∫´n:</h4>
                    <ol>
                        <li>Nh·∫•n "B·∫Øt ƒë·∫ßu" ƒë·ªÉ b·∫Øt ƒë·∫ßu ƒë·ªìng h·ªì ƒë·∫øm ng∆∞·ª£c</li>
                        <li>Th·ª±c h√†nh n√≥i theo t·ª´ng Teil</li>
                        <li>T·ª± ƒë√°nh gi√° sau khi ho√†n th√†nh</li>
                    </ol>
                </div>

                <div id="roleplayContent">
                    <div style="text-align: center; margin-top: 30px;">
                        <button class="btn" style="font-size: 1.3em; padding: 20px 50px;" onclick="startTimer()">
                            üé¨ B·∫Øt ƒë·∫ßu thi th·ª≠
                        </button>
                    </div>
                </div>

                <div style="text-align: center; margin-top: 30px;">
                    <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                </div>
            `;
      }

      function startTimer() {
        let timeLeft = 900; // 15 minutes
        const timerDisplay = document.getElementById("timer");
        const content = document.getElementById("roleplayContent");

        content.innerHTML = `
                <div class="practice-area" style="margin-top: 20px;">
                    <h4>üì¢ ƒêang thi - H√£y n√≥i to v√† r√µ r√†ng!</h4>
                    <div style="background: white; padding: 20px; border-radius: 10px; margin: 20px 0;">
                        <p><strong>Teil 1:</strong> L√™n k·∫ø ho·∫°ch (0:00 - 4:00)</p>
                        <p><strong>Teil 2:</strong> Thuy·∫øt tr√¨nh (4:00 - 10:00)</p>
                        <p><strong>Teil 3:</strong> Th·∫£o lu·∫≠n (10:00 - 15:00)</p>
                    </div>
                    <button class="btn" onclick="stopTimer()">‚èπÔ∏è D·ª´ng l·∫°i</button>
                </div>
            `;

        gameState.timer = setInterval(() => {
          timeLeft--;
          const minutes = Math.floor(timeLeft / 60);
          const seconds = timeLeft % 60;
          timerDisplay.textContent = `‚è±Ô∏è Th·ªùi gian: ${minutes}:${seconds
            .toString()
            .padStart(2, "0")}`;

          if (timeLeft <= 0) {
            clearInterval(gameState.timer);
            finishRolePlay();
          }
        }, 1000);
      }

      function stopTimer() {
        clearInterval(gameState.timer);
        finishRolePlay();
      }

      function finishRolePlay() {
        const content = document.getElementById("roleplayContent");
        content.innerHTML = `
                <div class="celebration">
                    <div class="emoji">üéâ</div>
                    <h2>Ho√†n th√†nh!</h2>
                    
                    <div class="practice-area" style="text-align: left; margin: 20px auto; max-width: 600px;">
                        <h4>üìä T·ª± ƒë√°nh gi√°:</h4>
                        <p><strong>B·∫°n ƒë√£ ho√†n th√†nh:</strong></p>
                        <ul>
                            <li>‚úì Teil 1: L√™n k·∫ø ho·∫°ch v·ªõi partner</li>
                            <li>‚úì Teil 2: Thuy·∫øt tr√¨nh v·ªÅ ch·ªß ƒë·ªÅ</li>
                            <li>‚úì Teil 3: Th·∫£o lu·∫≠n v√† ƒë·∫∑t c√¢u h·ªèi</li>
                        </ul>
                        
                        <p style="margin-top: 20px;"><strong>ƒêi·ªÉm m·∫°nh c·ªßa b·∫°n:</strong></p>
                        <textarea class="answer-input" rows="3" placeholder="Vi·∫øt ƒëi·ªÉm m·∫°nh..."></textarea>
                        
                        <p style="margin-top: 15px;"><strong>C·∫ßn c·∫£i thi·ªán:</strong></p>
                        <textarea class="answer-input" rows="3" placeholder="Vi·∫øt ƒëi·ªÉm c·∫ßn c·∫£i thi·ªán..."></textarea>
                    </div>

                    <button class="btn" onclick="startRolePlayGame()">Thi l·∫°i</button>
                    <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                </div>
            `;
        updateScore(50, true);
      }

      // Speed Challenge
      function startSpeedChallenge() {
        const gameArea = document.getElementById("gameArea");
        let timeLeft = 60;
        let questionIndex = 0;

        const speedQuestions = [
          {
            q: "ƒê·ªÅ xu·∫•t ƒëi Freiburg",
            a: "Ich schlage vor, dass wir nach Freiburg fahren",
          },
          { q: "ƒê·ªìng √Ω v·ªõi partner", a: "Das ist eine gute Idee" },
          { q: "H·ªèi √Ω ki·∫øn partner", a: "Was h√§ltst du davon?" },
          { q: "Ph·∫£n ƒë·ªëi l·ªãch s·ª±", a: "Da bin ich anderer Meinung" },
          {
            q: "B·∫Øt ƒë·∫ßu b√†i thuy·∫øt tr√¨nh",
            a: "Liebe Zuh√∂rer, ich begr√º√üe Sie herzlich",
          },
          { q: "Chia s·∫ª kinh nghi·ªám", a: "Was mich betrifft, ich..." },
          { q: "N√™u ∆∞u ƒëi·ªÉm", a: "Ein Vorteil ist, dass..." },
          { q: "K·∫øt th√∫c thuy·∫øt tr√¨nh", a: "Vielen Dank f√ºrs Zuh√∂ren" },
          { q: "Khen b√†i thuy·∫øt tr√¨nh", a: "Ihr Vortrag war sehr interessant" },
          { q: "ƒê·∫∑t c√¢u h·ªèi", a: "Ich m√∂chte Sie fragen: ...?" },
        ];

        gameArea.innerHTML = `
                <h2>‚ö° Speed Challenge - 60 gi√¢y!</h2>
                
                <div class="timer" id="speedTimer">‚è±Ô∏è ${timeLeft}s</div>
                
                <div class="question-box" id="speedQuestion"></div>
                
                <div class="practice-area">
                    <textarea class="answer-input" id="speedAnswer" rows="2" 
                              placeholder="Vi·∫øt c√¢u tr·∫£ l·ªùi nhanh..." 
                              onkeypress="if(event.key==='Enter'){checkSpeedAnswer()}"></textarea>
                    <button class="btn" onclick="checkSpeedAnswer()">‚úì Ki·ªÉm tra</button>
                    <button class="btn btn-secondary" onclick="skipSpeedQuestion()">‚Üí B·ªè qua</button>
                </div>

                <div class="progress-bar">
                    <div class="progress-fill" id="speedProgress" style="width: 0%">0/10</div>
                </div>

                <div id="speedResult"></div>
            `;

        function showQuestion() {
          if (questionIndex < speedQuestions.length) {
            document.getElementById("speedQuestion").innerHTML = `
                        <strong>C√¢u ${questionIndex + 1}/10:</strong><br>
                        ${speedQuestions[questionIndex].q}
                    `;
            document.getElementById("speedAnswer").value = "";
            document.getElementById("speedAnswer").focus();
          } else {
            endSpeedChallenge(questionIndex);
          }
        }

        window.checkSpeedAnswer = function () {
          const answer = document.getElementById("speedAnswer").value.trim();
          if (answer) {
            questionIndex++;
            updateScore(10, true);
            updateSpeedProgress();
            showQuestion();
          }
        };

        window.skipSpeedQuestion = function () {
          questionIndex++;
          updateSpeedProgress();
          showQuestion();
        };

        function updateSpeedProgress() {
          const progress = document.getElementById("speedProgress");
          const percentage = (questionIndex / speedQuestions.length) * 100;
          progress.style.width = percentage + "%";
          progress.textContent = `${questionIndex}/${speedQuestions.length}`;
        }

        function endSpeedChallenge(answered) {
          clearInterval(speedTimer);
          document.getElementById("speedResult").innerHTML = `
                    <div class="celebration">
                        <div class="emoji">‚ö°</div>
                        <h2>H·∫øt gi·ªù!</h2>
                        <p style="font-size: 1.3em;">
                            B·∫°n ƒë√£ tr·∫£ l·ªùi <strong>${answered}/10</strong> c√¢u<br>
                            Th·ªùi gian c√≤n l·∫°i: <strong>${timeLeft}s</strong>
                        </p>
                        <button class="btn" onclick="startSpeedChallenge()">Ch∆°i l·∫°i</button>
                        <button class="btn btn-secondary" onclick="backToMenu()">V·ªÅ menu</button>
                    </div>
                `;
        }

        const speedTimer = setInterval(() => {
          timeLeft--;
          document.getElementById("speedTimer").textContent = `‚è±Ô∏è ${timeLeft}s`;
          if (timeLeft <= 0) {
            endSpeedChallenge(questionIndex);
          }
        }, 1000);

        showQuestion();
      }

      // Back to Menu
      function backToMenu() {
        document.getElementById("gameArea").classList.remove("active");
        document.getElementById("gameMenu").style.display = "grid";
        if (gameState.timer) {
          clearInterval(gameState.timer);
        }
      }

      // Initialize
      document.addEventListener("DOMContentLoaded", function () {
        console.log("üéÆ B1 Sprechen Game loaded!");
      });
    </script>
  </body>
</html>
