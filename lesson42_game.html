<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Luyá»‡n táº­p Modelltest 3 Teil 1 - Tiáº¿ng Äá»©c</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        padding: 20px;
      }

      .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        overflow: hidden;
      }

      .header {
        background: linear-gradient(135deg, #ff6b6b, #ffd93d);
        color: white;
        padding: 30px;
        text-align: center;
      }

      .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.3);
      }

      .header p {
        font-size: 1.2em;
        opacity: 0.9;
      }

      .section-info {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        padding: 20px;
        margin: 20px 0;
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        text-align: center;
      }

      .section-info h3 {
        margin-bottom: 15px;
        font-size: 1.5em;
      }

      .content {
        padding: 30px;
      }

      .practice-card {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border-radius: 20px;
        padding: 40px;
        margin: 20px 0;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        text-align: center;
      }

      .stats-row {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr 1fr;
        gap: 15px;
        margin: 20px 0;
      }

      .stat-box {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        padding: 15px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
        text-align: center;
      }

      .stat-number {
        font-size: 1.8em;
        font-weight: 900;
        margin-bottom: 5px;
      }

      .stat-label {
        font-size: 0.9em;
        opacity: 0.9;
      }

      .timer-warning {
        color: #ff6b6b !important;
        animation: pulse 1s infinite;
      }

      @keyframes pulse {
        0% {
          opacity: 1;
        }
        50% {
          opacity: 0.7;
        }
        100% {
          opacity: 1;
        }
      }

      .section-counter {
        font-size: 1.3em;
        margin-bottom: 15px;
        font-weight: 600;
        padding: 10px 20px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 25px;
        display: inline-block;
      }

      .sentence-counter {
        font-size: 1.5em;
        margin-bottom: 20px;
        font-weight: 600;
      }

      .vietnamese-sentence {
        font-size: 2em;
        margin: 30px 0;
        padding: 20px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        line-height: 1.4;
      }

      .controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin: 30px 0;
        flex-wrap: wrap;
      }

      .btn {
        background: linear-gradient(135deg, #ff6b6b, #ffd93d);
        color: white;
        border: none;
        padding: 15px 25px;
        border-radius: 25px;
        font-size: 1.1em;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        min-width: 120px;
      }

      .btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
      }

      .btn:active {
        transform: translateY(0);
      }

      .btn-secondary {
        background: linear-gradient(135deg, #28a745, #20c997);
      }

      .btn-correct {
        background: linear-gradient(135deg, #28a745, #20c997);
      }

      .btn-incorrect {
        background: linear-gradient(135deg, #dc3545, #ff6b6b);
      }

      .progress-bar {
        background: rgba(255, 255, 255, 0.3);
        border-radius: 10px;
        overflow: hidden;
        margin: 20px 0;
        height: 20px;
      }

      .progress-fill {
        background: linear-gradient(135deg, #28a745, #20c997);
        height: 100%;
        transition: width 0.5s ease;
        border-radius: 10px;
      }

      .instructions {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .instructions h3 {
        margin-bottom: 15px;
        font-size: 1.5em;
      }

      .instructions ul {
        list-style: none;
        padding: 0;
      }

      .instructions li {
        margin: 10px 0;
        padding-left: 25px;
        position: relative;
      }

      .instructions li::before {
        content: "âœ“";
        position: absolute;
        left: 0;
        color: #28a745;
        font-weight: bold;
        font-size: 1.2em;
      }

      .answer-section {
        background: rgba(255, 255, 255, 0.95);
        color: #333;
        border-radius: 15px;
        padding: 25px;
        margin: 20px 0;
        display: none;
        text-align: left;
      }

      .answer-section.show {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .german-answer {
        font-size: 1.8em;
        color: #007bff;
        font-weight: 600;
        margin-bottom: 20px;
        text-align: center;
        padding: 15px;
        background: #e3f2fd;
        border-radius: 10px;
      }

      .grammar-analysis {
        background: #f8f9fa;
        border-radius: 10px;
        padding: 20px;
        margin: 15px 0;
        border-left: 4px solid #007bff;
      }

      .grammar-analysis h4 {
        color: #007bff;
        margin-bottom: 15px;
        font-size: 1.3em;
      }

      .sentence-structure {
        background: #fff3cd;
        border: 1px solid #ffeaa7;
        border-radius: 8px;
        padding: 15px;
        margin: 10px 0;
        font-family: "Courier New", monospace;
        font-size: 1.1em;
        line-height: 1.6;
      }

      .word-analysis {
        display: grid;
        grid-template-columns: 1fr 1fr 1fr;
        gap: 10px;
        margin: 15px 0;
      }

      .word-box {
        background: #e8f5e8;
        border: 1px solid #27ae60;
        border-radius: 5px;
        padding: 8px;
        font-size: 0.9em;
        text-align: center;
      }

      .word-german {
        font-weight: bold;
        color: #2c3e50;
      }

      .word-type {
        color: #27ae60;
        font-size: 0.8em;
      }

      .word-meaning {
        color: #7f8c8d;
        font-size: 0.8em;
      }

      .grammar-tip {
        background: #e3f2fd;
        border-left: 4px solid #2196f3;
        padding: 15px;
        margin: 15px 0;
        border-radius: 8px;
        font-size: 1em;
        color: #1565c0;
      }

      .case-explanation {
        background: #f3e5f5;
        border-left: 4px solid #9c27b0;
        padding: 15px;
        margin-top: 15px;
        border-radius: 8px;
        font-size: 0.95em;
        color: #6a1b9a;
      }

      .completion-screen {
        text-align: center;
        display: none;
      }

      .completion-screen.show {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      .completion-emoji {
        font-size: 5em;
        margin: 20px 0;
      }

      .result-success {
        color: #28a745;
      }
      .result-failure {
        color: #dc3545;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 20px;
        margin: 30px 0;
      }

      .stat-item {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        padding: 20px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .section-selector {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin: 30px 0;
      }

      .section-card {
        background: rgba(255, 255, 255, 0.2);
        border-radius: 15px;
        padding: 25px;
        backdrop-filter: blur(10px);
        border: 2px solid rgba(255, 255, 255, 0.3);
        cursor: pointer;
        transition: all 0.3s ease;
        text-align: center;
      }

      .section-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
      }

      .section-card h4 {
        font-size: 1.5em;
        margin-bottom: 10px;
        color: #ff6b6b;
      }

      .section-card p {
        margin: 5px 0;
        opacity: 0.9;
      }

      @media (max-width: 768px) {
        .header h1 {
          font-size: 2em;
        }
        .vietnamese-sentence {
          font-size: 1.5em;
        }
        .controls {
          flex-direction: column;
          align-items: center;
        }
        .btn {
          width: 80%;
          max-width: 300px;
        }
        .stats-row {
          grid-template-columns: 1fr 1fr;
          gap: 10px;
        }
        .section-selector {
          grid-template-columns: 1fr;
          gap: 15px;
        }
        .word-analysis {
          grid-template-columns: 1fr;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>ğŸ§ Modelltest 3 Teil 1</h1>
        <p>32 cÃ¢u chuáº©n tá»« bÃ i kiá»ƒm tra tiáº¿ng Äá»©c - 3 phÃºt</p>
        <div class="section-info">
          <h3>ğŸ“š Cáº¥u trÃºc bÃ i há»c</h3>
          <p>
            <strong>VÃ­ dá»¥:</strong> 8 cÃ¢u | <strong>Dialog 1:</strong> 8 cÃ¢u |
            <strong>Dialog 2:</strong> 9 cÃ¢u | <strong>Dialog 3:</strong> 7 cÃ¢u
          </p>
        </div>
      </div>

      <div class="content">
        <!-- Section Selection Screen -->
        <div class="practice-card" id="selection-screen">
          <div class="instructions">
            <h3>ğŸ“– HÆ°á»›ng dáº«n luyá»‡n táº­p</h3>
            <ul>
              <li>32 cÃ¢u Ä‘Æ°á»£c láº¥y chÃ­nh xÃ¡c tá»« Modelltest 3 Teil 1</li>
              <li>Thá»i gian: 3 phÃºt cho toÃ n bá»™ bÃ i</li>
              <li>Nghe cÃ¢u tiáº¿ng Viá»‡t â†’ NghÄ© cÃ¢u tiáº¿ng Äá»©c â†’ ÄÃ¡nh giÃ¡</li>
              <li>Xem Ä‘Ã¡p Ã¡n vá»›i phÃ¢n tÃ­ch ngá»¯ phÃ¡p chi tiáº¿t</li>
              <li>
                PhÃ­m táº¯t: Space (nghe láº¡i), 1 (Ä‘Ãºng), 2 (sai), Enter (tiáº¿p)
              </li>
            </ul>
          </div>

          <div class="section-selector">
            <div class="section-card" onclick="startSection(0)">
              <h4>ğŸ“ VÃ­ dá»¥</h4>
              <p><strong>8 cÃ¢u vá» ká»³ nghá»‰</strong></p>
              <p>Habt ihr ein GlÃ¼ck!</p>
            </div>
            <div class="section-card" onclick="startSection(1)">
              <h4>ğŸ½ï¸ Dialog 1</h4>
              <p><strong>8 cÃ¢u á»Ÿ nhÃ  hÃ ng</strong></p>
              <p>Guten Tag, haben Sie schon gewÃ¤hlt?</p>
            </div>
            <div class="section-card" onclick="startSection(2)">
              <h4>ğŸ‘§ Dialog 2</h4>
              <p><strong>9 cÃ¢u vá» con gÃ¡i</strong></p>
              <p>Hallo Sonja! Sag mal...</p>
            </div>
          </div>

          <div class="section-selector">
            <div class="section-card" onclick="startSection(3)">
              <h4>ğŸ¬ Dialog 3</h4>
              <p><strong>7 cÃ¢u vá» káº¿ hoáº¡ch tá»‘i</strong></p>
              <p>Sag mal Eva, was machst du heute Abend?</p>
            </div>
          </div>

          <div class="controls">
            <button class="btn" onclick="startAllSections()">
              ğŸš€ LÃ m toÃ n bá»™ 32 cÃ¢u (3 phÃºt)
            </button>
            <button class="btn btn-secondary" onclick="showPreview()">
              ğŸ‘€ Xem trÆ°á»›c 32 cÃ¢u
            </button>
          </div>
        </div>

        <!-- Practice Screen -->
        <div class="practice-card" id="practice-section" style="display: none">
          <div class="section-counter" id="section-info">VÃ­ dá»¥: Vá» ká»³ nghá»‰</div>

          <div class="stats-row">
            <div class="stat-box">
              <div class="stat-number" id="timer">01:30</div>
              <div class="stat-label">â° Thá»i gian</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="correct-count">0</div>
              <div class="stat-label">âœ… CÃ¢u Ä‘Ãºng</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="total-answered">0</div>
              <div class="stat-label">ğŸ“ ÄÃ£ lÃ m</div>
            </div>
            <div class="stat-box">
              <div class="stat-number" id="current-section">1/4</div>
              <div class="stat-label">ğŸ“š Pháº§n hiá»‡n táº¡i</div>
            </div>
          </div>

          <div class="sentence-counter" id="counter">CÃ¢u 1 / 8</div>

          <div class="progress-bar">
            <div
              class="progress-fill"
              id="progress"
              style="width: 3.125%"
            ></div>
          </div>

          <div class="vietnamese-sentence" id="vietnamese-text">
            Nháº¥n "Báº¯t Ä‘áº§u" Ä‘á»ƒ báº¯t Ä‘áº§u luyá»‡n táº­p
          </div>

          <div class="controls">
            <button
              class="btn btn-secondary"
              id="speak-btn"
              onclick="speakVietnamese()"
              style="display: none"
            >
              ğŸ”Š PhÃ¡t Ã¢m
            </button>
            <button
              class="btn btn-correct"
              id="correct-btn"
              onclick="markAnswer(true)"
              style="display: none"
            >
              âœ… Hiá»ƒu & ÄÃºng
            </button>
            <button
              class="btn btn-incorrect"
              id="incorrect-btn"
              onclick="markAnswer(false)"
              style="display: none"
            >
              âŒ ChÆ°a hiá»ƒu
            </button>
            <button
              class="btn"
              id="next-btn"
              onclick="nextSentence()"
              style="display: none"
            >
              â¡ï¸ CÃ¢u tiáº¿p theo
            </button>
          </div>

          <div class="answer-section" id="answer-section">
            <div class="german-answer" id="german-answer"></div>

            <div class="grammar-analysis">
              <h4>ğŸ“ PhÃ¢n tÃ­ch cáº¥u trÃºc cÃ¢u</h4>
              <div class="sentence-structure" id="sentence-structure"></div>
              <div class="word-analysis" id="word-analysis"></div>
            </div>

            <div class="grammar-tip" id="grammar-tip"></div>
            <div class="case-explanation" id="case-explanation"></div>
          </div>
        </div>

        <!-- Completion Screen -->
        <div class="practice-card completion-screen" id="completion-screen">
          <div class="completion-emoji" id="result-emoji">ğŸ‰</div>
          <h2 id="result-title">HoÃ n thÃ nh!</h2>
          <p style="font-size: 1.3em; margin: 20px 0" id="result-message">
            Káº¿t quáº£ sáº½ hiá»ƒn thá»‹ á»Ÿ Ä‘Ã¢y
          </p>

          <div class="stats-grid">
            <div class="stat-item">
              <div class="stat-number" id="final-correct">0</div>
              <div class="stat-label">Tá»•ng cÃ¢u Ä‘Ãºng</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="final-answered">0</div>
              <div class="stat-label">Tá»•ng Ä‘Ã£ lÃ m</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="final-accuracy">0%</div>
              <div class="stat-label">Äá»™ chÃ­nh xÃ¡c</div>
            </div>
            <div class="stat-item">
              <div class="stat-number" id="final-time">00:00</div>
              <div class="stat-label">Thá»i gian Ä‘Ã£ dÃ¹ng</div>
            </div>
          </div>

          <div class="controls">
            <button class="btn" onclick="resetPractice()">ğŸ”„ LÃ m láº¡i</button>
            <button class="btn btn-secondary" onclick="shuffleAndRestart()">
              ğŸ² Trá»™n cÃ¢u & LÃ m láº¡i
            </button>
          </div>
        </div>

        <!-- Preview Screen -->
        <div class="practice-card completion-screen" id="preview-screen">
          <div class="completion-emoji">ğŸ“š</div>
          <h2 style="color: #667eea; margin-bottom: 30px">
            Xem trÆ°á»›c 32 cÃ¢u chuáº©n
          </h2>

          <div
            style="
              max-height: 500px;
              overflow-y: auto;
              margin: 20px 0;
              padding: 20px;
              background: rgba(255, 255, 255, 0.1);
              border-radius: 15px;
            "
          >
            <div id="preview-content"></div>
          </div>

          <div class="controls">
            <button class="btn" onclick="hidePreview()">â¬…ï¸ Quay láº¡i</button>
            <button class="btn btn-secondary" onclick="hidePreviewAndStart()">
              ğŸš€ Báº¯t Ä‘áº§u luyá»‡n táº­p
            </button>
          </div>
        </div>
      </div>
    </div>

    <script>
      // 32 cÃ¢u chuáº©n tá»« Modelltest 3 Teil 1 vá»›i phÃ¢n tÃ­ch ngá»¯ phÃ¡p chi tiáº¿t
      const practiceData = [
        // VÃ Dá»¤: Vá»€ Ká»² NGHá»ˆ (8 cÃ¢u)
        [
          {
            vietnamese: "CÃ¡c báº¡n tháº­t may máº¯n!",
            german: "Habt ihr ein GlÃ¼ck!",
            tip: "ğŸ€ 'GlÃ¼ck haben' = may máº¯n. ThÃ¡n tá»« thá»ƒ hiá»‡n sá»± ngÆ°á»¡ng má»™",
            explanation:
              "'Habt ihr' = cÃ¡c báº¡n cÃ³. 'ein GlÃ¼ck' = má»™t may máº¯n. CÃ¢u cáº£m thÃ¡n thá»ƒ hiá»‡n sá»± ghen tá»‹ tÃ­ch cá»±c.",
            structure:
              "Habt   ihr   ein GlÃ¼ck!\n  â†‘     â†‘       â†‘\n V1    1    Akk (TÃ¢n ngá»¯)",
            analysis: [
              {
                word: "Habt",
                type: "Äá»™ng tá»« V1",
                meaning: "cÃ³ (cÃ¢u há»i/cáº£m thÃ¡n)",
              },
              { word: "ihr", type: "Chá»§ ngá»¯", meaning: "cÃ¡c báº¡n" },
              {
                word: "ein GlÃ¼ck",
                type: "TÃ¢n ngá»¯ (Akk)",
                meaning: "má»™t may máº¯n",
              },
            ],
            grammarType: "CÃ¢u cáº£m thÃ¡n vá»›i 'haben'",
          },
          {
            vietnamese: "Thá»i tiáº¿t tuyá»‡t vá»i vÃ  ngÃ y mai cÃ¡c báº¡n Ä‘i du lá»‹ch.",
            german: "Tolles Wetter und morgen fahrt ihr weg.",
            tip: "â˜€ï¸ 'tolles Wetter' = thá»i tiáº¿t tuyá»‡t. 'wegfahren' = Ä‘i du lá»‹ch",
            explanation:
              "'Toll' = tuyá»‡t vá»i. 'wegfahren' lÃ  Ä‘á»™ng tá»« tÃ¡ch, 'weg' Ä‘á»©ng cuá»‘i cÃ¢u.",
            structure:
              "Tolles Wetter   und   morgen   fahrt   ihr   weg\n      â†‘         â†‘       â†‘       â†‘      â†‘     â†‘\n   Nominativ   LiÃªn tá»«   Te     V2     1   Äá»™ng tá»« tÃ¡ch",
            analysis: [
              {
                word: "Tolles Wetter",
                type: "Chá»§ ngá»¯ (Nom)",
                meaning: "thá»i tiáº¿t tuyá»‡t vá»i",
              },
              { word: "und", type: "LiÃªn tá»«", meaning: "vÃ " },
              { word: "morgen", type: "Te (thá»i gian)", meaning: "ngÃ y mai" },
              { word: "fahrt", type: "Äá»™ng tá»« V2", meaning: "Ä‘i" },
              { word: "ihr", type: "Chá»§ ngá»¯", meaning: "cÃ¡c báº¡n" },
              { word: "weg", type: "Äá»™ng tá»« tÃ¡ch", meaning: "Ä‘i xa" },
            ],
            grammarType: "CÃ¢u phá»©c vá»›i Ä‘á»™ng tá»« tÃ¡ch rá»i",
          },
          {
            vietnamese: "VÃ¢ng, tÃ´i Ä‘Ã£ ráº¥t mong chá» ká»³ nghá»‰ nÃ y.",
            german: "Ja, ich freue mich schon so auf den Urlaub.",
            tip: "ğŸ˜Š 'sich freuen auf' = mong chá». 'schon' = Ä‘Ã£",
            explanation:
              "'sich freuen auf + Akkusativ' = mong chá» Ä‘iá»u gÃ¬. 'so' = ráº¥t/nhÆ° váº­y.",
            structure:
              "Ja,   ich   freue   mich   schon   so   auf den Urlaub\n â†‘     â†‘      â†‘       â†‘       â†‘     â†‘         â†‘\nThÃ¡n   1     V2    Ref    Bá»• nghÄ©a Bá»•  Cá»¥m giá»›i tá»«",
            analysis: [
              { word: "Ja", type: "ThÃ¡n tá»«", meaning: "vÃ¢ng" },
              { word: "ich", type: "Chá»§ ngá»¯", meaning: "tÃ´i" },
              {
                word: "freue mich",
                type: "Äá»™ng tá»« pháº£n thÃ¢n",
                meaning: "vui/mong chá»",
              },
              { word: "schon", type: "Bá»• nghÄ©a", meaning: "Ä‘Ã£" },
              { word: "so", type: "Bá»• nghÄ©a", meaning: "nhÆ° váº­y" },
              {
                word: "auf den Urlaub",
                type: "Cá»¥m giá»›i tá»«",
                meaning: "cho ká»³ nghá»‰",
              },
            ],
            grammarType: "Äá»™ng tá»« pháº£n thÃ¢n + giá»›i tá»«",
          },
          {
            vietnamese: "CÃ¡c báº¡n láº¡i bay Ä‘áº¿n Berlin hay láº§n nÃ y dÃ¹ng Ã´ tÃ´?",
            german:
              "Fliegt ihr wieder nach Berlin oder nehmt ihr dieses Mal das Auto?",
            tip: "âœˆï¸ğŸš— 'wieder' = láº¡i. 'dieses Mal' = láº§n nÃ y",
            explanation:
              "'wieder' = má»™t láº§n ná»¯a. 'dieses Mal' = láº§n nÃ y. CÃ¢u há»i lá»±a chá»n vá»›i 'oder'.",
            structure:
              "Fliegt   ihr   wieder   nach Berlin   oder   nehmt   ihr   dieses Mal   das Auto?\n   â†‘      â†‘      â†‘          â†‘         â†‘       â†‘      â†‘        â†‘          â†‘\n  V1     1    Bá»• nghÄ©a     Lo      LiÃªn tá»«   V1     1       Te        Akk",
            analysis: [
              { word: "Fliegt", type: "Äá»™ng tá»« V1", meaning: "bay" },
              { word: "ihr", type: "Chá»§ ngá»¯", meaning: "cÃ¡c báº¡n" },
              { word: "wieder", type: "Bá»• nghÄ©a", meaning: "láº¡i" },
              {
                word: "nach Berlin",
                type: "Lo (hÆ°á»›ng)",
                meaning: "Ä‘áº¿n Berlin",
              },
              { word: "oder", type: "LiÃªn tá»«", meaning: "hoáº·c" },
              { word: "nehmt", type: "Äá»™ng tá»« V1", meaning: "láº¥y" },
              {
                word: "dieses Mal",
                type: "Te (thá»i gian)",
                meaning: "láº§n nÃ y",
              },
              { word: "das Auto", type: "TÃ¢n ngá»¯ (Akk)", meaning: "Ã´ tÃ´" },
            ],
            grammarType: "CÃ¢u há»i lá»±a chá»n vá»›i 'oder'",
          },
          {
            vietnamese: "KhÃ´ng, nÄƒm nay chÃºng tÃ´i Ä‘i tÃ u.",
            german: "Nein, dieses Jahr nehmen wir den Zug.",
            tip: "ğŸš† 'den Zug nehmen' = Ä‘i tÃ u. 'dieses Jahr' = nÄƒm nay",
            explanation:
              "ÄÃ¢y lÃ  cÃ¢u tráº£ lá»i Ä‘Ãºng trong bÃ i test. 'nehmen' = láº¥y/chá»n phÆ°Æ¡ng tiá»‡n.",
            structure:
              "Nein,   dieses Jahr   nehmen   wir   den Zug\n  â†‘         â†‘           â†‘       â†‘       â†‘\nThÃ¡n       Te          V2      1     Akk",
            analysis: [
              { word: "Nein", type: "ThÃ¡n tá»«", meaning: "khÃ´ng" },
              {
                word: "dieses Jahr",
                type: "Te (thá»i gian)",
                meaning: "nÄƒm nay",
              },
              { word: "nehmen", type: "Äá»™ng tá»« V2", meaning: "láº¥y/chá»n" },
              { word: "wir", type: "Chá»§ ngá»¯", meaning: "chÃºng tÃ´i" },
              { word: "den Zug", type: "TÃ¢n ngá»¯ (Akk)", meaning: "tÃ u há»a" },
            ],
            grammarType: "CÃ¢u vá»›i Ä‘áº£o ngá»¯ (Te lÃªn vá»‹ trÃ­ 1)",
          },
          {
            vietnamese: "CÃ¡c chuyáº¿n bay quÃ¡ Ä‘áº¯t.",
            german: "Die FlÃ¼ge waren zu teuer.",
            tip: "ğŸ’¸ 'zu teuer' = quÃ¡ Ä‘áº¯t. 'FlÃ¼ge' = sá»‘ nhiá»u cá»§a 'Flug'",
            explanation:
              "'waren' = Ä‘Ã£ lÃ  (quÃ¡ khá»© cá»§a sein). 'zu' = quÃ¡ (trÆ°á»›c tÃ­nh tá»«).",
            structure:
              "Die FlÃ¼ge   waren   zu teuer\n    â†‘        â†‘        â†‘\n    1       V2   TÃ­nh tá»« vá»‹ ngá»¯",
            analysis: [
              {
                word: "Die FlÃ¼ge",
                type: "Chá»§ ngá»¯ (Nom)",
                meaning: "cÃ¡c chuyáº¿n bay",
              },
              { word: "waren", type: "Äá»™ng tá»« V2", meaning: "Ä‘Ã£ lÃ " },
              { word: "zu teuer", type: "TÃ­nh tá»« vá»‹ ngá»¯", meaning: "quÃ¡ Ä‘áº¯t" },
            ],
            grammarType: "CÃ¢u vá»›i tÃ­nh tá»« vá»‹ ngá»¯ (quÃ¡ khá»©)",
          },
          {
            vietnamese: "ChÃºc ká»³ nghá»‰ vui váº»!",
            german: "Dann schÃ¶nen Urlaub!",
            tip: "ğŸ–ï¸ Lá»i chÃºc ngáº¯n gá»n: 'schÃ¶nen Urlaub!'",
            explanation:
              "CÃ¢u chÃºc rÃºt gá»n. Äáº§y Ä‘á»§: 'Ich wÃ¼nsche Ihnen einen schÃ¶nen Urlaub!'",
            structure:
              "Dann   schÃ¶nen Urlaub!\n  â†‘         â†‘\nBá»• nghÄ©a  Akk (rÃºt gá»n)",
            analysis: [
              { word: "Dann", type: "Bá»• nghÄ©a", meaning: "váº­y thÃ¬" },
              {
                word: "schÃ¶nen Urlaub",
                type: "Akk (rÃºt gá»n)",
                meaning: "ká»³ nghá»‰ vui váº»",
              },
            ],
            grammarType: "CÃ¢u chÃºc rÃºt gá»n (Ellipse)",
          },
          {
            vietnamese: "Cáº£m Æ¡n!",
            german: "Danke!",
            tip: "ğŸ™ 'Danke' = cáº£m Æ¡n. Ngáº¯n gá»n vÃ  thÃ¢n thiá»‡n",
            explanation:
              "CÃ¡ch cáº£m Æ¡n cÆ¡ báº£n nháº¥t trong tiáº¿ng Äá»©c. CÃ³ thá»ƒ nÃ³i 'Danke schÃ¶n!' Ä‘á»ƒ trang trá»ng hÆ¡n.",
            structure: "Danke!\n  â†‘\nThÃ¡n tá»«",
            analysis: [{ word: "Danke", type: "ThÃ¡n tá»«", meaning: "cáº£m Æ¡n" }],
            grammarType: "CÃ¢u má»™t tá»« (Einwortsatz)",
          },
        ],

        // DIALOG 1: á» NHÃ€ HÃ€NG (8 cÃ¢u)
        [
          {
            vietnamese: "ChÃ o báº¡n! Báº¡n Ä‘Ã£ chá»n mÃ³n chÆ°a?",
            german: "Guten Tag! Haben Sie schon gewÃ¤hlt?",
            tip: "ğŸ½ï¸ 'gewÃ¤hlt' = Ä‘Ã£ chá»n (tá»« Ä‘á»™ng tá»« 'wÃ¤hlen')",
            explanation:
              "'wÃ¤hlen' = chá»n. Perfekt: haben + gewÃ¤hlt. CÃ¢u há»i lá»‹ch sá»± cá»§a nhÃ¢n viÃªn phá»¥c vá»¥.",
            structure:
              "Guten Tag!   Haben   Sie   schon   gewÃ¤hlt?\n     â†‘         â†‘      â†‘      â†‘        â†‘\nLá»i chÃ o     V1     1   Bá»• nghÄ©a  QuÃ¡ khá»© phÃ¢n tá»«",
            analysis: [
              { word: "Guten Tag", type: "Lá»i chÃ o", meaning: "chÃ o báº¡n" },
              { word: "Haben", type: "Äá»™ng tá»« V1", meaning: "cÃ³/Ä‘Ã£" },
              { word: "Sie", type: "Chá»§ ngá»¯", meaning: "báº¡n (trang trá»ng)" },
              { word: "schon", type: "Bá»• nghÄ©a", meaning: "Ä‘Ã£" },
              { word: "gewÃ¤hlt", type: "QuÃ¡ khá»© phÃ¢n tá»«", meaning: "chá»n" },
            ],
            grammarType: "CÃ¢u há»i vá»›i thÃ¬ Perfekt",
          },
          {
            vietnamese: "Hmm, báº¡n cÃ³ thá»ƒ khuyÃªn gÃ¬?",
            german: "Hm, was kÃ¶nnen Sie empfehlen?",
            tip: "ğŸ¤” 'empfehlen' = khuyÃªn/giá»›i thiá»‡u. 'kÃ¶nnen' = cÃ³ thá»ƒ",
            explanation:
              "'empfehlen' = Ä‘á» xuáº¥t. CÃ¡ch há»i gá»£i Ã½ tá»« nhÃ¢n viÃªn má»™t cÃ¡ch lá»‹ch sá»±.",
            structure:
              "Hm,   was   kÃ¶nnen   Sie   empfehlen?\n â†‘     â†‘      â†‘       â†‘        â†‘\nThÃ¡n  W-Wort  V1     1    Äá»™ng tá»« nguyÃªn máº«u",
            analysis: [
              { word: "Hm", type: "ThÃ¡n tá»«", meaning: "hmm" },
              { word: "was", type: "Tá»« Ä‘á»ƒ há»i", meaning: "gÃ¬" },
              { word: "kÃ¶nnen", type: "Äá»™ng tá»« V1", meaning: "cÃ³ thá»ƒ" },
              { word: "Sie", type: "Chá»§ ngá»¯", meaning: "báº¡n" },
              {
                word: "empfehlen",
                type: "Äá»™ng tá»« nguyÃªn máº«u",
                meaning: "khuyÃªn",
              },
            ],
            grammarType: "CÃ¢u há»i W- vá»›i Ä‘á»™ng tá»« khiáº¿m khuyáº¿t",
          },
          {
            vietnamese: "Báº¡n cÃ³ cÃ¡ tÆ°Æ¡i khÃ´ng?",
            german: "Haben Sie frischen Fisch?",
            tip: "ğŸŸ 'frisch' = tÆ°Æ¡i. 'Fisch' = cÃ¡ (danh tá»« nam tÃ­nh)",
            explanation:
              "'frischen' = tÆ°Æ¡i (tÃ­nh tá»« biáº¿n Ä‘á»•i theo Akkusativ). CÃ¢u há»i vá» sáº£n pháº©m cÃ³ sáºµn.",
            structure:
              "Haben   Sie   frischen Fisch?\n  â†‘      â†‘         â†‘\n V1     1       Akk",
            analysis: [
              { word: "Haben", type: "Äá»™ng tá»« V1", meaning: "cÃ³" },
              { word: "Sie", type: "Chá»§ ngá»¯", meaning: "báº¡n" },
              {
                word: "frischen Fisch",
                type: "TÃ¢n ngá»¯ (Akk)",
                meaning: "cÃ¡ tÆ°Æ¡i",
              },
            ],
            grammarType: "CÃ¢u há»i Yes/No vá»›i 'haben'",
          },
          {
            vietnamese: "KhÃ´ng, hÃ´m nay tiáº¿c lÃ  khÃ´ng cÃ³.",
            german: "Nein, heute leider nicht.",
            tip: "ğŸ˜” 'leider' = tiáº¿c lÃ /ráº¥t tiáº¿c. Thá»ƒ hiá»‡n sá»± tiáº¿c nuá»‘i",
            explanation:
              "'leider' thá»ƒ hiá»‡n sá»± tiáº¿c nuá»‘i. CÃ¢u tráº£ lá»i ngáº¯n gá»n khi khÃ´ng cÃ³ sáº£n pháº©m.",
            structure:
              "Nein,   heute   leider   nicht\n  â†‘       â†‘        â†‘       â†‘\nThÃ¡n     Te   Bá»• nghÄ©a  Phá»§ Ä‘á»‹nh",
            analysis: [
              { word: "Nein", type: "ThÃ¡n tá»«", meaning: "khÃ´ng" },
              { word: "heute", type: "Te (thá»i gian)", meaning: "hÃ´m nay" },
              { word: "leider", type: "Bá»• nghÄ©a", meaning: "tiáº¿c lÃ " },
              { word: "nicht", type: "Phá»§ Ä‘á»‹nh", meaning: "khÃ´ng" },
            ],
            grammarType: "CÃ¢u tráº£ lá»i rÃºt gá»n vá»›i 'leider'",
          },
          {
            vietnamese: "NhÆ°ng chÃºng tÃ´i cÃ³ sÃºp cÃ¡ ráº¥t ngon.",
            german: "Aber wir haben eine sehr gute Fischsuppe.",
            tip: "ğŸ² 'Fischsuppe' = sÃºp cÃ¡. 'sehr gut' = ráº¥t ngon",
            explanation:
              "'aber' = nhÆ°ng. Äá» xuáº¥t mÃ³n thay tháº¿ khi khÃ´ng cÃ³ mÃ³n khÃ¡ch yÃªu cáº§u.",
            structure:
              "Aber   wir   haben   eine sehr gute Fischsuppe\n  â†‘     â†‘      â†‘              â†‘\nLiÃªn tá»«  1     V2           Akk",
            analysis: [
              { word: "Aber", type: "LiÃªn tá»«", meaning: "nhÆ°ng" },
              { word: "wir", type: "Chá»§ ngá»¯", meaning: "chÃºng tÃ´i" },
              { word: "haben", type: "Äá»™ng tá»« V2", meaning: "cÃ³" },
              {
                word: "eine sehr gute Fischsuppe",
                type: "TÃ¢n ngá»¯ (Akk)",
                meaning: "má»™t sÃºp cÃ¡ ráº¥t ngon",
              },
            ],
            grammarType: "CÃ¢u vá»›i liÃªn tá»« Ä‘á»‘i láº­p 'aber'",
          },
          {
            vietnamese: "VÃ  cÃ³ láº½ kÃ¨m theo má»™t mÃ³n salad?",
            german: "Und dazu vielleicht einen Salat?",
            tip: "ğŸ¥— 'dazu' = kÃ¨m theo. 'vielleicht' = cÃ³ láº½/cÃ³ thá»ƒ",
            explanation:
              "'dazu' = cÃ¹ng vá»›i Ä‘Ã³. Gá»£i Ã½ mÃ³n Äƒn kÃ¨m má»™t cÃ¡ch lá»‹ch sá»± vá»›i 'vielleicht'.",
            structure:
              "Und   dazu   vielleicht   einen Salat?\n â†‘     â†‘         â†‘            â†‘\nLiÃªn tá»« Bá»• nghÄ©a  Bá»• nghÄ©a    Akk (rÃºt gá»n)",
            analysis: [
              { word: "Und", type: "LiÃªn tá»«", meaning: "vÃ " },
              { word: "dazu", type: "Bá»• nghÄ©a", meaning: "kÃ¨m theo" },
              { word: "vielleicht", type: "Bá»• nghÄ©a", meaning: "cÃ³ láº½" },
              {
                word: "einen Salat",
                type: "Akk (rÃºt gá»n)",
                meaning: "má»™t mÃ³n salad",
              },
            ],
            grammarType: "CÃ¢u há»i rÃºt gá»n vá»›i 'vielleicht'",
          },
          {
            vietnamese: "Hmm, tÃ´i láº¥y sÃºp cÃ¡, nhÆ°ng xin Ä‘á»«ng salad.",
            german:
              "Hm, die Fischsuppe nehme ich gern, aber bitte keinen Salat.",
            tip: "âœ…âŒ 'gern nehmen' = sáºµn lÃ²ng láº¥y. 'keinen' = khÃ´ng (Akkusativ)",
            explanation:
              "ÄÃ¢y lÃ  cÃ¢u tráº£ lá»i Ä‘Ãºng. 'gern' thá»ƒ hiá»‡n sá»± sáºµn lÃ²ng. 'keinen' phá»§ Ä‘á»‹nh trong Akkusativ.",
            structure:
              "Hm,   die Fischsuppe   nehme   ich   gern,   aber   bitte   keinen Salat\n â†‘          â†‘            â†‘      â†‘     â†‘      â†‘       â†‘         â†‘\nThÃ¡n      Akk          V2     1   Bá»• nghÄ©a LiÃªn tá»« Bá»• nghÄ©a  Akk (phá»§ Ä‘á»‹nh)",
            analysis: [
              { word: "Hm", type: "ThÃ¡n tá»«", meaning: "hmm" },
              {
                word: "die Fischsuppe",
                type: "TÃ¢n ngá»¯ (Akk)",
                meaning: "sÃºp cÃ¡",
              },
              { word: "nehme", type: "Äá»™ng tá»« V2", meaning: "láº¥y" },
              { word: "ich", type: "Chá»§ ngá»¯", meaning: "tÃ´i" },
              { word: "gern", type: "Bá»• nghÄ©a", meaning: "sáºµn lÃ²ng" },
              { word: "aber", type: "LiÃªn tá»«", meaning: "nhÆ°ng" },
              { word: "bitte", type: "Bá»• nghÄ©a", meaning: "xin" },
              {
                word: "keinen Salat",
                type: "Akk (phá»§ Ä‘á»‹nh)",
                meaning: "khÃ´ng salad",
              },
            ],
            grammarType: "CÃ¢u phá»©c vá»›i Ä‘áº£o ngá»¯ vÃ  phá»§ Ä‘á»‹nh",
          },
          {
            vietnamese: "VÃ  Ä‘á»ƒ uá»‘ng cÃ³ thá»ƒ má»™t ly rÆ°á»£u vang tráº¯ng?",
            german: "Und zu trinken vielleicht ein Glas WeiÃŸwein?",
            tip: "ğŸ· 'zu trinken' = Ä‘á»ƒ uá»‘ng. 'WeiÃŸwein' = rÆ°á»£u vang tráº¯ng",
            explanation:
              "'zu trinken' = cho viá»‡c uá»‘ng. Gá»£i Ã½ Ä‘á»“ uá»‘ng phÃ¹ há»£p vá»›i mÃ³n Äƒn.",
            structure:
              "Und   zu trinken   vielleicht   ein Glas WeiÃŸwein?\n â†‘        â†‘           â†‘              â†‘\nLiÃªn tá»« Cá»¥m má»¥c Ä‘Ã­ch  Bá»• nghÄ©a     Akk (rÃºt gá»n)",
            analysis: [
              { word: "Und", type: "LiÃªn tá»«", meaning: "vÃ " },
              { word: "zu trinken", type: "Cá»¥m má»¥c Ä‘Ã­ch", meaning: "Ä‘á»ƒ uá»‘ng" },
              { word: "vielleicht", type: "Bá»• nghÄ©a", meaning: "cÃ³ láº½" },
              {
                word: "ein Glas WeiÃŸwein",
                type: "Akk (rÃºt gá»n)",
                meaning: "má»™t ly rÆ°á»£u vang tráº¯ng",
              },
            ],
            grammarType: "CÃ¢u há»i gá»£i Ã½ vá»›i 'zu + Infinitiv'",
          },
        ],

        // DIALOG 2: Vá»€ CON GÃI (9 cÃ¢u)
        [
          {
            vietnamese: "ChÃ o Sonja! Nghe nÃ y,",
            german: "Hallo Sonja! Sag mal,",
            tip: "ğŸ‘‹ 'Sag mal' = nghe nÃ y/nÃ³i Ä‘i. CÃ¡ch báº¯t Ä‘áº§u cÃ¢u chuyá»‡n",
            explanation:
              "'Sag mal' lÃ  cÃ¡ch thÃ¢n thiá»‡n Ä‘á»ƒ báº¯t Ä‘áº§u má»™t cÃ¢u há»i hoáº·c chá»§ Ä‘á» má»›i.",
            structure:
              "Hallo Sonja!   Sag   mal,\n     â†‘          â†‘     â†‘\nLá»i chÃ o    Má»‡nh lá»‡nh Tá»« tÃ¬nh thÃ¡i",
            analysis: [
              { word: "Hallo Sonja", type: "Lá»i chÃ o", meaning: "chÃ o Sonja" },
              { word: "Sag", type: "Má»‡nh lá»‡nh", meaning: "nÃ³i" },
              { word: "mal", type: "Tá»« tÃ¬nh thÃ¡i", meaning: "má»™t chÃºt/Ä‘i" },
            ],
            grammarType: "Lá»i chÃ o + má»‡nh lá»‡nh thÃ¢n thiá»‡n",
          },
          {
            vietnamese: "con gÃ¡i báº¡n bao nhiÃªu tuá»•i?",
            german: "wie alt ist deine Tochter?",
            tip: "ğŸ‘§ 'wie alt' = bao nhiÃªu tuá»•i. 'Tochter' = con gÃ¡i",
            explanation:
              "'wie alt' dÃ¹ng Ä‘á»ƒ há»i tuá»•i. 'deine' = cá»§a báº¡n (sá»Ÿ há»¯u cÃ¡ch thÃ¢n thiá»‡n).",
            structure:
              "wie alt   ist   deine Tochter?\n   â†‘      â†‘         â†‘\nW-Wort   V2        1",
            analysis: [
              { word: "wie alt", type: "Tá»« Ä‘á»ƒ há»i", meaning: "bao nhiÃªu tuá»•i" },
              { word: "ist", type: "Äá»™ng tá»« V2", meaning: "lÃ " },
              {
                word: "deine Tochter",
                type: "Chá»§ ngá»¯",
                meaning: "con gÃ¡i cá»§a báº¡n",
              },
            ],
            grammarType: "CÃ¢u há»i W- vá»›i 'wie alt'",
          },
          {
            vietnamese: "Anja bÃ¢y giá» 7 tuá»•i.",
            german: "Anja ist jetzt 7 Jahre alt.",
            tip: "7ï¸âƒ£ 'Jahre alt' = tuá»•i. 'jetzt' = bÃ¢y giá»",
            explanation:
              "'Jahre alt' = tuá»•i. 'jetzt' nháº¥n máº¡nh thá»i Ä‘iá»ƒm hiá»‡n táº¡i.",
            structure:
              "Anja   ist   jetzt   7 Jahre alt\n  â†‘     â†‘      â†‘         â†‘\n  1    V2     Te    TÃ­nh tá»« vá»‹ ngá»¯",
            analysis: [
              { word: "Anja", type: "Chá»§ ngá»¯", meaning: "Anja" },
              { word: "ist", type: "Äá»™ng tá»« V2", meaning: "lÃ " },
              { word: "jetzt", type: "Te (thá»i gian)", meaning: "bÃ¢y giá»" },
              {
                word: "7 Jahre alt",
                type: "TÃ­nh tá»« vá»‹ ngá»¯",
                meaning: "7 tuá»•i",
              },
            ],
            grammarType: "CÃ¢u vá»›i tÃ­nh tá»« vá»‹ ngá»¯ (tuá»•i)",
          },
          {
            vietnamese: "7 tuá»•i?",
            german: "7 Jahre?",
            tip: "â“ CÃ¢u há»i ngáº¯n thá»ƒ hiá»‡n sá»± ngáº¡c nhiÃªn",
            explanation:
              "CÃ¢u há»i láº·p láº¡i Ä‘á»ƒ xÃ¡c nháº­n hoáº·c thá»ƒ hiá»‡n sá»± ngáº¡c nhiÃªn.",
            structure: "7 Jahre?\n   â†‘\nCÃ¢u há»i rÃºt gá»n",
            analysis: [
              { word: "7 Jahre", type: "CÃ¢u há»i rÃºt gá»n", meaning: "7 tuá»•i" },
            ],
            grammarType: "CÃ¢u há»i láº·p láº¡i (Echo-Frage)",
          },
          {
            vietnamese: "Váº­y thÃ¬ cÃ´ bÃ© Ä‘Ã£ Ä‘i há»c rá»“i.",
            german: "Dann geht sie ja schon in die Schule.",
            tip: "ğŸ« 'in die Schule gehen' = Ä‘i há»c. 'ja' = thÃ¬/Ä‘Ã£",
            explanation:
              "'dann' = váº­y thÃ¬. 'ja' trong cÃ¢u nÃ y mang nghÄ©a 'Ä‘Ã£'. Suy luáº­n logic tá»« tuá»•i.",
            structure:
              "Dann   geht   sie   ja   schon   in die Schule\n  â†‘     â†‘     â†‘    â†‘     â†‘         â†‘\n  1    V2    3   Tá»« tÃ¬nh thÃ¡i Bá»• nghÄ©a    Lo",
            analysis: [
              { word: "Dann", type: "Bá»• nghÄ©a (Vá»‹ trÃ­ 1)", meaning: "váº­y thÃ¬" },
              { word: "geht", type: "Äá»™ng tá»« V2", meaning: "Ä‘i" },
              { word: "sie", type: "Chá»§ ngá»¯", meaning: "cÃ´ bÃ©" },
              { word: "ja", type: "Tá»« tÃ¬nh thÃ¡i", meaning: "Ä‘Ã£/thÃ¬" },
              { word: "schon", type: "Bá»• nghÄ©a", meaning: "Ä‘Ã£" },
              {
                word: "in die Schule",
                type: "Lo (hÆ°á»›ng)",
                meaning: "Ä‘áº¿n trÆ°á»ng",
              },
            ],
            grammarType: "CÃ¢u vá»›i Ä‘áº£o ngá»¯ vÃ  tá»« tÃ¬nh thÃ¡i",
          },
          {
            vietnamese: "VÃ  cÃ´ bÃ© há»c lá»›p nÃ o?",
            german: "Und in welche Klasse geht sie?",
            tip: "ğŸ“š 'welche Klasse' = lá»›p nÃ o. 'gehen in' = há»c á»Ÿ",
            explanation:
              "'welche' = nÃ o (dÃ nh cho danh tá»« ná»¯ tÃ­nh). CÃ¢u há»i vá» cáº¥p Ä‘á»™ há»c táº­p.",
            structure:
              "Und   in welche Klasse   geht   sie?\n â†‘           â†‘            â†‘     â†‘\nLiÃªn tá»«  Cá»¥m giá»›i tá»«     V2    1",
            analysis: [
              { word: "Und", type: "LiÃªn tá»«", meaning: "vÃ " },
              {
                word: "in welche Klasse",
                type: "Cá»¥m giá»›i tá»«",
                meaning: "vÃ o lá»›p nÃ o",
              },
              { word: "geht", type: "Äá»™ng tá»« V2", meaning: "Ä‘i/há»c" },
              { word: "sie", type: "Chá»§ ngá»¯", meaning: "cÃ´ bÃ©" },
            ],
            grammarType: "CÃ¢u há»i W- vá»›i giá»›i tá»«",
          },
          {
            vietnamese: "Lá»›p 1 hay lá»›p 2?",
            german: "In die 1. oder die 2.?",
            tip: "1ï¸âƒ£2ï¸âƒ£ '1.' = erste (thá»© nháº¥t). '2.' = zweite (thá»© hai)",
            explanation:
              "CÃ¢u há»i lá»±a chá»n rÃºt gá»n. Äáº§y Ä‘á»§: 'In die erste oder die zweite Klasse?'",
            structure:
              "In die 1.   oder   die 2.?\n    â†‘        â†‘       â†‘\nCá»¥m giá»›i tá»« LiÃªn tá»« Cá»¥m giá»›i tá»« (rÃºt gá»n)",
            analysis: [
              { word: "In die 1.", type: "Cá»¥m giá»›i tá»«", meaning: "vÃ o lá»›p 1" },
              { word: "oder", type: "LiÃªn tá»«", meaning: "hoáº·c" },
              {
                word: "die 2.",
                type: "Cá»¥m giá»›i tá»« (rÃºt gá»n)",
                meaning: "lá»›p 2",
              },
            ],
            grammarType: "CÃ¢u há»i lá»±a chá»n rÃºt gá»n",
          },
          {
            vietnamese: "Anja bÃ¢y giá» há»c lá»›p 2.",
            german: "Anja ist jetzt in der 2. Klasse.",
            tip: "âœ… 'in der 2. Klasse' = á»Ÿ lá»›p 2. ÄÃ¢y lÃ  cÃ¢u tráº£ lá»i Ä‘Ãºng",
            explanation:
              "ÄÃ¢y lÃ  cÃ¢u tráº£ lá»i Ä‘Ãºng trong bÃ i test. 'in der' + Dativ cho vá»‹ trÃ­.",
            structure:
              "Anja   ist   jetzt   in der 2. Klasse\n  â†‘     â†‘      â†‘           â†‘\n  1    V2     Te      Cá»¥m giá»›i tá»«",
            analysis: [
              { word: "Anja", type: "Chá»§ ngá»¯", meaning: "Anja" },
              { word: "ist", type: "Äá»™ng tá»« V2", meaning: "lÃ /á»Ÿ" },
              { word: "jetzt", type: "Te (thá»i gian)", meaning: "bÃ¢y giá»" },
              {
                word: "in der 2. Klasse",
                type: "Cá»¥m giá»›i tá»«",
                meaning: "á»Ÿ lá»›p 2",
              },
            ],
            grammarType: "CÃ¢u vá»›i 'sein' + giá»›i tá»« chá»‰ vá»‹ trÃ­",
          },
          {
            vietnamese: "VÃ  cÃ´ bÃ© ráº¥t thÃ­ch Ä‘i há»c.",
            german: "Und sie geht sehr gern in die Schule.",
            tip: "ğŸ˜Š 'sehr gern' = ráº¥t thÃ­ch. Thá»ƒ hiá»‡n sá»± yÃªu thÃ­ch",
            explanation:
              "'gern' vá»›i Ä‘á»™ng tá»« thá»ƒ hiá»‡n sá»Ÿ thÃ­ch. 'sehr' = ráº¥t, nháº¥n máº¡nh má»©c Ä‘á»™.",
            structure:
              "Und   sie   geht   sehr   gern   in die Schule\n â†‘     â†‘     â†‘      â†‘     â†‘         â†‘\nLiÃªn tá»« 1    V2   Bá»• nghÄ©a Bá»• nghÄ©a    Lo",
            analysis: [
              { word: "Und", type: "LiÃªn tá»«", meaning: "vÃ " },
              { word: "sie", type: "Chá»§ ngá»¯", meaning: "cÃ´ bÃ©" },
              { word: "geht", type: "Äá»™ng tá»« V2", meaning: "Ä‘i" },
              { word: "sehr", type: "Bá»• nghÄ©a", meaning: "ráº¥t" },
              { word: "gern", type: "Bá»• nghÄ©a", meaning: "thÃ­ch" },
              {
                word: "in die Schule",
                type: "Lo (hÆ°á»›ng)",
                meaning: "Ä‘áº¿n trÆ°á»ng",
              },
            ],
            grammarType: "CÃ¢u vá»›i 'gern' thá»ƒ hiá»‡n sá»Ÿ thÃ­ch",
          },
        ],

        // DIALOG 3: Vá»€ Káº¾ HOáº CH Tá»I (7 cÃ¢u)
        [
          {
            vietnamese: "Nghe nÃ y Eva, tá»‘i nay báº¡n lÃ m gÃ¬?",
            german: "Sag mal Eva, was machst du heute Abend?",
            tip: "ğŸŒ™ 'heute Abend' = tá»‘i nay. 'was machst du' = báº¡n lÃ m gÃ¬",
            explanation:
              "'Sag mal' = nghe nÃ y. CÃ¡ch há»i káº¿ hoáº¡ch má»™t cÃ¡ch thÃ¢n thiá»‡n.",
            structure:
              "Sag   mal   Eva,   was   machst   du   heute Abend?\n â†‘     â†‘     â†‘     â†‘       â†‘      â†‘        â†‘\nMá»‡nh lá»‡nh Tá»« tÃ¬nh thÃ¡i TÃªn W-Wort  V2     1       Te",
            analysis: [
              {
                word: "Sag mal",
                type: "Má»‡nh lá»‡nh thÃ¢n thiá»‡n",
                meaning: "nghe nÃ y",
              },
              { word: "Eva", type: "TÃªn", meaning: "Eva" },
              { word: "was", type: "Tá»« Ä‘á»ƒ há»i", meaning: "gÃ¬" },
              { word: "machst", type: "Äá»™ng tá»« V2", meaning: "lÃ m" },
              { word: "du", type: "Chá»§ ngá»¯", meaning: "báº¡n" },
              {
                word: "heute Abend",
                type: "Te (thá»i gian)",
                meaning: "tá»‘i nay",
              },
            ],
            grammarType: "CÃ¢u há»i W- vá»›i lá»i chÃ o thÃ¢n thiá»‡n",
          },
          {
            vietnamese: "ChÃºng ta cÃ³ muá»‘n xem phim khÃ´ng?",
            german: "Wollen wir einen Film sehen?",
            tip: "ğŸ¬ 'wollen wir' = chÃºng ta cÃ³ muá»‘n. Lá»i Ä‘á» nghá»‹",
            explanation:
              "'wollen wir' = shall we/cÃ³ muá»‘n khÃ´ng. CÃ¡ch Ä‘á» nghá»‹ hoáº¡t Ä‘á»™ng chung.",
            structure:
              "Wollen   wir   einen Film   sehen?\n   â†‘      â†‘        â†‘         â†‘\n  V1     1      Akk    Äá»™ng tá»« nguyÃªn máº«u",
            analysis: [
              { word: "Wollen", type: "Äá»™ng tá»« V1", meaning: "muá»‘n" },
              { word: "wir", type: "Chá»§ ngá»¯", meaning: "chÃºng ta" },
              {
                word: "einen Film",
                type: "TÃ¢n ngá»¯ (Akk)",
                meaning: "má»™t bá»™ phim",
              },
              { word: "sehen", type: "Äá»™ng tá»« nguyÃªn máº«u", meaning: "xem" },
            ],
            grammarType: "CÃ¢u há»i Ä‘á» nghá»‹ vá»›i 'wollen'",
          },
          {
            vietnamese: "KhÃ´ng, tÃ´i pháº£i lÃ m viá»‡c. TÃ´i pháº£i há»c cho ká»³ thi.",
            german: "Nein, ich muss arbeiten. Ich muss fÃ¼r die PrÃ¼fung lernen.",
            tip: "ğŸ“š 'mÃ¼ssen' = pháº£i. 'fÃ¼r die PrÃ¼fung' = cho ká»³ thi",
            explanation:
              "ÄÃ¢y lÃ  cÃ¢u tráº£ lá»i Ä‘Ãºng. 'mÃ¼ssen' = báº¯t buá»™c. LÃ½ do tá»« chá»‘i lá»i má»i.",
            structure:
              "Nein,   ich   muss   arbeiten.   Ich   muss   fÃ¼r die PrÃ¼fung   lernen\n  â†‘      â†‘     â†‘        â†‘        â†‘     â†‘           â†‘              â†‘\nThÃ¡n    1    V2   Äá»™ng tá»« ng.máº«u  1    V2    Cá»¥m giá»›i tá»«   Äá»™ng tá»« ng.máº«u",
            analysis: [
              { word: "Nein", type: "ThÃ¡n tá»«", meaning: "khÃ´ng" },
              { word: "ich", type: "Chá»§ ngá»¯", meaning: "tÃ´i" },
              { word: "muss", type: "Äá»™ng tá»« V2", meaning: "pháº£i" },
              {
                word: "arbeiten",
                type: "Äá»™ng tá»« nguyÃªn máº«u",
                meaning: "lÃ m viá»‡c",
              },
              { word: "ich", type: "Chá»§ ngá»¯", meaning: "tÃ´i" },
              { word: "muss", type: "Äá»™ng tá»« V2", meaning: "pháº£i" },
              {
                word: "fÃ¼r die PrÃ¼fung",
                type: "Cá»¥m giá»›i tá»«",
                meaning: "cho ká»³ thi",
              },
              { word: "lernen", type: "Äá»™ng tá»« nguyÃªn máº«u", meaning: "há»c" },
            ],
            grammarType: "CÃ¢u vá»›i Ä‘á»™ng tá»« khiáº¿m khuyáº¿t 'mÃ¼ssen'",
          },
          {
            vietnamese: "VÃ  chÃºng ta cÃ³ muá»‘n Ä‘i uá»‘ng gÃ¬ Ä‘Ã³ sau khÃ´ng?",
            german: "Und wollen wir spÃ¤ter etwas trinken gehen?",
            tip: "ğŸ» 'spÃ¤ter' = sau Ä‘Ã³. 'trinken gehen' = Ä‘i uá»‘ng",
            explanation:
              "'spÃ¤ter' = muá»™n hÆ¡n. 'etwas trinken gehen' = Ä‘i uá»‘ng Ä‘á»“ gÃ¬ Ä‘Ã³.",
            structure:
              "Und   wollen   wir   spÃ¤ter   etwas   trinken gehen?\n â†‘       â†‘     â†‘       â†‘       â†‘           â†‘\nLiÃªn tá»«  V1    1      Te    Bá»• nghÄ©a   Äá»™ng tá»« nguyÃªn máº«u",
            analysis: [
              { word: "Und", type: "LiÃªn tá»«", meaning: "vÃ " },
              { word: "wollen", type: "Äá»™ng tá»« V1", meaning: "muá»‘n" },
              { word: "wir", type: "Chá»§ ngá»¯", meaning: "chÃºng ta" },
              { word: "spÃ¤ter", type: "Te (thá»i gian)", meaning: "sau Ä‘Ã³" },
              { word: "etwas", type: "Bá»• nghÄ©a", meaning: "gÃ¬ Ä‘Ã³" },
              {
                word: "trinken gehen",
                type: "Äá»™ng tá»« nguyÃªn máº«u",
                meaning: "Ä‘i uá»‘ng",
              },
            ],
            grammarType: "CÃ¢u há»i vá»›i Ä‘á»™ng tá»« káº¿t há»£p",
          },
          {
            vietnamese: "CÃ³ má»™t quÃ¡n cÃ  phÃª má»›i á»Ÿ gÃ³c phá»‘ nÃ y.",
            german: "Es gibt hier an der Ecke ein neues CafÃ©.",
            tip: "â˜• 'es gibt' = cÃ³. 'an der Ecke' = á»Ÿ gÃ³c",
            explanation:
              "'es gibt' = cÃ³ (tá»“n táº¡i). 'an der Ecke' = táº¡i gÃ³c Ä‘Æ°á»ng.",
            structure:
              "Es   gibt   hier   an der Ecke   ein neues CafÃ©\n â†‘     â†‘      â†‘         â†‘              â†‘\n 1    V2    Lo    Cá»¥m giá»›i tá»«        Akk",
            analysis: [
              { word: "Es", type: "Chá»§ ngá»¯ giáº£", meaning: "nÃ³ (there)" },
              { word: "gibt", type: "Äá»™ng tá»« V2", meaning: "cÃ³" },
              { word: "hier", type: "Lo (nÆ¡i chá»‘n)", meaning: "á»Ÿ Ä‘Ã¢y" },
              { word: "an der Ecke", type: "Cá»¥m giá»›i tá»«", meaning: "á»Ÿ gÃ³c" },
              {
                word: "ein neues CafÃ©",
                type: "TÃ¢n ngá»¯ (Akk)",
                meaning: "má»™t quÃ¡n cÃ  phÃª má»›i",
              },
            ],
            grammarType: "Cáº¥u trÃºc 'es gibt' + Akkusativ",
          },
          {
            vietnamese: "KhÃ´ng, xin lá»—i. ThÃ  lÃ  chá»§ nháº­t.",
            german: "Nein, tut mir leid. Lieber am Sonntag.",
            tip: "ğŸ˜” 'tut mir leid' = xin lá»—i. 'lieber' = thÃ  lÃ ",
            explanation:
              "'tut mir leid' = tÃ´i cáº£m tháº¥y tiáº¿c. 'lieber' = thÃ­ch hÆ¡n/thÃ  lÃ .",
            structure:
              "Nein,   tut mir leid.   Lieber   am Sonntag\n  â†‘          â†‘            â†‘          â†‘\nThÃ¡n   Cá»¥m cá»‘ Ä‘á»‹nh    Bá»• nghÄ©a      Te",
            analysis: [
              { word: "Nein", type: "ThÃ¡n tá»«", meaning: "khÃ´ng" },
              { word: "tut mir leid", type: "Cá»¥m cá»‘ Ä‘á»‹nh", meaning: "xin lá»—i" },
              { word: "Lieber", type: "Bá»• nghÄ©a", meaning: "thÃ  lÃ " },
              {
                word: "am Sonntag",
                type: "Te (thá»i gian)",
                meaning: "vÃ o chá»§ nháº­t",
              },
            ],
            grammarType: "CÃ¢u tá»« chá»‘i lá»‹ch sá»± vá»›i 'lieber'",
          },
          {
            vietnamese: "LÃºc Ä‘Ã³ tÃ´i cÃ³ thá»i gian.",
            german: "Dann habe ich Zeit.",
            tip: "â° 'Zeit haben' = cÃ³ thá»i gian. 'dann' = lÃºc Ä‘Ã³",
            explanation:
              "'dann' = lÃºc Ä‘Ã³/sau Ä‘Ã³. Giáº£i thÃ­ch lÃ½ do táº¡i sao chá»§ nháº­t tá»‘t hÆ¡n.",
            structure:
              "Dann   habe   ich   Zeit\n  â†‘      â†‘     â†‘     â†‘\n  1     V2    3   Akk",
            analysis: [
              { word: "Dann", type: "Bá»• nghÄ©a (Vá»‹ trÃ­ 1)", meaning: "lÃºc Ä‘Ã³" },
              { word: "habe", type: "Äá»™ng tá»« V2", meaning: "cÃ³" },
              { word: "ich", type: "Chá»§ ngá»¯", meaning: "tÃ´i" },
              { word: "Zeit", type: "TÃ¢n ngá»¯ (Akk)", meaning: "thá»i gian" },
            ],
            grammarType: "CÃ¢u vá»›i Ä‘áº£o ngá»¯ (dann á»Ÿ vá»‹ trÃ­ 1)",
          },
        ],
      ];

      // App state
      let currentSectionIndex = 0;
      let currentQuestionIndex = 0;
      let isStarted = false;
      let startTime = null;
      let timerInterval = null;
      let correctCount = 0;
      let totalAnswered = 0;
      let timeLimit = 6 * 60; // 3 minutes total
      let timeRemaining = timeLimit;
      let sectionCompleted = false;
      let isAllSections = false;
      let totalCorrectAllSections = 0;
      let totalAnsweredAllSections = 0;
      let allSectionsStartTime = null;

      const sectionNames = [
        "ğŸ“ VÃ­ dá»¥: Vá» ká»³ nghá»‰",
        "ğŸ½ï¸ Dialog 1: á» nhÃ  hÃ ng",
        "ğŸ‘§ Dialog 2: Vá» con gÃ¡i",
        "ğŸ¬ Dialog 3: Káº¿ hoáº¡ch tá»‘i",
      ];
      const sectionCounts = [8, 8, 9, 7]; // Tá»•ng 32 cÃ¢u

      // Initialize
      function init() {
        updateDisplay();
        initializeVoices();
      }

      // Initialize voices
      function initializeVoices() {
        if ("speechSynthesis" in window) {
          speechSynthesis.getVoices();
          setTimeout(() => {
            const voices = speechSynthesis.getVoices();
            const vietnameseVoice = voices.find(
              (voice) => voice.lang.includes("vi") || voice.lang.includes("VN")
            );
            if (!vietnameseVoice) {
              console.log("KhÃ´ng tÃ¬m tháº¥y giá»ng tiáº¿ng Viá»‡t.");
            }
          }, 1000);
        }
      }

      // Start specific section
      function startSection(sectionIndex) {
        currentSectionIndex = sectionIndex;
        isAllSections = false;
        startPracticeSession();
      }

      // Start all sections
      function startAllSections() {
        currentSectionIndex = 0;
        isAllSections = true;
        totalCorrectAllSections = 0;
        totalAnsweredAllSections = 0;
        allSectionsStartTime = new Date();
        startPracticeSession();
      }

      // Start practice session
      function startPracticeSession() {
        isStarted = true;
        currentQuestionIndex = 0;
        correctCount = 0;
        totalAnswered = 0;
        timeRemaining = isAllSections
          ? timeLimit
          : Math.floor((timeLimit * sectionCounts[currentSectionIndex]) / 32);
        sectionCompleted = false;
        startTime = new Date();

        // Show practice screen
        document.getElementById("selection-screen").style.display = "none";
        document.getElementById("practice-section").style.display = "block";
        document.getElementById("speak-btn").style.display = "inline-block";
        document.getElementById("correct-btn").style.display = "inline-block";
        document.getElementById("incorrect-btn").style.display = "inline-block";

        // Update section info
        document.getElementById("section-info").textContent =
          sectionNames[currentSectionIndex];
        document.getElementById("current-section").textContent = `${
          currentSectionIndex + 1
        }/4`;

        // Start timer and load first question
        startTimer();
        loadQuestion();
      }

      // Start timer
      function startTimer() {
        timerInterval = setInterval(() => {
          timeRemaining--;
          updateTimerDisplay();

          if (timeRemaining <= 0) {
            completeSection("time");
          }
        }, 1000);
      }

      // Update timer display
      function updateTimerDisplay() {
        const minutes = Math.floor(timeRemaining / 60);
        const seconds = timeRemaining % 60;
        const timeStr = `${minutes.toString().padStart(2, "0")}:${seconds
          .toString()
          .padStart(2, "0")}`;

        const timerElement = document.getElementById("timer");
        timerElement.textContent = timeStr;

        if (timeRemaining <= 30) {
          timerElement.classList.add("timer-warning");
        } else {
          timerElement.classList.remove("timer-warning");
        }
      }

      // Stop timer
      function stopTimer() {
        if (timerInterval) {
          clearInterval(timerInterval);
          timerInterval = null;
        }
      }

      // Load current question
      function loadQuestion() {
        if (currentQuestionIndex >= practiceData[currentSectionIndex].length) {
          completeSection("finished");
          return;
        }

        const current = practiceData[currentSectionIndex][currentQuestionIndex];
        const sectionCount = sectionCounts[currentSectionIndex];

        document.getElementById("vietnamese-text").textContent =
          current.vietnamese;
        document.getElementById("counter").textContent = `CÃ¢u ${
          currentQuestionIndex + 1
        } / ${sectionCount}`;

        // Update progress
        const totalQuestions = isAllSections ? 32 : sectionCount;
        const currentOverall = isAllSections
          ? sectionCounts
              .slice(0, currentSectionIndex)
              .reduce((a, b) => a + b, 0) +
            currentQuestionIndex +
            1
          : currentQuestionIndex + 1;
        const progress = (currentOverall / totalQuestions) * 100;
        document.getElementById("progress").style.width = `${progress}%`;

        // Hide answer section and reset buttons
        document.getElementById("answer-section").classList.remove("show");
        document.getElementById("next-btn").style.display = "none";
        document.getElementById("correct-btn").style.display = "inline-block";
        document.getElementById("incorrect-btn").style.display = "inline-block";

        // Auto speak Vietnamese
        setTimeout(() => speakVietnamese(), 500);
      }

      // Speak Vietnamese text
      function speakVietnamese() {
        if ("speechSynthesis" in window) {
          const text =
            practiceData[currentSectionIndex][currentQuestionIndex].vietnamese;
          speechSynthesis.cancel();

          const utterance = new SpeechSynthesisUtterance(text);
          const voices = speechSynthesis.getVoices();
          const vietnameseVoice = voices.find(
            (voice) => voice.lang.includes("vi") || voice.lang.includes("VN")
          );

          if (vietnameseVoice) {
            utterance.voice = vietnameseVoice;
            utterance.lang = "vi-VN";
          } else {
            utterance.lang = "vi-VN";
          }

          utterance.rate = 0.7;
          utterance.pitch = 1.0;
          utterance.volume = 1.0;
          speechSynthesis.speak(utterance);

          const speakBtn = document.getElementById("speak-btn");
          speakBtn.style.background =
            "linear-gradient(135deg, #ffa726, #ff7043)";
          speakBtn.textContent = "ğŸ”Š Äang phÃ¡t...";

          utterance.onend = function () {
            speakBtn.style.background =
              "linear-gradient(135deg, #28a745, #20c997)";
            speakBtn.textContent = "ğŸ”Š PhÃ¡t Ã¢m";
          };
        }
      }

      // Mark answer
      function markAnswer(isCorrect) {
        totalAnswered++;
        if (isCorrect) {
          correctCount++;
        }

        // Update display
        document.getElementById("correct-count").textContent = correctCount;
        document.getElementById("total-answered").textContent = totalAnswered;

        // Show answer
        showAnswer();

        // Update buttons
        document.getElementById("correct-btn").style.display = "none";
        document.getElementById("incorrect-btn").style.display = "none";
        document.getElementById("next-btn").style.display = "inline-block";
      }

      // Show answer
      function showAnswer() {
        const current = practiceData[currentSectionIndex][currentQuestionIndex];

        // Set German answer
        document.getElementById("german-answer").textContent = current.german;

        // Set sentence structure
        document.getElementById("sentence-structure").innerHTML =
          current.structure.replace(/\n/g, "<br>");

        // Set word analysis
        const wordAnalysisDiv = document.getElementById("word-analysis");
        wordAnalysisDiv.innerHTML = "";

        if (current.analysis && current.analysis.length > 0) {
          current.analysis.forEach((item) => {
            const wordBox = document.createElement("div");
            wordBox.className = "word-box";
            wordBox.innerHTML = `
              <div class="word-german">${item.word}</div>
              <div class="word-type">${item.type}</div>
              <div class="word-meaning">${item.meaning}</div>
            `;
            wordAnalysisDiv.appendChild(wordBox);
          });
        }

        // Set tips and explanations
        document.getElementById("grammar-tip").innerHTML = `
          <strong>ğŸ’¡ ${current.grammarType}:</strong><br>
          ${current.tip}
        `;
        document.getElementById("case-explanation").textContent =
          current.explanation;

        // Show answer section
        document.getElementById("answer-section").classList.add("show");

        // Speak German answer
        speakGerman(current.german);
      }

      // Speak German text
      function speakGerman(text) {
        if ("speechSynthesis" in window) {
          speechSynthesis.cancel();
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.lang = "de-DE";
          utterance.rate = 0.7;
          utterance.volume = 1.0;
          speechSynthesis.speak(utterance);
        }
      }

      // Next question
      function nextSentence() {
        currentQuestionIndex++;
        loadQuestion();
      }

      // Complete section
      function completeSection(reason) {
        if (sectionCompleted) return;
        sectionCompleted = true;
        stopTimer();

        // Add to total if doing all sections
        if (isAllSections) {
          totalCorrectAllSections += correctCount;
          totalAnsweredAllSections += totalAnswered;
        }

        // Check if continuing to next section
        if (isAllSections && currentSectionIndex < 3) {
          setTimeout(() => {
            currentSectionIndex++;
            startPracticeSession();
          }, 2000);

          // Show brief transition message
          document.getElementById(
            "vietnamese-text"
          ).textContent = `HoÃ n thÃ nh ${
            sectionNames[currentSectionIndex]
          }! Chuyá»ƒn sang ${sectionNames[currentSectionIndex + 1]}...`;
          return;
        }

        // Show final results
        showResults();
      }

      // Show results
      function showResults() {
        const totalTime = isAllSections
          ? Math.floor((new Date() - allSectionsStartTime) / 1000)
          : Math.floor((new Date() - startTime) / 1000);

        const minutes = Math.floor(totalTime / 60);
        const seconds = totalTime % 60;
        const timeStr = `${minutes.toString().padStart(2, "0")}:${seconds
          .toString()
          .padStart(2, "0")}`;

        const finalCorrect = isAllSections
          ? totalCorrectAllSections
          : correctCount;
        const finalAnswered = isAllSections
          ? totalAnsweredAllSections
          : totalAnswered;
        const accuracy =
          finalAnswered > 0
            ? Math.round((finalCorrect / finalAnswered) * 100)
            : 0;

        const targetScore = isAllSections
          ? 26
          : Math.ceil(sectionCounts[currentSectionIndex] * 0.8); // 80% cá»§a tá»•ng sá»‘ cÃ¢u
        const maxScore = isAllSections
          ? 32
          : sectionCounts[currentSectionIndex];

        // Update final stats
        document.getElementById("final-correct").textContent = finalCorrect;
        document.getElementById("final-answered").textContent = finalAnswered;
        document.getElementById("final-accuracy").textContent = `${accuracy}%`;
        document.getElementById("final-time").textContent = timeStr;

        // Determine result
        let resultEmoji, resultTitle, resultMessage, resultClass;
        if (finalCorrect >= targetScore) {
          resultEmoji = "ğŸ†";
          resultTitle = "Xuáº¥t sáº¯c!";
          resultMessage = `Báº¡n Ä‘áº¡t ${finalCorrect}/${maxScore} cÃ¢u Ä‘Ãºng! ChÃºc má»«ng!`;
          resultClass = "result-success";
        } else {
          resultEmoji = "ğŸ“š";
          resultTitle = "Cáº§n luyá»‡n táº­p thÃªm!";
          resultMessage = `Báº¡n Ä‘áº¡t ${finalCorrect}/${maxScore} cÃ¢u Ä‘Ãºng. Má»¥c tiÃªu: ${targetScore} cÃ¢u Ä‘Ãºng.`;
          resultClass = "result-failure";
        }

        document.getElementById("result-emoji").textContent = resultEmoji;
        document.getElementById("result-title").textContent = resultTitle;
        document.getElementById("result-title").className = resultClass;
        document.getElementById("result-message").textContent = resultMessage;

        // Show completion screen
        document.getElementById("practice-section").style.display = "none";
        document.getElementById("completion-screen").classList.add("show");
      }

      // Show preview
      function showPreview() {
        const previewContent = document.getElementById("preview-content");
        let html = "";
        let globalIndex = 1;

        practiceData.forEach((section, sectionIndex) => {
          html += `<div style="margin-bottom: 30px;">`;
          html += `<h3 style="color: #667eea; margin-bottom: 15px;">${sectionNames[sectionIndex]}</h3>`;

          section.forEach((item, questionIndex) => {
            html += `
              <div style="background: rgba(255, 255, 255, 0.1); border-radius: 10px; padding: 15px; margin-bottom: 15px; border: 1px solid rgba(255, 255, 255, 0.2);">
                <div style="font-weight: bold; margin-bottom: 10px; font-size: 1.1em;">
                  <span style="display: inline-block; background: #667eea; color: white; width: 25px; height: 25px; border-radius: 50%; text-align: center; line-height: 25px; font-size: 0.9em; font-weight: bold; margin-right: 10px;">${globalIndex}</span>
                  ${item.vietnamese}
                </div>
                <div style="display: flex; justify-content: space-between; align-items: center; gap: 15px;">
                  <div style="color: #007bff; font-weight: 600; flex: 1;">${
                    item.german
                  }</div>
                  <button style="background: linear-gradient(135deg, #28a745, #20c997); color: white; border: none; padding: 8px 15px; border-radius: 20px; font-size: 0.9em; cursor: pointer; transition: all 0.3s ease; flex-shrink: 0;" onclick="speakGermanPreview('${item.german.replace(
                    /'/g,
                    "\\'"
                  )}')">
                    ğŸ”Š Nghe
                  </button>
                </div>
                <div style="font-size: 0.9em; opacity: 0.8; margin-top: 8px; font-style: italic;">${
                  item.tip
                }</div>
                <div style="font-size: 0.85em; color: #666; margin-top: 5px; padding: 8px; background: rgba(255, 255, 255, 0.3); border-radius: 5px;">
                  <strong>Cáº¥u trÃºc:</strong> ${item.grammarType}
                </div>
              </div>
            `;
            globalIndex++;
          });
          html += `</div>`;
        });

        previewContent.innerHTML = html;
        document.getElementById("selection-screen").style.display = "none";
        document.getElementById("preview-screen").classList.add("show");
      }

      // Speak German text in preview
      function speakGermanPreview(text) {
        if ("speechSynthesis" in window) {
          speechSynthesis.cancel();
          const utterance = new SpeechSynthesisUtterance(text);
          utterance.lang = "de-DE";
          utterance.rate = 0.7;
          utterance.volume = 1.0;
          speechSynthesis.speak(utterance);
        } else {
          alert(
            "TrÃ¬nh duyá»‡t khÃ´ng há»— trá»£ text-to-speech. HÃ£y thá»­ Chrome hoáº·c Edge!"
          );
        }
      }

      // Hide preview
      function hidePreview() {
        document.getElementById("preview-screen").classList.remove("show");
        document.getElementById("selection-screen").style.display = "block";
      }

      // Hide preview and start
      function hidePreviewAndStart() {
        hidePreview();
        setTimeout(() => startAllSections(), 300);
      }

      // Reset practice
      function resetPractice() {
        currentSectionIndex = 0;
        currentQuestionIndex = 0;
        isStarted = false;
        correctCount = 0;
        totalAnswered = 0;
        timeRemaining = timeLimit;
        sectionCompleted = false;
        isAllSections = false;
        totalCorrectAllSections = 0;
        totalAnsweredAllSections = 0;
        stopTimer();

        // Reset UI
        document.getElementById("selection-screen").style.display = "block";
        document.getElementById("practice-section").style.display = "none";
        document.getElementById("completion-screen").classList.remove("show");
        document.getElementById("preview-screen").classList.remove("show");
      }

      // Shuffle and restart
      function shuffleAndRestart() {
        // Shuffle each section
        practiceData.forEach((section) => {
          for (let i = section.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [section[i], section[j]] = [section[j], section[i]];
          }
        });
        resetPractice();
      }

      // Update display
      function updateDisplay() {
        if (!isStarted) {
          document.getElementById("vietnamese-text").textContent =
            'Chá»n pháº§n luyá»‡n táº­p hoáº·c nháº¥n "LÃ m toÃ n bá»™ 32 cÃ¢u"';
        }
      }

      // Keyboard shortcuts
      document.addEventListener("keydown", function (e) {
        if (!isStarted || sectionCompleted) return;

        switch (e.key) {
          case " ":
            e.preventDefault();
            speakVietnamese();
            break;
          case "1":
            e.preventDefault();
            if (
              document.getElementById("correct-btn").style.display !== "none"
            ) {
              markAnswer(true);
            }
            break;
          case "2":
            e.preventDefault();
            if (
              document.getElementById("incorrect-btn").style.display !== "none"
            ) {
              markAnswer(false);
            }
            break;
          case "Enter":
            e.preventDefault();
            if (document.getElementById("next-btn").style.display !== "none") {
              nextSentence();
            }
            break;
        }
      });

      // Initialize when page loads
      window.onload = init;

      // Add voices changed event
      if ("speechSynthesis" in window) {
        speechSynthesis.onvoiceschanged = initializeVoices;
      }
    </script>
  </body>
</html>
