<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>üè† T·ª´ v·ª±ng ƒê·ªì v·∫≠t ti·∫øng ƒê·ª©c - Game luy·ªán t·∫≠p</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        min-height: 100vh;
        color: #333;
        overflow-x: hidden;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        padding: 20px;
      }

      .header {
        text-align: center;
        background: white;
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 30px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .header h1 {
        color: #c0392b;
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .header p {
        color: #666;
        font-size: 1.2em;
        margin-bottom: 20px;
      }

      .stats-bar {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 20px;
      }

      .stat-item {
        background: linear-gradient(135deg, #e74c3c 0%, #c0392b 100%);
        color: white;
        padding: 10px 20px;
        border-radius: 15px;
        font-weight: bold;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .game-selector {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .game-card {
        background: white;
        border-radius: 15px;
        padding: 25px;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        cursor: pointer;
        text-align: center;
      }

      .game-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      }

      .game-card.active {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        color: white;
        transform: translateY(-5px);
      }

      .game-icon {
        font-size: 3em;
        margin-bottom: 15px;
        display: block;
      }

      .game-title {
        font-size: 1.4em;
        font-weight: bold;
        margin-bottom: 10px;
      }

      .game-description {
        font-size: 0.95em;
        opacity: 0.8;
      }

      .game-area {
        background: white;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        margin-bottom: 30px;
        min-height: 500px;
        display: none;
      }

      .game-area.active {
        display: block;
      }

      .game-header {
        text-align: center;
        margin-bottom: 30px;
      }

      .game-header h2 {
        color: #c0392b;
        font-size: 2em;
        margin-bottom: 10px;
      }

      .score-board {
        display: flex;
        justify-content: center;
        gap: 20px;
        margin-bottom: 30px;
        flex-wrap: wrap;
      }

      .score-item {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        color: white;
        padding: 15px 25px;
        border-radius: 15px;
        text-align: center;
        font-weight: bold;
        font-size: 1.1em;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .question-area {
        text-align: center;
        margin-bottom: 30px;
      }

      .question {
        font-size: 1.8em;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 20px;
        padding: 20px;
        background: #f8f9fa;
        border-radius: 15px;
        border-left: 5px solid #ff6b6b;
      }

      .object-image {
        font-size: 4em;
        margin: 20px 0;
        display: block;
        text-align: center;
      }

      .options {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 15px;
        margin-bottom: 30px;
      }

      .option {
        background: #f8f9fa;
        border: 3px solid #e9ecef;
        border-radius: 15px;
        padding: 20px;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 1.2em;
        font-weight: bold;
        text-align: center;
      }

      .option:hover {
        background: #ffe8e8;
        border-color: #ff6b6b;
        transform: translateY(-5px);
      }

      .option.correct {
        background: #d4edda;
        border-color: #28a745;
        color: #155724;
      }

      .option.incorrect {
        background: #f8d7da;
        border-color: #dc3545;
        color: #721c24;
      }

      .option.disabled {
        pointer-events: none;
        opacity: 0.6;
      }

      .word-card {
        background: #f8f9fa;
        border: 3px solid #e9ecef;
        border-radius: 15px;
        padding: 30px;
        margin-bottom: 20px;
        text-align: center;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .word-card:hover {
        background: #ffe8e8;
        border-color: #ff6b6b;
        transform: translateY(-5px);
      }

      .word-german {
        font-size: 2em;
        font-weight: bold;
        color: #2c3e50;
        margin-bottom: 10px;
      }

      .word-pronunciation {
        color: #8e44ad;
        font-style: italic;
        font-size: 1.2em;
        margin-bottom: 15px;
      }

      .word-vietnamese {
        color: #27ae60;
        font-size: 1.3em;
        font-weight: bold;
      }

      .typing-input {
        width: 100%;
        max-width: 500px;
        padding: 20px;
        font-size: 1.5em;
        border: 3px solid #e9ecef;
        border-radius: 15px;
        text-align: center;
        margin: 20px auto;
        display: block;
        background: #f8f9fa;
      }

      .typing-input:focus {
        outline: none;
        border-color: #ff6b6b;
        background: white;
      }

      .memory-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
        max-width: 800px;
        margin: 0 auto;
      }

      .memory-card {
        aspect-ratio: 1;
        background: #f8f9fa;
        border: 3px solid #e9ecef;
        border-radius: 15px;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        font-size: 1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
        padding: 10px;
      }

      .memory-card:hover {
        transform: scale(1.05);
        border-color: #ff6b6b;
      }

      .memory-card.flipped {
        background: #ffe8e8;
        border-color: #ff6b6b;
      }

      .memory-card.matched {
        background: #d4edda;
        border-color: #28a745;
        pointer-events: none;
      }

      .memory-emoji {
        font-size: 2em;
        margin-bottom: 5px;
      }

      .btn {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a24 100%);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 25px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        margin: 5px;
      }

      .btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
      }

      .btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .btn.success {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
      }

      .btn.danger {
        background: linear-gradient(135deg, #dc3545 0%, #fd7e14 100%);
      }

      .feedback {
        text-align: center;
        padding: 20px;
        border-radius: 15px;
        margin-bottom: 20px;
        font-size: 1.2em;
        font-weight: bold;
        display: none;
      }

      .feedback.correct {
        background: #d4edda;
        color: #155724;
        border: 2px solid #28a745;
      }

      .feedback.incorrect {
        background: #f8d7da;
        color: #721c24;
        border: 2px solid #dc3545;
      }

      .feedback.show {
        display: block;
        animation: fadeIn 0.5s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      .progress-bar {
        width: 100%;
        height: 20px;
        background: #e9ecef;
        border-radius: 10px;
        overflow: hidden;
        margin-bottom: 20px;
      }

      .progress-fill {
        height: 100%;
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        width: 0%;
        transition: width 0.3s ease;
      }

      .game-controls {
        display: flex;
        justify-content: center;
        gap: 15px;
        margin-top: 30px;
        flex-wrap: wrap;
      }

      .speaker-btn {
        background: linear-gradient(135deg, #17a2b8 0%, #6610f2 100%);
        color: white;
        border: none;
        padding: 10px 15px;
        border-radius: 10px;
        cursor: pointer;
        font-size: 1.2em;
        margin-left: 10px;
        transition: all 0.3s ease;
      }

      .speaker-btn:hover {
        transform: scale(1.1);
      }

      .timer {
        font-size: 1.5em;
        font-weight: bold;
        color: #dc3545;
      }

      .game-complete {
        text-align: center;
        padding: 40px;
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
        border-radius: 20px;
        margin-top: 30px;
      }

      .game-complete h3 {
        font-size: 2em;
        margin-bottom: 20px;
      }

      .game-complete p {
        font-size: 1.2em;
        margin-bottom: 10px;
      }

      .vocabulary-list {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 20px;
        margin-top: 20px;
      }

      .vocab-item {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 15px;
        padding: 20px;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
      }

      .vocab-item:hover {
        background: #ffe8e8;
        border-color: #ff6b6b;
        transform: translateY(-5px);
      }

      .vocab-emoji {
        font-size: 2em;
        margin-bottom: 10px;
      }

      /* Responsive */
      @media (max-width: 768px) {
        .container {
          padding: 10px;
        }

        .header h1 {
          font-size: 2em;
        }

        .game-selector {
          grid-template-columns: 1fr;
        }

        .memory-grid {
          grid-template-columns: repeat(4, 1fr);
        }

        .options {
          grid-template-columns: 1fr;
        }

        .score-board {
          flex-direction: column;
          gap: 15px;
        }

        .game-controls {
          flex-direction: column;
          align-items: center;
        }

        .stats-bar {
          flex-direction: column;
          gap: 10px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>üè† T·ª´ v·ª±ng ƒê·ªì v·∫≠t ti·∫øng ƒê·ª©c</h1>
        <p>36 t·ª´ v·ª±ng ƒë·ªì v·∫≠t th√¥ng d·ª•ng - 6 tr√≤ ch∆°i luy·ªán t·∫≠p th√∫ v·ªã</p>

        <div class="stats-bar">
          <div class="stat-item">üì¶ 36 ƒê·ªì v·∫≠t</div>
          <div class="stat-item">üéÆ 6 Games</div>
          <div class="stat-item">üîä Ph√°t √¢m</div>
          <div class="stat-item">üì± Mobile</div>
        </div>
      </div>

      <div class="game-selector">
        <div class="game-card active" onclick="selectGame('quiz')">
          <div class="game-icon">üß†</div>
          <div class="game-title">Quiz Tr·∫Øc nghi·ªám</div>
          <div class="game-description">Ch·ªçn t·ª´ ti·∫øng ƒê·ª©c ƒë√∫ng cho ƒë·ªì v·∫≠t</div>
        </div>

        <div class="game-card" onclick="selectGame('typing')">
          <div class="game-icon">‚å®Ô∏è</div>
          <div class="game-title">Typing Game</div>
          <div class="game-description">G√µ t·ª´ ti·∫øng ƒê·ª©c theo emoji</div>
        </div>

        <div class="game-card" onclick="selectGame('memory')">
          <div class="game-icon">üß©</div>
          <div class="game-title">Memory Game</div>
          <div class="game-description">Gh√©p c·∫∑p emoji v·ªõi t·ª´ ti·∫øng ƒê·ª©c</div>
        </div>

        <div class="game-card" onclick="selectGame('listening')">
          <div class="game-icon">üéß</div>
          <div class="game-title">Listening Quiz</div>
          <div class="game-description">Nghe v√† ch·ªçn ƒë·ªì v·∫≠t ƒë√∫ng</div>
        </div>

        <div class="game-card" onclick="selectGame('flashcard')">
          <div class="game-icon">üìö</div>
          <div class="game-title">Flashcard</div>
          <div class="game-description">H·ªçc t·ª´ v·ª±ng v·ªõi th·∫ª ghi nh·ªõ</div>
        </div>

        <div class="game-card" onclick="selectGame('vocabulary')">
          <div class="game-icon">üìñ</div>
          <div class="game-title">T·ª´ ƒëi·ªÉn</div>
          <div class="game-description">Xem to√†n b·ªô t·ª´ v·ª±ng ƒë·ªì v·∫≠t</div>
        </div>
      </div>

      <!-- Quiz Game -->
      <div id="quiz-game" class="game-area active">
        <div class="game-header">
          <h2>üß† Quiz Tr·∫Øc nghi·ªám ƒê·ªì v·∫≠t</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                C√¢u: <span id="quiz-current">1</span>/<span id="quiz-total"
                  >36</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>ƒêi·ªÉm: <span id="quiz-score">0</span></div>
            </div>
            <div class="score-item">
              <div>ƒê√∫ng: <span id="quiz-correct">0</span></div>
            </div>
          </div>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="quiz-progress"></div>
        </div>

        <div class="question-area">
          <div class="object-image" id="quiz-emoji">üöó</div>
          <div class="question" id="quiz-question">
            T·ª´ ti·∫øng ƒê·ª©c c·ªßa ƒë·ªì v·∫≠t n√†y l√† g√¨?
          </div>
          <button class="speaker-btn" onclick="speakQuizWord()">
            üîä Nghe ph√°t √¢m
          </button>
        </div>

        <div class="feedback" id="quiz-feedback"></div>

        <div class="options" id="quiz-options">
          <!-- Options generated by JavaScript -->
        </div>

        <div class="game-controls">
          <button
            class="btn"
            id="quiz-next"
            onclick="nextQuizQuestion()"
            disabled
          >
            C√¢u ti·∫øp theo
          </button>
          <button class="btn" onclick="restartQuiz()">Ch∆°i l·∫°i</button>
        </div>
      </div>

      <!-- Typing Game -->
      <div id="typing-game" class="game-area">
        <div class="game-header">
          <h2>‚å®Ô∏è Typing Game ƒê·ªì v·∫≠t</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                T·ª´: <span id="typing-current">1</span>/<span id="typing-total"
                  >36</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>ƒê√∫ng: <span id="typing-score">0</span></div>
            </div>
            <div class="score-item timer">
              <div>Th·ªùi gian: <span id="typing-time">180</span>s</div>
            </div>
          </div>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="typing-progress"></div>
        </div>

        <div class="question-area">
          <div class="object-image" id="typing-emoji">üöó</div>
          <div class="question" id="typing-question">
            G√µ t·ª´ ti·∫øng ƒê·ª©c cho ƒë·ªì v·∫≠t n√†y:
          </div>
          <button class="speaker-btn" onclick="speakTypingWord()">
            üîä Nghe ph√°t √¢m
          </button>
        </div>

        <input
          type="text"
          class="typing-input"
          id="typing-input"
          placeholder="G√µ t·ª´ ti·∫øng ƒê·ª©c..."
          autocomplete="off"
        />

        <div class="feedback" id="typing-feedback"></div>

        <div class="game-controls">
          <button
            class="btn"
            id="typing-next"
            onclick="nextTypingQuestion()"
            disabled
          >
            T·ª´ ti·∫øp theo
          </button>
          <button class="btn" onclick="restartTyping()">Ch∆°i l·∫°i</button>
        </div>
      </div>

      <!-- Memory Game -->
      <div id="memory-game" class="game-area">
        <div class="game-header">
          <h2>üß© Memory Game ƒê·ªì v·∫≠t</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                C·∫∑p: <span id="memory-matches">0</span>/<span id="memory-total"
                  >18</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>L∆∞·ª£t: <span id="memory-moves">0</span></div>
            </div>
            <div class="score-item timer">
              <div>Th·ªùi gian: <span id="memory-time">0</span>s</div>
            </div>
          </div>
        </div>

        <div class="memory-grid" id="memory-grid">
          <!-- Memory cards generated by JavaScript -->
        </div>

        <div class="game-controls">
          <button class="btn" onclick="restartMemory()">Ch∆°i l·∫°i</button>
        </div>
      </div>

      <!-- Listening Game -->
      <div id="listening-game" class="game-area">
        <div class="game-header">
          <h2>üéß Listening Quiz ƒê·ªì v·∫≠t</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                C√¢u: <span id="listening-current">1</span>/<span
                  id="listening-total"
                  >36</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>ƒêi·ªÉm: <span id="listening-score">0</span></div>
            </div>
            <div class="score-item">
              <div>ƒê√∫ng: <span id="listening-correct">0</span></div>
            </div>
          </div>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="listening-progress"></div>
        </div>

        <div class="question-area">
          <div class="question">Nghe ph√°t √¢m v√† ch·ªçn ƒë·ªì v·∫≠t ƒë√∫ng:</div>
          <button class="speaker-btn" onclick="playListeningWord()">
            üîä Nghe t·ª´
          </button>
        </div>

        <div class="feedback" id="listening-feedback"></div>

        <div class="options" id="listening-options">
          <!-- Options generated by JavaScript -->
        </div>

        <div class="game-controls">
          <button
            class="btn"
            id="listening-next"
            onclick="nextListeningQuestion()"
            disabled
          >
            C√¢u ti·∫øp theo
          </button>
          <button class="btn" onclick="restartListening()">Ch∆°i l·∫°i</button>
        </div>
      </div>

      <!-- Flashcard Game -->
      <div id="flashcard-game" class="game-area">
        <div class="game-header">
          <h2>üìö Flashcard ƒê·ªì v·∫≠t</h2>
          <div class="score-board">
            <div class="score-item">
              <div>
                Th·∫ª: <span id="flashcard-current">1</span>/<span
                  id="flashcard-total"
                  >36</span
                >
              </div>
            </div>
            <div class="score-item">
              <div>ƒê√£ h·ªçc: <span id="flashcard-learned">0</span></div>
            </div>
            <div class="score-item">
              <div>Kh√≥: <span id="flashcard-difficult">0</span></div>
            </div>
          </div>
        </div>

        <div class="progress-bar">
          <div class="progress-fill" id="flashcard-progress"></div>
        </div>

        <div class="word-card" id="flashcard-card" onclick="flipFlashcard()">
          <div class="object-image" id="flashcard-emoji">üöó</div>
          <div class="word-german" id="flashcard-german">das Auto</div>
          <div class="word-pronunciation hidden" id="flashcard-pronunciation">
            [das au-to]
          </div>
          <div class="word-vietnamese hidden" id="flashcard-vietnamese">
            xe h∆°i
          </div>
        </div>

        <div class="game-controls">
          <button class="btn danger" onclick="markDifficult()">üòÖ Kh√≥</button>
          <button class="btn" onclick="flipFlashcard()">üîÑ L·∫≠t th·∫ª</button>
          <button class="btn success" onclick="markLearned()">
            ‚úÖ ƒê√£ bi·∫øt
          </button>
        </div>

        <div class="game-controls">
          <button class="btn" onclick="previousFlashcard()">‚Üê Tr∆∞·ªõc</button>
          <button class="btn" onclick="nextFlashcard()">Ti·∫øp theo ‚Üí</button>
        </div>
      </div>

      <!-- Vocabulary List -->
      <div id="vocabulary-game" class="game-area">
        <div class="game-header">
          <h2>üìñ T·ª´ ƒëi·ªÉn ƒê·ªì v·∫≠t ti·∫øng ƒê·ª©c</h2>
          <p>Click v√†o t·ª´ng t·ª´ ƒë·ªÉ nghe ph√°t √¢m</p>
        </div>

        <div class="vocabulary-list" id="vocabulary-list">
          <!-- Vocabulary items generated by JavaScript -->
        </div>
      </div>
    </div>

    <script>
      // Objects vocabulary with correct emojis
      const objectsVocabulary = [
        {
          german: "das Auto",
          pronunciation: "[das au-to]",
          vietnamese: "xe h∆°i",
          emoji: "üöó",
        },
        {
          german: "das Bild",
          pronunciation: "[das bilt]",
          vietnamese: "h√¨nh ·∫£nh",
          emoji: "üñºÔ∏è",
        },
        {
          german: "der Bleistift",
          pronunciation: "[der blai-shtift]",
          vietnamese: "b√∫t ch√¨",
          emoji: "‚úèÔ∏è",
        },
        {
          german: "die Brille",
          pronunciation: "[di bri-le]",
          vietnamese: "k√≠nh m·∫Øt",
          emoji: "üëì",
        },
        {
          german: "das Buch",
          pronunciation: "[das bukh]",
          vietnamese: "s√°ch",
          emoji: "üìñ",
        },
        {
          german: "das B√ºgeleisen",
          pronunciation: "[das b√º-gel-ai-zen]",
          vietnamese: "b√†n l√†",
          emoji: "üî•",
        },
        {
          german: "die CD",
          pronunciation: "[di tse-de]",
          vietnamese: "ƒëƒ©a CD",
          emoji: "üíø",
        },
        {
          german: "der Computer",
          pronunciation: "[der kom-pyu-ter]",
          vietnamese: "m√°y t√≠nh",
          emoji: "üíª",
        },
        {
          german: "die Digitalkamera",
          pronunciation: "[di di-gi-tal-ka-me-ra]",
          vietnamese: "m√°y ·∫£nh s·ªë",
          emoji: "üì∑",
        },
        {
          german: "der Drucker",
          pronunciation: "[der dru-ker]",
          vietnamese: "m√°y in",
          emoji: "üñ®Ô∏è",
        },
        {
          german: "die DVD",
          pronunciation: "[di de-fau-de]",
          vietnamese: "ƒëƒ©a DVD",
          emoji: "üìÄ",
        },
        {
          german: "das Fahrrad",
          pronunciation: "[das far-rat]",
          vietnamese: "xe ƒë·∫°p",
          emoji: "üö≤",
        },
        {
          german: "der Fernseher",
          pronunciation: "[der fern-ze-her]",
          vietnamese: "tivi",
          emoji: "üì∫",
        },
        {
          german: "der Fu√üball",
          pronunciation: "[der fus-bal]",
          vietnamese: "b√≥ng ƒë√°",
          emoji: "‚öΩ",
        },
        {
          german: "das Handy",
          pronunciation: "[das hen-di]",
          vietnamese: "ƒëi·ªán tho·∫°i di ƒë·ªông",
          emoji: "üì±",
        },
        {
          german: "das Heft",
          pronunciation: "[das heft]",
          vietnamese: "v·ªü",
          emoji: "üìì",
        },
        {
          german: "der Herd",
          pronunciation: "[der hert]",
          vietnamese: "b·∫øp",
          emoji: "üç≥",
        },
        {
          german: "die Kaffeemaschine",
          pronunciation: "[di ka-fe-ma-shi-ne]",
          vietnamese: "m√°y pha c√† ph√™",
          emoji: "‚òï",
        },
        {
          german: "der Kinderwagen",
          pronunciation: "[der kin-der-va-gen]",
          vietnamese: "xe ƒë·∫©y em b√©",
          emoji: "üë∂",
        },
        {
          german: "der K√ºhlschrank",
          pronunciation: "[der k√ºhl-shrank]",
          vietnamese: "t·ªß l·∫°nh",
          emoji: "üßä",
        },
        {
          german: "der Kuli",
          pronunciation: "[der ku-li]",
          vietnamese: "b√∫t bi",
          emoji: "üñäÔ∏è",
        },
        {
          german: "die Lampe",
          pronunciation: "[di lam-pe]",
          vietnamese: "ƒë√®n",
          emoji: "üí°",
        },
        {
          german: "der MP3-Player",
          pronunciation: "[der em-pe-drai-ple-yer]",
          vietnamese: "m√°y nghe nh·∫°c MP3",
          emoji: "üéµ",
        },
        {
          german: "der Papierkorb",
          pronunciation: "[der pa-pir-korp]",
          vietnamese: "s·ªçt r√°c",
          emoji: "üóëÔ∏è",
        },
        {
          german: "das Radio",
          pronunciation: "[das ra-di-o]",
          vietnamese: "ƒë√†i radio",
          emoji: "üìª",
        },
        {
          german: "die Schere",
          pronunciation: "[di she-re]",
          vietnamese: "k√©o",
          emoji: "‚úÇÔ∏è",
        },
        {
          german: "die Sp√ºlmaschine",
          pronunciation: "[di shp√ºl-ma-shi-ne]",
          vietnamese: "m√°y r·ª≠a b√°t",
          emoji: "üçΩÔ∏è",
        },
        {
          german: "der Staubsauger",
          pronunciation: "[der shtaup-zau-ger]",
          vietnamese: "m√°y h√∫t b·ª•i",
          emoji: "üßπ",
        },
        {
          german: "der Stuhl",
          pronunciation: "[der shtul]",
          vietnamese: "gh·∫ø",
          emoji: "ü™ë",
        },
        {
          german: "die Tasche",
          pronunciation: "[di ta-she]",
          vietnamese: "t√∫i x√°ch",
          emoji: "üëú",
        },
        {
          german: "die Tasse",
          pronunciation: "[di ta-se]",
          vietnamese: "t√°ch",
          emoji: "ü´ñ",
        },
        {
          german: "der Tisch",
          pronunciation: "[der tish]",
          vietnamese: "b√†n",
          emoji: "üóìÔ∏è",
        },
        {
          german: "die Uhr",
          pronunciation: "[di ur]",
          vietnamese: "ƒë·ªìng h·ªì",
          emoji: "üïê",
        },
        {
          german: "die Waschmaschine",
          pronunciation: "[di vash-ma-shi-ne]",
          vietnamese: "m√°y gi·∫∑t",
          emoji: "üß∫",
        },
        {
          german: "der Wasserkocher",
          pronunciation: "[der va-ser-ko-kher]",
          vietnamese: "·∫•m ƒëun n∆∞·ªõc",
          emoji: "ü´ñ",
        },
        {
          german: "das W√∂rterbuch",
          pronunciation: "[das v√∂r-ter-bukh]",
          vietnamese: "t·ª´ ƒëi·ªÉn",
          emoji: "üìö",
        },
      ];

      // Game state variables
      let currentGame = "quiz";
      let quizState = {
        currentQuestion: 0,
        score: 0,
        correct: 0,
        questions: [],
        isAnswered: false,
      };

      let typingState = {
        currentWord: 0,
        score: 0,
        words: [],
        timer: null,
        timeLeft: 60,
      };

      let memoryState = {
        cards: [],
        flippedCards: [],
        matches: 0,
        moves: 0,
        startTime: null,
        timer: null,
      };

      let listeningState = {
        currentQuestion: 0,
        score: 0,
        correct: 0,
        questions: [],
        isAnswered: false,
      };

      let flashcardState = {
        currentCard: 0,
        learned: 0,
        difficult: 0,
        isFlipped: false,
      };

      // Speech synthesis function
      function speak(text) {
        speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        const voices = speechSynthesis.getVoices();
        const germanVoice = voices.find(
          (voice) =>
            voice.lang.includes("de") ||
            voice.name.toLowerCase().includes("german") ||
            voice.name.toLowerCase().includes("deutsch")
        );

        if (germanVoice) {
          utterance.voice = germanVoice;
        }
        utterance.lang = "de-DE";
        utterance.rate = 0.8;
        speechSynthesis.speak(utterance);
      }

      // Utility functions
      function shuffleArray(array) {
        const newArray = [...array];
        for (let i = newArray.length - 1; i > 0; i--) {
          const j = Math.floor(Math.random() * (i + 1));
          [newArray[i], newArray[j]] = [newArray[j], newArray[i]];
        }
        return newArray;
      }

      function getRandomWords(exclude = [], count = 3) {
        const filtered = objectsVocabulary.filter(
          (word) => !exclude.includes(word)
        );
        return shuffleArray(filtered).slice(0, count);
      }

      // Game selection
      function selectGame(gameType) {
        currentGame = gameType;

        // Update game cards
        document.querySelectorAll(".game-card").forEach((card) => {
          card.classList.remove("active");
        });
        event.target.closest(".game-card").classList.add("active");

        // Hide all game areas
        document.querySelectorAll(".game-area").forEach((area) => {
          area.classList.remove("active");
        });

        // Show selected game
        document.getElementById(gameType + "-game").classList.add("active");

        // Initialize the selected game
        switch (gameType) {
          case "quiz":
            initQuiz();
            break;
          case "typing":
            initTyping();
            break;
          case "memory":
            initMemory();
            break;
          case "listening":
            initListening();
            break;
          case "flashcard":
            initFlashcard();
            break;
          case "vocabulary":
            initVocabulary();
            break;
        }
      }

      // QUIZ GAME
      function initQuiz() {
        quizState = {
          currentQuestion: 0,
          score: 0,
          correct: 0,
          questions: shuffleArray([...objectsVocabulary]), // Use ALL 36 words
          isAnswered: false,
        };

        updateQuizUI();
        showQuizQuestion();
      }

      function updateQuizUI() {
        document.getElementById("quiz-current").textContent =
          quizState.currentQuestion + 1;
        document.getElementById("quiz-total").textContent =
          quizState.questions.length;
        document.getElementById("quiz-score").textContent = quizState.score;
        document.getElementById("quiz-correct").textContent = quizState.correct;

        const progress =
          (quizState.currentQuestion / quizState.questions.length) * 100;
        document.getElementById("quiz-progress").style.width = progress + "%";
      }

      function showQuizQuestion() {
        if (quizState.currentQuestion >= quizState.questions.length) {
          showQuizComplete();
          return;
        }

        const currentWord = quizState.questions[quizState.currentQuestion];
        document.getElementById("quiz-emoji").textContent = currentWord.emoji;

        const correctAnswer = currentWord.german;

        // Generate options
        const wrongOptions = getRandomWords([currentWord], 3);
        const options = shuffleArray([
          correctAnswer,
          ...wrongOptions.map((w) => w.german),
        ]);

        const optionsContainer = document.getElementById("quiz-options");
        optionsContainer.innerHTML = "";

        options.forEach((option) => {
          const optionElement = document.createElement("div");
          optionElement.className = "option";
          optionElement.textContent = option;
          optionElement.onclick = () => selectQuizOption(option, correctAnswer);
          optionsContainer.appendChild(optionElement);
        });

        quizState.isAnswered = false;
        document.getElementById("quiz-next").disabled = true;
        document.getElementById("quiz-feedback").classList.remove("show");
      }

      function selectQuizOption(selected, correct) {
        if (quizState.isAnswered) return;

        quizState.isAnswered = true;
        const isCorrect = selected === correct;

        document.querySelectorAll("#quiz-options .option").forEach((option) => {
          option.classList.add("disabled");
          if (option.textContent === correct) {
            option.classList.add("correct");
          } else if (option.textContent === selected && !isCorrect) {
            option.classList.add("incorrect");
          }
        });

        const feedback = document.getElementById("quiz-feedback");
        const currentWord = quizState.questions[quizState.currentQuestion];

        if (isCorrect) {
          quizState.score += 10;
          quizState.correct++;
          feedback.textContent = `‚úÖ Ch√≠nh x√°c! "${correct}" nghƒ©a l√† "${currentWord.vietnamese}"`;
          feedback.className = "feedback correct show";
        } else {
          feedback.textContent = `‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√†: ${correct} (${currentWord.vietnamese})`;
          feedback.className = "feedback incorrect show";
        }

        updateQuizUI();
        document.getElementById("quiz-next").disabled = false;
      }

      function nextQuizQuestion() {
        quizState.currentQuestion++;
        updateQuizUI();
        showQuizQuestion();
      }

      function restartQuiz() {
        initQuiz();
      }

      function speakQuizWord() {
        const currentWord = quizState.questions[quizState.currentQuestion];
        if (currentWord) {
          speak(currentWord.german);
        }
      }

      function showQuizComplete() {
        const accuracy = Math.round(
          (quizState.correct / quizState.questions.length) * 100
        );
        document.getElementById("quiz-options").innerHTML = `
                <div class="game-complete">
                    <h3>üéâ Ho√†n th√†nh Quiz ƒê·ªì v·∫≠t!</h3>
                    <p>ƒêi·ªÉm s·ªë: ${quizState.score}</p>
                    <p>ƒê√∫ng: ${quizState.correct}/${
          quizState.questions.length
        }</p>
                    <p>ƒê·ªô ch√≠nh x√°c: ${accuracy}%</p>
                    ${
                      accuracy >= 80
                        ? "<p>üèÜ Xu·∫•t s·∫Øc!</p>"
                        : accuracy >= 60
                        ? "<p>üëç Kh√° t·ªët!</p>"
                        : "<p>üí™ C·∫ßn luy·ªán t·∫≠p th√™m!</p>"
                    }
                </div>
            `;
      }

      // TYPING GAME
      function initTyping() {
        typingState = {
          currentWord: 0,
          score: 0,
          words: shuffleArray([...objectsVocabulary]), // Use ALL 36 words
          timer: null,
          timeLeft: 180, // 3 minutes for 36 words
        };

        updateTypingUI();
        showTypingQuestion();
        startTypingTimer();

        const input = document.getElementById("typing-input");
        input.value = "";
        input.style.display = "block";
        input.focus();
        input.onkeypress = handleTypingKeypress;
      }

      function updateTypingUI() {
        document.getElementById("typing-current").textContent =
          typingState.currentWord + 1;
        document.getElementById("typing-total").textContent =
          typingState.words.length;
        document.getElementById("typing-score").textContent = typingState.score;
        document.getElementById("typing-time").textContent =
          typingState.timeLeft;

        const progress =
          (typingState.currentWord / typingState.words.length) * 100;
        document.getElementById("typing-progress").style.width = progress + "%";
      }

      function showTypingQuestion() {
        if (
          typingState.currentWord >= typingState.words.length ||
          typingState.timeLeft <= 0
        ) {
          showTypingComplete();
          return;
        }

        const currentWord = typingState.words[typingState.currentWord];
        document.getElementById("typing-emoji").textContent = currentWord.emoji;

        document.getElementById("typing-input").value = "";
        document.getElementById("typing-input").focus();
        document.getElementById("typing-next").disabled = true;
        document.getElementById("typing-feedback").classList.remove("show");
      }

      function handleTypingKeypress(event) {
        if (event.key === "Enter") {
          checkTypingAnswer();
        }
      }

      function checkTypingAnswer() {
        const input = document.getElementById("typing-input");
        const userAnswer = input.value.trim().toLowerCase();
        const correctAnswer =
          typingState.words[typingState.currentWord].german.toLowerCase();

        const feedback = document.getElementById("typing-feedback");
        const currentWord = typingState.words[typingState.currentWord];

        if (userAnswer === correctAnswer) {
          typingState.score++;
          feedback.textContent = `‚úÖ Ch√≠nh x√°c! "${currentWord.german}" (${currentWord.vietnamese})`;
          feedback.className = "feedback correct show";
        } else {
          feedback.textContent = `‚ùå Sai r·ªìi! ƒê√°p √°n ƒë√∫ng l√†: ${currentWord.german} (${currentWord.vietnamese})`;
          feedback.className = "feedback incorrect show";
        }

        updateTypingUI();
        document.getElementById("typing-next").disabled = false;
      }

      function nextTypingQuestion() {
        typingState.currentWord++;
        updateTypingUI();
        showTypingQuestion();
      }

      function startTypingTimer() {
        typingState.timer = setInterval(() => {
          typingState.timeLeft--;
          updateTypingUI();

          if (typingState.timeLeft <= 0) {
            clearInterval(typingState.timer);
            showTypingComplete();
          }
        }, 1000);
      }

      function restartTyping() {
        if (typingState.timer) {
          clearInterval(typingState.timer);
        }
        initTyping();
      }

      function speakTypingWord() {
        const currentWord = typingState.words[typingState.currentWord];
        if (currentWord) {
          speak(currentWord.german);
        }
      }

      function showTypingComplete() {
        if (typingState.timer) {
          clearInterval(typingState.timer);
        }

        const accuracy =
          Math.round((typingState.score / typingState.currentWord) * 100) || 0;
        document.getElementById("typing-input").style.display = "none";
        document.getElementById("typing-feedback").innerHTML = `
                <div class="game-complete">
                    <h3>‚è∞ H·∫øt th·ªùi gian!</h3>
                    <p>T·ª´ ƒë√∫ng: ${typingState.score}/${
          typingState.currentWord
        }</p>
                    <p>ƒê·ªô ch√≠nh x√°c: ${accuracy}%</p>
                    ${
                      accuracy >= 80
                        ? "<p>üèÜ G√µ r·∫•t nhanh!</p>"
                        : accuracy >= 60
                        ? "<p>üëç Kh√° t·ªët!</p>"
                        : "<p>üí™ C·∫ßn luy·ªán t·∫≠p th√™m!</p>"
                    }
                </div>
            `;
        document.getElementById("typing-feedback").className = "feedback show";
      }

      // MEMORY GAME
      function initMemory() {
        const selectedWords = shuffleArray([...objectsVocabulary]).slice(0, 18); // Use 18 words for 36 cards
        const cards = [];

        selectedWords.forEach((word) => {
          cards.push({ type: "emoji", word: word, text: word.emoji });
          cards.push({ type: "german", word: word, text: word.german });
        });

        memoryState = {
          cards: shuffleArray(cards),
          flippedCards: [],
          matches: 0,
          moves: 0,
          startTime: Date.now(),
          timer: setInterval(updateMemoryTimer, 1000),
        };

        updateMemoryUI();
        renderMemoryGrid();
      }

      function updateMemoryUI() {
        document.getElementById("memory-matches").textContent =
          memoryState.matches;
        document.getElementById("memory-total").textContent = "18"; // Updated to 18 pairs
        document.getElementById("memory-moves").textContent = memoryState.moves;
      }

      function updateMemoryTimer() {
        const elapsed = Math.floor((Date.now() - memoryState.startTime) / 1000);
        document.getElementById("memory-time").textContent = elapsed;
      }

      function renderMemoryGrid() {
        const grid = document.getElementById("memory-grid");
        grid.innerHTML = "";

        memoryState.cards.forEach((card, index) => {
          const cardElement = document.createElement("div");
          cardElement.className = "memory-card";
          cardElement.innerHTML = `
                    <div class="memory-emoji">${
                      card.type === "emoji" ? "" : "ü§î"
                    }</div>
                    <div>?</div>
                `;
          cardElement.onclick = () => flipMemoryCard(index);
          cardElement.dataset.index = index;
          grid.appendChild(cardElement);
        });
      }

      function flipMemoryCard(index) {
        const cardElement = document.querySelector(`[data-index="${index}"]`);
        const card = memoryState.cards[index];

        if (
          cardElement.classList.contains("flipped") ||
          cardElement.classList.contains("matched") ||
          memoryState.flippedCards.length >= 2
        ) {
          return;
        }

        cardElement.classList.add("flipped");
        if (card.type === "emoji") {
          cardElement.innerHTML = `
                    <div class="memory-emoji">${card.text}</div>
                    <div>${card.word.vietnamese}</div>
                `;
        } else {
          cardElement.innerHTML = `
                    <div class="memory-emoji">üìù</div>
                    <div>${card.text}</div>
                `;
        }

        memoryState.flippedCards.push({ index, card });

        if (memoryState.flippedCards.length === 2) {
          memoryState.moves++;
          updateMemoryUI();

          setTimeout(() => {
            checkMemoryMatch();
          }, 1000);
        }
      }

      function checkMemoryMatch() {
        const [first, second] = memoryState.flippedCards;
        const firstElement = document.querySelector(
          `[data-index="${first.index}"]`
        );
        const secondElement = document.querySelector(
          `[data-index="${second.index}"]`
        );

        if (first.card.word.german === second.card.word.german) {
          // Match found
          firstElement.classList.add("matched");
          secondElement.classList.add("matched");
          memoryState.matches++;

          if (memoryState.matches === 18) {
            // Updated to match 18 pairs
            clearInterval(memoryState.timer);
            showMemoryComplete();
          }
        } else {
          // No match
          firstElement.classList.remove("flipped");
          secondElement.classList.remove("flipped");
          firstElement.innerHTML = `
                    <div class="memory-emoji">${
                      first.card.type === "emoji" ? "" : "ü§î"
                    }</div>
                    <div>?</div>
                `;
          secondElement.innerHTML = `
                    <div class="memory-emoji">${
                      second.card.type === "emoji" ? "" : "ü§î"
                    }</div>
                    <div>?</div>
                `;
        }

        memoryState.flippedCards = [];
        updateMemoryUI();
      }

      function showMemoryComplete() {
        const elapsed = Math.floor((Date.now() - memoryState.startTime) / 1000);
        const efficiency = Math.round((36 / memoryState.moves) * 100); // Updated calculation for 36 cards
        document.getElementById("memory-grid").innerHTML = `
                <div class="game-complete" style="grid-column: 1 / -1;">
                    <h3>üéâ Ho√†n th√†nh Memory Game!</h3>
                    <p>Th·ªùi gian: ${elapsed} gi√¢y</p>
                    <p>S·ªë l∆∞·ª£t: ${memoryState.moves}</p>
                    <p>Hi·ªáu su·∫•t: ${efficiency}%</p>
                    ${
                      efficiency >= 80
                        ? "<p>üß† Tr√≠ nh·ªõ xu·∫•t s·∫Øc!</p>"
                        : efficiency >= 60
                        ? "<p>üëç Tr√≠ nh·ªõ t·ªët!</p>"
                        : "<p>üí™ C·∫ßn luy·ªán t·∫≠p th√™m!</p>"
                    }
                </div>
            `;
      }

      function restartMemory() {
        if (memoryState.timer) {
          clearInterval(memoryState.timer);
        }
        initMemory();
      }

      // LISTENING GAME
      function initListening() {
        listeningState = {
          currentQuestion: 0,
          score: 0,
          correct: 0,
          questions: shuffleArray([...objectsVocabulary]), // Use ALL 36 words
          isAnswered: false,
        };

        updateListeningUI();
        showListeningQuestion();
      }

      function updateListeningUI() {
        document.getElementById("listening-current").textContent =
          listeningState.currentQuestion + 1;
        document.getElementById("listening-total").textContent =
          listeningState.questions.length;
        document.getElementById("listening-score").textContent =
          listeningState.score;
        document.getElementById("listening-correct").textContent =
          listeningState.correct;

        const progress =
          (listeningState.currentQuestion / listeningState.questions.length) *
          100;
        document.getElementById("listening-progress").style.width =
          progress + "%";
      }

      function showListeningQuestion() {
        if (listeningState.currentQuestion >= listeningState.questions.length) {
          showListeningComplete();
          return;
        }

        const currentWord =
          listeningState.questions[listeningState.currentQuestion];
        const correctAnswer = currentWord.emoji + " " + currentWord.vietnamese;

        // Generate options
        const wrongOptions = getRandomWords([currentWord], 3);
        const options = shuffleArray([
          correctAnswer,
          ...wrongOptions.map((w) => w.emoji + " " + w.vietnamese),
        ]);

        const optionsContainer = document.getElementById("listening-options");
        optionsContainer.innerHTML = "";

        options.forEach((option) => {
          const optionElement = document.createElement("div");
          optionElement.className = "option";
          optionElement.textContent = option;
          optionElement.onclick = () =>
            selectListeningOption(option, correctAnswer);
          optionsContainer.appendChild(optionElement);
        });

        listeningState.isAnswered = false;
        document.getElementById("listening-next").disabled = true;
        document.getElementById("listening-feedback").classList.remove("show");

        // Auto play the word
        setTimeout(() => {
          playListeningWord();
        }, 500);
      }

      function playListeningWord() {
        const currentWord =
          listeningState.questions[listeningState.currentQuestion];
        if (currentWord) {
          speak(currentWord.german);
        }
      }

      function selectListeningOption(selected, correct) {
        if (listeningState.isAnswered) return;

        listeningState.isAnswered = true;
        const isCorrect = selected === correct;

        document
          .querySelectorAll("#listening-options .option")
          .forEach((option) => {
            option.classList.add("disabled");
            if (option.textContent === correct) {
              option.classList.add("correct");
            } else if (option.textContent === selected && !isCorrect) {
              option.classList.add("incorrect");
            }
          });

        const feedback = document.getElementById("listening-feedback");
        const currentWord =
          listeningState.questions[listeningState.currentQuestion];

        if (isCorrect) {
          listeningState.score += 10;
          listeningState.correct++;
          feedback.textContent = `‚úÖ Ch√≠nh x√°c! "${currentWord.german}" nghƒ©a l√† "${currentWord.vietnamese}"`;
          feedback.className = "feedback correct show";
        } else {
          feedback.textContent = `‚ùå Sai r·ªìi! "${currentWord.german}" nghƒ©a l√† "${currentWord.vietnamese}"`;
          feedback.className = "feedback incorrect show";
        }

        updateListeningUI();
        document.getElementById("listening-next").disabled = false;
      }

      function nextListeningQuestion() {
        listeningState.currentQuestion++;
        updateListeningUI();
        showListeningQuestion();
      }

      function restartListening() {
        initListening();
      }

      function showListeningComplete() {
        const accuracy = Math.round(
          (listeningState.correct / listeningState.questions.length) * 100
        );
        document.getElementById("listening-options").innerHTML = `
                <div class="game-complete">
                    <h3>üéâ Ho√†n th√†nh Listening Game!</h3>
                    <p>ƒêi·ªÉm s·ªë: ${listeningState.score}</p>
                    <p>ƒê√∫ng: ${listeningState.correct}/${
          listeningState.questions.length
        }</p>
                    <p>ƒê·ªô ch√≠nh x√°c: ${accuracy}%</p>
                    ${
                      accuracy >= 80
                        ? "<p>üëÇ Nghe r·∫•t t·ªët!</p>"
                        : accuracy >= 60
                        ? "<p>üëç Kh√° t·ªët!</p>"
                        : "<p>üí™ C·∫ßn luy·ªán t·∫≠p th√™m!</p>"
                    }
                </div>
            `;
      }

      // FLASHCARD GAME
      function initFlashcard() {
        flashcardState = {
          currentCard: 0,
          learned: 0,
          difficult: 0,
          isFlipped: false,
        };

        updateFlashcardUI();
        showFlashcard();
      }

      function updateFlashcardUI() {
        document.getElementById("flashcard-current").textContent =
          flashcardState.currentCard + 1;
        document.getElementById("flashcard-total").textContent =
          objectsVocabulary.length;
        document.getElementById("flashcard-learned").textContent =
          flashcardState.learned;
        document.getElementById("flashcard-difficult").textContent =
          flashcardState.difficult;

        const progress =
          (flashcardState.currentCard / objectsVocabulary.length) * 100;
        document.getElementById("flashcard-progress").style.width =
          progress + "%";
      }

      function showFlashcard() {
        if (flashcardState.currentCard >= objectsVocabulary.length) {
          showFlashcardComplete();
          return;
        }

        const currentWord = objectsVocabulary[flashcardState.currentCard];
        document.getElementById("flashcard-emoji").textContent =
          currentWord.emoji;
        document.getElementById("flashcard-german").textContent =
          currentWord.german;
        document.getElementById("flashcard-pronunciation").textContent =
          currentWord.pronunciation;
        document.getElementById("flashcard-vietnamese").textContent =
          currentWord.vietnamese;

        // Reset flip state
        flashcardState.isFlipped = false;
        document
          .getElementById("flashcard-pronunciation")
          .classList.add("hidden");
        document.getElementById("flashcard-vietnamese").classList.add("hidden");
      }

      function flipFlashcard() {
        flashcardState.isFlipped = !flashcardState.isFlipped;

        const pronunciation = document.getElementById(
          "flashcard-pronunciation"
        );
        const vietnamese = document.getElementById("flashcard-vietnamese");

        if (flashcardState.isFlipped) {
          pronunciation.classList.remove("hidden");
          vietnamese.classList.remove("hidden");

          // Speak the word when flipped
          const currentWord = objectsVocabulary[flashcardState.currentCard];
          speak(currentWord.german);
        } else {
          pronunciation.classList.add("hidden");
          vietnamese.classList.add("hidden");
        }
      }

      function markLearned() {
        flashcardState.learned++;
        nextFlashcard();
      }

      function markDifficult() {
        flashcardState.difficult++;
        nextFlashcard();
      }

      function nextFlashcard() {
        flashcardState.currentCard++;
        updateFlashcardUI();
        showFlashcard();
      }

      function previousFlashcard() {
        if (flashcardState.currentCard > 0) {
          flashcardState.currentCard--;
          updateFlashcardUI();
          showFlashcard();
        }
      }

      function showFlashcardComplete() {
        const accuracy = Math.round(
          (flashcardState.learned / objectsVocabulary.length) * 100
        );
        document.getElementById("flashcard-card").innerHTML = `
                <div class="game-complete">
                    <h3>üìö Ho√†n th√†nh t·∫•t c·∫£ Flashcard!</h3>
                    <p>ƒê√£ h·ªçc: ${flashcardState.learned}</p>
                    <p>Kh√≥: ${flashcardState.difficult}</p>
                    <p>T·ª∑ l·ªá th√†nh th·∫°o: ${accuracy}%</p>
                    ${
                      accuracy >= 80
                        ? "<p>üèÜ H·ªçc r·∫•t t·ªët!</p>"
                        : accuracy >= 60
                        ? "<p>üëç Kh√° t·ªët!</p>"
                        : "<p>üí™ C·∫ßn √¥n t·∫≠p th√™m!</p>"
                    }
                </div>
            `;
      }

      // VOCABULARY LIST
      function initVocabulary() {
        const vocabularyContainer = document.getElementById("vocabulary-list");
        vocabularyContainer.innerHTML = "";

        objectsVocabulary.forEach((word) => {
          const vocabItem = document.createElement("div");
          vocabItem.className = "vocab-item";
          vocabItem.onclick = () => speak(word.german);

          vocabItem.innerHTML = `
                    <div class="vocab-emoji">${word.emoji}</div>
                    <div class="word-german">${word.german}</div>
                    <div class="word-pronunciation">${word.pronunciation}</div>
                    <div class="word-vietnamese">${word.vietnamese}</div>
                `;

          vocabularyContainer.appendChild(vocabItem);
        });
      }

      // Initialize the first game
      window.onload = function () {
        initQuiz();

        // Load voices
        setTimeout(() => {
          if (speechSynthesis.getVoices().length === 0) {
            speechSynthesis.addEventListener("voiceschanged", function () {
              console.log("Voices loaded:", speechSynthesis.getVoices().length);
            });
          }
        }, 100);
      };
    </script>
  </body>
</html>
