<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Học Tiếng Đức - 30 Buổi Ôn Tập</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        color: #333;
        padding: 20px;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        padding: 30px;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .header {
        text-align: center;
        margin-bottom: 40px;
      }

      .header h1 {
        font-size: 3em;
        color: #4a47a3;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
      }

      .header p {
        font-size: 1.3em;
        color: #666;
        margin-bottom: 20px;
      }

      /* Video Section Styles */
      .video-section {
        background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%);
        border: 3px solid #2196f3;
        border-radius: 20px;
        padding: 30px;
        margin-bottom: 40px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(33, 150, 243, 0.2);
        position: relative;
        overflow: hidden;
      }

      .video-section::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(33, 150, 243, 0.1),
          transparent
        );
        animation: videoShine 4s ease-in-out infinite;
        z-index: 1;
      }

      @keyframes videoShine {
        0% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
        50% {
          transform: translateX(100%) translateY(100%) rotate(45deg);
        }
        100% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
      }

      .video-content {
        position: relative;
        z-index: 2;
      }

      .video-title {
        font-size: 2em;
        color: #1976d2;
        margin-bottom: 15px;
        font-weight: bold;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 15px;
      }

      .video-description {
        font-size: 1.2em;
        color: #1565c0;
        margin-bottom: 25px;
        line-height: 1.6;
        font-weight: 500;
      }

      .video-container {
        position: relative;
        max-width: 800px;
        margin: 0 auto;
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
        border: 4px solid #ffffff;
        background: #000;
      }

      .video-player {
        width: 100%;
        height: auto;
        display: block;
        border-radius: 12px;
      }

      .video-controls-note {
        margin-top: 20px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.9);
        border-radius: 10px;
        color: #1565c0;
        font-size: 1em;
        border-left: 4px solid #2196f3;
      }

      .video-controls-note .controls-list {
        list-style: none;
        margin-top: 10px;
        text-align: left;
        display: inline-block;
      }

      .video-controls-note .controls-list li {
        margin: 5px 0;
        padding-left: 20px;
        position: relative;
      }

      .video-controls-note .controls-list li::before {
        content: "▶️";
        position: absolute;
        left: 0;
        top: 0;
      }

      /* Alternative: Auto-play Video Modal */
      .video-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
      }

      .video-modal.show {
        opacity: 1;
        visibility: visible;
      }

      .video-modal-content {
        background: white;
        border-radius: 20px;
        padding: 30px;
        max-width: 90%;
        max-height: 90%;
        position: relative;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      }

      .video-modal-close {
        position: absolute;
        top: 15px;
        right: 20px;
        background: none;
        border: none;
        font-size: 2em;
        cursor: pointer;
        color: #666;
        transition: color 0.3s ease;
      }

      .video-modal-close:hover {
        color: #f44336;
      }

      .modal-video-container {
        text-align: center;
      }

      .modal-video-title {
        font-size: 1.8em;
        color: #1976d2;
        margin-bottom: 20px;
        font-weight: bold;
      }

      .modal-video-player {
        width: 100%;
        max-width: 700px;
        height: auto;
        border-radius: 15px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      .intro-section {
        background: linear-gradient(135deg, #e8f5e8 0%, #d4edda 100%);
        border: 2px solid #28a745;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 30px;
        text-align: center;
      }

      .intro-section h3 {
        color: #155724;
        margin-bottom: 15px;
        font-size: 1.4em;
      }

      .intro-section p {
        color: #155724;
        line-height: 1.6;
        margin-bottom: 10px;
      }

      /* Phần banner chạy */
      .banner-container {
        width: 100%;
        overflow: hidden;
        background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
        border: 2px solid #007bff;
        border-radius: 15px;
        margin-bottom: 30px;
        padding: 15px 0;
        position: relative;
        box-shadow: 0 8px 25px rgba(0, 123, 255, 0.2);
      }

      .banner-content {
        display: flex;
        align-items: center;
        white-space: nowrap;
        animation: scrollBanner 20s linear infinite;
        font-size: 1.2em;
        font-weight: bold;
        color: white;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      }

      .banner-link {
        color: white;
        text-decoration: none;
        padding: 8px 20px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 25px;
        margin: 0 20px;
        transition: all 0.3s ease;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .banner-link:hover {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(255, 255, 255, 0.2);
      }

      @keyframes scrollBanner {
        0% {
          transform: translateX(100%);
        }
        100% {
          transform: translateX(-100%);
        }
      }

      .banner-container:hover .banner-content {
        animation-play-state: paused;
      }

      /* Banner cầu vồng cho bảng chữ cái */
      .banner-container.rainbow {
        background: linear-gradient(
          135deg,
          #ff0000 0%,
          #ff7f00 14.28%,
          #ffff00 28.56%,
          #00ff00 42.84%,
          #0000ff 57.12%,
          #4b0082 71.4%,
          #9400d3 85.68%,
          #ff0000 100%
        );
        border: 3px solid transparent;
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        animation: rainbowShimmer 3s ease-in-out infinite;
      }

      @keyframes rainbowShimmer {
        0% {
          background: linear-gradient(
            135deg,
            #ff0000 0%,
            #ff7f00 14.28%,
            #ffff00 28.56%,
            #00ff00 42.84%,
            #0000ff 57.12%,
            #4b0082 71.4%,
            #9400d3 85.68%,
            #ff0000 100%
          );
        }
        16.66% {
          background: linear-gradient(
            135deg,
            #ff7f00 0%,
            #ffff00 14.28%,
            #00ff00 28.56%,
            #0000ff 42.84%,
            #4b0082 57.12%,
            #9400d3 71.4%,
            #ff0000 85.68%,
            #ff7f00 100%
          );
        }
        33.33% {
          background: linear-gradient(
            135deg,
            #ffff00 0%,
            #00ff00 14.28%,
            #0000ff 28.56%,
            #4b0082 42.84%,
            #9400d3 57.12%,
            #ff0000 71.4%,
            #ff7f00 85.68%,
            #ffff00 100%
          );
        }
        50% {
          background: linear-gradient(
            135deg,
            #00ff00 0%,
            #0000ff 14.28%,
            #4b0082 28.56%,
            #9400d3 42.84%,
            #ff0000 57.12%,
            #ff7f00 71.4%,
            #ffff00 85.68%,
            #00ff00 100%
          );
        }
        66.66% {
          background: linear-gradient(
            135deg,
            #0000ff 0%,
            #4b0082 14.28%,
            #9400d3 28.56%,
            #ff0000 42.84%,
            #ff7f00 57.12%,
            #ffff00 71.4%,
            #00ff00 85.68%,
            #0000ff 100%
          );
        }
        83.33% {
          background: linear-gradient(
            135deg,
            #4b0082 0%,
            #9400d3 14.28%,
            #ff0000 28.56%,
            #ff7f00 42.84%,
            #ffff00 57.12%,
            #00ff00 71.4%,
            #0000ff 85.68%,
            #4b0082 100%
          );
        }
        100% {
          background: linear-gradient(
            135deg,
            #9400d3 0%,
            #ff0000 14.28%,
            #ff7f00 28.56%,
            #ffff00 42.84%,
            #00ff00 57.12%,
            #0000ff 71.4%,
            #4b0082 85.68%,
            #9400d3 100%
          );
        }
      }

      .banner-container.rainbow .banner-content {
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
      }

      .banner-container.rainbow .banner-link {
        background: rgba(255, 255, 255, 0.25);
        border: 2px solid rgba(255, 255, 255, 0.4);
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        font-weight: bold;
      }

      .banner-container.rainbow .banner-link:hover {
        background: rgba(255, 255, 255, 0.35);
        transform: scale(1.05);
        box-shadow: 0 8px 20px rgba(255, 255, 255, 0.3);
        border-color: rgba(255, 255, 255, 0.6);
      }

      /* Alphabet Section Styles */
      .alphabet-section {
        background: linear-gradient(
          135deg,
          #ff6b6b 0%,
          #ffa726 15%,
          #ffee58 30%,
          #66bb6a 45%,
          #42a5f5 60%,
          #ab47bc 75%,
          #ef5350 100%
        );
        border: 3px solid transparent;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 30px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .alphabet-section::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          #ff0000,
          #ff7f00,
          #ffff00,
          #00ff00,
          #0000ff,
          #4b0082,
          #9400d3,
          #ff0000,
          #ff7f00,
          #ffff00,
          #00ff00,
          #0000ff,
          #4b0082,
          #9400d3
        );
        background-size: 400% 400%;
        animation: rainbowBorder 3s ease infinite;
        z-index: -1;
        border-radius: 15px;
      }

      @keyframes rainbowBorder {
        0% {
          background-position: 0% 50%;
        }
        50% {
          background-position: 100% 50%;
        }
        100% {
          background-position: 0% 50%;
        }
      }

      .alphabet-section h3 {
        color: #ffffff;
        margin-bottom: 20px;
        font-size: 1.4em;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        font-weight: bold;
      }

      .alphabet-note {
        background: rgba(255, 255, 255, 0.95);
        border-left: 4px solid #ff6b6b;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .alphabet-note p {
        margin: 0;
        color: #333;
        font-size: 0.95em;
        font-weight: 600;
      }

      /* Game Controls */
      .game-controls {
        background: linear-gradient(
          135deg,
          #ff9800 0%,
          #ff5722 25%,
          #e91e63 50%,
          #9c27b0 75%,
          #673ab7 100%
        );
        border: 3px solid transparent;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        text-align: center;
        position: relative;
        overflow: hidden;
      }

      .game-controls::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          45deg,
          #ff0000,
          #ff7f00,
          #ffff00,
          #00ff00,
          #0000ff,
          #4b0082,
          #9400d3
        );
        background-size: 400% 400%;
        animation: rainbowBorder 4s ease infinite;
        z-index: -1;
        border-radius: 15px;
      }

      .game-controls h4 {
        color: #ffffff;
        margin-bottom: 15px;
        font-size: 1.2em;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        font-weight: bold;
      }

      .game-mode-buttons {
        display: flex;
        gap: 10px;
        justify-content: center;
        flex-wrap: wrap;
        margin-bottom: 15px;
      }

      .game-mode-btn {
        padding: 10px 20px;
        border: 2px solid #ffffff;
        border-radius: 25px;
        background: rgba(255, 255, 255, 0.9);
        color: #333;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: bold;
        text-shadow: none;
      }

      .game-mode-btn.active {
        background: linear-gradient(135deg, #ff6b6b 0%, #ffa726 100%);
        color: white;
        border-color: #ffffff;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      }

      .game-mode-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        background: linear-gradient(135deg, #ff9800 0%, #ff5722 100%);
        color: white;
      }

      .pronunciation-game {
        background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
        border: 2px solid #9c27b0;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        text-align: center;
        display: none;
      }

      .pronunciation-game.active {
        display: block;
      }

      .pronunciation-game h4 {
        color: #4a148c;
        margin-bottom: 15px;
        font-size: 1.3em;
      }

      .current-challenge {
        background: white;
        border: 2px solid #9c27b0;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
      }

      .challenge-letter {
        font-size: 3em;
        font-weight: bold;
        color: #4a148c;
        margin-bottom: 10px;
        cursor: pointer;
        transition: transform 0.3s ease;
      }

      .challenge-letter:hover {
        transform: scale(1.1);
      }

      .challenge-pronunciation {
        font-size: 1.2em;
        color: #7b1fa2;
        margin-bottom: 15px;
      }

      .challenge-example {
        font-size: 1em;
        color: #666;
        font-style: italic;
        margin-bottom: 15px;
      }

      /* Speech Recognition Area */
      .speech-recognition {
        background: #e3f2fd;
        border: 2px solid #2196f3;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 20px;
        text-align: center;
        display: none;
      }

      .speech-recognition.active {
        display: block;
      }

      .speech-recognition p {
        margin-bottom: 15px;
        font-size: 1.1em;
        color: #1976d2;
      }

      .current-letter-display {
        font-size: 2.5em;
        font-weight: bold;
        color: #4a148c;
        margin: 20px 0;
        cursor: pointer;
        padding: 15px;
        border-radius: 10px;
        transition: background-color 0.3s ease;
      }

      .current-letter-display:hover {
        background-color: rgba(102, 126, 234, 0.1);
      }

      .mic-button {
        background: #f44336;
        color: white;
        border: none;
        border-radius: 50%;
        width: 80px;
        height: 80px;
        font-size: 2em;
        cursor: pointer;
        transition: all 0.3s ease;
        margin: 10px;
      }

      .mic-button:hover {
        transform: scale(1.1);
      }

      .mic-button.recording {
        background: #4caf50;
        animation: pulse 1s infinite;
      }

      @keyframes pulse {
        0% {
          transform: scale(1);
        }
        50% {
          transform: scale(1.1);
        }
        100% {
          transform: scale(1);
        }
      }

      .pronunciation-feedback {
        margin-top: 15px;
        padding: 15px;
        border-radius: 10px;
        font-weight: bold;
        display: none;
      }

      .pronunciation-feedback.success {
        background: #d4edda;
        border: 2px solid #28a745;
        color: #155724;
      }

      .pronunciation-feedback.error {
        background: #f8d7da;
        border: 2px solid #dc3545;
        color: #721c24;
      }

      .pronunciation-feedback.warning {
        background: #fff3cd;
        border: 2px solid #ffc107;
        color: #856404;
      }

      /* Audio visualizer */
      .audio-visualizer {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 3px;
        margin: 10px 0;
        height: 40px;
      }

      .audio-bar {
        width: 4px;
        background: #667eea;
        border-radius: 2px;
        transition: height 0.1s ease;
      }

      .record-controls {
        display: flex;
        gap: 15px;
        justify-content: center;
        align-items: center;
        margin-bottom: 15px;
      }

      .record-btn {
        padding: 15px 25px;
        border: none;
        border-radius: 50px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .record-btn.start-record {
        background: #f44336;
        color: white;
      }

      .record-btn.stop-record {
        background: #4caf50;
        color: white;
      }

      .record-btn:hover {
        transform: scale(1.05);
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .record-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .recording-indicator {
        display: none;
        color: #f44336;
        font-weight: bold;
        animation: pulse 1s infinite;
      }

      .recording-indicator.active {
        display: block;
      }

      .play-reference-btn {
        background: #2196f3;
        color: white;
        padding: 10px 20px;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        font-weight: bold;
        transition: all 0.3s ease;
      }

      .play-reference-btn:hover {
        background: #1976d2;
        transform: translateY(-2px);
      }

      .feedback-section {
        background: white;
        border: 2px solid #ddd;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 15px;
        min-height: 100px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .feedback-section.success {
        border-color: #4caf50;
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
      }

      .feedback-section.error {
        border-color: #f44336;
        background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
      }

      .feedback-section.warning {
        border-color: #ff9800;
        background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%);
      }

      .feedback-text {
        font-size: 1.1em;
        font-weight: bold;
        text-align: center;
      }

      .feedback-section.success .feedback-text {
        color: #2e7d32;
      }

      .feedback-section.error .feedback-text {
        color: #c62828;
      }

      .feedback-section.warning .feedback-text {
        color: #ef6c00;
      }

      .game-stats {
        display: flex;
        justify-content: space-around;
        margin-bottom: 15px;
        padding: 15px;
        background: rgba(255, 255, 255, 0.7);
        border-radius: 10px;
      }

      .stat-item {
        text-align: center;
      }

      .stat-value {
        font-size: 1.5em;
        font-weight: bold;
        color: #4a148c;
      }

      .stat-label {
        font-size: 0.9em;
        color: #666;
      }

      .next-challenge-btn {
        background: #4caf50;
        color: white;
        padding: 12px 30px;
        border: none;
        border-radius: 25px;
        font-size: 1.1em;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        margin-top: 15px;
      }

      .next-challenge-btn:hover {
        background: #45a049;
        transform: translateY(-2px);
      }

      .next-challenge-btn:disabled {
        opacity: 0.5;
        cursor: not-allowed;
        transform: none;
      }

      .alphabet-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        gap: 12px;
        margin-bottom: 25px;
      }

      .alphabet-card {
        background: linear-gradient(135deg, #ffffff 0%, #f8f9fa 100%);
        border: 3px solid #ff6b6b;
        border-radius: 15px;
        padding: 15px 10px;
        text-align: center;
        transition: all 0.3s ease;
        cursor: pointer;
        position: relative;
        user-select: none;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      }

      .alphabet-card:nth-child(7n + 1) {
        border-color: #ff0000;
        box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
      }

      .alphabet-card:nth-child(7n + 2) {
        border-color: #ff7f00;
        box-shadow: 0 4px 15px rgba(255, 127, 0, 0.3);
      }

      .alphabet-card:nth-child(7n + 3) {
        border-color: #ffff00;
        box-shadow: 0 4px 15px rgba(255, 255, 0, 0.3);
      }

      .alphabet-card:nth-child(7n + 4) {
        border-color: #00ff00;
        box-shadow: 0 4px 15px rgba(0, 255, 0, 0.3);
      }

      .alphabet-card:nth-child(7n + 5) {
        border-color: #0000ff;
        box-shadow: 0 4px 15px rgba(0, 0, 255, 0.3);
      }

      .alphabet-card:nth-child(7n + 6) {
        border-color: #4b0082;
        box-shadow: 0 4px 15px rgba(75, 0, 130, 0.3);
      }

      .alphabet-card:nth-child(7n + 7) {
        border-color: #9400d3;
        box-shadow: 0 4px 15px rgba(148, 0, 211, 0.3);
      }

      .alphabet-card:active {
        transform: translateY(-3px) scale(0.98);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
      }

      .alphabet-card:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      }

      .alphabet-card.practiced {
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
        border-color: #4caf50 !important;
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4) !important;
      }

      .alphabet-card.current-challenge {
        background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%);
        border-color: #9c27b0 !important;
        animation: rainbowGlow 2s ease-in-out infinite alternate;
        box-shadow: 0 0 20px rgba(156, 39, 176, 0.5) !important;
      }

      @keyframes rainbowGlow {
        0% {
          box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }
        16.66% {
          box-shadow: 0 0 20px rgba(255, 127, 0, 0.5);
        }
        33.33% {
          box-shadow: 0 0 20px rgba(255, 255, 0, 0.5);
        }
        50% {
          box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }
        66.66% {
          box-shadow: 0 0 20px rgba(0, 0, 255, 0.5);
        }
        83.33% {
          box-shadow: 0 0 20px rgba(75, 0, 130, 0.5);
        }
        100% {
          box-shadow: 0 0 20px rgba(148, 0, 211, 0.5);
        }
      }

      .alphabet-card .letter {
        font-size: 1.8em;
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
      }

      .alphabet-card.practiced .letter {
        color: #2e7d32;
      }

      .alphabet-card.current-challenge .letter {
        color: #4a148c;
      }

      .alphabet-card .pronunciation {
        font-size: 1em;
        color: #d32f2f;
        font-weight: bold;
        margin-bottom: 5px;
      }

      .alphabet-card .example {
        font-size: 0.85em;
        color: #616161;
        font-style: italic;
      }

      .special-chars {
        margin-top: 25px;
      }

      .special-chars h4 {
        color: #ffffff;
        margin-bottom: 15px;
        font-size: 1.2em;
        text-align: center;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        font-weight: bold;
      }

      .special-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 15px;
      }

      .alphabet-card.special {
        background: linear-gradient(135deg, #fff8e1 0%, #ffecb3 100%);
        border: 3px solid #ff9800;
        box-shadow: 0 4px 15px rgba(255, 152, 0, 0.3);
      }

      .alphabet-card.special:nth-child(4n + 1) {
        border-color: #ff0000;
        box-shadow: 0 4px 15px rgba(255, 0, 0, 0.3);
      }

      .alphabet-card.special:nth-child(4n + 2) {
        border-color: #ff7f00;
        box-shadow: 0 4px 15px rgba(255, 127, 0, 0.3);
      }

      .alphabet-card.special:nth-child(4n + 3) {
        border-color: #00ff00;
        box-shadow: 0 4px 15px rgba(0, 255, 0, 0.3);
      }

      .alphabet-card.special:nth-child(4n + 4) {
        border-color: #0000ff;
        box-shadow: 0 4px 15px rgba(0, 0, 255, 0.3);
      }

      .alphabet-card.special:hover {
        transform: translateY(-5px) scale(1.05);
        box-shadow: 0 15px 30px rgba(0, 0, 0, 0.2);
      }

      .alphabet-card.special:active {
        transform: translateY(-3px) scale(0.98);
        box-shadow: 0 12px 25px rgba(0, 0, 0, 0.2);
      }

      .alphabet-card.special .letter {
        color: #e65100;
      }

      .alphabet-card.special.practiced {
        border-color: #4caf50 !important;
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
        box-shadow: 0 4px 15px rgba(76, 175, 80, 0.4) !important;
      }

      .alphabet-card.special.practiced .letter {
        color: #2e7d32;
      }

      /* Sound indicator */
      .sound-indicator {
        position: absolute;
        top: 5px;
        right: 5px;
        font-size: 12px;
        color: #ff6b6b;
        opacity: 0.8;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.3);
      }

      .alphabet-card.special .sound-indicator {
        color: #ff9800;
      }

      .alphabet-card.playing {
        animation: rainbowPulse 0.6s ease-in-out;
        background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%);
      }

      @keyframes rainbowPulse {
        0% {
          transform: scale(1);
          box-shadow: 0 0 20px rgba(255, 0, 0, 0.5);
        }
        16.66% {
          transform: scale(1.02);
          box-shadow: 0 0 20px rgba(255, 127, 0, 0.5);
        }
        33.33% {
          transform: scale(1.04);
          box-shadow: 0 0 20px rgba(255, 255, 0, 0.5);
        }
        50% {
          transform: scale(1.05);
          box-shadow: 0 0 20px rgba(0, 255, 0, 0.5);
        }
        66.66% {
          transform: scale(1.04);
          box-shadow: 0 0 20px rgba(0, 0, 255, 0.5);
        }
        83.33% {
          transform: scale(1.02);
          box-shadow: 0 0 20px rgba(75, 0, 130, 0.5);
        }
        100% {
          transform: scale(1);
          box-shadow: 0 0 20px rgba(148, 0, 211, 0.5);
        }
      }

      /* Phần mẹo phát âm mới */
      .pronunciation-tips {
        background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
        border: 2px solid #ffc107;
        border-radius: 15px;
        padding: 25px;
        margin-bottom: 30px;
      }

      .pronunciation-tips h3 {
        color: #856404;
        margin-bottom: 20px;
        font-size: 1.4em;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 10px;
      }

      .pronunciation-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 15px;
        margin-top: 15px;
      }

      .pronunciation-rule {
        background: white;
        border-left: 4px solid #ffc107;
        padding: 15px;
        border-radius: 8px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
      }

      .pronunciation-rule:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      }

      .pronunciation-rule .rule-title {
        font-weight: bold;
        color: #856404;
        margin-bottom: 8px;
        font-size: 1.1em;
      }

      .pronunciation-rule .rule-example {
        color: #495057;
        font-size: 0.95em;
        line-height: 1.4;
      }

      .pronunciation-rule .rule-example .german {
        font-weight: bold;
        color: #dc3545;
      }

      .pronunciation-rule .rule-example .vietnamese {
        font-weight: bold;
        color: #28a745;
      }

      .lessons-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
        gap: 25px;
        margin-top: 30px;
      }

      .lesson-card {
        background: linear-gradient(135deg, #fff 0%, #f8f9ff 100%);
        border: 2px solid #667eea;
        border-radius: 15px;
        padding: 25px;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .lesson-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        border-color: #4a47a3;
      }

      /* Hiệu ứng đặc biệt cho "Khó" - Màu đỏ */
      .lesson-card.hard-card {
        background: linear-gradient(135deg, #ffebee 0%, #ffcdd2 100%);
        border: 3px solid #dc3545;
        position: relative;
        overflow: hidden;
        animation: hardGlow 2s ease-in-out infinite alternate;
      }

      .lesson-card.hard-card::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(220, 53, 69, 0.3),
          transparent
        );
        animation: hardShine 3s ease-in-out infinite;
        z-index: 1;
      }

      .lesson-card.hard-card .lesson-content {
        position: relative;
        z-index: 2;
      }

      .lesson-card.hard-card .lesson-number {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        animation: hardNumberPulse 1.5s ease-in-out infinite;
        box-shadow: 0 0 20px rgba(220, 53, 69, 0.6);
      }

      .lesson-card.hard-card .difficulty-badge {
        animation: hardBadgeFlash 2s ease-in-out infinite;
        box-shadow: 0 0 15px rgba(220, 53, 69, 0.5);
      }

      .lesson-card.hard-card:hover {
        transform: translateY(-15px) scale(1.02);
        box-shadow: 0 25px 50px rgba(220, 53, 69, 0.3);
        border-color: #c82333;
      }

      .lesson-card.hard-card .lesson-title {
        color: #721c24;
        text-shadow: 1px 1px 2px rgba(220, 53, 69, 0.2);
      }

      .lesson-card.hard-card .lesson-description {
        color: #721c24;
        font-weight: 500;
      }

      .lesson-card.hard-card .lesson-stats {
        color: #721c24;
        font-weight: 600;
      }

      .lesson-card.hard-card .btn-game {
        background: linear-gradient(135deg, #dc3545 0%, #c82333 100%);
        animation: hardButtonGlow 2.5s ease-in-out infinite;
        position: relative;
        overflow: hidden;
      }

      .lesson-card.hard-card .btn-game::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.4),
          transparent
        );
        animation: hardButtonShimmer 2s ease-in-out infinite;
      }

      .lesson-card.hard-card .btn-game:hover {
        background: linear-gradient(135deg, #c82333 0%, #a71e2a 100%);
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 25px rgba(220, 53, 69, 0.4);
      }

      @keyframes hardGlow {
        from {
          box-shadow: 0 15px 35px rgba(220, 53, 69, 0.2);
        }
        to {
          box-shadow: 0 20px 45px rgba(220, 53, 69, 0.4),
            0 0 30px rgba(220, 53, 69, 0.3);
        }
      }

      @keyframes hardShine {
        0% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
        50% {
          transform: translateX(100%) translateY(100%) rotate(45deg);
        }
        100% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
      }

      @keyframes hardNumberPulse {
        0%,
        100% {
          transform: scale(1);
          box-shadow: 0 0 20px rgba(220, 53, 69, 0.6);
        }
        50% {
          transform: scale(1.1);
          box-shadow: 0 0 30px rgba(220, 53, 69, 0.8);
        }
      }

      @keyframes hardBadgeFlash {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
        }
        50% {
          opacity: 0.8;
          transform: scale(1.05);
        }
      }

      @keyframes hardButtonGlow {
        0%,
        100% {
          box-shadow: 0 5px 15px rgba(220, 53, 69, 0.3);
        }
        50% {
          box-shadow: 0 8px 25px rgba(220, 53, 69, 0.5);
        }
      }

      @keyframes hardButtonShimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      /* Hiệu ứng đặc biệt cho "Ôn tập" - 7 sắc cầu vồng */
      .lesson-card.review-card {
        background: linear-gradient(
          135deg,
          #ff0000 0%,
          #ff7f00 14.28%,
          #ffff00 28.56%,
          #00ff00 42.84%,
          #0000ff 57.12%,
          #4b0082 71.4%,
          #9400d3 85.68%,
          #ff0000 100%
        );
        border: 3px solid transparent;
        position: relative;
        overflow: hidden;
        animation: reviewRainbowGlow 3s ease-in-out infinite;
      }

      .lesson-card.review-card::before {
        content: "";
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: linear-gradient(
          45deg,
          transparent,
          rgba(255, 255, 255, 0.3),
          transparent
        );
        animation: reviewRainbowShine 4s ease-in-out infinite;
        z-index: 1;
      }

      .lesson-card.review-card .lesson-content {
        position: relative;
        z-index: 2;
        background: rgba(255, 255, 255, 0.95);
        border-radius: 12px;
        padding: 20px;
        margin: -5px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      }

      .lesson-card.review-card .lesson-number {
        background: linear-gradient(
          135deg,
          #ff0000 0%,
          #ff7f00 14.28%,
          #ffff00 28.56%,
          #00ff00 42.84%,
          #0000ff 57.12%,
          #4b0082 71.4%,
          #9400d3 85.68%,
          #ff0000 100%
        );
        background-size: 200% 200%;
        animation: reviewRainbowNumberPulse 2s ease-in-out infinite;
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        box-shadow: 0 0 25px rgba(255, 255, 255, 0.6);
      }

      .lesson-card.review-card .difficulty-badge {
        background: linear-gradient(
          135deg,
          #ff0000 0%,
          #ff7f00 14.28%,
          #ffff00 28.56%,
          #00ff00 42.84%,
          #0000ff 57.12%,
          #4b0082 71.4%,
          #9400d3 85.68%,
          #ff0000 100%
        );
        background-size: 200% 200%;
        animation: reviewRainbowBadgeFlash 2.5s ease-in-out infinite;
        color: white;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
      }

      .lesson-card.review-card:hover {
        transform: translateY(-15px) scale(1.02);
        box-shadow: 0 25px 50px rgba(0, 0, 0, 0.3);
        animation: reviewRainbowGlow 1.5s ease-in-out infinite;
      }

      .lesson-card.review-card .lesson-title {
        color: #333;
        text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.1);
        font-weight: bold;
      }

      .lesson-card.review-card .lesson-description {
        color: #444;
        font-weight: 500;
      }

      .lesson-card.review-card .lesson-stats {
        color: #555;
        font-weight: 600;
      }

      .lesson-card.review-card .btn-game {
        background: linear-gradient(
          135deg,
          #ff0000 0%,
          #ff7f00 14.28%,
          #ffff00 28.56%,
          #00ff00 42.84%,
          #0000ff 57.12%,
          #4b0082 71.4%,
          #9400d3 85.68%,
          #ff0000 100%
        );
        background-size: 200% 200%;
        animation: reviewRainbowButtonGlow 3s ease-in-out infinite;
        position: relative;
        overflow: hidden;
        color: white;
        text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.5);
        font-weight: bold;
      }

      .lesson-card.review-card .btn-game::before {
        content: "";
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(
          90deg,
          transparent,
          rgba(255, 255, 255, 0.6),
          transparent
        );
        animation: reviewRainbowButtonShimmer 2s ease-in-out infinite;
      }

      .lesson-card.review-card .btn-game:hover {
        transform: translateY(-3px) scale(1.05);
        box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        animation: reviewRainbowButtonGlow 1.5s ease-in-out infinite;
      }

      @keyframes reviewRainbowGlow {
        0% {
          background-position: 0% 50%;
          box-shadow: 0 15px 35px rgba(255, 0, 0, 0.3);
        }
        16.66% {
          background-position: 16.66% 50%;
          box-shadow: 0 17px 37px rgba(255, 127, 0, 0.3);
        }
        33.33% {
          background-position: 33.33% 50%;
          box-shadow: 0 19px 39px rgba(255, 255, 0, 0.3);
        }
        50% {
          background-position: 50% 50%;
          box-shadow: 0 21px 41px rgba(0, 255, 0, 0.3);
        }
        66.66% {
          background-position: 66.66% 50%;
          box-shadow: 0 19px 39px rgba(0, 0, 255, 0.3);
        }
        83.33% {
          background-position: 83.33% 50%;
          box-shadow: 0 17px 37px rgba(75, 0, 130, 0.3);
        }
        100% {
          background-position: 100% 50%;
          box-shadow: 0 15px 35px rgba(148, 0, 211, 0.3);
        }
      }

      @keyframes reviewRainbowShine {
        0% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
        50% {
          transform: translateX(100%) translateY(100%) rotate(45deg);
        }
        100% {
          transform: translateX(-100%) translateY(-100%) rotate(45deg);
        }
      }

      @keyframes reviewRainbowNumberPulse {
        0%,
        100% {
          transform: scale(1);
          background-position: 0% 50%;
          box-shadow: 0 0 25px rgba(255, 0, 0, 0.6);
        }
        50% {
          transform: scale(1.1);
          background-position: 100% 50%;
          box-shadow: 0 0 35px rgba(0, 255, 0, 0.8);
        }
      }

      @keyframes reviewRainbowBadgeFlash {
        0%,
        100% {
          opacity: 1;
          transform: scale(1);
          background-position: 0% 50%;
        }
        50% {
          opacity: 0.9;
          transform: scale(1.05);
          background-position: 100% 50%;
        }
      }

      @keyframes reviewRainbowButtonGlow {
        0%,
        100% {
          background-position: 0% 50%;
          box-shadow: 0 5px 15px rgba(255, 0, 0, 0.4);
        }
        50% {
          background-position: 100% 50%;
          box-shadow: 0 8px 25px rgba(0, 255, 0, 0.6);
        }
      }

      @keyframes reviewRainbowButtonShimmer {
        0% {
          left: -100%;
        }
        100% {
          left: 100%;
        }
      }

      .lesson-number {
        position: absolute;
        top: -10px;
        right: -10px;
        background: #667eea;
        color: white;
        width: 60px;
        height: 60px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-weight: bold;
        font-size: 1.2em;
        box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
      }

      .lesson-title {
        font-size: 1.4em;
        font-weight: bold;
        color: #4a47a3;
        margin-bottom: 15px;
        margin-right: 50px;
      }

      .lesson-description {
        color: #666;
        margin-bottom: 20px;
        line-height: 1.6;
      }

      .lesson-stats {
        display: flex;
        justify-content: space-between;
        margin-bottom: 20px;
        font-size: 0.9em;
        color: #888;
      }

      .lesson-buttons {
        display: flex;
        gap: 12px;
      }

      .btn {
        flex: 1;
        padding: 14px 20px;
        border: none;
        border-radius: 10px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        text-decoration: none;
        text-align: center;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        font-size: 1em;
      }

      .btn-study {
        background: linear-gradient(135deg, #28a745 0%, #20c997 100%);
        color: white;
      }

      .btn-study:hover {
        background: linear-gradient(135deg, #218838 0%, #1e7e34 100%);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(40, 167, 69, 0.3);
      }

      .btn-game {
        background: linear-gradient(135deg, #ff6b6b 0%, #ee5a6f 100%);
        color: white;
      }

      .btn-game:hover {
        background: linear-gradient(135deg, #e55353 0%, #d63384 100%);
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(255, 107, 107, 0.3);
      }

      .difficulty-badge {
        position: absolute;
        top: 15px;
        left: 15px;
        padding: 5px 12px;
        border-radius: 15px;
        font-size: 0.8em;
        font-weight: bold;
        color: white;
      }

      .difficulty-basic {
        background: #28a745;
      }

      .difficulty-medium {
        background: #ffc107;
        color: #333;
      }

      .difficulty-hard {
        background: #dc3545;
      }

      .difficulty-review {
        background: #6f42c1;
      }

      .difficulty-test {
        background: #fd7e14;
      }

      .difficulty-final {
        background: #20c997;
      }

      .search-filter {
        background: #f8f9fa;
        border: 1px solid #dee2e6;
        border-radius: 15px;
        padding: 20px;
        margin-bottom: 30px;
      }

      .search-input {
        width: 100%;
        padding: 12px 15px;
        border: 2px solid #dee2e6;
        border-radius: 10px;
        font-size: 1em;
        margin-bottom: 15px;
      }

      .search-input:focus {
        outline: none;
        border-color: #667eea;
      }

      .filter-buttons {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
      }

      .filter-btn {
        padding: 8px 16px;
        border: 2px solid #dee2e6;
        border-radius: 20px;
        background: white;
        cursor: pointer;
        transition: all 0.3s ease;
        font-size: 0.9em;
      }

      .filter-btn.active {
        background: #667eea;
        color: white;
        border-color: #667eea;
      }

      .filter-btn:hover {
        border-color: #667eea;
      }

      /* Responsive Design */
      @media (max-width: 768px) {
        .container {
          padding: 20px;
          margin: 10px;
        }

        .header h1 {
          font-size: 2em;
        }

        .video-title {
          font-size: 1.5em;
        }

        .video-description {
          font-size: 1.1em;
        }

        .lessons-grid {
          grid-template-columns: 1fr;
        }

        .lesson-buttons {
          flex-direction: column;
        }

        .filter-buttons {
          justify-content: center;
        }

        .pronunciation-grid {
          grid-template-columns: 1fr;
        }

        .alphabet-grid {
          grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
          gap: 10px;
        }

        .alphabet-card .letter {
          font-size: 1.5em;
        }

        .special-grid {
          grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
        }

        .game-mode-buttons {
          flex-direction: column;
          align-items: center;
        }

        .record-controls {
          flex-direction: column;
          gap: 10px;
        }

        .game-stats {
          flex-direction: column;
          gap: 10px;
        }

        .video-modal-content {
          padding: 20px;
        }

        .modal-video-title {
          font-size: 1.4em;
        }
      }

      @media (max-width: 480px) {
        .lesson-number {
          width: 50px;
          height: 50px;
          font-size: 1em;
        }

        .lesson-title {
          font-size: 1.2em;
          margin-right: 40px;
        }

        .challenge-letter {
          font-size: 2em;
        }

        .record-btn {
          padding: 12px 20px;
          font-size: 1em;
        }

        .video-title {
          font-size: 1.3em;
          flex-direction: column;
          gap: 10px;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <div class="header">
        <h1>🇩🇪 Học Tiếng Đức</h1>
      </div>

      <!-- Video Section -->
      <div class="video-section">
        <div class="video-content">
          <h2 class="video-title">
            🎬 Video Giới Thiệu Khóa Học
            <span>📚</span>
          </h2>
          <div class="video-container">
            <!-- Thay đổi src thành đường dẫn đến video của bạn -->
            <video
              class="video-player"
              controls
              preload="metadata"
              poster="https://via.placeholder.com/800x450/2196f3/ffffff?text=Video+Gi%E1%BB%9Bi+Thi%E1%BB%87u"
            >
              <!-- Thay đổi đường dẫn này thành video của bạn -->
              <source src="abc.mp4" type="video/mp4" />
              Trình duyệt của bạn không hỗ trợ video HTML5.
            </video>
          </div>

          <div class="video-controls-note">
            <strong>💡 Hướng dẫn sử dụng video:</strong>
            <ul class="controls-list">
              <li>Nhấn nút Play để bắt đầu xem</li>
              <li>Sử dụng thanh thời gian để tua nhanh/chậm</li>
              <li>Nhấn vào biểu tượng 🔊 để điều chỉnh âm lượng</li>
              <li>Nhấn biểu tượng ⛶ để xem toàn màn hình</li>
              <li>Video sẽ tự động dừng khi kết thúc</li>
            </ul>
          </div>
        </div>
      </div>

      <!-- Video Modal (Tùy chọn: Auto-play khi vào trang) -->
      <div class="video-modal" id="videoModal">
        <div class="video-modal-content">
          <button class="video-modal-close" onclick="closeVideoModal()">
            &times;
          </button>
          <div class="modal-video-container">
            <h3 class="modal-video-title">
              🎬 Chào mừng bạn đến với khóa học tiếng Đức!
            </h3>
            <video
              class="modal-video-player"
              id="modalVideo"
              controls
              preload="metadata"
            >
              <!-- Cùng video với phần trên -->
              <source src="abc.mp4" type="video/mp4" />
              Trình duyệt của bạn không hỗ trợ video HTML5.
            </video>
          </div>
        </div>
      </div>

      <div class="intro-section">
        <h3>📚 Chào mừng đến với ôn tập tiếng Đức!</h3>
        <p>
          <strong>Mỗi buổi học bao gồm:</strong> Học từ vựng có phát âm + Trò
          chơi ôn tập thú vị
        </p>
      </div>

      <div class="banner-container">
        <div class="banner-content">
          <a
            href="https://www.dichthuatso1.com/ten-cac-nuoc-tren-the-gioi-bang-tieng-duc/"
            target="_blank"
            class="banner-link"
          >
            📚 Tên các nước trên thế giới bằng tiếng Đức - Tài liệu chi tiết
          </a>
          <span
            >📖 Mở rộng vốn từ vựng địa lý và quốc gia để giao tiếp tốt
            hơn!</span
          >
          <a
            href="https://www.dichthuatso1.com/ten-cac-nuoc-tren-the-gioi-bang-tieng-duc/"
            target="_blank"
            class="banner-link"
          >
            🗺️ Học ngay tại đây
          </a>
          <span>✨ Hỗ trợ học tiếng Đức hiệu quả!</span>
        </div>
      </div>

      <div class="banner-container rainbow">
        <div class="banner-content">
          <a href="#alphabet" class="banner-link" onclick="toggleAlphabet()">
            📚 Xem bảng chữ cái với cách phát âm tiếng Việt
          </a>
          <span>🗣️ Học cách đọc đúng từng chữ cái trong tiếng Đức!</span>
          <a href="#alphabet" class="banner-link" onclick="toggleAlphabet()">
            🎯 Mở bảng chữ cái
          </a>
          <span>✨ Nền tảng quan trọng để phát âm chuẩn!</span>
        </div>
      </div>

      <div class="alphabet-section" id="alphabetSection" style="display: none">
        <h3>🔤 Bảng chữ cái tiếng Đức (Das Alphabet)</h3>
        <div class="alphabet-note">
          <p>
            <strong>Lưu ý:</strong> Cách phát âm bên dưới được viết theo tiếng
            Việt để dễ học.
            <strong>Click vào từng chữ cái để nghe phát âm tiếng Đức!</strong>
            🔊
          </p>
        </div>

        <!-- Game Controls -->
        <div class="game-controls">
          <h4>🎮 Chế độ học tập</h4>
          <div class="game-mode-buttons">
            <button
              class="game-mode-btn active"
              onclick="setGameMode('listen')"
            >
              🔊 Nghe & Học
            </button>
            <button class="game-mode-btn" onclick="setGameMode('practice')">
              🎯 Luyện phát âm
            </button>
          </div>
        </div>

        <!-- Pronunciation Practice Game -->
        <div class="pronunciation-game" id="pronunciationGame">
          <h4>🎯 Trò chơi luyện phát âm</h4>

          <div class="game-stats">
            <div class="stat-item">
              <div class="stat-value" id="correctCount">0</div>
              <div class="stat-label">Đúng</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="totalCount">0</div>
              <div class="stat-label">Tổng</div>
            </div>
            <div class="stat-item">
              <div class="stat-value" id="accuracyRate">0%</div>
              <div class="stat-label">Độ chính xác</div>
            </div>
          </div>

          <div class="current-challenge" id="currentChallenge">
            <div
              class="challenge-letter"
              id="challengeLetter"
              onclick="speakCurrentLetter()"
            >
              A
            </div>
            <div class="challenge-pronunciation" id="challengePronunciation">
              Phát âm: "ah"
            </div>
            <div class="challenge-example" id="challengeExample">
              Ví dụ: Apfel
            </div>

            <div class="record-controls">
              <button class="play-reference-btn" onclick="playReference()">
                🔊 Nghe mẫu
              </button>
              <button
                class="record-btn start-record"
                id="recordBtn"
                onclick="toggleRecording()"
              >
                🎤 Bắt đầu ghi âm
              </button>
              <div class="recording-indicator" id="recordingIndicator">
                🔴 Đang ghi âm...
              </div>
            </div>
          </div>

          <!-- Speech Recognition Area -->
          <div class="speech-recognition" id="speechArea">
            <p>Phát âm chữ cái tiếng Đức sau:</p>
            <div
              class="current-letter-display"
              id="speakingLetter"
              onclick="speakCurrentLetter()"
            ></div>
            <div class="audio-visualizer" id="audioVisualizer">
              <div class="audio-bar"></div>
              <div class="audio-bar"></div>
              <div class="audio-bar"></div>
              <div class="audio-bar"></div>
              <div class="audio-bar"></div>
            </div>
            <button
              class="mic-button"
              id="micButton"
              onclick="toggleRecording()"
            >
              🎤
            </button>
            <p id="recognitionStatus">Nhấn vào micro để bắt đầu</p>
            <div
              class="pronunciation-feedback"
              id="pronunciationFeedback"
              style="display: none"
            ></div>
          </div>

          <div class="feedback-section" id="feedbackSection">
            <div class="feedback-text" id="feedbackText">
              Nhấn "Nghe mẫu" để nghe cách phát âm đúng, sau đó nhấn "Bắt đầu
              ghi âm" để luyện tập!
            </div>
          </div>

          <button
            class="next-challenge-btn"
            id="nextChallengeBtn"
            onclick="nextChallenge()"
            disabled
          >
            ➡️ Chữ cái tiếp theo
          </button>
        </div>

        <div class="alphabet-grid">
          <div
            class="alphabet-card"
            onclick="handleLetterClick('A', this)"
            data-letter="A"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">A a</div>
            <div class="pronunciation">ah</div>
            <div class="example">Apfel</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('B', this)"
            data-letter="B"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">B b</div>
            <div class="pronunciation">beh</div>
            <div class="example">Banane</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('C', this)"
            data-letter="C"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">C c</div>
            <div class="pronunciation">tseh</div>
            <div class="example">Couch</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('D', this)"
            data-letter="D"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">D d</div>
            <div class="pronunciation">deh</div>
            <div class="example">Deutschland</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('E', this)"
            data-letter="E"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">E e</div>
            <div class="pronunciation">eh</div>
            <div class="example">Elefant</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('F', this)"
            data-letter="F"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">F f</div>
            <div class="pronunciation">eff</div>
            <div class="example">Fisch</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('G', this)"
            data-letter="G"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">G g</div>
            <div class="pronunciation">geh</div>
            <div class="example">Gitarre</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('H', this)"
            data-letter="H"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">H h</div>
            <div class="pronunciation">hah</div>
            <div class="example">Haus</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('I', this)"
            data-letter="I"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">I i</div>
            <div class="pronunciation">ee</div>
            <div class="example">Igel</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('J', this)"
            data-letter="J"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">J j</div>
            <div class="pronunciation">yot</div>
            <div class="example">Joghurt</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('K', this)"
            data-letter="K"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">K k</div>
            <div class="pronunciation">kah</div>
            <div class="example">Kaffee</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('L', this)"
            data-letter="L"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">L l</div>
            <div class="pronunciation">ell</div>
            <div class="example">Liebe</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('M', this)"
            data-letter="M"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">M m</div>
            <div class="pronunciation">em</div>
            <div class="example">Mann</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('N', this)"
            data-letter="N"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">N n</div>
            <div class="pronunciation">en</div>
            <div class="example">Nagel</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('O', this)"
            data-letter="O"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">O o</div>
            <div class="pronunciation">oh</div>
            <div class="example">Orange</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('P', this)"
            data-letter="P"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">P p</div>
            <div class="pronunciation">peh</div>
            <div class="example">Pinguin</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('Q', this)"
            data-letter="Q"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">Q q</div>
            <div class="pronunciation">ku</div>
            <div class="example">Quiz</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('R', this)"
            data-letter="R"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">R r</div>
            <div class="pronunciation">err</div>
            <div class="example">Rot</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('S', this)"
            data-letter="S"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">S s</div>
            <div class="pronunciation">ess</div>
            <div class="example">Sonne</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('T', this)"
            data-letter="T"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">T t</div>
            <div class="pronunciation">teh</div>
            <div class="example">Tee</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('U', this)"
            data-letter="U"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">U u</div>
            <div class="pronunciation">oo</div>
            <div class="example">Uhr</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('V', this)"
            data-letter="V"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">V v</div>
            <div class="pronunciation">fau</div>
            <div class="example">Vogel</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('W', this)"
            data-letter="W"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">W w</div>
            <div class="pronunciation">veh</div>
            <div class="example">Wolke</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('X', this)"
            data-letter="X"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">X x</div>
            <div class="pronunciation">iks</div>
            <div class="example">Xylofon</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('Y', this)"
            data-letter="Y"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">Y y</div>
            <div class="pronunciation">üpsilon</div>
            <div class="example">Yak</div>
          </div>
          <div
            class="alphabet-card"
            onclick="handleLetterClick('Z', this)"
            data-letter="Z"
          >
            <div class="sound-indicator">🔊</div>
            <div class="letter">Z z</div>
            <div class="pronunciation">tsett</div>
            <div class="example">Zebra</div>
          </div>
        </div>

        <div class="special-chars">
          <h4>🔸 Ký tự đặc biệt trong tiếng Đức</h4>
          <div class="special-grid">
            <div
              class="alphabet-card special"
              onclick="handleLetterClick('Ä', this)"
              data-letter="Ä"
            >
              <div class="sound-indicator">🔊</div>
              <div class="letter">Ä ä</div>
              <div class="pronunciation">ae (ây)</div>
              <div class="example">Bär</div>
            </div>
            <div
              class="alphabet-card special"
              onclick="handleLetterClick('Ö', this)"
              data-letter="Ö"
            >
              <div class="sound-indicator">🔊</div>
              <div class="letter">Ö ö</div>
              <div class="pronunciation">oe (êy)</div>
              <div class="example">Öl</div>
            </div>
            <div
              class="alphabet-card special"
              onclick="handleLetterClick('Ü', this)"
              data-letter="Ü"
            >
              <div class="sound-indicator">🔊</div>
              <div class="letter">Ü ü</div>
              <div class="pronunciation">ue (êyu)</div>
              <div class="example">Fünf</div>
            </div>
            <div
              class="alphabet-card special"
              onclick="handleLetterClick('ß', this)"
              data-letter="ß"
            >
              <div class="sound-indicator">🔊</div>
              <div class="letter">ß</div>
              <div class="pronunciation">ess-tset</div>
              <div class="example">Fuß</div>
            </div>
          </div>
        </div>
      </div>

      <div class="pronunciation-tips">
        <h3>🗣️ Mẹo phát âm tiếng Đức</h3>
        <div class="pronunciation-grid">
          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ S và Z</div>
            <div class="rule-example">
              <span class="german">s</span> đọc là
              <span class="vietnamese">z</span><br />
              <span class="german">z</span> đọc là
              <span class="vietnamese">s</span><br />
              VD: <span class="german">sie</span> →
              <span class="vietnamese">zi</span>,
              <span class="german">zwei</span> →
              <span class="vietnamese">tsvai</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ CH</div>
            <div class="rule-example">
              Sau <span class="german">o, a, u, au</span>:
              <span class="vietnamese">ch = kh</span><br />
              Sau <span class="german">ss</span> và các từ khác:
              <span class="vietnamese">ch = x</span><br />
              VD: <span class="german">ach</span> →
              <span class="vietnamese">akh</span>,
              <span class="german">ich</span> →
              <span class="vietnamese">ix</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ IR và UR</div>
            <div class="rule-example">
              <span class="german">ir</span> đọc là
              <span class="vietnamese">ia</span><br />
              <span class="german">ur</span> đọc là
              <span class="vietnamese">ua</span><br />
              VD: <span class="german">wir</span> →
              <span class="vietnamese">via</span>,
              <span class="german">nur</span> →
              <span class="vietnamese">nua</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ EU và ÄU</div>
            <div class="rule-example">
              <span class="german">eu</span> đọc là
              <span class="vietnamese">oi</span><br />
              <span class="german">äu</span> đọc là
              <span class="vietnamese">oi</span><br />
              VD: <span class="german">heute</span> →
              <span class="vietnamese">hoi-tə</span>,
              <span class="german">träumen</span> →
              <span class="vietnamese">troi-mən</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ EI, AY, AI</div>
            <div class="rule-example">
              <span class="german">ei, ay, ai</span> đều đọc là
              <span class="vietnamese">ai</span><br />
              VD: <span class="german">ein</span> →
              <span class="vietnamese">ain</span>,
              <span class="german">Bayern</span> →
              <span class="vietnamese">bai-ern</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ R - Âm lăn lưỡi</div>
            <div class="rule-example">
              <span class="german">r</span> ở đầu/giữa từ: âm lăn lưỡi như
              <span class="vietnamese">"rr"</span><br />
              <span class="german">r</span> ở cuối từ: đọc nhẹ như
              <span class="vietnamese">"ờ"</span><br />
              VD: <span class="german">rot</span> →
              <span class="vietnamese">rrot</span>,
              <span class="german">der</span> →
              <span class="vietnamese">dờ</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Âm không đọc</div>
            <div class="rule-example">
              <span class="german">h</span> sau nguyên âm: không đọc<br />
              <span class="german">g</span> trong
              <span class="german">-ig</span> cuối từ: đọc thành
              <span class="vietnamese">-ix</span><br />
              VD: <span class="german">sehen</span> →
              <span class="vietnamese">ze-ən</span>,
              <span class="german">richtig</span> →
              <span class="vietnamese">rix-tix</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ đôi - Double consonants</div>
            <div class="rule-example">
              <span class="german">sch</span> đọc như
              <span class="vietnamese">"sh"</span><br />
              <span class="german">tsch</span> đọc như
              <span class="vietnamese">"ch"</span><br />
              <span class="german">pf</span> đọc như
              <span class="vietnamese">"pf"</span> (cả hai âm)<br />
              VD: <span class="german">schön</span> →
              <span class="vietnamese">shön</span>,
              <span class="german">Pferd</span> →
              <span class="vietnamese">pfert</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ QU và TZ</div>
            <div class="rule-example">
              <span class="german">qu</span> đọc như
              <span class="vietnamese">"kv"</span><br />
              <span class="german">tz</span> đọc như
              <span class="vietnamese">"ts"</span><br />
              VD: <span class="german">Qualität</span> →
              <span class="vietnamese">kva-li-tät</span>,
              <span class="german">Katze</span> →
              <span class="vietnamese">kat-sə</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Nguyên âm dài và ngắn</div>
            <div class="rule-example">
              Nguyên âm + <span class="german">h</span>: dài<br />
              Nguyên âm đôi <span class="german">aa, ee, oo</span>: dài<br />
              Nguyên âm + 2 phụ âm: ngắn<br />
              VD: <span class="german">fahren</span> (dài),
              <span class="german">Mann</span> (ngắn)
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ ST và SP</div>
            <div class="rule-example">
              <span class="german">st</span> ở đầu từ: đọc như
              <span class="vietnamese">"sht"</span><br />
              <span class="german">sp</span> ở đầu từ: đọc như
              <span class="vietnamese">"shp"</span><br />
              VD: <span class="german">Straße</span> →
              <span class="vietnamese">shtra-sə</span>,
              <span class="german">Sport</span> →
              <span class="vietnamese">shport</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ NG và NK</div>
            <div class="rule-example">
              <span class="german">ng</span> đọc như
              <span class="vietnamese">"ng"</span> (như tiếng Việt)<br />
              <span class="german">nk</span> đọc như
              <span class="vietnamese">"ngk"</span><br />
              VD: <span class="german">Finger</span> →
              <span class="vietnamese">fin-gờ</span>,
              <span class="german">trinken</span> →
              <span class="vietnamese">trin-kən</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ DT và D cuối từ</div>
            <div class="rule-example">
              <span class="german">dt</span> đọc như
              <span class="vietnamese">"t"</span><br />
              <span class="german">d</span> cuối từ đọc như
              <span class="vietnamese">"t"</span><br />
              VD: <span class="german">Stadt</span> →
              <span class="vietnamese">shtat</span>,
              <span class="german">und</span> →
              <span class="vietnamese">unt</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Phụ âm cuối từ</div>
            <div class="rule-example">
              <span class="german">b</span> cuối từ →
              <span class="vietnamese">"p"</span><br />
              <span class="german">g</span> cuối từ →
              <span class="vietnamese">"k"</span> (trừ -ig)<br />
              VD: <span class="german">halb</span> →
              <span class="vietnamese">halp</span>,
              <span class="german">Tag</span> →
              <span class="vietnamese">tak</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Chữ IE và EH</div>
            <div class="rule-example">
              <span class="german">ie</span> đọc như
              <span class="vietnamese">"i"</span> dài<br />
              <span class="german">eh</span> đọc như
              <span class="vietnamese">"e"</span> dài<br />
              VD: <span class="german">sie</span> →
              <span class="vietnamese">zi</span>,
              <span class="german">gehen</span> →
              <span class="vietnamese">ge-ən</span>
            </div>
          </div>

          <div class="pronunciation-rule">
            <div class="rule-title">📝 Lưu ý khác</div>
            <div class="rule-example">
              <span class="german">ß</span> (Eszett) đọc như
              <span class="vietnamese">ss</span><br />
              <span class="german">w</span> đọc như
              <span class="vietnamese">v</span><br />
              <span class="german">v</span> đọc như
              <span class="vietnamese">f</span><br />
              <span class="german">j</span> đọc như
              <span class="vietnamese">y</span><br />
              <span class="german">y</span> đọc như
              <span class="vietnamese">ü</span>
            </div>
          </div>
        </div>
      </div>

      <div class="search-filter">
        <input
          type="text"
          class="search-input"
          placeholder="🔍 Tìm kiếm buổi học..."
          id="searchInput"
        />
        <div class="filter-buttons">
          <button class="filter-btn active" data-filter="all">Tất cả</button>
          <button class="filter-btn" data-filter="basic">Cơ bản</button>
          <button class="filter-btn" data-filter="medium">Trung bình</button>
          <button class="filter-btn" data-filter="hard">Khó</button>
          <button class="filter-btn" data-filter="review">Ôn tập</button>
        </div>
      </div>

      <div class="lessons-grid" id="lessonsGrid">
        <!-- Lessons will be generated by JavaScript -->
      </div>
    </div>

    <script>
      // Game state
      let currentGameMode = "listen";
      let isRecording = false;
      let recognition = null;
      let currentChallengeLetter = "A";
      let gameStats = {
        correct: 0,
        total: 0,
      };

      // Alphabet data
      const alphabetData = {
        A: { pronunciation: "ah", example: "Apfel" },
        B: { pronunciation: "beh", example: "Banane" },
        C: { pronunciation: "tseh", example: "Couch" },
        D: { pronunciation: "deh", example: "Deutschland" },
        E: { pronunciation: "eh", example: "Elefant" },
        F: { pronunciation: "eff", example: "Fisch" },
        G: { pronunciation: "geh", example: "Gitarre" },
        H: { pronunciation: "hah", example: "Haus" },
        I: { pronunciation: "ee", example: "Igel" },
        J: { pronunciation: "yot", example: "Joghurt" },
        K: { pronunciation: "kah", example: "Kaffee" },
        L: { pronunciation: "ell", example: "Liebe" },
        M: { pronunciation: "em", example: "Mann" },
        N: { pronunciation: "en", example: "Nagel" },
        O: { pronunciation: "oh", example: "Orange" },
        P: { pronunciation: "peh", example: "Pinguin" },
        Q: { pronunciation: "ku", example: "Quiz" },
        R: { pronunciation: "err", example: "Rot" },
        S: { pronunciation: "ess", example: "Sonne" },
        T: { pronunciation: "teh", example: "Tee" },
        U: { pronunciation: "oo", example: "Uhr" },
        V: { pronunciation: "fau", example: "Vogel" },
        W: { pronunciation: "veh", example: "Wolke" },
        X: { pronunciation: "iks", example: "Xylofon" },
        Y: { pronunciation: "üpsilon", example: "Yak" },
        Z: { pronunciation: "tsett", example: "Zebra" },
        Ä: { pronunciation: "ae (ây)", example: "Bär" },
        Ö: { pronunciation: "oe (êy)", example: "Öl" },
        Ü: { pronunciation: "ue (êyu)", example: "Fünf" },
        ß: { pronunciation: "ess-tset", example: "Fuß" },
      };

      const allLetters = Object.keys(alphabetData);
      let practicedLetters = [];

      // Lesson data
      const lessons = [
        {
          day: 1,
          title: "Giới thiệu bản thân (30/4 - 1/7)",
          description:
            "Học cách chào hỏi, giới thiệu tên, quốc tịch và ngôn ngữ. 72 từ vựng cơ bản nhất để bắt đầu.",
          words: 73,
          difficulty: "basic",
          difficultyText: "Cơ bản",
        },
        {
          day: 2,
          title: "Giao tiếp hàng ngày (2/7)",
          description:
            "Học cách chào hỏi theo thời gian, cảm ơn, xin lỗi, và các hoạt động học tập cơ bản. 38 từ vựng thiết yếu.",
          words: 34,
          difficulty: "basic",
          difficultyText: "Cơ bản",
        },
        {
          day: 3,
          title: "Hoạt động học tập & giao tiếp nâng cao (3/7)",
          description:
            "Học từ vựng về bài học, lớp học, động từ cơ bản và cách diễn đạt ý kiến. Tập trung vào giao tiếp thực tế trong lớp học.",
          words: 35,
          difficulty: "medium",
          difficultyText: "Trung bình",
        },
        {
          day: 4,
          title: "Thông tin cá nhân & Đăng ký (4/7)",
          description:
            "Học từ vựng về thông tin cá nhân, địa chỉ, đăng ký học. Bao gồm cách điền form, giới thiệu bản thân chi tiết và giao tiếp với trường học.",
          words: 43,
          difficulty: "medium",
          difficultyText: "Trung bình",
        },
        {
          day: 5,
          title: "Ôn tập tuần 1 - Tổng kết 4 buổi đầu (5/7)",
          description:
            "Ôn tập và củng cố toàn bộ 185 từ vựng đã học từ buổi 1-4. Trò chơi tương tác thú vị để kiểm tra và ghi nhớ lâu dài.",
          words: 0,
          difficulty: "review",
          difficultyText: "Ôn tập",
          isReviewOnly: true,
        },
        {
          day: 6,
          title: "abc",
          description: "abc",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 7,
          title: "Luyện tập cho thứ 3 (7/7)",
          description: "lazy god",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 8,
          title: "Gia đình & Đời sống hàng ngày (8/7)",
          description:
            "Học từ vựng về gia đình, các thành viên trong nhà, địa lý, âm nhạc và sinh hoạt hàng ngày. 66 từ vựng phong phú về cuộc sống.",
          words: 66,
          difficulty: "medium",
          difficultyText: "Trung bình",
        },
        {
          day: 9,
          title: "Gia đình & Số đếm (9/7)",
          description:
            "Học từ vựng về các thành viên gia đình, quan hệ hôn nhân, số đếm 0-20, tính từ mô tả người và thông tin cá nhân. 72 từ vựng hoàn chỉnh.",
          words: 72,
          difficulty: "medium",
          difficultyText: "Trung bình",
        },
        {
          day: 10,
          title: "Ngữ pháp (9/7)",
          description: "Học ngữ pháp.",
          difficulty: "hard",
          difficultyText: "Khó",
          isReviewOnly: true,
        },
        {
          day: 11,
          title: "Lời chào & Địa lý (10/7)",
          description:
            "Học từ vựng về lời chào tạm biệt, cảm ơn, các nước nói tiếng Đức, hướng địa lý và bản đồ. 19 từ vựng thiết yếu cho giao tiếp và định hướng.",
          words: 19,
          difficulty: "basic",
          difficultyText: "Cơ bản",
        },
        {
          day: 12,
          title: "Điện thoại & Công việc (11/7)",
          description:
            "Học từ vựng về điện thoại, số điện thoại, mã vùng, công việc và giáo dục. Bao gồm cách gọi điện, hỏi thông tin liên lạc và nói về nghề nghiệp. 24 từ vựng thực tế cho cuộc sống hàng ngày.",
          words: 24,
          difficulty: "medium",
          difficultyText: "Trung bình",
        },
        {
          day: 13,
          title: "Thời gian & Lịch trình hàng ngày (12/7)",
          description:
            "Học từ vựng về thời gian, ngày trong tuần, tháng, mùa trong năm, giờ giấc và hoạt động hàng ngày. Bao gồm cách hỏi giờ, nói về lịch trình và thói quen. 35-40 từ vựng thiết yếu cho cuộc sống.",
          words: 38,
          difficulty: "medium",
          difficultyText: "Trung bình",
        },
        {
          day: 14,
          title: "Ôn tập tuần 2 (13/7)",
          description:
            "Ôn tập và củng cố toàn bộ 171 từ vựng đã học. Trò chơi tương tác thú vị để kiểm tra và ghi nhớ lâu dài.",
          words: 0,
          difficulty: "review",
          difficultyText: "Ôn tập",
          isReviewOnly: true,
        },
        {
          day: 15,
          title: "15/7",
          words: 0,
          difficulty: "medium",
          difficultyText: "Trung bình",
        },
        {
          day: 16,
          title: "luyện giờ",
          description: "luyện giờ",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 17,
          title: "luyện đoạn hội thoại về tủ lạnh hỏng mua tủ lạnh mới",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 18,
          title: "luyện cho thứ 2 (21/7)",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 19,
          title: "luyện cho thứ 3 (22/7)",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 20,
          title: "luyện cho thứ 5 (24/7)",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 21,
          title: "luyện cho thứ 6 (25/7)",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 22,
          title: "luyện cho thứ 3 (28/7)",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 23,
          title: "luyện cho thứ 3 (28/7)",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 24,
          title: "luyện cho thứ 4 (29/7)",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
        {
          day: 25,
          title: "luyện cho thứ 5 (30/7)",
          words: 0,
          difficulty: "basic",
          difficultyText: "Cơ bản",
          isReviewOnly: true,
        },
      ];

      // Video Modal Functions
      function showVideoModal() {
        const modal = document.getElementById("videoModal");
        modal.classList.add("show");

        // Optional: Auto-play video when modal opens
        const modalVideo = document.getElementById("modalVideo");
        modalVideo.play().catch((e) => {
          console.log("Auto-play prevented by browser:", e);
        });
      }

      function closeVideoModal() {
        const modal = document.getElementById("videoModal");
        modal.classList.remove("show");

        // Pause video when modal closes
        const modalVideo = document.getElementById("modalVideo");
        modalVideo.pause();
      }

      // Close modal when clicking outside
      document
        .getElementById("videoModal")
        .addEventListener("click", function (e) {
          if (e.target === this) {
            closeVideoModal();
          }
        });

      // Initialize speech recognition
      function initializeSpeechRecognition() {
        if (
          "webkitSpeechRecognition" in window ||
          "SpeechRecognition" in window
        ) {
          const SpeechRecognition =
            window.SpeechRecognition || window.webkitSpeechRecognition;
          recognition = new SpeechRecognition();
          recognition.lang = "de-DE";
          recognition.continuous = false;
          recognition.interimResults = false;

          recognition.onstart = function () {
            isRecording = true;
            document.getElementById("micButton").classList.add("recording");
            document.getElementById("recognitionStatus").textContent =
              "Đang nghe... Hãy phát âm chữ cái tiếng Đức";
            animateAudioVisualizer();
          };

          recognition.onresult = function (event) {
            const transcript = event.results[0][0].transcript.toLowerCase();
            const confidence = event.results[0][0].confidence;

            document.getElementById(
              "recognitionStatus"
            ).textContent = `Bạn đã nói: "${transcript}"`;

            // Process the result
            processPronunciationResult(transcript, confidence);
            stopAudioVisualizer();
          };

          recognition.onerror = function (event) {
            document.getElementById("recognitionStatus").textContent =
              "Lỗi nhận diện giọng nói. Vui lòng thử lại.";
            stopAudioVisualizer();
            showFeedback(
              "error",
              "Không thể nhận diện giọng nói. Vui lòng thử lại."
            );
          };

          recognition.onend = function () {
            isRecording = false;
            document.getElementById("micButton").classList.remove("recording");
            stopAudioVisualizer();
          };
        }
      }

      // Process pronunciation result
      function processPronunciationResult(transcript, confidence) {
        gameStats.total++;

        const expectedLetter = currentChallengeLetter.toLowerCase();
        const words = transcript.split(" ").filter((word) => word.length > 0);

        // Check if user said more than one word
        if (words.length > 1) {
          showFeedback(
            "warning",
            `⚠️ Vui lòng chỉ phát âm một chữ cái "${currentChallengeLetter}". Bạn đã nói: "${transcript}". Thử lại với chỉ một âm!`
          );
          updateStats();
          return;
        }

        // Check if no clear speech detected
        if (words.length === 0 || transcript.length === 0) {
          showFeedback(
            "warning",
            "🤔 Không nghe thấy âm thanh rõ ràng. Hãy thử phát âm to và rõ hơn!"
          );
          updateStats();
          return;
        }

        const spokenWord = words[0];

        // Check confidence level
        if (confidence < 0.3) {
          showFeedback(
            "warning",
            "🔊 Âm thanh không đủ rõ. Hãy thử phát âm to và rõ ràng hơn!"
          );
          updateStats();
          return;
        }

        // Define expected pronunciations for each letter
        const expectedPronunciations = {
          a: ["a", "ah", "aha"],
          b: ["b", "be", "beh", "bee"],
          c: ["c", "ce", "tse", "tseh"],
          d: ["d", "de", "deh", "dee"],
          e: ["e", "eh"],
          f: ["f", "ef", "eff"],
          g: ["g", "ge", "geh"],
          h: ["h", "ha", "hah"],
          i: ["i", "ih", "ee"],
          j: ["j", "jot", "yot"],
          k: ["k", "ka", "kah"],
          l: ["l", "el", "ell"],
          m: ["m", "em"],
          n: ["n", "en"],
          o: ["o", "oh"],
          p: ["p", "pe", "peh"],
          q: ["q", "qu", "ku"],
          r: ["r", "er", "err", "ar"],
          s: ["s", "es", "ess"],
          t: ["t", "te", "teh"],
          u: ["u", "uh", "oo"],
          v: ["v", "ve", "fau", "fow"],
          w: ["w", "ve", "veh", "way"],
          x: ["x", "iks", "ex"],
          y: ["y", "ypsilon", "üpsilon"],
          z: ["z", "zet", "tset", "tsett"],
          ä: ["ä", "ae", "a"],
          ö: ["ö", "oe", "o"],
          ü: ["ü", "ue", "u"],
          ß: ["ß", "ss", "eszett", "esszett"],
        };

        const acceptedPronunciations = expectedPronunciations[
          expectedLetter
        ] || [expectedLetter];

        // Check if the spoken word matches any accepted pronunciation
        const isCorrect = acceptedPronunciations.some((pronunciation) => {
          return (
            spokenWord.includes(pronunciation) ||
            pronunciation.includes(spokenWord) ||
            levenshteinDistance(spokenWord, pronunciation) <= 1
          );
        });

        if (isCorrect && confidence > 0.5) {
          gameStats.correct++;
          showFeedback(
            "success",
            `🎉 Xuất sắc! Bạn đã phát âm chữ "${currentChallengeLetter}" rất chính xác! (Đã nhận diện: "${transcript}")`
          );

          // Add to practiced letters
          if (!practicedLetters.includes(currentChallengeLetter)) {
            practicedLetters.push(currentChallengeLetter);
          }

          document.getElementById("nextChallengeBtn").disabled = false;
        } else if (isCorrect && confidence > 0.3) {
          gameStats.correct++;
          showFeedback(
            "success",
            `✅ Tốt! Phát âm khá chính xác! (Đã nhận diện: "${transcript}") Hãy thử luyện tập thêm để hoàn thiện!`
          );

          if (!practicedLetters.includes(currentChallengeLetter)) {
            practicedLetters.push(currentChallengeLetter);
          }

          document.getElementById("nextChallengeBtn").disabled = false;
        } else {
          showFeedback(
            "warning",
            `🤔 Bạn đã nói: "${transcript}". Hãy thử phát âm chữ "${currentChallengeLetter}" theo cách: "${alphabetData[currentChallengeLetter].pronunciation}". Nghe lại âm mẫu và thử lại!`
          );
        }

        updateStats();
        updateAlphabetCardHighlight();
      }

      // Calculate Levenshtein distance for fuzzy matching
      function levenshteinDistance(str1, str2) {
        const matrix = [];

        for (let i = 0; i <= str2.length; i++) {
          matrix[i] = [i];
        }

        for (let j = 0; j <= str1.length; j++) {
          matrix[0][j] = j;
        }

        for (let i = 1; i <= str2.length; i++) {
          for (let j = 1; j <= str1.length; j++) {
            if (str2.charAt(i - 1) === str1.charAt(j - 1)) {
              matrix[i][j] = matrix[i - 1][j - 1];
            } else {
              matrix[i][j] = Math.min(
                matrix[i - 1][j - 1] + 1,
                matrix[i][j - 1] + 1,
                matrix[i - 1][j] + 1
              );
            }
          }
        }

        return matrix[str2.length][str1.length];
      }

      // Animate audio visualizer
      function animateAudioVisualizer() {
        const bars = document.querySelectorAll(".audio-bar");
        const animateBar = () => {
          bars.forEach((bar) => {
            const height = Math.random() * 30 + 5;
            bar.style.height = height + "px";
          });
          if (isRecording) {
            setTimeout(animateBar, 100);
          }
        };
        animateBar();
      }

      // Stop audio visualizer
      function stopAudioVisualizer() {
        const bars = document.querySelectorAll(".audio-bar");
        bars.forEach((bar) => {
          bar.style.height = "5px";
        });
      }

      // Game mode functions
      function setGameMode(mode) {
        currentGameMode = mode;

        // Update button states
        document.querySelectorAll(".game-mode-btn").forEach((btn) => {
          btn.classList.remove("active");
        });
        event.target.classList.add("active");

        // Show/hide pronunciation game
        const gameSection = document.getElementById("pronunciationGame");
        const speechArea = document.getElementById("speechArea");

        if (mode === "practice") {
          gameSection.classList.add("active");
          speechArea.classList.add("active");
          initializePronunciationGame();
          initializeSpeechRecognition();
        } else {
          gameSection.classList.remove("active");
          speechArea.classList.remove("active");
        }
      }

      // Initialize pronunciation game
      function initializePronunciationGame() {
        currentChallengeLetter = "A";
        gameStats = { correct: 0, total: 0 };
        practicedLetters = [];
        updateChallengeDisplay();
        updateStats();
        resetFeedback();
      }

      // Update challenge display
      function updateChallengeDisplay() {
        const data = alphabetData[currentChallengeLetter];
        document.getElementById("challengeLetter").textContent =
          currentChallengeLetter;
        document.getElementById("speakingLetter").textContent =
          currentChallengeLetter;
        document.getElementById(
          "challengePronunciation"
        ).textContent = `Phát âm: "${data.pronunciation}"`;
        document.getElementById(
          "challengeExample"
        ).textContent = `Ví dụ: ${data.example}`;

        // Update visual indicators
        updateAlphabetCardHighlight();
      }

      // Update alphabet card highlighting
      function updateAlphabetCardHighlight() {
        // Remove all current highlights
        document.querySelectorAll(".alphabet-card").forEach((card) => {
          card.classList.remove("current-challenge", "practiced");
        });

        // Highlight current challenge
        const currentCard = document.querySelector(
          `[data-letter="${currentChallengeLetter}"]`
        );
        if (currentCard) {
          currentCard.classList.add("current-challenge");
        }

        // Mark practiced letters
        practicedLetters.forEach((letter) => {
          const card = document.querySelector(`[data-letter="${letter}"]`);
          if (card) {
            card.classList.add("practiced");
          }
        });
      }

      // Update game statistics
      function updateStats() {
        document.getElementById("correctCount").textContent = gameStats.correct;
        document.getElementById("totalCount").textContent = gameStats.total;
        const accuracy =
          gameStats.total > 0
            ? Math.round((gameStats.correct / gameStats.total) * 100)
            : 0;
        document.getElementById("accuracyRate").textContent = accuracy + "%";
      }

      // Reset feedback section
      function resetFeedback() {
        const feedbackSection = document.getElementById("feedbackSection");
        const feedbackText = document.getElementById("feedbackText");

        feedbackSection.className = "feedback-section";
        feedbackText.textContent =
          'Nhấn "Nghe mẫu" để nghe cách phát âm đúng, sau đó nhấn "Bắt đầu ghi âm" để luyện tập!';

        // Reset buttons
        document.getElementById("nextChallengeBtn").disabled = true;
        document.getElementById("recordBtn").disabled = false;
        document.getElementById("recognitionStatus").textContent =
          "Nhấn vào micro để bắt đầu";
        document.getElementById("pronunciationFeedback").style.display = "none";
      }

      // Play reference pronunciation
      function playReference() {
        speakLetter(currentChallengeLetter);
      }

      // Speak current letter
      function speakCurrentLetter() {
        speakLetter(currentChallengeLetter);
      }

      // Toggle recording
      function toggleRecording() {
        if (!recognition) {
          alert("Trình duyệt không hỗ trợ nhận diện giọng nói");
          return;
        }

        if (isRecording) {
          recognition.stop();
        } else {
          recognition.start();
        }
      }

      // Show feedback
      function showFeedback(type, message) {
        const feedbackSection = document.getElementById("feedbackSection");
        const feedbackText = document.getElementById("feedbackText");
        const pronunciationFeedback = document.getElementById(
          "pronunciationFeedback"
        );

        feedbackSection.className = `feedback-section ${type}`;
        feedbackText.textContent = message;

        // Also show in pronunciation feedback area
        pronunciationFeedback.style.display = "block";
        pronunciationFeedback.className = `pronunciation-feedback ${type}`;
        pronunciationFeedback.textContent = message;

        // Add some visual feedback
        if (navigator.vibrate) {
          if (type === "success") {
            navigator.vibrate([100, 50, 100]);
          } else if (type === "error") {
            navigator.vibrate([200, 100, 200]);
          }
        }
      }

      // Next challenge
      function nextChallenge() {
        // Find next letter
        const currentIndex = allLetters.indexOf(currentChallengeLetter);
        const nextIndex = (currentIndex + 1) % allLetters.length;
        currentChallengeLetter = allLetters[nextIndex];

        updateChallengeDisplay();
        resetFeedback();

        // Congratulations message if completed all letters
        if (practicedLetters.length === allLetters.length) {
          showFeedback(
            "success",
            "🏆 Chúc mừng! Bạn đã hoàn thành tất cả các chữ cái! Hãy tiếp tục luyện tập để ghi nhớ lâu hơn."
          );
        }
      }

      // Handle letter click (for both modes)
      function handleLetterClick(letter, element) {
        if (currentGameMode === "listen") {
          // Just play the sound
          speakLetter(letter, element);
        } else if (currentGameMode === "practice") {
          // Set as current challenge
          currentChallengeLetter = letter;
          updateChallengeDisplay();
          resetFeedback();
        }
      }

      // Text-to-Speech functionality
      let currentSpeech = null;

      function speakLetter(letter, element = null) {
        // Stop any currently playing speech
        if (currentSpeech) {
          speechSynthesis.cancel();
        }

        // Check if Speech Synthesis is supported
        if (!("speechSynthesis" in window)) {
          alert(
            "Trình duyệt của bạn không hỗ trợ Text-to-Speech. Vui lòng thử trên Chrome, Firefox hoặc Safari."
          );
          return;
        }

        // Add visual feedback
        if (element) {
          element.classList.add("playing");
        }

        // Create speech utterance
        currentSpeech = new SpeechSynthesisUtterance(letter);

        // Set German voice
        const voices = speechSynthesis.getVoices();
        const germanVoice = voices.find(
          (voice) => voice.lang.includes("de") || voice.name.includes("German")
        );

        if (germanVoice) {
          currentSpeech.voice = germanVoice;
        }

        // Speech settings
        currentSpeech.lang = "de-DE";
        currentSpeech.rate = 0.7;
        currentSpeech.pitch = 1;
        currentSpeech.volume = 1;

        // Remove visual feedback when speech ends
        currentSpeech.onend = function () {
          if (element) {
            element.classList.remove("playing");
          }
          currentSpeech = null;
        };

        currentSpeech.onerror = function (event) {
          console.log("Speech error:", event.error);
          if (element) {
            element.classList.remove("playing");
          }
          currentSpeech = null;
        };

        // Speak the letter
        speechSynthesis.speak(currentSpeech);

        // Add haptic feedback for mobile devices
        if (navigator.vibrate) {
          navigator.vibrate(50);
        }
      }

      // Difficulty badge functions
      function getDifficultyClass(difficulty) {
        const map = {
          basic: "difficulty-basic",
          medium: "difficulty-medium",
          hard: "difficulty-hard",
          review: "difficulty-review",
          test: "difficulty-test",
          final: "difficulty-final",
        };
        return map[difficulty] || "difficulty-basic";
      }

      function renderLessons(filteredLessons = lessons) {
        const grid = document.getElementById("lessonsGrid");
        grid.innerHTML = "";

        filteredLessons.forEach((lesson) => {
          const card = document.createElement("div");
          card.className = "lesson-card";
          card.setAttribute("data-difficulty", lesson.difficulty);

          // Add special class for review and hard cards
          if (lesson.difficulty === "review") {
            card.classList.add("review-card");
          } else if (lesson.difficulty === "hard") {
            card.classList.add("hard-card");
          }

          card.innerHTML = `
                    <div class="lesson-content">
                        <div class="lesson-number">${lesson.day}</div>
                        <div class="difficulty-badge ${getDifficultyClass(
                          lesson.difficulty
                        )}">${lesson.difficultyText}</div>
                        <div class="lesson-title">${lesson.title}</div>
                        <div class="lesson-description">${
                          lesson.description
                        }</div>
                        <div class="lesson-stats">
                            <span>📝 ${
                              lesson.words > 0
                                ? lesson.words + " từ vựng"
                                : "Ôn tập & Luyện tập"
                            }</span>
                            <span>⏱️ ${
                              lesson.words > 0 ? "20-30 phút" : "30-45 phút"
                            }</span>
                        </div>
                        <div class="lesson-buttons">
                            ${
                              lesson.isReviewOnly
                                ? `<a href="lesson${lesson.day}_game.html" class="btn btn-game" style="width: 100%;">
                                🎮 Trò chơi ôn tập
                              </a>`
                                : `<a href="lesson${lesson.day}_vocabulary.html" class="btn btn-study">
                                📚 Học từ vựng
                              </a>
                              <a href="lesson${lesson.day}_game.html" class="btn btn-game">
                                🎮 Trò chơi
                              </a>`
                            }
                        </div>
                    </div>
                `;

          grid.appendChild(card);
        });
      }

      // Search functionality
      document
        .getElementById("searchInput")
        .addEventListener("input", function (e) {
          const searchTerm = e.target.value.toLowerCase();
          const filteredLessons = lessons.filter(
            (lesson) =>
              lesson.title.toLowerCase().includes(searchTerm) ||
              lesson.description.toLowerCase().includes(searchTerm)
          );
          renderLessons(filteredLessons);
        });

      // Filter functionality
      document.querySelectorAll(".filter-btn").forEach((btn) => {
        btn.addEventListener("click", function () {
          // Remove active class from all buttons
          document
            .querySelectorAll(".filter-btn")
            .forEach((b) => b.classList.remove("active"));
          // Add active class to clicked button
          this.classList.add("active");

          const filter = this.getAttribute("data-filter");

          if (filter === "all") {
            renderLessons(lessons);
          } else {
            const filteredLessons = lessons.filter(
              (lesson) => lesson.difficulty === filter
            );
            renderLessons(filteredLessons);
          }

          // Clear search
          document.getElementById("searchInput").value = "";
        });
      });

      // Toggle alphabet section
      function toggleAlphabet() {
        const section = document.getElementById("alphabetSection");
        if (section.style.display === "none") {
          section.style.display = "block";
          section.scrollIntoView({ behavior: "smooth" });
        } else {
          section.style.display = "none";
        }
      }

      // Initialize the page
      document.addEventListener("DOMContentLoaded", function () {
        renderLessons();

        // Optional: Show video modal automatically when page loads
        // Uncomment the line below if you want auto-popup
        // setTimeout(showVideoModal, 1000); // Show after 1 second

        // Load voices when they become available
        speechSynthesis.onvoiceschanged = function () {
          // Voices are now loaded
        };

        // For mobile touch events
        const alphabetCards = document.querySelectorAll(".alphabet-card");
        alphabetCards.forEach((card) => {
          // Add touch event listener for better mobile responsiveness
          card.addEventListener(
            "touchstart",
            function (e) {
              e.preventDefault();
              this.click();
            },
            { passive: false }
          );
        });

        // Add video error handling
        const mainVideo = document.querySelector(".video-player");
        const modalVideo = document.getElementById("modalVideo");

        [mainVideo, modalVideo].forEach((video) => {
          if (video) {
            video.addEventListener("error", function (e) {
              console.log("Video error:", e);
              // You can add fallback content here
            });
          }
        });
      });
    </script>
  </body>
</html>
